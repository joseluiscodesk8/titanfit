{"version":3,"file":"static/3772.487d39bb.chunk.js","mappings":"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","sources":["webpack://app/../../node_modules/@roadiehq/backstage-plugin-argo-cd/dist/components/ArgoCDHistoryTable.esm.js","webpack://app/../../node_modules/@roadiehq/backstage-plugin-argo-cd/dist/components/ArgoCDHistoryCard.esm.js","webpack://app/../../node_modules/@roadiehq/backstage-plugin-argo-cd/node_modules/@backstage/core-components/dist/components/EmptyState/EmptyStateImage.esm.js","webpack://app/../../node_modules/@roadiehq/backstage-plugin-argo-cd/node_modules/@backstage/core-components/dist/components/EmptyState/EmptyState.esm.js","webpack://app/../../node_modules/@roadiehq/backstage-plugin-argo-cd/node_modules/@backstage/core-components/dist/components/EmptyState/MissingAnnotationEmptyState.esm.js","webpack://app/../../node_modules/@roadiehq/backstage-plugin-argo-cd/dist/Router.esm.js"],"sourcesContent":["import { Table } from '@backstage/core-components';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { Link, List, ListItem } from '@material-ui/core';\nimport React from 'react';\nimport SyncIcon from '@material-ui/icons/Sync';\nimport { DateTime } from 'luxon';\n\nconst ArgoCDHistoryTable = ({\n  data,\n  retry\n}) => {\n  const configApi = useApi(configApiRef);\n  const namespaced = configApi.getOptionalBoolean(\"argocd.namespacedApps\") ?? false;\n  const baseUrl = configApi.getOptionalString(\"argocd.baseUrl\");\n  const supportsMultipleArgoInstances = Boolean(\n    configApi.getOptionalConfigArray(\"argocd.appLocatorMethods\")?.length\n  );\n  const linkUrl = (row) => {\n    if (supportsMultipleArgoInstances && !baseUrl) {\n      const instanceConfig = configApi.getConfigArray(\"argocd.appLocatorMethods\").find((value) => value.getOptionalString(\"type\") === \"config\")?.getOptionalConfigArray(\"instances\")?.find((value) => value.getOptionalString(\"name\") === row?.instance);\n      return instanceConfig?.getOptionalString(\"frontendUrl\") ?? instanceConfig?.getOptionalString(\"url\");\n    }\n    return baseUrl;\n  };\n  const columns = [\n    {\n      title: \"Name\",\n      field: \"name\",\n      render: (row) => linkUrl ? /* @__PURE__ */ React.createElement(\n        Link,\n        {\n          href: `${linkUrl(row)}/applications/${namespaced ? `${row.appNamespace}/${row.app}` : row.app}`,\n          target: \"_blank\",\n          rel: \"noopener\"\n        },\n        row.app\n      ) : row.app\n    },\n    {\n      title: \"Deploy Details\",\n      defaultSort: \"desc\",\n      field: \"deployedAt\",\n      render: (row) => /* @__PURE__ */ React.createElement(List, { dense: true, style: { padding: \"0px\" } }, /* @__PURE__ */ React.createElement(ListItem, { style: { paddingLeft: \"0px\" } }, row.deployedAt ? `Deployed at ${DateTime.fromISO(row.deployedAt).toLocal().toFormat(\"dd MMM yyyy, HH:mm:ss\")}` : null), /* @__PURE__ */ React.createElement(ListItem, { style: { paddingLeft: \"0px\" } }, row.deployStartedAt ? `Run ${DateTime.fromISO(row.deployStartedAt).toLocal().toRelative()}` : null), /* @__PURE__ */ React.createElement(ListItem, { style: { paddingLeft: \"0px\" } }, row.deployedAt && row.deployStartedAt ? `Took ${DateTime.fromISO(row.deployStartedAt).diff(DateTime.fromISO(row.deployedAt)).toFormat(\"hh:mm:ss\")}` : null))\n    },\n    {\n      title: \"Author\",\n      field: \"revisionDetails.author\",\n      render: (row) => /* @__PURE__ */ React.createElement(\"div\", null, row.revisionDetails?.author || \"Loading...\")\n    },\n    {\n      title: \"Message\",\n      field: \"revisionDetails.message\",\n      render: (row) => /* @__PURE__ */ React.createElement(\"div\", null, row.revisionDetails?.message || \"Loading...\")\n    },\n    {\n      title: \"Revision\",\n      field: \"revision\",\n      render: (row) => /* @__PURE__ */ React.createElement(\"div\", null, row.revision)\n    }\n  ];\n  if (supportsMultipleArgoInstances) {\n    columns.splice(1, 0, {\n      title: \"Instance\",\n      field: \"instance\",\n      render: (row) => row.metadata?.instance?.name ? row.metadata?.instance?.name : row.instance\n    });\n  }\n  return /* @__PURE__ */ React.createElement(\n    Table,\n    {\n      title: \"ArgoCD history\",\n      options: {\n        paging: true,\n        search: false,\n        draggable: false,\n        padding: \"dense\"\n      },\n      data,\n      columns,\n      actions: [\n        {\n          icon: () => /* @__PURE__ */ React.createElement(SyncIcon, null),\n          tooltip: \"Refresh\",\n          isFreeAction: true,\n          onClick: () => retry()\n        }\n      ]\n    }\n  );\n};\n\nexport { ArgoCDHistoryTable };\n//# sourceMappingURL=ArgoCDHistoryTable.esm.js.map\n","import { ErrorBoundary, InfoCard } from '@backstage/core-components';\nimport { useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { useEntity, MissingAnnotationEmptyState } from '@backstage/plugin-catalog-react';\nimport { LinearProgress } from '@material-ui/core';\nimport React, { useState, useEffect } from 'react';\nimport { isArgocdAvailable } from '../conditions.esm.js';\nimport { useAppDetails } from './useAppDetails.esm.js';\nimport { ARGOCD_ANNOTATION_APP_NAME, useArgoCDAppData } from './useArgoCDAppData.esm.js';\nimport { argoCDApiRef } from '../api/index.esm.js';\nimport { ArgoCDHistoryTable } from './ArgoCDHistoryTable.esm.js';\n\nconst isHelmChart = (row) => {\n  return row.source?.chart !== void 0;\n};\nconst getRevisionId = (row) => {\n  if (row.revision.hasOwnProperty(\"revisionID\")) {\n    return row.revision.revisionID;\n  }\n  return row.revision;\n};\nconst withRevisionDetails = async (api, url, row) => {\n  if (isHelmChart(row)) {\n    row.revisionDetails = { author: \"n/a\", message: \"n/a\", date: \"n/a\" };\n    return row;\n  }\n  row.revisionDetails = await api.getRevisionDetails({\n    url,\n    app: row.app,\n    appNamespace: row.appNamespace,\n    revisionID: getRevisionId(row),\n    instanceName: row.instance\n  });\n  return row;\n};\nconst ArgoCDHistory = ({ entity }) => {\n  const [tableRows, setTableRows] = useState([]);\n  const argoCDApi = useApi(argoCDApiRef);\n  const { url, appName, appSelector, appNamespace, projectName } = useArgoCDAppData({ entity });\n  const { loading, value, error, retry } = useAppDetails({\n    url,\n    appName,\n    appSelector,\n    appNamespace,\n    projectName\n  });\n  const revisionsToLoad = useApi(configApiRef).getOptionalNumber(\"argocd.revisionsToLoad\") || -1;\n  useEffect(() => {\n    if (!value) {\n      return;\n    }\n    let apps;\n    if (value.items !== void 0) {\n      apps = value.items ?? [];\n    } else if (Array.isArray(value)) {\n      apps = value;\n    } else {\n      apps = [value];\n    }\n    const revisions = apps.filter((app) => app?.status?.history).flatMap((app) => {\n      return app.status.history.sort(\n        (a, b) => new Date(b.deployedAt || \"\").valueOf() - new Date(a.deployedAt || \"\").valueOf()\n      ).slice(0, revisionsToLoad).map((entry) => ({\n        key: `${app.metadata.name}-${entry.revision}`,\n        app: app.metadata.name,\n        appNamespace: app.metadata.namespace,\n        instance: app.metadata?.instance?.name,\n        ...entry\n      }));\n    });\n    setTableRows(revisions);\n    Promise.all(\n      revisions.map(\n        async (row) => await withRevisionDetails(argoCDApi, url, row)\n      )\n    ).then((rowsWithRevisions) => {\n      setTableRows(rowsWithRevisions.filter((row) => row));\n    });\n  }, [value, argoCDApi, url, revisionsToLoad]);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { title: \"ArgoCD history\" }, /* @__PURE__ */ React.createElement(LinearProgress, null));\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(InfoCard, { title: \"ArgoCD history\" }, \"Error occurred while fetching data. \", error.message);\n  }\n  if (tableRows.length) {\n    return /* @__PURE__ */ React.createElement(ArgoCDHistoryTable, { data: tableRows, retry });\n  }\n  return null;\n};\nconst ArgoCDHistoryCard = () => {\n  const { entity } = useEntity();\n  return !isArgocdAvailable(entity) ? /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, { annotation: ARGOCD_ANNOTATION_APP_NAME }) : /* @__PURE__ */ React.createElement(ErrorBoundary, null, /* @__PURE__ */ React.createElement(ArgoCDHistory, { entity }));\n};\n\nexport { ArgoCDHistoryCard };\n//# sourceMappingURL=ArgoCDHistoryCard.esm.js.map\n","import React__default from 'react';\nimport missingAnnotation from './assets/missingAnnotation.svg';\nimport noInformation from './assets/noInformation.svg';\nimport createComponent from './assets/createComponent.svg';\nimport noBuild from './assets/noBuild.svg';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(\n  {\n    generalImg: {\n      width: \"95%\",\n      zIndex: 2,\n      position: \"relative\",\n      left: \"50%\",\n      top: \"50%\",\n      transform: \"translate(-50%, 15%)\"\n    }\n  },\n  { name: \"BackstageEmptyStateImage\" }\n);\nconst EmptyStateImage = ({ missing }) => {\n  const classes = useStyles();\n  switch (missing) {\n    case \"field\":\n      return /* @__PURE__ */ React__default.createElement(\n        \"img\",\n        {\n          src: missingAnnotation,\n          className: classes.generalImg,\n          alt: \"annotation is missing\"\n        }\n      );\n    case \"info\":\n      return /* @__PURE__ */ React__default.createElement(\n        \"img\",\n        {\n          src: noInformation,\n          alt: \"no Information\",\n          className: classes.generalImg\n        }\n      );\n    case \"content\":\n      return /* @__PURE__ */ React__default.createElement(\n        \"img\",\n        {\n          src: createComponent,\n          alt: \"create Component\",\n          className: classes.generalImg\n        }\n      );\n    case \"data\":\n      return /* @__PURE__ */ React__default.createElement(\"img\", { src: noBuild, alt: \"no Build\", className: classes.generalImg });\n    default:\n      return null;\n  }\n};\n\nexport { EmptyStateImage };\n//# sourceMappingURL=EmptyStateImage.esm.js.map\n","import Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React__default from 'react';\nimport { EmptyStateImage } from './EmptyStateImage.esm.js';\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2, 0, 0, 0)\n    },\n    action: {\n      marginTop: theme.spacing(2)\n    },\n    imageContainer: {\n      position: \"relative\"\n    }\n  }),\n  { name: \"BackstageEmptyState\" }\n);\nfunction EmptyState(props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles();\n  return /* @__PURE__ */ React__default.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"space-around\",\n      alignItems: \"flex-start\",\n      className: classes.root,\n      spacing: 2\n    },\n    /* @__PURE__ */ React__default.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React__default.createElement(Grid, { container: true, direction: \"column\" }, /* @__PURE__ */ React__default.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React__default.createElement(Typography, { variant: \"h5\" }, title)), /* @__PURE__ */ React__default.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React__default.createElement(Typography, { variant: \"body1\" }, description)), /* @__PURE__ */ React__default.createElement(Grid, { item: true, xs: true, className: classes.action }, action))),\n    /* @__PURE__ */ React__default.createElement(Grid, { item: true, xs: 12, md: 6, className: classes.imageContainer }, typeof missing === \"string\" ? /* @__PURE__ */ React__default.createElement(EmptyStateImage, { missing }) : missing.customImage)\n  );\n}\n\nexport { EmptyState };\n//# sourceMappingURL=EmptyState.esm.js.map\n","import Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React__default from 'react';\nimport { CodeSnippet } from '../CodeSnippet/CodeSnippet.esm.js';\nimport { Link } from '../Link/Link.esm.js';\nimport { EmptyState } from './EmptyState.esm.js';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\nimport { coreComponentsTranslationRef } from '../../translation.esm.js';\n\nconst COMPONENT_YAML_TEMPLATE = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\nconst ANNOTATION_REGEXP = /^.*ANNOTATION.*$/m;\nconst ANNOTATION_YAML = COMPONENT_YAML_TEMPLATE.match(ANNOTATION_REGEXP)[0];\nconst ANNOTATION_LINE = COMPONENT_YAML_TEMPLATE.split(\"\\n\").findIndex(\n  (line) => ANNOTATION_REGEXP.test(line)\n);\nconst useStyles = makeStyles(\n  (theme) => ({\n    code: {\n      borderRadius: 6,\n      margin: theme.spacing(2, 0),\n      background: theme.palette.type === \"dark\" ? \"#444\" : theme.palette.common.white\n    }\n  }),\n  { name: \"BackstageMissingAnnotationEmptyState\" }\n);\nfunction generateLineNumbers(lineCount) {\n  return Array.from(Array(lineCount + 1).keys(), (i) => i + ANNOTATION_LINE);\n}\nfunction generateComponentYaml(annotations) {\n  const annotationYaml = annotations.map((ann) => ANNOTATION_YAML.replace(\"ANNOTATION\", ann)).join(\"\\n\");\n  return COMPONENT_YAML_TEMPLATE.replace(ANNOTATION_YAML, annotationYaml);\n}\nfunction useGenerateDescription(annotations) {\n  const isSingular = annotations.length <= 1;\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, \"The \", isSingular ? \"annotation\" : \"annotations\", \" \", annotations.map((ann) => /* @__PURE__ */ React__default.createElement(\"code\", null, ann)).reduce((prev, curr) => /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, prev, \", \", curr)), \" \", isSingular ? \"is\" : \"are\", \" missing. You need to add the\", \" \", isSingular ? \"annotation\" : \"annotations\", \" to your component if you want to enable this tool.\");\n}\nfunction MissingAnnotationEmptyState(props) {\n  const { annotation, readMoreUrl } = props;\n  const annotations = Array.isArray(annotation) ? annotation : [annotation];\n  const url = readMoreUrl || \"https://backstage.io/docs/features/software-catalog/well-known-annotations\";\n  const classes = useStyles();\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n  return /* @__PURE__ */ React__default.createElement(\n    EmptyState,\n    {\n      missing: \"field\",\n      title: t(\"emptyState.missingAnnotation.title\"),\n      description: useGenerateDescription(annotations),\n      action: /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(Typography, { variant: \"body1\" }, t(\"emptyState.missingAnnotation.actionTitle\")), /* @__PURE__ */ React__default.createElement(Box, { className: classes.code }, /* @__PURE__ */ React__default.createElement(\n        CodeSnippet,\n        {\n          text: generateComponentYaml(annotations),\n          language: \"yaml\",\n          showLineNumbers: true,\n          highlightedNumbers: generateLineNumbers(annotations.length),\n          customStyle: { background: \"inherit\", fontSize: \"115%\" }\n        }\n      )), /* @__PURE__ */ React__default.createElement(Button, { color: \"primary\", component: Link, to: url }, t(\"emptyState.missingAnnotation.readMore\")))\n    }\n  );\n}\n\nexport { MissingAnnotationEmptyState };\n//# sourceMappingURL=MissingAnnotationEmptyState.esm.js.map\n","import React from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport { ARGOCD_ANNOTATION_APP_NAME } from './components/useArgoCDAppData.esm.js';\nimport { MissingAnnotationEmptyState } from '@backstage/core-components';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { ArgoCDHistoryCard } from './components/ArgoCDHistoryCard.esm.js';\nimport { isArgocdAvailable } from './conditions.esm.js';\n\nconst Router = () => {\n  const { entity } = useEntity();\n  return !isArgocdAvailable(entity) ? /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, { annotation: ARGOCD_ANNOTATION_APP_NAME }) : /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: \"/\", element: /* @__PURE__ */ React.createElement(ArgoCDHistoryCard, null) }));\n};\n\nexport { Router };\n//# sourceMappingURL=Router.esm.js.map\n"],"names":["ArgoCDHistoryTable","data","retry","configApi","namespaced","baseUrl","supportsMultipleArgoInstances","linkUrl","row","instanceConfig","value","columns","Link","List","ListItem","Sync","isHelmChart","getRevisionId","withRevisionDetails","api","url","ArgoCDHistory","entity","tableRows","setTableRows","argoCDApi","appName","appSelector","appNamespace","projectName","loading","error","revisionsToLoad","apps","revisions","app","a","b","entry","rowsWithRevisions","LinearProgress","ArgoCDHistoryCard","useStyles","makeStyles","EmptyStateImage","missing","classes","theme","EmptyState","props","title","description","action","Grid","Typography","COMPONENT_YAML_TEMPLATE","ANNOTATION_REGEXP","ANNOTATION_YAML","ANNOTATION_LINE","line","generateLineNumbers","lineCount","i","generateComponentYaml","annotations","annotationYaml","ann","useGenerateDescription","isSingular","prev","curr","MissingAnnotationEmptyState","annotation","readMoreUrl","t","Box","Button","Router"],"sourceRoot":""}