"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[472,7640],{143:(A,i,t)=>{t.d(i,{f:()=>g});var e=t(31085),r=t(55290),u=t(23730);const g={createCopyDocsUrlAction(d){return n=>({icon:()=>(0,e.jsx)(r.A,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>d(`${window.location.origin}${n.resolved.docsUrl}`)})},createStarEntityAction(d,n){return m=>{const s=m.entity,l=d(s);return{cellStyle:{paddingLeft:"1em"},icon:()=>(0,e.jsx)(u.m,{isFavorite:l}),tooltip:l?"Remove from favorites":"Add to favorites",onClick:()=>n(s)}}}}},4348:(A,i,t)=>{t.d(i,{V:()=>e});function e(r,u){return u.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?r:r.toLocaleLowerCase("en-US")}},19108:(A,i,t)=>{t.d(i,{A:()=>e,G:()=>r});const e="backstage.io/techdocs-ref",r="backstage.io/techdocs-entity"},30472:(A,i,t)=>{t.r(i),t.d(i,{CustomDocsPanel:()=>L,TechDocsCustomHome:()=>S});var e=t(31085),r=t(14041),u=t(73466),g=t(58837),d=t(97214),n=t(78560),m=t(18139),s=t(94223),l=t(699);function h(){const a=(0,m.gf)(s.K),{loading:o,value:v}=(0,u.A)(async()=>{const{ownershipEntityRefs:c}=await a.getBackstageIdentity();return c},[]),C=(0,r.useMemo)(()=>{const c=new Set(v??[]);return x=>{const P=(0,l.t)(x,d.vv).map(n.U2);for(const T of P)if(c.has(T))return!0;return!1}},[v]);return{loading:o,isOwnedEntity:C}}var D=t(18453),U=t(30043),W=t(24259),Y=t(67633),N=t(17749),j=t(4348),H=t(72814),G=t(54195),V=t(17174),J=t(45575),Q=t(87318),Z=t(40703),k=t(59469),M=t(48653),b=t(57369);const z=a=>{const{entities:o}=a,v=(0,H.S)(N.Oc),C=(0,m.gf)(G.U);return o?(0,e.jsx)(V.s,{"data-testid":"docs-explore",children:o?.length?o.map((c,x)=>(0,e.jsxs)(Z.A,{children:[(0,e.jsx)(b.A,{children:(0,e.jsx)(J.f,{title:c.metadata.title??c.metadata.name})}),(0,e.jsx)(M.A,{children:c.metadata.description}),(0,e.jsx)(k.A,{children:(0,e.jsx)(Q.z,{to:v({namespace:(0,j.V)(c.metadata.namespace??"default",C),kind:(0,j.V)(c.kind,C),name:(0,j.V)(c.metadata.name,C)}),color:"primary","data-testid":"read_docs",children:"Read Docs"})})]},x)):null}):null};var w=t(17138),et=t(56420),_=t(16454),$=t(96872),q=t(99338),nt=t(62112),st=t(44390),tt=t(21332),at=t(75202),ot=t(91072);const f=(0,g.A)(a=>({linkSpacer:{paddingTop:a.spacing(.2)},readMoreLink:{paddingTop:a.spacing(.2)}}),{name:"BackstageInfoCardGrid"}),R=a=>{const{entities:o,linkContent:v,linkDestination:C}=a,c=f(),x=(0,H.S)(N.Oc),P=(0,m.gf)(G.U),T=E=>{if(C){const B=C(E);if(B)return B}return x({namespace:(0,j.V)(E.metadata.namespace??"default",P),kind:(0,j.V)(E.kind,P),name:(0,j.V)(E.metadata.name,P)})},K=(0,m.gf)(ot.n),{value:F,loading:X}=(0,u.A)(async()=>new Map(await Promise.all(o?.map(async E=>{const B=await K.forEntity(E).promise;return[(0,n.U2)(E),B]})||[])));return X?(0,e.jsx)($.k,{}):!o||!o?.length?null:(0,e.jsx)(V.s,{"data-testid":"info-card-container",children:o.map(E=>(0,e.jsxs)(tt.n,{"data-testid":E?.metadata?.title,title:F?.get((0,n.U2)(E))?.primaryTitle,children:[(0,e.jsx)("div",{children:E?.metadata?.description}),(0,e.jsx)("div",{className:c.linkSpacer}),(0,e.jsx)(at.N_,{to:T(E),className:c.readMoreLink,"data-testid":"read-docs-link",children:v||"Read Docs"})]},E.metadata.name))})};var p=t(88461),y=t(47640),O=t(19108);const I={DocsTable:Y.o,DocsCardGrid:z,TechDocsIndexPage:y.TechDocsIndexPage,InfoCardGrid:R},L=({config:a,entities:o,index:v})=>{const c=(0,g.A)({panelContainer:{marginBottom:"2rem",...a.panelCSS?a.panelCSS:{}}})(),{loading:x,isOwnedEntity:P}=h(),T=I[a.panelType],K=o.filter(X=>a.filterPredicate==="ownedByUser"?x?!1:P(X):typeof a.filterPredicate=="function"&&a.filterPredicate(X)),F=a.panelProps?.CustomHeader||(()=>(0,e.jsx)(w.d,{title:a.title,description:a.description,children:v===0?(0,e.jsx)(et.Y,{children:"Discover documentation in your ecosystem."}):null}));return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(F,{}),(0,e.jsx)("div",{className:c.panelContainer,children:(0,e.jsx)(D.B9,{children:(0,e.jsx)(T,{"data-testid":"techdocs-custom-panel",entities:K,...a.panelProps})})})]})},S=a=>{const{tabsConfig:o,filter:v,CustomPageWrapper:C}=a,[c,x]=(0,r.useState)(0),P=(0,m.gf)(U.v),{value:T,loading:K,error:F}=(0,u.A)(async()=>(await P.getEntities({filter:{...v,[`metadata.annotations.${O.A}`]:W.c},fields:["apiVersion","kind","metadata","relations","spec.owner","spec.type"]})).items.filter(B=>!!B.metadata.annotations?.[O.A])),X=o[c];return K?(0,e.jsx)(p.S,{CustomPageWrapper:C,children:(0,e.jsx)(_.U,{children:(0,e.jsx)($.k,{})})}):F?(0,e.jsx)(p.S,{CustomPageWrapper:C,children:(0,e.jsx)(_.U,{children:(0,e.jsx)(q.B,{severity:"error",title:"Could not load available documentation.",children:(0,e.jsx)(nt.z,{language:"text",text:F.toString()})})})}):(0,e.jsxs)(p.S,{CustomPageWrapper:C,children:[(0,e.jsx)(st.o,{selectedIndex:c,onChange:E=>x(E),tabs:o.map(({label:E},B)=>({id:B.toString(),label:E}))}),(0,e.jsx)(_.U,{"data-testid":"techdocs-content",children:X.panels.map((E,B)=>(0,e.jsx)(L,{config:E,entities:T||[],index:B},B))})]})}},45575:(A,i,t)=>{t.d(i,{f:()=>s});var e=t(31085),r=t(77125),u=t(99703),g=t(58837),d=t(72501);const n=l=>(0,u.A)({root:{color:l.palette.common.white,padding:l.spacing(2,2,3),backgroundImage:l.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),m=(0,g.A)(n,{name:"BackstageItemCardHeader"});function s(l){const{title:h,subtitle:D,children:U}=l,W=m(l);return(0,e.jsxs)(r.A,{className:W.root,children:[D&&(0,e.jsx)(d.A,{variant:"subtitle2",component:"h3",children:D}),h&&(0,e.jsx)(d.A,{variant:"h6",component:"h4",children:h}),U]})}},47640:(A,i,t)=>{t.r(i),t.d(i,{TechDocsIndexPage:()=>ot});var e=t(31085),r=t(18690),u=t(17138),g=t(56420),d=t(16454),n=t(18453),m=t(77509),s=t(30117),l=t(40941),h=t(56829),D=t(88461),U=t(14041),W=t(24259),Y=t(19108);class N{getCatalogFilters(){return{[`metadata.annotations.${Y.A}`]:W.c}}}const j=()=>{const{updateFilters:f}=(0,n.nK)();return(0,U.useEffect)(()=>{f({techdocs:new N})},[f]),null};var H=t(36338),G=t(45250),V=t(99338),J=t(62112),Q=t(72814),Z=t(18139),k=t(54195),M=t(44861),b=t(67633),z=t(29021),w=t(49724);function et(f){const{actions:R,columns:p,data:y,isLoading:O,options:I}=f,{updateFilters:L,setLimit:S,setOffset:a,limit:o,totalItems:v,offset:C}=(0,n.nK)(),[c,x]=(0,U.useState)(C&&o?Math.floor(C/o):0);return(0,U.useEffect)(()=>{v&&c*o>=v?a(Math.max(0,v-o)):a(Math.max(0,c*o))},[a,c,o,v]),(0,e.jsx)(z.X,{columns:p,data:y,options:{paginationPosition:"both",pageSizeOptions:[5,10,20,50,100],pageSize:o,emptyRowsWhenPaging:!1,actionsColumnIndex:-1,...I},actions:R,onSearchChange:P=>L({text:P?new w.V3(P):void 0}),page:c,onPageChange:P=>{x(P)},onRowsPerPageChange:P=>{S(P)},totalCount:v,localization:{pagination:{labelDisplayedRows:""}},isLoading:O})}function _(f){const{actions:R,columns:p,data:y,next:O,prev:I,title:L,isLoading:S,options:a,...o}=f;return(0,e.jsx)(z.X,{title:S?"":L,columns:p,data:y,options:{paginationPosition:"both",...a,pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1,actionsColumnIndex:-1},onPageChange:v=>{v>0?O?.():I?.()},page:I?1:0,totalCount:O?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}},isLoading:S,...o})}var $=t(143),q=t(61231),nt=t(17749),st=t(51529);const tt=f=>{const{columns:R,actions:p,options:y}=f,{loading:O,error:I,entities:L,filters:S,paginationMode:a,pageInfo:o}=(0,n.nK)(),{isStarredEntity:v,toggleStarredEntity:C}=(0,M.I)(),[,c]=(0,H.A)(),x=(0,Q.S)(nt.Oc),P=(0,Z.gf)(k.U),T=(0,G.capitalize)(S.user?.value??"all"),K=[$.f.createCopyDocsUrlAction(c),$.f.createStarEntityAction(v,C)],F=(0,st.H)(L,x,P);return a==="cursor"?(0,e.jsx)(_,{columns:R||q.F,isLoading:O,title:T,actions:p||K,options:y,data:F,next:o?.next,prev:o?.prev}):a==="offset"?(0,e.jsx)(et,{columns:R||q.F,isLoading:O,title:T,actions:p||K,options:y,data:F}):I?(0,e.jsx)(V.B,{severity:"error",title:"Could not load available documentation.",children:(0,e.jsx)(J.z,{language:"text",text:I.toString()})}):(0,e.jsx)(b.o,{title:T,entities:L,loading:O,actions:p||K,columns:R,options:y})};tt.columns=q.B,tt.actions=$.f;const at=f=>{const{initialFilter:R="owned",columns:p,actions:y,ownerPickerMode:O,pagination:I,options:L,PageWrapper:S,CustomHeader:a}=f,o=S||D.S,v=a||(()=>(0,e.jsx)(u.d,{title:"",children:(0,e.jsx)(g.Y,{children:"Discover documentation in your ecosystem."})}));return(0,e.jsx)(o,{children:(0,e.jsxs)(d.U,{children:[(0,e.jsx)(v,{}),(0,e.jsx)(n.B9,{pagination:I,children:(0,e.jsxs)(m.GI,{children:[(0,e.jsxs)(m.GI.Filters,{children:[(0,e.jsx)(j,{}),(0,e.jsx)(s.y,{initialFilter:R}),(0,e.jsx)(l.t,{mode:O}),(0,e.jsx)(h.m,{})]}),(0,e.jsx)(m.GI.Content,{children:(0,e.jsx)(tt,{actions:y,columns:p,options:L})})]})})]})})},ot=f=>(0,r.P1)()||(0,e.jsx)(at,{...f})},51529:(A,i,t)=>{t.d(i,{H:()=>d});var e=t(97214),r=t(699),u=t(53318),g=t(4348);function d(n,m,s){return n.map(l=>{const h=(0,r.t)(l,e.vv);return{entity:l,resolved:{docsUrl:m({namespace:(0,g.V)(l.metadata.namespace??"default",s),kind:(0,g.V)(l.kind,s),name:(0,g.V)(l.metadata.name,s)}),ownedByRelations:h,ownedByRelationsTitle:h.map(D=>(0,u.S)(D,{defaultKind:"group"})).join(", ")}}})}},55290:(A,i,t)=>{var e,r=t(4293),u=t(78920);e={value:!0},i.A=void 0;var g=u(t(14041)),d=r(t(74044)),n=(0,d.default)(g.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");i.A=n},61231:(A,i,t)=>{t.d(i,{B:()=>n,F:()=>m});var e=t(31085),r=t(49907),u=t(75202),g=t(14158);function d(s){return s.metadata.title||s.metadata.name}const n={createTitleColumn(s){return{...n.createNameColumn(),field:"entity.metadata.title",hidden:s?.hidden}},createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,searchable:!0,defaultSort:"asc",customSort:(s,l)=>{const h=d(s.entity).toLocaleLowerCase(),D=d(l.entity).toLocaleLowerCase();return h.localeCompare(D)},render:s=>(0,e.jsx)(r.m,{value:(0,e.jsx)(u.N_,{to:s.resolved.docsUrl,children:d(s.entity)}),subvalue:s.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:s})=>(0,e.jsx)(g.i,{entityRefs:s.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},m=[n.createTitleColumn({hidden:!0}),n.createNameColumn(),n.createOwnerColumn(),n.createKindColumn(),n.createTypeColumn()]},67633:(A,i,t)=>{t.d(i,{o:()=>W});var e=t(31085),r=t(36338),u=t(72814),g=t(18139),d=t(54195),n=t(17749),m=t(29021),s=t(65995),l=t(87318),h=t(143),D=t(61231),U=t(51529);const W=Y=>{const{entities:N,title:j,loading:H,columns:G,actions:V,options:J}=Y,[,Q]=(0,r.A)(),Z=(0,u.S)(n.Oc),k=(0,g.gf)(d.U);if(!N)return null;const M=(0,U.H)(N,Z,k),b=[h.f.createCopyDocsUrlAction(Q)],z=20,w=M&&M.length>z;return(0,e.jsx)(e.Fragment,{children:H||M&&M.length>0?(0,e.jsx)(m.X,{isLoading:H,options:{paging:w,pageSize:z,search:!0,actionsColumnIndex:-1,...J},data:M,columns:G||D.F,actions:V||b,title:j?`${j} (${M.length})`:`All (${M.length})`}):(0,e.jsx)(s.p,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:(0,e.jsx)(l.z,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained",children:"DOCS"})})})};W.columns=D.B,W.actions=h.f},88461:(A,i,t)=>{t.d(i,{S:()=>d});var e=t(31085),r=t(92303),u=t(18139),g=t(54195);const d=n=>{const{children:m,CustomPageWrapper:s}=n,h=`Documentation available in ${(0,u.gf)(g.U).getOptionalString("organization.name")??"Backstage"}`;return(0,e.jsx)(e.Fragment,{children:s?(0,e.jsx)(s,{children:m}):(0,e.jsx)(r.d,{title:"Documentation",subtitle:h,themeId:"documentation",children:m})})}},92303:(A,i,t)=>{t.d(i,{d:()=>g});var e=t(31085),r=t(79182),u=t(82326);function g(d){const{themeId:n,children:m,...s}=d;return(0,e.jsxs)(u.Y,{themeId:n,children:[(0,e.jsx)(r.Y,{...s}),m]})}}}]);})();

//# sourceMappingURL=472.89913f2b.chunk.js.map