(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1556],{699:(et,m,t)=>{"use strict";t.d(m,{t:()=>r});var e=t(78560);function r(h,c,s){let o=h?.relations?.filter(d=>d.type===c).map(d=>(0,e.KU)(d.targetRef))||[];return s?.kind&&(o=o.filter(d=>d.kind.toLocaleLowerCase("en-US")===s.kind.toLocaleLowerCase("en-US"))),o}},730:(et,m,t)=>{"use strict";t.d(m,{k:()=>F,B:()=>N});var e=t(31085),r=t(16400),h=t(74219),c=t(14041),s=t(18690),o=t(30043),d=t(64947),g=t(76891),i=t(93453),p=t(61477),u=t(18139),f=t(34477),y=t(67457),T=t(58045),O=t(10265);function b(D){const{open:k,onClose:G,onConfirm:I,entity:tt}=D,[H,V]=(0,c.useState)(!1),q=(0,u.gf)(o.v),it=(0,u.gf)(f.k),{t:ct}=(0,O.i)(T.W),Q=async()=>{V(!0);try{const lt=tt.metadata.uid;await q.removeEntityByUid(lt),I()}catch(lt){(0,y.t)(lt),it.post({message:lt.message})}finally{V(!1)}};return(0,e.jsxs)(g.A,{open:k,onClose:G,children:[(0,e.jsx)(p.A,{id:"responsive-dialog-title",children:ct("deleteEntity.dialogTitle")}),(0,e.jsxs)(i.A,{children:[(0,e.jsx)(d.A,{variant:"contained",color:"secondary",disabled:H,onClick:Q,children:ct("deleteEntity.deleteButtonTitle")}),(0,e.jsx)(d.A,{onClick:G,color:"primary",children:ct("deleteEntity.cancelButtonTitle")})]})]})}var B=t(72814),j=t(88549);function N(D){return D?.metadata?.annotations?.["backstage.io/orphan"]==="true"}function F(){const D=(0,s.Zp)(),k=(0,B.S)(j.rQ),[G,I]=(0,c.useState)(!1),{entity:tt}=(0,r.tN)(),{t:H}=(0,O.i)(T.W),V=async()=>{I(!1),D(k())};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.A,{severity:"warning",onClick:()=>I(!0),children:H("deleteEntity.description")}),(0,e.jsx)(b,{open:G,entity:tt,onConfirm:V,onClose:()=>I(!1)})]})}},1952:(et,m,t)=>{"use strict";t.d(m,{Q:()=>c});function e(){return typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")()}const r=e(),h=s=>`__@backstage/${s}__`;function c(s,o){const d=h(s);let g=r[d];return g||(g=o(),r[d]=g,g)}},2067:(et,m,t)=>{"use strict";t.d(m,{r6:()=>kt,Te:()=>pt});var e=t(56004),r=t(63163),h=t(85408),c=t(75706);function s(Et){return{expose(){const at=()=>null;return(0,h.h)(at,c.b,Et),at}}}const o=()=>null;(0,h.h)(o,c.R,!0);var d=t(78560),g=t(71834),i=t(92110),p=t(45810),u=t.n(p),f=t(96403),y=t.n(f);class T{discoveryApi;scmIntegrationsApi;fetchApi;identityApi;useLongPollingLogs;constructor(at){this.discoveryApi=at.discoveryApi,this.fetchApi=at.fetchApi??{fetch},this.scmIntegrationsApi=at.scmIntegrationsApi,this.useLongPollingLogs=at.useLongPollingLogs??!1,this.identityApi=at.identityApi}async listTasks(at){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const yt=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:Ot}=await this.identityApi.getBackstageIdentity(),bt=u().stringify({createdBy:at.filterByOwnership==="owned"?Ot:void 0,limit:at.limit,offset:at.offset}),Mt=await this.fetchApi.fetch(`${yt}/v2/tasks?${bt}`);if(!Mt.ok)throw await g.o.fromResponse(Mt);return await Mt.json()}async getIntegrationsList(at){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(Ot=>!this.scmIntegrationsApi.bitbucketCloud.byHost(Ot.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(Ot.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(Ot=>({type:Ot.type,title:Ot.title,host:Ot.config.host})).filter(Ot=>at.allowedHosts.includes(Ot.host))}}async getTemplateParameterSchema(at){const{namespace:yt,kind:Ot,name:bt}=(0,d.KU)(at,{defaultKind:"template"}),Mt=await this.discoveryApi.getBaseUrl("scaffolder"),W=[yt,Ot,bt].map(Pt=>encodeURIComponent(Pt)).join("/"),x=`${Mt}/v2/templates/${W}/parameter-schema`,M=await this.fetchApi.fetch(x);if(!M.ok)throw await g.o.fromResponse(M);return await M.json()}async scaffold(at){const{templateRef:yt,values:Ot,secrets:bt={}}=at,Mt=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,W=await this.fetchApi.fetch(Mt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:yt,values:{...Ot},secrets:bt})});if(W.status!==201){const M=`${W.status} ${W.statusText}`,_=await W.text();throw new Error(`Backend request failed, ${M} ${_.trim()}`)}const{id:x}=await W.json();return{taskId:x}}async getTask(at){const Ot=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(at)}`,bt=await this.fetchApi.fetch(Ot);if(!bt.ok)throw await g.o.fromResponse(bt);return await bt.json()}streamLogs(at){return this.useLongPollingLogs?this.streamLogsPolling(at):this.streamLogsEventStream(at)}async dryRun(at){const yt=await this.discoveryApi.getBaseUrl("scaffolder"),Ot=await this.fetchApi.fetch(`${yt}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:at.template,values:at.values,secrets:at.secrets,directoryContents:at.directoryContents})});if(!Ot.ok)throw await g.o.fromResponse(Ot);return Ot.json()}streamLogsEventStream({isTaskRecoverable:at,taskId:yt,after:Ot}){return new(y())(bt=>{const Mt=new URLSearchParams;Ot!==void 0&&Mt.set("after",String(Number(Ot))),this.discoveryApi.getBaseUrl("scaffolder").then(W=>{const x=`${W}/v2/tasks/${encodeURIComponent(yt)}/eventstream`,M=Pt=>{if(Pt.data)try{bt.next(JSON.parse(Pt.data))}catch(Bt){bt.error(Bt)}},_=new AbortController;(0,i.y)(x,{fetch:this.fetchApi.fetch,signal:_.signal,onmessage(Pt){if(Pt.event==="log"){M(Pt);return}else if(Pt.event==="completion"&&!at){M(Pt),bt.complete(),_.abort();return}M(Pt)},onerror(Pt){bt.error(Pt)}})},W=>{bt.error(W)})})}streamLogsPolling({taskId:at,after:yt}){let Ot=yt;return new(y())(bt=>{this.discoveryApi.getBaseUrl("scaffolder").then(async Mt=>{for(;!bt.closed;){const W=`${Mt}/v2/tasks/${encodeURIComponent(at)}/events?${u().stringify({after:Ot})}`,x=await this.fetchApi.fetch(W);if(!x.ok){await new Promise(_=>setTimeout(_,1e3));continue}const M=await x.json();for(const _ of M)if(Ot=Number(_.id),bt.next(_),_.type==="completion"){bt.complete();return}}})})}async listActions(){const at=await this.discoveryApi.getBaseUrl("scaffolder"),yt=await this.fetchApi.fetch(`${at}/v2/actions`);if(!yt.ok)throw await g.o.fromResponse(yt);return await yt.json()}async listTemplatingExtensions(){const at=await this.discoveryApi.getBaseUrl("scaffolder"),yt=await this.fetchApi.fetch(`${at}/v2/templating-extensions`);if(!yt.ok)throw g.o.fromResponse(yt);return yt.json()}async cancelTask(at){const Ot=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(at)}/cancel`,bt=await this.fetchApi.fetch(Ot,{method:"POST"});if(!bt.ok)throw await g.o.fromResponse(bt);return await bt.json()}async retry(at){const Ot=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(at)}/retry`,bt=await this.fetchApi.fetch(Ot,{method:"POST"});if(!bt.ok)throw await g.o.fromResponse(bt);return await bt.json()}async autocomplete({token:at,resource:yt,provider:Ot,context:bt}){const W=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/autocomplete/${Ot}/${yt}`,x=await this.fetchApi.fetch(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:at,context:bt??{}})});if(!x.ok)throw await g.o.fromResponse(x);const{results:M}=await x.json();return{results:M}}}var O=t(17875),b=t(62416),B=t(79541),j=t(6451),N=t(22139),F=t(21775),D=t(77795),k=t(36611),G=t(50809),I=t(45843),tt=t(61617),H=t(95159),V=t(94223),q=t(18050),it=t(9739),ct=t(7793),Q=t(23986),lt=t(34861),st=t(25752),mt=t(58464),rt=t(31766),nt=t(7578),z=t(20569);function U(){const Et=at=>Object.assign(yt=>({$$type:"@backstage/ExtensionDataValue",id:at,value:yt}),{id:at,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}},toString(){const yt=!!this.config.optional;return`ExtensionDataRef{id=${at},optional=${yt}}`}});return{with(at){return Et(at.id)}}}function P(Et,at){const yt=new Map,Ot=at&&new Map(at.map(Mt=>[Mt.id,Mt]));for(const Mt of Et){if(Ot&&!Ot.delete(Mt.id))throw new Error(`extension data '${Mt.id}' was provided but not declared`);yt.set(Mt.id,Mt)}const bt=Ot&&Array.from(Ot.values()).filter(Mt=>!Mt.config.optional);if(bt&&bt.length>0)throw new Error(`missing required extension data value(s) '${bt.map(Mt=>Mt.id).join(", ")}'`);return{get(Mt){return yt.get(Mt.id)?.value},[Symbol.iterator](){return yt.values()}}}function S(Et){return Et}function L(Et){return Et}function $(Et,at,yt){if(!Et||!at||!yt)return at;const Ot={};for(const bt in Et){if(!Object.hasOwn(Et,bt))continue;const Mt=Et[bt],W=yt[bt];if(Mt.config.singleton){const x=at[bt];if(W){const M=P(W,Mt.extensionData);if(!x)throw new Error(`attempted to override data of input '${bt}' but it is not present in the original inputs`);Ot[bt]=Object.assign(M,{node:x.node})}}else{const x=at[bt];if(!Array.isArray(W))throw new Error(`override data provided for input '${bt}' must be an array`);if(W.length===0)Ot[bt]=[];else{const M=W.filter(_=>"node"in _).length;if(M===0){if(x.length!==W.length)throw new Error(`override data provided for input '${bt}' must match the length of the original inputs`);Ot[bt]=W.map((_,Pt)=>{const Bt=P(_,Mt.extensionData);return Object.assign(Bt,{node:x[Pt].node})})}else if(M===W.length)Ot[bt]=W;else throw new Error(`override data for input '${bt}' may not mix forwarded inputs with data overrides`)}}}return Ot}function K(Et){const at=Et(nt.z);return{parse:yt=>{const Ot=at.safeParse(yt);if(Ot.success)return Ot.data;throw new Error(Ot.error.issues.map(J).join("; "))},schema:(0,z.Ay)(at)}}function J(Et){if(Et.code==="invalid_union")return J(Et.unionErrors[0].issues[0]);let at=Et.message;return at==="Required"&&(at="Missing required value"),Et.path.length&&(at+=` at '${Et.path.join(".")}'`),at}class ot{static create(at){return new ot(at.type,new Set(at.versions))}#t;#e;constructor(at,yt){this.#t=at,this.#e=yt}TPublic=void 0;TInternal=void 0;isType=at=>this.#n(at);toInternal=at=>{if(!this.#n(at))throw new TypeError(`Invalid opaque type, expected '${this.#t}', but got '${this.#s(at)}'`);if(!this.#e.has(at.version)){const yt=Array.from(this.#e).map(this.#r);yt.length>1&&(yt[yt.length-1]=`or ${yt[yt.length-1]}`);const Ot=yt.length>2?yt.join(", "):yt.join(" ");throw new TypeError(`Invalid opaque type instance, got version ${this.#r(at.version)}, expected ${Ot}`)}return at};createInstance(at,yt){return Object.assign(yt,{$$type:this.#t,...at&&{version:at}})}#n(at){return at===null||typeof at!="object"?!1:at.$$type===this.#t}#s(at){return typeof at!="object"?`<${typeof at}>`:at===null?"<null>":"$$type"in at?String(at.$$type):String(at)}#r=at=>at?`'${at}'`:"undefined"}const At=ot.create({type:"@backstage/ExtensionDefinition",versions:["v1","v2"]}),X=Symbol("params");function dt(Et){const at=Et.config?.schema,yt=at&&K(Ot=>Ot.object(Object.fromEntries(Object.entries(at).map(([bt,Mt])=>[bt,Mt(Ot)]))));return At.createInstance("v2",{T:void 0,kind:Et.kind,name:Et.name,attachTo:Et.attachTo,disabled:Et.disabled??!1,inputs:Et.inputs??{},output:Et.output,configSchema:yt,factory:Et.factory,toString(){const Ot=[];return Et.kind&&Ot.push(`kind=${Et.kind}`),Et.name&&Ot.push(`name=${Et.name}`),Ot.push(`attachTo=${[Et.attachTo].flat().map(bt=>`${bt.id}@${bt.input}`).join("+")}`),`ExtensionDefinition{${Ot.join(",")}}`},override(Ot){if(!Array.isArray(Et.output))throw new Error("Cannot override an extension that is not declared using the new format with outputs as an array");if(Ot.output&&!Ot.factory)throw new Error("Refused to override output without also overriding factory");if(Ot.params&&Ot.factory)throw new Error("Refused to override params and factory at the same time");return dt({kind:Et.kind,name:Et.name,attachTo:Ot.attachTo??Et.attachTo,disabled:Ot.disabled??Et.disabled,inputs:{...Ot.inputs,...Et.inputs},output:Ot.output??Et.output,config:Et.config||Ot.config?{schema:{...Et.config?.schema,...Ot.config?.schema}}:void 0,factory:({node:bt,apis:Mt,config:W,inputs:x})=>{if(!Ot.factory)return Et.factory({node:bt,apis:Mt,config:W,inputs:x,[X]:Ot.params});const M=Ot.factory(Pt=>P(Et.factory({node:bt,apis:Mt,config:Pt?.config??W,inputs:$(Et.inputs,x,Pt?.inputs),[X]:Pt?.params}),Et.output),{node:bt,apis:Mt,config:W,inputs:x}),_=new Map;for(const Pt of M)_.set(Pt.id,Pt);return _.values()}})}})}function xt(Et){return{dataRefs:Et.dataRefs,make(at){return dt({kind:Et.kind,name:at.name??Et.name,attachTo:at.attachTo??Et.attachTo,disabled:at.disabled??Et.disabled,inputs:Et.inputs,output:Et.output,config:Et.config,factory:yt=>Et.factory({...at.params,...yt[X]},yt)})},makeWithOverrides(at){return dt({kind:Et.kind,name:at.name??Et.name,attachTo:at.attachTo??Et.attachTo,disabled:at.disabled??Et.disabled,inputs:{...at.inputs,...Et.inputs},output:at.output??Et.output,config:Et.config||at.config?{schema:{...Et.config?.schema,...at.config?.schema}}:void 0,factory:yt=>{const{node:Ot,config:bt,inputs:Mt,apis:W}=yt;return at.factory((x,M)=>P(Et.factory({...x,...yt[X]},{apis:W,node:Ot,config:M?.config??bt,inputs:$(Et.inputs,Mt,M?.inputs)}),Et.output),{apis:W,node:Ot,config:bt,inputs:Mt})}})}}}const $t=U().with({id:"core.api.factory"}),wt=xt({kind:"api",attachTo:{id:"root",input:"apis"},output:[$t],dataRefs:{factory:$t},*factory(Et){yield $t(Et.factory)}});function _t(Et,at){return{$$type:"@backstage/ExtensionInput",extensionData:Et,config:{singleton:!!at?.singleton,optional:!!at?.optional},replaces:at?.replaces}}const Ut=U().with({id:"scaffolder.form-decorator-loader"}),zt=xt({kind:"scaffolder-form-decorator",attachTo:{id:"api:scaffolder/form-decorators",input:"formDecorators"},dataRefs:{formDecoratorLoader:Ut},output:[Ut],*factory(Et){yield Ut(Et.decorator)}});class Xt{constructor(at){this.options=at}static create(at){return new Xt(at??{decorators:[]})}async getFormDecorators(){return this.options.decorators}}const se=wt.makeWithOverrides({name:"form-decorators",inputs:{formDecorators:_t([zt.dataRefs.formDecoratorLoader])},factory(Et,{inputs:at}){const yt=at.formDecorators.map(Ot=>Ot.get(zt.dataRefs.formDecoratorLoader));return Et({factory:(0,I.b)({api:rt.S,deps:{},factory:()=>Xt.create({decorators:yt})})})}});var re=t(19579),ce=t(95201),te=t(71004),ie=t(23654),me=t(63653),ee=t(63374),Wt=t(19742),jt=t(8886);const pt=(0,G.i)({id:"scaffolder",apis:[(0,I.b)({api:r.z,deps:{discoveryApi:tt.I,scmIntegrationsApi:e.Y,fetchApi:H.a,identityApi:V.K},factory:({discoveryApi:Et,scmIntegrationsApi:at,fetchApi:yt,identityApi:Ot})=>new T({discoveryApi:Et,scmIntegrationsApi:at,fetchApi:yt,identityApi:Ot})}),(0,I.b)({api:rt.S,deps:{},factory:()=>Xt.create()}),(0,I.b)({api:re.v,deps:{},factory:()=>({getFormFields:async()=>[]})})],routes:{root:Q.rQ,selectedTemplate:Q.sP,ongoingTask:Q.bW,actions:Q.GF,listTasks:Q.JX,edit:Q.Dg,editor:Q.GH,customFields:Q.t6,templateForm:Q.P,templatingExtensions:Q.SE},externalRoutes:{registerComponent:Q.J0,viewTechDoc:Q.UJ}}),Y=pt.provide(s({component:O.q,name:"EntityPicker",schema:ce.f2})),ft=pt.provide(s({component:B.R,name:"EntityNamePicker",validation:b._,schema:te.a})),Tt=pt.provide(s({component:N.RT,name:"MultiEntityPicker",schema:ie.mG,validation:N.eR})),Lt=pt.provide(s({component:k.e,name:"RepoUrlPicker",validation:D._,schema:F.d})),St=pt.provide(s({component:j.u,name:"OwnerPicker",schema:me.h})),Ht=pt.provide(s({component:lt.T,name:"MyGroupsPicker",schema:ee.M})),kt=pt.provide((0,q.QJ)({name:"ScaffolderPage",component:()=>Promise.all([t.e(7248),t.e(7868),t.e(303),t.e(6113),t.e(2460),t.e(7881)]).then(t.bind(t,10262)).then(Et=>Et.Router),mountPoint:Q.rQ})),Dt=pt.provide(s({component:it.F,name:"OwnedEntityPicker",schema:Wt.M})),Ft=pt.provide(s({component:ct.t,name:"EntityTagsPicker",schema:jt.u})),Yt=pt.provide(s({component:st.z,name:"RepoBranchPicker",schema:mt._}))},2488:(et,m,t)=>{"use strict";t.d(m,{I:()=>h});var e=t(13930);class r{constructor(s,o,d,g){this.id=s,this.params=o,this.optional=d,this.defaultTarget=g}[e.b]="external";toString(){return`routeRef{type=external,id=${this.id}}`}getDefaultTarget(){return this.defaultTarget}}function h(c){return new r(c.id,c.params??[],!!c.optional,c?.defaultTarget)}},3969:(et,m,t)=>{"use strict";t.d(m,{At:()=>h,J7:()=>r,eO:()=>e});function e(c){const{ref:s,...o}=c;return{inputRef:s,...o}}function r(c){return c.getOptionalString("catalog.import.entityFilename")??"catalog-info.yaml"}function h(c){return c.getOptionalString("catalog.import.pullRequestBranchName")??"backstage-integration"}},4790:(et,m,t)=>{"use strict";t.d(m,{B:()=>e});function e(r){Object.freeze(r);const h={atVersion(c){return r[c]}};return Object.defineProperty(h,"$map",{configurable:!0,enumerable:!0,get(){return r}}),h}},5336:(et,m,t)=>{"use strict";t.d(m,{g:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.catalog-import.service"})},6161:(et,m,t)=>{"use strict";t.d(m,{S5:()=>it,Gn:()=>q});var e=t(77555),r=t(50809),h=t(45843),c=t(61617),s=t(95159),o=t(54195),d=t(18050),g=t(14146),i=t(56004),p=t(30043),u=t(5336),f=t(92939),y=t(52536),T=t.n(y),O=t(72119),b=t(3969),B=t(93584);async function j(ct,Q,lt){const{owner:st,repo:mt,title:rt,body:nt,fileContent:z,repositoryUrl:U,githubIntegrationConfig:P}=ct,{token:S}=await Q.getCredentials({url:U,additionalScope:{repoWrite:!0}}),L=new O.E({auth:S,baseUrl:P.apiBaseUrl}),$=(0,b.At)(lt),K=(0,b.J7)(lt),J=await L.repos.get({owner:st,repo:mt}).catch(X=>{throw new Error(N("Couldn't fetch repo data",X))}),ot=await L.git.getRef({owner:st,repo:mt,ref:`heads/${J.data.default_branch}`}).catch(X=>{throw new Error(N("Couldn't fetch default branch data",X))});return await L.git.createRef({owner:st,repo:mt,ref:`refs/heads/${$}`,sha:ot.data.object.sha}).catch(X=>{throw new Error(N(`Couldn't create a new branch with name '${$}'`,X))}),await L.repos.createOrUpdateFileContents({owner:st,repo:mt,path:K,message:rt,content:B.o4.encode(z),branch:$}).catch(X=>{throw new Error(N(`Couldn't create a commit with ${K} file added`,X))}),{link:(await L.pulls.create({owner:st,repo:mt,title:rt,head:$,body:nt,base:J.data.default_branch}).catch(X=>{throw new Error(N(`Couldn't create a pull request for ${$} branch`,X))})).data.html_url,location:`https://${P.host}/${st}/${mt}/blob/${J.data.default_branch}/${K}`}}function N(ct,Q){return`${ct}, received http response status code ${Q.status}: ${Q.message}`}const F="6.0";class D{constructor(Q){this._options=Q}createEndpoint=(Q,lt,st=void 0)=>{const mt=new URL(`${this._options.tenantUrl}/${this._options.project}/_apis/git/repositories`);return mt.pathname+=Q,mt.searchParams.set("api-version",lt),Object.entries(st??{}).forEach(([rt,nt])=>mt.searchParams.set(rt,nt)),mt.toString()};async get(Q,lt,st=void 0,mt){const rt=this.createEndpoint(Q,lt,st),nt=await fetch(rt,{headers:{Authorization:`Bearer ${mt}`}});return nt.ok?await nt.json():nt.json().then(z=>Promise.reject(new Error(z.message)))}async post(Q,lt,st,mt){const rt=this.createEndpoint(Q,lt),nt=await fetch(rt,{method:"POST",headers:{Authorization:`Bearer ${mt}`,"Content-Type":"application/json"},body:JSON.stringify(st)});return nt.ok?await nt.json():nt.json().then(z=>Promise.reject(new Error(z.message)))}async getRepository(Q,lt){return this.get(`/${Q}`,F,void 0,lt)}async getDefaultBranch(Q,lt){const st=Q.defaultBranch.replace("refs/",""),mt=await this.get(`/${Q.name}/refs`,F,{filter:st},lt);return mt.value?.length?mt.value[0]:Promise.reject(new Error(`The requested ref '${st}' was not found`))}async pushNewBranch(Q,lt){const{sourceBranch:st,repoName:mt}=Q,rt={refUpdates:[{name:`refs/heads/${Q.branchName}`,oldObjectId:st.objectId}],commits:[{comment:Q.title,changes:[{changeType:"add",item:{path:`/${Q.fileName}`},newContent:{content:Q.fileContent,contentType:"rawtext"}}]}]};return(await this.post(`/${mt}/pushes`,F,rt,lt)).refUpdates[0]}async createPullRequest(Q,lt){const{repoName:st,sourceName:mt,targetName:rt}=Q,nt={title:Q.title,description:Q.description,sourceRefName:mt,targetRefName:rt};return await this.post(`/${st}/pullrequests`,F,nt,lt)}}async function k(ct,Q=void 0){const{title:lt,repository:st,token:mt,fileContent:rt,fileName:nt,branchName:z,description:U}=ct,P=Q??new D(ct),S=await P.getRepository(st,mt),L=await P.getDefaultBranch(S,mt),$={title:lt,repoName:S.name,sourceBranch:L,branchName:z,fileContent:rt,fileName:nt},K=await P.pushNewBranch($,mt),J={title:lt,description:U,repoName:S.name,sourceName:K.name,targetName:L.name};return P.createPullRequest(J,mt)}function G(ct){const{org:Q,repo:lt,project:st,host:mt}=tt(ct);if(!Q||!lt||!st)throw new Error("Invalid AzureDevops Repository. Please use a valid repository url and try again ");return{tenantUrl:`https://${mt}/${Q}`,repoName:lt,project:st}}async function I(ct,Q,lt){const{repositoryUrl:st,fileContent:mt,title:rt,body:nt}=ct,z=(0,b.At)(lt),U=(0,b.J7)(lt),{token:P}=await Q.getCredentials({url:st,additionalScope:{repoWrite:!0}}),{tenantUrl:S,repoName:L,project:$}=G(st),K=await k({token:P,fileContent:mt,title:rt,description:nt,project:$,repository:L,branchName:z,tenantUrl:S,fileName:U}),J=`${K.repository.webUrl}?path=/${U}`;return{link:`${K.repository.webUrl}/pullrequest/${K.pullRequestId}`,location:J}}function tt(ct){const Q=new URL(ct);let lt=Q.host,st,mt,rt;const nt=Q.pathname.split("/").map(z=>decodeURIComponent(z));return nt[2]==="_git"?(st=nt[1],mt=rt=nt[3]):nt[3]==="_git"?(st=nt[1],mt=nt[2],rt=nt[4]):nt[4]==="_git"&&(lt=`${lt}/${nt[1]}`,st=nt[2],mt=nt[3],rt=nt[5]),{host:lt,org:st,project:mt,repo:rt}}class H{discoveryApi;fetchApi;scmAuthApi;scmIntegrationsApi;catalogApi;configApi;constructor(Q){this.discoveryApi=Q.discoveryApi,this.scmAuthApi=Q.scmAuthApi,this.fetchApi=Q.fetchApi,this.scmIntegrationsApi=Q.scmIntegrationsApi,this.catalogApi=Q.catalogApi,this.configApi=Q.configApi}async analyzeUrl(Q){if(new URL(Q).pathname.match(/\.ya?ml$/)||new URL(Q).searchParams.get("path")?.match(/.ya?ml$/)){const nt=await this.catalogApi.addLocation({type:"url",target:Q,dryRun:!0});return{type:"locations",locations:[{exists:nt.exists,target:nt.location.target,entities:nt.entities.map(z=>({kind:z.kind,namespace:z.metadata.namespace??"default",name:z.metadata.name}))}]}}const lt=["github","azure"],st=this.scmIntegrationsApi.byUrl(Q);if(!(!!st&&lt.find(nt=>nt===st.type))){const nt=(0,b.J7)(this.configApi);throw st?new Error(`The ${st.title} integration only supports full URLs to ${nt} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid git URL because there was no configured integration that matched the given host name. Currently GitHub and Azure DevOps are supported. You could try to paste the full URL to a ${nt} file instead.`)}const rt=await this.analyzeLocation({repo:Q});if(rt.existingEntityFiles.length>0){const nt=rt.existingEntityFiles.reduce((z,U)=>(z[U.location.target]={target:U.location.target,exists:U.isRegistered,entities:[...U.location.target in z?z[U.location.target].entities:[],{name:U.entity.metadata.name,namespace:U.entity.metadata.namespace??"default",kind:U.entity.kind}]},z),{});return{type:"locations",locations:Object.values(nt)}}return{type:"repository",integrationType:st.type,url:Q,generatedEntities:rt.generateEntities.map(nt=>nt.entity)}}async preparePullRequest(){const Q=this.configApi.getOptionalString("app.title")??"Backstage",lt=this.configApi.getString("app.baseUrl");return{title:`Add ${(0,b.J7)(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${Q} software catalog](${lt}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(Q){const{repositoryUrl:lt,fileContent:st,title:mt,body:rt}=Q,nt=f.Ay.parseAllDocuments(st);for(const U of nt){const P=await this.catalogApi.validateEntity(U.toJS(),`url:${lt}`);if(!P.valid)throw new Error(P.errors[0].message)}const z=this.scmIntegrationsApi.byUrl(lt);switch(z?.type){case"github":{const{config:U}=z,{name:P,owner:S}=T()(lt);return j({githubIntegrationConfig:U,repo:P,owner:S,repositoryUrl:lt,fileContent:st,title:mt,body:rt},this.scmAuthApi,this.configApi)}case"azure":return I({repositoryUrl:lt,fileContent:st,title:mt,body:rt},this.scmAuthApi,this.configApi);default:throw new Error("unimplemented!")}}async analyzeLocation(Q){const lt=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({location:{type:"url",target:Q.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(mt=>{throw new Error(`Failed to generate entity definitions, ${mt.message}`)});if(!lt.ok)throw new Error(`Failed to generate entity definitions. Received http response ${lt.status}: ${lt.statusText}`);return await lt.json()}}const V=(0,e.H)({id:"catalog-import"}),q=(0,r.i)({id:"catalog-import",apis:[(0,h.b)({api:u.g,deps:{discoveryApi:c.I,scmAuthApi:g.$,fetchApi:s.a,scmIntegrationsApi:i.Y,catalogApi:p.v,configApi:o.U},factory:({discoveryApi:ct,scmAuthApi:Q,fetchApi:lt,scmIntegrationsApi:st,catalogApi:mt,configApi:rt})=>new H({discoveryApi:ct,scmAuthApi:Q,scmIntegrationsApi:st,fetchApi:lt,catalogApi:mt,configApi:rt})})],routes:{importPage:V}}),it=q.provide((0,d.QJ)({name:"CatalogImportPage",component:()=>t.e(8664).then(t.bind(t,88664)).then(ct=>ct.ImportPage),mountPoint:V}))},6442:(et,m,t)=>{"use strict";t.d(m,{M5:()=>o,cy:()=>s});var e=t(69655),r=t.n(e),h=t(67457);function c(d,g){const p={name:"Unknown",message:"<no reason given>",...serializeError$1(d)};return g?.includeStack||(delete p.stack,p.cause&&typeof p.cause=="object"&&"stack"in p.cause&&delete p.cause.stack),p}function s(d){const g=(0,e.deserializeError)(d);return d.stack||(g.stack=void 0),g}function o(d){if((0,h.b)(d)){const g=String(d);return g!=="[object Object]"?g:`${d.name}: ${d.message}`}return`unknown error '${d}'`}},6451:(et,m,t)=>{"use strict";t.d(m,{u:()=>s});var e=t(31085),r=t(17875),h=t(10265),c=t(30268);const s=o=>{const{t:d}=(0,h.i)(c.W),{schema:{title:g=d("fields.ownerPicker.title"),description:i=d("fields.ownerPicker.description")},uiSchema:p,...u}=o,f=p["ui:options"]?.defaultNamespace,y=p["ui:options"]?.allowedKinds,T=p["ui:options"]?.catalogFilter||{kind:y||["Group","User"]},O={...p,"ui:options":{catalogFilter:T,defaultKind:"Group",allowArbitraryValues:p["ui:options"]?.allowArbitraryValues??!0,...f!==void 0?{defaultNamespace:f}:{}}};return(0,e.jsx)(r.q,{...u,schema:{title:g,description:i},uiSchema:O})}},7370:(et,m,t)=>{"use strict";t.d(m,{Ds:()=>mt,Mj:()=>nt,tW:()=>U,uk:()=>lt});var e=t(31085),r=t(77026),h=t(52262),c=t(94509),s=t(77125),o=t(58837),d=t(60882),g=t(72501),i=t(5893),p=t(79065),u=t(55704),f=t(62248),y=t(53373),T=t.n(y),O=t(14041),b=t(21613),B=t(18690),j=t(73657),N=t(31072),F=t(77366),D=t(76059),k=t(82775),G=t(64947);const I=S=>(0,o.A)(L=>({root:{color:L.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:S.drawerWidthClosed,justifyContent:"center"},open:{[L.breakpoints.up("sm")]:{width:S.drawerWidthOpen}},highlightable:{"&:hover":{background:L.palette.navigation.navItem?.hoverBackground??"#404040"}},highlighted:{background:L.palette.navigation.navItem?.hoverBackground??"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:S.iconContainerWidth,marginRight:-L.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:L.typography.fontWeightBold,fontSize:L.typography.fontSize},searchFieldHTMLInput:{padding:L.spacing(2,0,2)},searchContainer:{width:S.drawerWidthOpen-S.iconContainerWidth},secondaryAction:{width:L.spacing(6),textAlign:"center",marginRight:L.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:L.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${S.selectedIndicatorWidth}px ${L.palette.navigation.indicator}`,color:L.palette.navigation.selectedColor},"&$closed":{width:S.drawerWidthClosed},"& $closedItemIcon":{paddingRight:S.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-S.selectedIndicatorWidth}}}),{name:"BackstageSidebarItem"});function tt(S){return(0,O.useMemo)(()=>I(S),[S])()}const H=(S,L)=>(0,r.O)(S.props.children,$=>{let K=!1;return $.getElements().forEach(({props:{to:J,dropdownItems:ot}})=>{if(!K){if(ot?.length){ot.forEach(({to:At})=>K=K||(0,k.z)(L,(0,b.o1)(At)));return}J&&(K=(0,k.z)(L,(0,b.o1)(J)))}}),K},[L.pathname]);function V(S){return S.to===void 0}const q=(0,O.createElement)(D.O).type,it=(0,O.forwardRef)(function({to:L,end:$,style:K,className:J,activeStyle:ot,caseSensitive:At,activeClassName:X="active","aria-current":dt="page",...xt},$t){let{pathname:wt}=(0,B.zy)(),{pathname:_t}=(0,B.x$)(L);At||(wt=wt.toLocaleLowerCase("en-US"),_t=_t.toLocaleLowerCase("en-US"));let Ut=wt===_t;!Ut&&!$&&(Ut=wt.startsWith(`${_t}/`));const zt=Ut?dt:void 0;return(0,e.jsx)(j.N_,{...xt,to:L,ref:$t,"aria-current":zt,style:{...K,...Ut?ot:void 0},className:T()([typeof J!="function"?J:void 0,Ut?X:void 0])})}),ct=(0,O.forwardRef)((S,L)=>{const{icon:$,text:K,hasNotifications:J=!1,hasSubmenu:ot=!1,disableHighlight:At=!1,onClick:X,noTrack:dt,children:xt,className:$t,...wt}=S,{sidebarConfig:_t}=(0,O.useContext)(N.yY),Ut=tt(_t),{isOpen:zt}=(0,F.FS)(),Xt=!zt&&ot?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},se=(0,e.jsxs)(s.A,{style:Xt,children:[(0,e.jsx)($,{fontSize:"small"}),!zt&&ot?(0,e.jsx)(f.A,{fontSize:"small"}):(0,e.jsx)(e.Fragment,{})]}),re=(0,e.jsx)(c.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!J,className:T()({[Ut.closedItemIcon]:!zt}),children:se}),ce=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.A,{"data-testid":"login-button",className:Ut.iconContainer,children:re}),K&&(0,e.jsx)(g.A,{variant:"subtitle2",component:"span",className:Ut.label,children:K}),(0,e.jsx)("div",{className:Ut.secondaryAction,children:xt})]}),te=zt?ce:re,ie={onClick:X,className:T()($t,Ut.root,zt?Ut.open:Ut.closed,V(S)&&Ut.buttonItem,{[Ut.highlightable]:!At})},me=(0,h.s)(),{pathname:ee}=(0,B.x$)(!V(S)&&S.to?S.to:""),Wt=(0,O.useCallback)(jt=>{if(!dt){const pt="click",Y=K??"Sidebar Item",ft=ee?{attributes:{to:ee}}:void 0;me.captureEvent(pt,Y,ft)}X?.(jt)},[me,K,ee,dt,X]);return V(S)?(0,e.jsx)(G.A,{role:"button","aria-label":K,...ie,ref:L,onClick:Wt,children:te}):(0,e.jsx)(it,{...ie,activeClassName:Ut.selected,to:S.to?S.to:"",ref:L,"aria-label":K||S.to,...wt,onClick:Wt,children:te})}),Q=({children:S,...L})=>{const{sidebarConfig:$}=(0,O.useContext)(N.yY),K=tt($),[J,ot]=(0,O.useState)(!1),At=(0,B.zy)(),X=H(S,At),dt=(0,i.A)(_t=>_t.breakpoints.down("sm")),xt=()=>{ot(!0)},$t=()=>{ot(!1)},wt=()=>dt?J?(0,e.jsx)(u.A,{fontSize:"small",className:K.submenuArrow}):(0,e.jsx)(p.A,{fontSize:"small",className:K.submenuArrow}):!J&&(0,e.jsx)(f.A,{fontSize:"small",className:K.submenuArrow});return(0,e.jsx)(N.U1.Provider,{value:{isHoveredOn:J,setIsHoveredOn:ot},children:(0,e.jsxs)("div",{"data-testid":"item-with-submenu",onMouseLeave:$t,onTouchStart:J?$t:xt,onMouseEnter:xt,className:T()(J&&K.highlighted),children:[(0,e.jsx)(ct,{hasSubmenu:!0,className:X?K.selected:"",...L,children:wt()}),J&&S]})})},lt=(0,O.forwardRef)((S,L)=>{const[$]=(0,r.O)(S.children,K=>K.getElements().filter(J=>J.type===q));return $?(0,e.jsx)(Q,{...S,children:$}):(0,e.jsx)(ct,{...S,ref:L})});function st(S){const{sidebarConfig:L}=useContext(SidebarConfigContext),[$,K]=useState(""),J=tt(L),ot=S.icon?S.icon:Search,At=()=>{S.onSearch($),K("")},X=wt=>{wt.key==="Enter"&&(wt.preventDefault(),At())},dt=wt=>{K(wt.target.value)},xt=wt=>{wt.preventDefault(),wt.stopPropagation()},$t=wt=>{At(),wt.preventDefault()};return jsx(Box,{className:J.searchRoot,children:jsx(lt,{icon:ot,to:S.to,onClick:$t,disableHighlight:!0,children:jsx(TextField,{placeholder:"Search",value:$,onClick:xt,onChange:dt,onKeyDown:X,className:J.searchContainer,InputProps:{disableUnderline:!0,className:J.searchField},inputProps:{className:J.searchFieldHTMLInput}})})})}const mt=(0,d.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),rt=(0,d.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),nt=(0,d.A)("hr")(({theme:S})=>({height:1,width:"100%",background:"#383838",border:"none",margin:S.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),z=S=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:S.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:S.palette.text.secondary,borderRadius:"5px"}}),U=(0,d.A)("div")(({theme:S})=>{const L=z(S);return{flex:"0 1 auto",overflowX:"hidden",width:"100%",minHeight:"48px",overflowY:"hidden","@media (hover: none)":L,"&:hover":L}}),P=()=>{const{sidebarConfig:S}=useContext(SidebarConfigContext),L=tt(S),{isOpen:$,setOpen:K}=useSidebarOpenState();if(useMediaQuery(At=>At.breakpoints.down("md"),{noSsr:!0}))return null;const ot=()=>{K(!$)};return jsx(Button,{role:"button",onClick:ot,className:L.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button",children:jsx(Box,{className:L.arrows,children:$?jsx(DoubleArrowLeft,{}):jsx(DoubleArrowRight,{})})})}},7496:(et,m,t)=>{"use strict";t.d(m,{G:()=>u,H:()=>f});var e=t(31085),r=t(77125),h=t(58837),c=t(5893),s=t(14041),o=t(31072);const d={getSidebarPinState(){let y;try{y=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!y},setSidebarPinState(y){return window.localStorage.setItem("sidebarPinState",JSON.stringify(y))}};var g=t(65901);const i=(0,h.A)(y=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[y.breakpoints.up("sm")]:{paddingLeft:T=>T.isPinned?T.sidebarConfig.drawerWidthOpen:T.sidebarConfig.drawerWidthClosed},[y.breakpoints.down("xs")]:{paddingBottom:T=>T.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),p=(0,s.createContext)({content:{contentRef:void 0}});function u(y){const[T,O]=(0,s.useState)(()=>d.getSidebarPinState()),{sidebarConfig:b}=(0,s.useContext)(o.yY),B=(0,s.useRef)(null),j=(0,s.useMemo)(()=>({content:{contentRef:B}}),[B]);(0,s.useEffect)(()=>{d.setSidebarPinState(T)},[T]);const N=(0,c.A)(k=>k.breakpoints.down("xs"),{noSsr:!0}),F=()=>O(!T),D=i({isPinned:T,sidebarConfig:b});return(0,e.jsx)(g.qj,{value:{isPinned:T,toggleSidebarPinState:F,isMobile:N},children:(0,e.jsx)(p.Provider,{value:j,children:(0,e.jsx)(r.A,{className:D.root,children:y.children})})})}function f(){const{content:y}=(0,s.useContext)(p);return{focusContent:(0,s.useCallback)(()=>{y?.contentRef?.current?.focus()},[y]),contentRef:y?.contentRef}}},7793:(et,m,t)=>{"use strict";t.d(m,{t:()=>O});var e=t(31085),r=t(14041),h=t(73466),c=t(8380),s=t(29666);const o={isValidApiVersion:s.y.isValidApiVersion,isValidKind:s.y.isValidKind,isValidEntityName:s.y.isValidObjectName,isValidNamespace:s.y.isValidNamespace,isValidLabelKey:s.y.isValidLabelKey,isValidLabelValue:s.y.isValidLabelValue,isValidAnnotationKey:s.y.isValidAnnotationKey,isValidAnnotationValue:s.y.isValidAnnotationValue,isValidTag:b=>typeof b=="string"&&b.length>=1&&b.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(b)};function d(b={}){return{...o,...b}}var g=t(18139),i=t(30043),p=t(16249),u=t(61783),f=t(10265),y=t(30268),T=t(71135);const O=b=>{const{t:B}=(0,f.i)(y.W),{formData:j,onChange:N,schema:{title:F=B("fields.entityTagsPicker.title"),description:D=B("fields.entityTagsPicker.description")},uiSchema:k,rawErrors:G,required:I,errors:tt}=b,H=(0,g.gf)(i.v),[V,q]=(0,r.useState)([]),[it,ct]=(0,r.useState)(""),[Q,lt]=(0,r.useState)(!1),st=d().isValidTag,mt=k["ui:options"]?.kinds,rt=k["ui:options"]?.showCounts,nt=k["ui:options"]?.helperText,z=k?.["ui:disabled"]??!1,{loading:U,value:P}=(0,h.A)(async()=>{const L="metadata.tags",$={facets:[L]};mt&&($.filter={kind:mt});const{facets:K}=await H.getEntityFacets($),J=Object.fromEntries(K[L].map(({value:ot,count:At})=>[ot,At]));return q(Object.keys(J).sort((ot,At)=>rt?J[At]-J[ot]:ot.localeCompare(At))),J}),S=(L,$)=>{let K=!1,J=!1;const ot=j||[];if($?.length&&ot.length<$.length){const At=$[$.length-1]=$[$.length-1].toLocaleLowerCase("en-US").trim();K=!st(At),J=ot.indexOf(At)!==-1}lt(K),ct(K?it:""),!K&&!J&&N($||[])};return(0,c.A)(()=>N(j||[])),(0,e.jsx)(T.g,{rawErrors:G,rawDescription:nt??k["ui:description"]??D,required:I,disabled:z,errors:tt,children:(0,e.jsx)(u.Ay,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:S,disabled:z,value:j||[],inputValue:it,loading:U,options:V,ChipProps:{size:"small"},renderOption:L=>rt?`${L} (${P?.[L]})`:L,renderInput:L=>(0,e.jsx)(p.A,{...L,label:F,disabled:z,onChange:$=>ct($.target.value),error:Q,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}}})})})}},8886:(et,m,t)=>{"use strict";t.d(m,{u:()=>h});var e=t(81308);const h=(0,e._)({output:c=>c.array(c.string()),uiOptions:c=>c.object({kinds:c.array(c.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:c.boolean().optional().describe("Whether to show usage counts per tag"),helperText:c.string().optional().describe("Helper text to display; DEPRECATED, simply use ui:description")})}).schema},9176:(et,m,t)=>{"use strict";t.d(m,{n:()=>u});var e=t(31085),r=t(14041),h=t(60083),c=t(87437),s=t(10265),o=t(92469),d=t(1048).Buffer;const g=f=>d.from(f.toString(),"utf-8").toString("base64"),i=f=>f?Number(d.from(f,"base64").toString("utf-8")):0,p=f=>{const{t:y}=(0,s.i)(o._),{total:T=-1,cursor:O,hasNextPage:b,onCursorChange:B,limit:j=25,limitLabel:N=y("searchPagination.limitLabel"),limitText:F=({from:V,to:q})=>T>0?y("searchPagination.limitText",{num:`${T}`}):`${V}-${q}`,limitOptions:D,onLimitChange:k,...G}=f,I=(0,r.useMemo)(()=>i(O),[O]),tt=(0,r.useCallback)((V,q)=>{B?.(g(q))},[B]),H=(0,r.useCallback)(V=>{const q=V.target.value;k?.(parseInt(q,10))},[k]);return(0,e.jsx)(h.A,{...G,component:"div",count:T,page:I,nextIconButtonProps:{...b!==void 0&&{disabled:!b}},onPageChange:tt,rowsPerPage:j,labelRowsPerPage:N,labelDisplayedRows:F,rowsPerPageOptions:D,onRowsPerPageChange:H})},u=f=>{const{pageLimit:y,setPageLimit:T,pageCursor:O,setPageCursor:b,fetchNextPage:B}=(0,c.SQ)(),j=(0,r.useCallback)(N=>{T(N),b(void 0)},[T,b]);return(0,e.jsx)(p,{...f,hasNextPage:!!B,limit:y,onLimitChange:j,cursor:O,onCursorChange:b})}},9739:(et,m,t)=>{"use strict";t.d(m,{F:()=>f});var e=t(31085),r=t(97214),h=t(18139),c=t(94223),s=t(16249),o=t(61783),d=t(73466),g=t(17875),i=t(10265),p=t(30268),u=t(71135);const f=O=>{const{t:b}=(0,i.i)(p.W),{schema:{title:B=b("fields.ownedEntityPicker.title"),description:j=b("fields.ownedEntityPicker.description")},uiSchema:N,required:F}=O,D=(0,h.gf)(c.K),{loading:k,value:G}=(0,d.A)(async()=>(await D.getBackstageIdentity()).ownershipEntityRefs);if(k)return(0,e.jsx)(u.g,{rawDescription:N["ui:description"]??j,required:F,disabled:N["ui:disabled"],children:(0,e.jsx)(o.Ay,{loading:k,renderInput:tt=>(0,e.jsx)(s.A,{...tt,label:B,margin:"dense",FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:F,InputProps:tt.InputProps}),options:[]})});const I=y(N,G);return(0,e.jsx)(g.q,{...O,uiSchema:I})};function y(O,b){const B=O?.["ui:options"]||{},{allowedKinds:j,...N}=B,F=T(B.catalogFilter).map(D=>({...D,...j?{kind:j}:{},[`relations.${r.vv}`]:b||[]}));return{"ui:options":{...N,catalogFilter:F}}}function T(O){return O?Array.isArray(O)?O:[O]:[{}]}},9974:(et,m,t)=>{"use strict";t.d(m,{a:()=>r});var e=t(28967);const r=(0,e.y)({id:"catalog-react.starred-entities"})},10102:(et,m,t)=>{"use strict";t.d(m,{$6:()=>H});var e=t(31085),r=t(14041),h=t(45250),c=t(20938),s=t(95061),o=t(86901),d=t(69076),g=t(91761),i=t(58837),p=t(81252),u=t(87437),f=t(67720),y=t(16249),T=t(61783),O=t(87290),b=t(22771);function B(V){if(V!==void 0)return Array.isArray(V)?V.map(q=>B(q)):typeof V=="string"?{value:V,label:V}:V}const j=(V,q,it=[],ct=250)=>{const Q=(0,r.useRef)({}),lt=(0,r.useCallback)(async nt=>(await V?.(nt))?.map(z=>B(z))||[],[V]),[st,mt]=(0,O.A)(lt,[q],{loading:!0});if((0,b.A)(()=>{Q.current[q]===void 0&&(Q.current[q]=mt(q).then(nt=>(Q.current[q]=nt,nt)))},ct,[mt,q]),it.length)return{loading:!1,value:it};const rt=Q.current[q];return Array.isArray(rt)?{loading:!1,value:rt}:st},N=(V,q)=>{const{setFilters:it}=(0,u.SQ)();(0,r.useEffect)(()=>{q&&[q].flat().length>0&&it(ct=>({...ct,[V]:q}))},[])},F=V=>{const{className:q,defaultValue:it,name:ct,values:Q,valuesDebounceMs:lt,label:st,filterSelectedOptions:mt,limitTags:rt,multiple:nt}=V,[z,U]=(0,r.useState)("");N(ct,it);const P=typeof Q=="function"?Q:void 0,S=typeof Q=="function"?void 0:Q?.map($t=>B($t)),{value:L,loading:$}=j(P,z,S,lt),{filters:K,setFilters:J}=(0,u.SQ)(),ot=B(K[ct]),At=(0,r.useMemo)(()=>ot||(nt?[]:null),[ot,nt]),X=($t,wt)=>{J(_t=>{const{[ct]:Ut,...zt}=_t;return wt?{...zt,[ct]:Array.isArray(wt)?wt.map(Xt=>Xt.value):wt.value}:{...zt}})},dt=$t=>(0,e.jsx)(y.A,{...$t,name:"search",variant:"outlined",label:st,fullWidth:!0}),xt=($t,wt)=>$t.map((_t,Ut)=>(0,e.jsx)(f.A,{label:_t.label,color:"primary",...wt({index:Ut})}));return(0,e.jsx)(T.Ay,{filterSelectedOptions:mt,limitTags:rt,multiple:nt,className:q,id:`${nt?"multi-":""}select-filter-${ct}--select`,options:L||[],loading:$,value:At,onChange:X,onInputChange:($t,wt)=>U(wt),getOptionLabel:$t=>$t.label,renderInput:dt,renderTags:xt})};var D=t(10265),k=t(92469);const G=(0,i.A)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),I=V=>{const{className:q,defaultValue:it,label:ct,name:Q,values:lt=[],valuesDebounceMs:st}=V,mt=G(),{filters:rt,setFilters:nt}=(0,u.SQ)();N(Q,it);const z=typeof lt=="function"?lt:void 0,U=typeof lt=="function"?void 0:lt.map($=>B($)),{value:P=[],loading:S}=j(z,"",U,st),L=$=>{const{target:{value:K,checked:J}}=$;nt(ot=>{const{[Q]:At,...X}=ot,dt=(At||[]).filter($t=>$t!==K),xt=J?[...dt,K]:dt;return xt.length?{...X,[Q]:xt}:X})};return(0,e.jsxs)(s.A,{className:q,disabled:S,fullWidth:!0,"data-testid":"search-checkboxfilter-next",children:[!!ct&&(0,e.jsx)(g.A,{className:mt.label,children:ct}),P.map(({value:$,label:K})=>(0,e.jsx)(o.A,{classes:{root:mt.checkboxWrapper,label:mt.textWrapper},label:K,control:(0,e.jsx)(d.A,{color:"primary",inputProps:{"aria-labelledby":K},value:$,name:K,onChange:L,checked:(rt[Q]??[]).includes($)})},$))]})},tt=V=>{const{className:q,defaultValue:it,label:ct,name:Q,values:lt,valuesDebounceMs:st}=V,{t:mt}=(0,D.i)(k._);N(Q,it);const rt=typeof lt=="function"?lt:void 0,nt=typeof lt=="function"?void 0:lt?.map(ot=>B(ot)),{value:z=[],loading:U}=j(rt,"",nt,st),P=(0,r.useRef)((0,c.A)()),S={value:P.current,label:mt("searchFilter.allOptionTitle")},{filters:L,setFilters:$}=(0,u.SQ)(),K=ot=>{$(At=>{const{[Q]:X,...dt}=At;return ot!==P.current?{...dt,[Q]:ot}:dt})},J=[S,...z];return(0,e.jsx)(s.A,{disabled:U,className:q,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next",children:(0,e.jsx)(p.w,{label:ct??(0,h.capitalize)(Q),selected:L[Q]||P.current,onChange:K,items:J})})},H=V=>{const{component:q,...it}=V;return(0,e.jsx)(q,{...it})};H.Checkbox=V=>(0,e.jsx)(H,{...V,component:I}),H.Select=V=>(0,e.jsx)(H,{...V,component:tt}),H.Autocomplete=V=>(0,e.jsx)(H,{...V,component:F})},10265:(et,m,t)=>{"use strict";t.d(m,{i:()=>o});var e=t(14041),r=t(18139),h=t(24453),c=t(87350);const s=new WeakSet,o=d=>{const g=(0,r.gf)(h.m),i=(0,r.gf)(c.J),[p,u]=(0,e.useState)(()=>i.getTranslation(d)),f=(0,e.useMemo)(()=>i.translation$(d),[i,d]),y=(0,e.useCallback)(O=>{if(!s.has(d)){const b=`Failed to load translation resource '${d.id}'; caused by ${O}`;console.error(b),g.post(new Error(b)),s.add(d)}},[g,d]);(0,e.useEffect)(()=>{const O=f.subscribe({next(b){b.ready&&u(b)},error(b){y(b)}});return()=>{O.unsubscribe()}},[f,y]);const T=(0,e.useRef)(!0);if((0,e.useEffect)(()=>{T.current?T.current=!1:u(i.getTranslation(d))},[i,d]),!p.ready)throw new Promise(O=>{const b=f.subscribe({next(B){B.ready&&(b.unsubscribe(),O())},error(B){b.unsubscribe(),y(B),O()}})});return{t:p.t}}},10543:(et,m,t)=>{"use strict";t.d(m,{C4:()=>c,Nf:()=>s,tS:()=>o});function e({name:y,attributes:T,resourceType:O}){return O?{type:"resource",name:y,attributes:T,resourceType:O}:{type:"basic",name:y,attributes:T}}const r="catalog-entity",h=e({name:"catalog.entity.read",attributes:{action:"read"},resourceType:r}),c=e({name:"catalog.entity.create",attributes:{action:"create"}}),s=e({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:r}),o=e({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:r}),d=e({name:"catalog.entity.validate",attributes:{}}),g=e({name:"catalog.location.read",attributes:{action:"read"}}),i=e({name:"catalog.location.create",attributes:{action:"create"}}),p=e({name:"catalog.location.analyze",attributes:{}}),u=e({name:"catalog.location.delete",attributes:{action:"delete"}}),f=[h,c,s,o,d,g,i,u,p]},10762:(et,m,t)=>{const r=document.querySelector('meta[name="backstage-public-path"]')?.getAttribute("content");r&&(t.p=r)},11235:(et,m,t)=>{"use strict";t.d(m,{$:()=>r});var e=t(97963);const r=(0,e.h)({id:"search",messages:{searchModal:{viewFullResults:"View Full Results"},searchType:{allResults:"All Results",tabs:{allTitle:"All"},accordion:{allTitle:"All",collapse:"Collapse",numberOfResults:"{{number}} results"}},sidebarSearchModal:{title:"Search"}}})},11618:(et,m,t)=>{"use strict";t.d(m,{AF:()=>g,Hr:()=>u,Wm:()=>d,YR:()=>O,po:()=>i});var e=t(31085),r=t(14041),h=t(18690),c=t(85408),s=t(18050),o=t(77026);const d="techdocs.addons.addon.v1",g="techdocs.addons.wrapper.v1",i=()=>null;(0,c.h)(i,g,!0);const p=b=>`${d}.${b.toLocaleLowerCase("en-US")}`;function u(b){const{name:B,component:j}=b;return(0,s.zZ)({name:B,component:{sync:N=>(0,e.jsx)(j,{...N})},data:{[d]:b,[p(B)]:!0}})}const f=(b,B)=>b.selectByComponentData({key:B}).getElements()[0],y=b=>b.selectByComponentData({key:g}).selectByComponentData({key:d}),T=b=>b.selectByComponentData({key:g}).findComponentData({key:d}),O=()=>{const b=(0,h.P1)(),B=(0,o.O)(b,y),j=(0,o.O)(b,T),N=(0,r.useCallback)(k=>{if(!B||!k)return null;const G=p(k.name);return f(B,G)??null},[B]),F=(0,r.useCallback)(k=>{const G=j.find(I=>I.name===k);return G?N(G):null},[j,N]),D=(0,r.useCallback)(k=>{const G=j.filter(I=>I.location===k);return G.length?G.map(N):null},[j,N]);return{renderComponentByName:F,renderComponentsByLocation:D}}},11835:(et,m,t)=>{"use strict";t.r(m),t.d(m,{Router:()=>Kt,isKubernetesAvailable:()=>Rt});var e=t(31085),r=t(16400),h=t(32293),c=t(18690),s=t(42899),o=t(72501),d=t(14041),g=t(45313),i=t(18139);const p=async(a,E,C)=>{const w=await E.getClusters(),gt=[...new Set(w.map(It=>`${It.authProvider}${It.oidcTokenProvider?`.${It.oidcTokenProvider}`:""}`))];let Ct={entity:a};for(const It of gt)Ct=await C.decorateRequestBodyForAuth(It,Ct);return Ct.auth??{}};var u=t(28966),f=t(35625),y=t(70984);const T=(a,E=1e4)=>{const C=(0,i.gf)(y.Y1),w=(0,i.gf)(f.g),gt=(0,d.useCallback)(async()=>{const de=await p(a,C,w);return await C.getObjectsByEntity({auth:de,entity:a})},[C,a,w]),{value:Ct,loading:It,error:Zt,retry:ne}=(0,u.A)(()=>gt(),[gt]);return(0,g.A)(()=>ne(),E),{kubernetesObjects:Ct,loading:It,error:Zt?.message}},O=(0,d.createContext)([]),b=a=>{const E={name:a.metadata?.name??"",namespace:a.metadata?.namespace??"",kind:a.kind,apiGroup:a.apiVersion};return(0,d.useContext)(O).filter(w=>{const gt=w.sourceRef;return E.apiGroup===gt.apiGroup&&E.kind===gt.kind&&E.name===gt.name&&E.namespace===gt.namespace})};var B=t(99338);const j=a=>a.map((E,C)=>(0,e.jsxs)("div",{children:[(0,e.jsx)(o.A,{variant:"body2",children:`Cluster: ${E.cluster.title||E.cluster.name}`}),E.errors.map((w,gt)=>(0,e.jsx)(o.A,{variant:"body2",children:w.errorType==="FETCH_ERROR"?`Error communicating with Kubernetes: ${w.errorType}, message: ${w.message}`:`Error fetching Kubernetes resource: '${w.resourcePath}', error: ${w.errorType}, status code: ${w.statusCode}`},gt)),(0,e.jsx)("br",{})]},C)),N=({entityName:a,errorMessage:E,clustersWithErrors:C})=>(0,e.jsxs)(B.B,{title:"There was a problem retrieving Kubernetes objects",message:`There was a problem retrieving some Kubernetes resources for the entity: ${a}. This could mean that the Error Reporting card is not completely accurate.`,children:[C&&(0,e.jsxs)("div",{children:["Errors: ",j(C)]}),E&&(0,e.jsxs)(o.A,{variant:"body2",children:["Errors: ",E]})]});var F=t(29021);const D=[{title:"cluster",width:"10%",render:a=>a.cluster.title||a.cluster.name},{title:"namespace",width:"10%",render:a=>a.error.sourceRef.namespace},{title:"kind",width:"10%",render:a=>a.error.sourceRef.kind},{title:"name",width:"30%",render:a=>(0,e.jsxs)(e.Fragment,{children:[a.error.sourceRef.name," "]})},{title:"messages",width:"40%",render:a=>a.error.message}],k=(a,E)=>a.error.severity<E.error.severity?1:E.error.severity<a.error.severity?-1:0,G=({detectedErrors:a,clusters:E})=>{const C=Array.from(a.entries()).flatMap(([w,gt])=>gt.map(Ct=>({cluster:E.find(It=>It.name===w),error:Ct}))).sort(k);return(0,e.jsx)(e.Fragment,{children:C.length!==0&&(0,e.jsx)(F.X,{title:"Error Reporting",data:C,columns:D,options:{paging:!0,search:!1,emptyRowsWhenPaging:!1}})})};var I=t(8973),tt=t(91567),H=t(29655);const V=a=>a.reduce((E,C)=>{switch(C.type){case"deployments":E.deployments.push(...C.resources);break;case"pods":E.pods.push(...C.resources);break;case"replicasets":E.replicaSets.push(...C.resources);break;case"services":E.services.push(...C.resources);break;case"configmaps":E.configMaps.push(...C.resources);break;case"horizontalpodautoscalers":E.horizontalPodAutoscalers.push(...C.resources);break;case"ingresses":E.ingresses.push(...C.resources);break;case"jobs":E.jobs.push(...C.resources);break;case"cronjobs":E.cronJobs.push(...C.resources);break;case"customresources":E.customResources.push(...C.resources);break;case"statefulsets":E.statefulsets.push(...C.resources);break;case"daemonsets":E.daemonSets.push(...C.resources);break}return E},{pods:[],replicaSets:[],deployments:[],services:[],configMaps:[],horizontalPodAutoscalers:[],ingresses:[],jobs:[],cronJobs:[],customResources:[],statefulsets:[],daemonSets:[]});var q=t(6924),it=t(25673),ct=t(52950);const Q=(0,d.createContext)(new Set),lt=(0,d.createContext)({pods:[],replicaSets:[],deployments:[],daemonSets:[],services:[],configMaps:[],horizontalPodAutoscalers:[],ingresses:[],jobs:[],cronJobs:[],customResources:[],statefulsets:[]});var st=t(17174),mt=t(58837),rt=t(99703),nt=t(67562),z=t(40703),U=t(59469),P=t(48653),S=t(45685),L=t(54195);const $=()=>(0,i.gf)(L.U).getOptionalBoolean("kubernetes.podExecTerminal.enabled"),K=(a,E)=>{if(Number(E)===0)return 0;if(typeof a=="number"&&typeof E=="number")return Math.round(a/E*100);const C=BigInt(typeof a=="number"?Math.round(a):Number(a)),w=BigInt(typeof E=="number"?Math.round(E):Number(E));return Number(C*BigInt(100)/w)},J=a=>`${(parseFloat(a.toString())/1024/1024).toFixed(0)}MiB`,ot=a=>`${(parseFloat(a.toString())*1e3).toFixed(0)}m`;var At=t(11620),X=t(64947),dt=t(76891),xt=t(46805),$t=t(61477),wt=t(29365),_t=t(32881);const Ut=(0,mt.A)(a=>(0,rt.A)({dialogPaper:{minHeight:"calc(100% - 64px)"},dialogContent:{flexBasis:0},closeButton:{position:"absolute",right:a.spacing(1),top:a.spacing(1),color:a.palette.grey[500]}})),zt=({buttonAriaLabel:a,buttonIcon:E,buttonText:C,children:w,disabled:gt,title:Ct})=>{const It=Ut(),[Zt,ne]=(0,d.useState)(!1),de=()=>{ne(!0)},ye=()=>{ne(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(dt.A,{maxWidth:"xl",fullWidth:!0,open:Zt,onClose:ye,PaperProps:{className:It.dialogPaper},children:[(0,e.jsxs)($t.A,{id:"dialog-title",children:[Ct,(0,e.jsx)(wt.A,{"aria-label":"close",className:It.closeButton,onClick:ye,children:(0,e.jsx)(_t.A,{})})]}),(0,e.jsx)(xt.A,{className:It.dialogContent,children:w})]}),(0,e.jsx)(X.A,{variant:"outlined","aria-label":a,component:"label",disabled:gt,onClick:de,startIcon:E,children:C})]})};var Xt=t(73466);const se=()=>{const a=(0,i.gf)(y.Y1);return(0,Xt.A)(async()=>{const E=await a.getClusters();if(E.length!==1)return!1;const{authProvider:C}=E[0];return!["aks","google","oidc"].some(gt=>C.includes(gt))})};var re=t(61617),ce=t(84594),te=t(34462),ie=t(65714);class me extends ie.AttachAddon{#t=new TextEncoder;constructor(E,C){super(E,C);const w=this;w._sendBinary=gt=>{if(!w._checkOpenSocket())return;const Ct=Uint8Array.from([0,...this.#t.encode(gt)]);w._socket.send(Ct)},w._sendData=gt=>{w._checkOpenSocket()&&w._sendBinary(gt)}}}const ee=a=>/wss?:\/\//.test(a.toString()),Wt=(0,mt.A)(a=>(0,rt.A)({podExecTerminal:{width:"100%",height:"100%","& .xterm-screen":{padding:a.spacing(1)}}})),jt=a=>{const E=Wt(),{containerName:C,podNamespace:w,podName:gt}=a,[Ct,It]=(0,d.useState)(window.location.host),Zt=(0,d.useRef)(null),ne=(0,i.gf)(re.I),de=w??"default";(0,d.useEffect)(()=>{ne.getBaseUrl("kubernetes").then(Se=>Se??window.location.host).then(Se=>Se.replace(/^http(s?):\/\//,"ws$1://")).then(Se=>It(Se))},[ne]);const ye=(0,d.useMemo)(()=>new URLSearchParams({container:C,stdin:"true",stdout:"true",stderr:"true",tty:"true",command:"/bin/sh"}),[C]),Be=(0,d.useMemo)(()=>ee(Ct)?new URL(`${Ct}/proxy/api/v1/namespaces/${de}/pods/${gt}/exec?${ye}`):"",[Ct,de,gt,ye]);return(0,d.useEffect)(()=>{if(!ee(Be))return()=>{};const Se=new ce.Terminal,$n=new te.FitAddon;Se.loadAddon($n),Zt.current&&(Se.open(Zt.current),$n.fit()),Se.writeln("Starting terminal, please wait...");const hn=new WebSocket(Be,["channel.k8s.io"]);return hn.onopen=()=>{Se.clear();const pn=new me(hn,{bidirectional:!0});Se.loadAddon(pn)},hn.onclose=()=>{Se.writeln("Socket connection closed")},()=>{Se?.clear(),hn?.close()}},[Ct,Be]),(0,e.jsx)("div",{"data-testid":"terminal",ref:Zt,className:E.podExecTerminal})},pt=a=>{const{cluster:E,containerName:C,podName:w}=a,gt=se();return!gt.loading&&gt.value&&(0,e.jsx)(zt,{buttonAriaLabel:"open terminal",buttonIcon:(0,e.jsx)(At.A,{}),buttonText:"Terminal",disabled:gt.loading||!gt.value,title:`${w} - ${C} terminal shell on cluster ${E.title||E.name}`,children:(0,e.jsx)(jt,{...a})})};var Y=t(54917),ft=t(71677),Tt=t(12528),Lt=t(53373),St=t.n(Lt);const Ht=(0,mt.A)(a=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:a.typography.pxToRem(45),fontWeight:a.typography.fontWeightBold,color:a.palette.textContrast},overlaySmall:{fontSize:a.typography.pxToRem(25)},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),kt={fractional:!0,inverse:!1,unit:"%",max:100,relativeToMax:!1},Dt=({palette:a,value:E,inverse:C,max:w})=>{if(isNaN(E))return"#ddd";const gt=w||kt.max,Ct=C?gt-E:E;return Ct<gt/3?a.status.error:Ct<gt*(2/3)?a.status.warning:a.status.ok};function Ft(a){const[E,C]=useState(null),{getColor:w=Dt,size:gt="normal"}=a,Ct=Ht(a),{palette:It}=useTheme(),{value:Zt,fractional:ne,inverse:de,unit:ye,max:Be,description:Se,relativeToMax:$n,decimalDigits:hn}={...kt,...a};let pn;$n?pn=Zt/Be*100:pn=ne?Math.round(Zt*Be):Zt;let Ls;$n?Ls=Zt:Ls=Be!==100?Math.round(Zt):pn;const Sr=hn===void 0?Ls.toString():Ls.toFixed(hn),[br,Ar]=useState(!1);return useEffect(()=>{const fs=E,Or=()=>Ar(!0),Rr=()=>Ar(!1);return fs&&Se?(fs.addEventListener("mouseenter",Or),fs.addEventListener("mouseleave",Rr),()=>{fs.removeEventListener("mouseenter",Or),fs.removeEventListener("mouseleave",Rr)}):()=>{Ar(!1)}},[Se,E]),jsxs(Box,{ref:C,className:Ct.root,children:[jsx(Circle,{strokeLinecap:"butt",percent:pn,strokeWidth:12,trailWidth:12,strokeColor:w({palette:It,value:pn,inverse:de,max:$n?100:Be}),className:Ct.circle}),Se&&br?jsx(Box,{className:Ct.description,children:Se}):jsx(Box,{className:classNames(Ct.overlay,{[Ct.overlaySmall]:gt==="small"}),children:isNaN(Zt)?"N/A":`${Sr}${ye}`})]})}function Yt(a){const{value:E,getColor:C=Dt,width:w="thick"}=a,{palette:gt}=(0,Y.A)();if(isNaN(E))return null;let Ct=Math.round(E*100*100)/100;Ct>100&&(Ct=100);const It=w==="thick"?4:1,Zt=C({palette:gt,value:Ct,inverse:!1,max:100});return(0,e.jsx)(ft.Ay,{title:`${Ct}%`,children:(0,e.jsx)(o.A,{component:"span",children:(0,e.jsx)(Tt.N1,{percent:Ct,strokeWidth:It,trailWidth:It,strokeColor:Zt})})})}const Et=({palette:a,value:E,inverse:C,max:w})=>{if(isNaN(E))return a.status.pending;const gt=w||100,Ct=C?gt-E:E;return Ct>=gt?a.status.error:Ct>90||Ct<40?a.status.warning:a.status.ok},at=({compressed:a=!1,title:E,usage:C,total:w,totalFormatted:gt})=>{const Ct=K(C,w);return(0,e.jsxs)(s.A,{container:!0,spacing:0,children:[(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(o.A,{variant:a?"caption":"subtitle2",children:`${E}: ${gt}`})}),(0,e.jsxs)(s.A,{item:!0,xs:12,children:[(0,e.jsx)(Yt,{getColor:Et,width:a?"thin":"thick",value:Ct/100}),!a&&(0,e.jsxs)(o.A,{variant:"caption",children:["usage: ",`${Ct}%`]})]})]})};var yt=t(20473),Ot=t(83392),bt=t(11746),Mt=t(38097),W=t(78149);const x=(0,mt.A)(a=>({root:{padding:a.spacing(0),marginBottom:a.spacing(0),marginTop:a.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:a.spacing(6),marginTop:-a.spacing(3),zIndex:"unset"},icon:{fontSize:a.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:a.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:a.palette.banner.link}},button:{color:a.palette.banner.closeButtonColor??"inherit"},info:{backgroundColor:a.palette.banner.info},error:{backgroundColor:a.palette.banner.error},warning:{backgroundColor:a.palette.banner.warning??a.palette.banner.error}}),{name:"BackstageDismissableBanner"}),M=a=>{const{variant:E,message:C,id:w,fixed:gt=!1}=a,Ct=x(),Zt=(0,i.gf)(Ot.F).forBucket("notifications"),ne=(0,bt.A)(Zt.observe$("dismissedBanners"),Zt.snapshot("dismissedBanners")),de=(0,d.useMemo)(()=>new Set(ne.value??[]),[ne.value]),ye=ne.presence==="unknown",Be=()=>{Zt.set("dismissedBanners",[...de,w])};return(0,e.jsx)(Mt.A,{anchorOrigin:gt?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!ye&&!de.has(w),classes:{root:St()(Ct.root,!gt&&Ct.topPosition)},children:(0,e.jsx)(W.A,{classes:{root:St()(Ct.content,Ct[E]),message:Ct.message},message:C,action:[(0,e.jsx)(wt.A,{title:"Permanently dismiss this message",className:Ct.button,onClick:Be,children:(0,e.jsx)(_t.A,{className:Ct.icon})},"dismiss")]})})};var _=t(65995),Pt=t(67296),Bt=t(4321),Vt=t(4387);const Gt=({containerScope:a,previous:E})=>{const C=(0,i.gf)(y.uv);return(0,Xt.A)(async()=>await C.getPodLogs({podName:a.podName,namespace:a.podNamespace,containerName:a.containerName,clusterName:a.cluster.name,previous:E}),[JSON.stringify(a)])},pe=({containerScope:a,previous:E})=>{const{value:C,error:w,loading:gt}=Gt({containerScope:a,previous:E});return(0,e.jsxs)(e.Fragment,{children:[w&&(0,e.jsx)(M,{message:w.message,variant:"error",fixed:!1,id:"pod-logs"}),(0,e.jsxs)(Bt.A,{elevation:1,style:{height:"100%",width:"100%",minHeight:"55rem"},children:[gt&&(0,e.jsx)(Vt.A,{variant:"rect",width:"100%",height:"100%"}),!gt&&C!==void 0&&(C.text===""?(0,e.jsx)(_.p,{missing:"data",title:"No logs emitted",description:"No logs were emitted by the container"}):(0,e.jsx)(Pt.r,{text:C.text}))]})]})},fe=({containerScope:a})=>(0,e.jsx)(zt,{buttonAriaLabel:"get logs",buttonIcon:(0,e.jsx)(yt.A,{}),buttonText:"Logs",disabled:!1,title:`${a.podName} - ${a.containerName} logs on cluster ${a.cluster.title||a.cluster.name}`,children:(0,e.jsx)(pe,{containerScope:a})}),Pe=(a,E)=>{const C={"not waiting to start":E.state?.waiting===void 0,"no restarts":E.restartCount===0};return E.state?.terminated?.reason==="Completed"||(Object.assign(C,{started:!!E.started},{ready:E.ready},{"readiness probe set":a?.readinessProbe!==void 0}),a&&a?.livenessProbe!==void 0&&Object.assign(C,{"liveness probe set":a.livenessProbe})),C},Fe=a=>a.state?.waiting?.reason||a.state?.terminated?.reason||(a.state?.running!==void 0?"Running":"Unknown"),De=a=>a.state?.running?.startedAt||a.state?.terminated?.startedAt,be=({prefix:a,dateTime:E})=>(0,e.jsxs)(o.A,{variant:"subtitle2",children:[a,":"," ",ct.c9.fromISO(E).toRelative({locale:"en"})]}),Ie=({podScope:a,containerSpec:E,containerStatus:C,containerMetrics:w})=>{const gt=$();if(E===void 0)return(0,e.jsx)(o.A,{children:"error reading pod from cluster"});const Ct=De(C),It=C.state?.terminated?.finishedAt;return(0,e.jsxs)(z.A,{children:[(0,e.jsx)(S.A,{title:C.name,subheader:C.image}),(0,e.jsx)(P.A,{children:(0,e.jsxs)(s.A,{container:!0,children:[(0,e.jsxs)(s.A,{item:!0,xs:12,children:[Ct&&(0,e.jsx)(be,{prefix:"Started",dateTime:Ct}),It&&(0,e.jsx)(be,{prefix:"Completed",dateTime:It}),Ct&&It&&(0,e.jsxs)(o.A,{variant:"subtitle2",children:["Execution time:"," ",ct.c9.fromISO(It).diff(ct.c9.fromISO(Ct),["hours","minutes","seconds"]).toHuman()]})]}),(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["Status: ",Fe(C)]})}),C.restartCount>0&&(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["Restarts: ",C.restartCount]})}),(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(o.A,{variant:"subtitle2",children:"Container health"})}),(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(nt.t,{metadata:Pe(E,C),options:{nestedValuesAsYaml:!0}})}),w&&(0,e.jsxs)(s.A,{container:!0,item:!0,xs:12,spacing:0,children:[(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(o.A,{variant:"subtitle1",children:"Resource utilization"})}),(0,e.jsxs)(s.A,{item:!0,xs:12,style:{minHeight:"5rem"},children:[(0,e.jsx)(at,{compressed:!0,title:"CPU requests",usage:w.cpuUsage.currentUsage,total:w.cpuUsage.requestTotal,totalFormatted:ot(w.cpuUsage.requestTotal)}),(0,e.jsx)(at,{compressed:!0,title:"CPU limits",usage:w.cpuUsage.currentUsage,total:w.cpuUsage.limitTotal,totalFormatted:ot(w.cpuUsage.limitTotal)}),(0,e.jsx)(at,{compressed:!0,title:"Memory requests",usage:w.memoryUsage.currentUsage,total:w.memoryUsage.requestTotal,totalFormatted:J(w.memoryUsage.requestTotal)}),(0,e.jsx)(at,{compressed:!0,title:"Memory limits",usage:w.memoryUsage.currentUsage,total:w.memoryUsage.limitTotal,totalFormatted:J(w.memoryUsage.limitTotal)})]})]})]})}),(0,e.jsxs)(U.A,{children:[(0,e.jsx)(fe,{containerScope:{containerName:C.name,...a}}),gt&&(0,e.jsx)(pt,{cluster:a.cluster,containerName:C.name,podName:a.podName,podNamespace:a.podNamespace})]})]})};var we=t(73845),ke=t(73643),Ge=t(86901),je=t(7031),_e=t(62112),gn=t(9911);const mn=({object:a})=>{const[E,C]=(0,d.useState)(!1);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ge.A,{control:(0,e.jsx)(ke.A,{checked:E,onChange:w=>{C(w.target.checked)},name:"Managed Fields"}),label:"Managed Fields"}),(0,e.jsx)(_e.z,{language:"yaml",text:gn.Ay.dump(a,{replacer:(w,gt)=>E?gt:w==="managedFields"?void 0:gt})})]})},fn=(0,mt.A)(a=>(0,rt.A)({header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},content:{height:"80%"},icon:{fontSize:20}})),Nn=({children:a,header:E,kubernetesObject:C,close:w})=>{const gt=fn(),[Ct,It]=(0,d.useState)(!1);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:gt.header,children:(0,e.jsxs)(s.A,{container:!0,justifyContent:"flex-start",alignItems:"flex-start",children:[(0,e.jsx)(s.A,{item:!0,xs:11,children:(0,e.jsx)(o.A,{variant:"h5",children:C.metadata?.name})}),(0,e.jsx)(s.A,{item:!0,xs:1,children:(0,e.jsx)(wt.A,{title:"Close the drawer",onClick:()=>w(),color:"inherit",children:(0,e.jsx)(_t.A,{className:gt.icon})},"dismiss")}),(0,e.jsx)(s.A,{item:!0,xs:12,children:E}),(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(Ge.A,{control:(0,e.jsx)(ke.A,{checked:Ct,onChange:Zt=>{It(Zt.target.checked)},name:"YAML"}),label:"YAML"})})]})}),(0,e.jsxs)("div",{className:gt.content,children:[Ct&&(0,e.jsx)(mn,{object:C}),!Ct&&a]})]})},yn=(0,mt.A)(a=>(0,rt.A)({paper:{width:"50%",justifyContent:"space-between",padding:a.spacing(2.5)}})),Wn=(0,je.A)({root:{padding:"6px 5px"},label:{textTransform:"none"}})(X.A),Kn=({open:a,label:E,drawerContentsHeader:C,kubernetesObject:w,children:gt})=>{const Ct=yn(),[It,Zt]=(0,d.useState)(a??!1),ne=(de,ye)=>{de.stopPropagation(),Zt(ye)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Wn,{onClick:()=>Zt(!0),children:E}),(0,e.jsx)(we.Ay,{classes:{paper:Ct.paper},anchor:"right",open:It,onClose:de=>ne(de,!1),onClick:de=>de.stopPropagation(),children:It&&(0,e.jsx)(Nn,{header:C,kubernetesObject:w,children:gt,close:()=>Zt(!1)})})]})};var Fn=t(78467),vn=t(10265),Xe=t(97963);const En=(0,Xe.h)({id:"kubernetes-react",messages:{podDrawer:{buttons:{delete:"Delete Pod"}}}}),kn=()=>{const a=(0,i.gf)(y.uv);return(0,d.useCallback)(async C=>await a.deletePod({podName:C.podName,namespace:C.podNamespace,clusterName:C.cluster.name}),[a])},zn=({podScope:a})=>{const[E,C]=(0,d.useState)(!1),[w,gt]=(0,d.useState)(!1),Ct=kn(),{t:It}=(0,vn.i)(En),Zt=It("podDrawer.buttons.delete"),ne=async()=>{C(!0);try{await Ct(a)}catch(de){gt(!0),console.error(de)}};return(0,e.jsx)(s.A,{container:!0,item:!0,xs:12,children:(0,e.jsxs)(s.A,{item:!0,xs:12,children:[(0,e.jsx)(U.A,{children:(0,e.jsx)(X.A,{variant:"outlined","aria-label":Zt,component:"label",onClick:ne,startIcon:E?(0,e.jsx)(Fn.A,{size:18}):(0,e.jsx)(_t.A,{}),disabled:E,children:Zt})}),w&&(0,e.jsx)(o.A,{variant:"body1",color:"error",style:{textAlign:"right"},children:"Could not delete the pod. Please check the console for the full report."})]})})};var Ye=t(58007),qe=t(8109);const An=({condition:a})=>(0,e.jsxs)(e.Fragment,{children:[a.status==="False"&&(0,e.jsxs)(it.Xs,{children:[a.type," - (",a.reason," ",a.lastTransitionTime&&ct.c9.fromISO(a.lastTransitionTime).toRelative({locale:"en"}),") - ",a.message," "]}),a.status==="True"&&(0,e.jsxs)(it.z3,{children:[a.type," - (",a.lastTransitionTime&&ct.c9.fromISO(a.lastTransitionTime).toRelative({locale:"en"}),")"]}),a.status==="Unknown"&&(0,e.jsxs)(it.ly,{children:[a.type," - (",a.lastTransitionTime&&ct.c9.fromISO(a.lastTransitionTime).toRelative({locale:"en"}),") ",a.message]})]}),xn=({pod:a})=>{const E=[a.status?.conditions?.find(C=>C.type==="PodScheduled"),a.status?.conditions?.find(C=>C.type==="Initialized"),a.status?.conditions?.find(C=>C.type==="ContainersReady"),a.status?.conditions?.find(C=>C.type==="Ready")].filter(C=>!!C);return(0,e.jsx)(s.A,{container:!0,spacing:2,children:(0,e.jsxs)(s.A,{item:!0,xs:12,children:[(0,e.jsx)(o.A,{variant:"h5",children:"Pod is Pending. Conditions:"}),(0,e.jsx)(Ye.A,{children:E.map(C=>(0,e.jsx)(qe.A,{children:(0,e.jsx)(An,{condition:C})},C.type))})]})})};var Pn=t(5951),Hn=t(37197),Gn=t(93453),Vn=t(69550),Cn=t(39330),Yn=t(19087),Jn=t(46085),Qn=t(91467),Xn=t(39053),Zn=t(77225);const _n=({involvedObjectName:a,namespace:E,clusterName:C})=>{const w=(0,i.gf)(y.uv);return(0,Xt.A)(async()=>await w.getEventsByInvolvedObjectName({involvedObjectName:a,namespace:E,clusterName:C}),[a,E,C])},qn=a=>(0,e.jsx)(Qn.A,{children:(0,e.jsx)(Yn.A,{children:a==="Warning"?(0,e.jsx)(Zn.A,{}):(0,e.jsx)(Xn.A,{})})}),ts=({events:a,warningEventsOnly:E})=>a.length===0?(0,e.jsx)(o.A,{children:"No events found"}):(0,e.jsx)(Jn.A,{children:(0,e.jsx)(s.A,{children:(0,e.jsx)(Ye.A,{children:a.filter(C=>E?C.type==="Warning":!0).map((C,w)=>{const gt=C.metadata.creationTimestamp?ct.c9.fromISO(C.metadata.creationTimestamp).toRelative({locale:"en"}):"unknown";return(0,e.jsxs)(qe.A,{children:[(0,e.jsx)(ft.Ay,{title:`${C.type??""} event`,children:qn(C.type)}),(0,e.jsx)(Pn.A,{primary:`First event ${gt} (count: ${C.count})`,secondary:`${C.reason}: ${C.message}`})]},`${C.metadata.name}-${w}`)})})})}),jn=({involvedObjectName:a,namespace:E,clusterName:C,warningEventsOnly:w})=>{const{value:gt,error:Ct,loading:It}=_n({involvedObjectName:a,namespace:E,clusterName:C});return(0,e.jsxs)(e.Fragment,{children:[Ct&&(0,e.jsx)(M,{message:Ct.message,variant:"error",fixed:!1,id:"events"}),It&&(0,e.jsx)(Vt.A,{variant:"rect",width:"100%",height:"100%"}),!It&&gt!==void 0&&(0,e.jsx)(ts,{warningEventsOnly:w,events:gt})]})};var tn=t(87318);const Tn=(0,mt.A)(a=>(0,rt.A)({closeButton:{position:"absolute",right:a.spacing(1),top:a.spacing(1),color:a.palette.grey[500]}})),On=({open:a,pod:E,error:C,clusterName:w})=>{const[gt,Ct]=(0,d.useState)(!!a),It=Tn(),Zt=()=>{Ct(!0)},ne=()=>{Ct(!1)},de=C.proposedFix,ye=()=>(0,e.jsxs)(s.A,{container:!0,children:[(0,e.jsxs)(s.A,{item:!0,xs:12,children:[(0,e.jsx)(o.A,{variant:"h6",children:"Detected error:"}),(0,e.jsx)(o.A,{children:C.message})]}),(0,e.jsxs)(s.A,{item:!0,xs:12,children:[(0,e.jsx)(o.A,{variant:"h6",children:"Cause explanation:"}),(0,e.jsx)(o.A,{children:C.proposedFix?.rootCauseExplanation??"unknown"})]}),(0,e.jsxs)(s.A,{item:!0,xs:12,children:[(0,e.jsx)(o.A,{variant:"h6",children:"Fix:"}),(0,e.jsx)(Ye.A,{children:(C.proposedFix?.actions??[]).map((Be,Se)=>(0,e.jsx)(qe.A,{children:Be},`${E.metadata?.name??"unknown"}-pf-${Se}`))})]}),de&&de.type==="logs"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(o.A,{variant:"h6",children:"Crash logs:"})}),(0,e.jsx)(s.A,{item:!0,xs:9,children:(0,e.jsx)(pe,{previous:!0,containerScope:{podName:E.metadata?.name??"unknown",podNamespace:E.metadata?.namespace??"unknown",cluster:{name:w},containerName:de.container}})})]}),de&&de.type==="events"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(o.A,{variant:"h6",children:"Events:"})}),(0,e.jsx)(s.A,{item:!0,xs:9,children:(0,e.jsx)(jn,{warningEventsOnly:!0,involvedObjectName:E.metadata?.name??"",namespace:E.metadata?.namespace??"",clusterName:w})})]})]});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(X.A,{variant:"outlined","aria-label":"fix issue",component:"label",onClick:Zt,startIcon:(0,e.jsx)(Vn.A,{}),children:"Help"}),(0,e.jsxs)(dt.A,{maxWidth:"xl",fullWidth:!0,open:gt,onClose:ne,children:[(0,e.jsxs)($t.A,{id:"dialog-title",children:[E.metadata?.name," - ",C.type,(0,e.jsx)(wt.A,{"aria-label":"close",className:It.closeButton,onClick:ne,children:(0,e.jsx)(_t.A,{})})]}),(0,e.jsx)(xt.A,{children:ye()}),(0,e.jsx)(Gn.A,{children:de&&de.type==="docs"&&(0,e.jsx)(tn.z,{to:de.docsLink,variant:"outlined",startIcon:(0,e.jsx)(Cn.A,{}),target:"_blank",rel:"noopener",children:"Open docs"})})]})]})},es=(0,mt.A)(a=>(0,rt.A)({root:{overflow:"auto"},list:{width:"100%"}})),Rn=({podAndErrors:a})=>{const E=es();return(0,e.jsx)(Bt.A,{className:E.root,children:(0,e.jsx)(Ye.A,{className:E.list,children:a.filter(C=>C.errors.length>0).flatMap(C=>C.errors.map((w,gt)=>(0,e.jsxs)(d.Fragment,{children:[gt>0&&(0,e.jsx)(Hn.A,{},`error-divider${gt}`),(0,e.jsx)(qe.A,{children:(0,e.jsxs)(s.A,{container:!0,children:[(0,e.jsx)(s.A,{item:!0,xs:9,children:(0,e.jsx)(Pn.A,{primary:w.message,secondary:C.pod.metadata?.name})}),(0,e.jsx)(s.A,{item:!0,xs:3,children:(0,e.jsx)(On,{pod:C.pod,error:w,clusterName:C.cluster.name})})]})})]},`${C.pod.metadata?.name??"unknown"}-eli-${gt}`)))})})},$e=(0,d.createContext)(new Map),Le=(a,E)=>{const C={name:E.metadata?.name??"",namespace:E.metadata?.namespace??""};return(0,d.useContext)($e).get(a)?.find(Ct=>{const It=Ct.pod;return C.name===(It.metadata?.name??"")&&C.namespace===(It.metadata?.namespace??"")})},vt=()=>(0,i.gf)(L.U).getOptionalConfig("kubernetes.frontend")?.getOptionalBoolean("podDelete.enabled"),Nt=(0,mt.A)(a=>(0,rt.A)({header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},content:{height:"80%"},icon:{fontSize:20},podoklist:{width:"100%",maxWidth:360,maxHeight:360}}));function Qt(a,E){return a.spec?.containers.find(C=>C.name===E)}const Jt=({podAndErrors:a,open:E})=>{const C=Nt(),w=Le(a.cluster.name,a.pod),gt=vt();return(0,e.jsx)(Kn,{open:E,drawerContentsHeader:(0,e.jsxs)(o.A,{variant:"subtitle1",children:["Pod"," ",a.pod.status?.podIP&&`(${a.pod.status?.podIP})`]}),kubernetesObject:a.pod,label:(0,e.jsx)(o.A,{variant:"subtitle1",children:a.pod.metadata?.name??"unknown"}),children:(0,e.jsxs)("div",{className:C.content,children:[gt&&(0,e.jsx)(zn,{podScope:{podName:a.pod.metadata?.name??"unknown",podNamespace:a.pod.metadata?.namespace??"default",cluster:a.cluster}}),w&&(0,e.jsxs)(s.A,{container:!0,item:!0,xs:12,children:[(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(o.A,{variant:"h5",children:"Resource utilization"})}),(0,e.jsxs)(s.A,{item:!0,xs:6,children:[(0,e.jsx)(at,{title:"CPU requests",usage:w.cpu.currentUsage,total:w.cpu.requestTotal,totalFormatted:ot(w.cpu.requestTotal)}),(0,e.jsx)(at,{title:"CPU limits",usage:w.cpu.currentUsage,total:w.cpu.limitTotal,totalFormatted:ot(w.cpu.limitTotal)})]}),(0,e.jsxs)(s.A,{item:!0,xs:6,children:[(0,e.jsx)(at,{title:"Memory requests",usage:w.memory.currentUsage,total:w.memory.requestTotal,totalFormatted:J(w.memory.requestTotal)}),(0,e.jsx)(at,{title:"Memory limits",usage:w.memory.currentUsage,total:w.memory.limitTotal,totalFormatted:J(w.memory.limitTotal)})]})]}),a.pod.status?.phase==="Pending"&&(0,e.jsx)(xn,{pod:a.pod}),a.pod.status?.containerStatuses?.length&&(0,e.jsxs)(s.A,{container:!0,spacing:2,children:[(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(o.A,{variant:"h5",children:"Containers"})}),(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(st.s,{children:a.pod.status?.containerStatuses?.map((Ct,It)=>{const Zt=Qt(a.pod,Ct.name),ne=(w?.containers??[]).find(de=>de.container===Ct.name);return(0,e.jsx)(Ie,{containerMetrics:ne,podScope:{podName:a.pod.metadata?.name??"unknown",podNamespace:a.pod.metadata?.namespace??"unknown",cluster:a.cluster},containerSpec:Zt,containerStatus:Ct},`container-card-${a.pod.metadata?.name}-${It}`)})})}),a.errors.length>0&&(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(o.A,{variant:"h5",children:"Errors"})}),a.errors.length>0&&(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(Rn,{podAndErrors:[a]})})]})]})})},qt=(0,d.createContext)({name:""});var ae=t(49907);const oe=a=>{const E=a.status?.containerStatuses??[];return`${E.filter(w=>w.ready).length}/${E.length}`},le=a=>(a.status?.containerStatuses??[])?.reduce((C,w)=>C+w.restartCount,0),Ee=a=>{const C=(a.status?.containerStatuses??[]).reduce((w,gt)=>{if(gt.state===void 0)return w;const Ct=gt.state.waiting,It=gt.state.terminated,Zt=ne=>(0,e.jsxs)(d.Fragment,{children:[(0,e.jsx)(ae.m,{value:ne==="Completed"?(0,e.jsxs)(it.z3,{children:["Container: ",gt.name]}):(0,e.jsxs)(it.Xs,{children:["Container: ",gt.name]}),subvalue:ne}),(0,e.jsx)("br",{})]},`${a.metadata?.name}-${gt.name}`);return Ct&&w.push(Zt(Ct.reason)),It&&w.push(Zt(It.reason)),w},[]);return C.length===0?(0,e.jsx)(it.z3,{children:"OK"}):C},ve=a=>{const E=a.status;return E==="True"?[a.type,(0,e.jsx)(it.z3,{children:"True"})]:E==="False"?[a.type,(0,e.jsx)(ae.m,{value:(0,e.jsx)(it.Xs,{children:"False"}),subvalue:a.message??""})]:[a.type,(0,e.jsx)(it.c_,{})]},ue=(a,E)=>{if(Number(E)===0)return"0%";if(typeof a=="number"&&typeof E=="number")return`${Math.round(a/E*100)}%`;const C=BigInt(typeof a=="number"?Math.round(a):Number(a)),w=BigInt(typeof E=="number"?Math.round(E):Number(E));return`${C*BigInt(100)/w}%`},ge=a=>{const E=a.cpu;let C=E.currentUsage;return typeof E.currentUsage=="number"&&(C=E.currentUsage/10),(0,e.jsx)(ae.m,{value:`requests: ${ue(C,E.requestTotal)} of ${ot(E.requestTotal)}`,subvalue:`limits: ${ue(C,E.limitTotal)} of ${ot(E.limitTotal)}`})},he=a=>{const E=a.memory;return(0,e.jsx)(ae.m,{value:`requests: ${ue(E.currentUsage,E.requestTotal)} of ${J(E.requestTotal)}`,subvalue:`limits: ${ue(E.currentUsage,E.limitTotal)} of ${J(E.limitTotal)}`})},Ae="READY",xe="RESOURCE",Ce=[{title:"containers ready",align:"center",render:oe,width:"auto"},{title:"total restarts",align:"center",render:le,type:"numeric",width:"auto"}],Te=({pod:a})=>{const E=b({kind:"Pod",apiVersion:"v1",metadata:a.metadata});return(0,e.jsx)(Jt,{podAndErrors:{pod:a,cluster:(0,d.useContext)(qt),errors:E}})},Ue=({clusterName:a,pod:E})=>{const C=Le(a,E);return C?(0,e.jsx)(e.Fragment,{children:ge(C)}):(0,e.jsx)(o.A,{children:"unknown"})},Oe=({clusterName:a,pod:E})=>{const C=Le(a,E);return C?(0,e.jsx)(e.Fragment,{children:he(C)}):(0,e.jsx)(o.A,{children:"unknown"})},We=({pods:a,extraColumns:E=[]})=>{const C=(0,d.useContext)(qt),gt=[...[{title:"ID",field:"metadata.uid",hidden:!0},{title:"name",highlight:!0,render:It=>(0,e.jsx)(Te,{pod:It})},{title:"phase",render:It=>It.status?.phase??"unknown",width:"auto"},{title:"status",render:Ee}]];if(E.includes(Ae)&&gt.push(...Ce),E.includes(xe)){const It=[{title:"CPU usage %",render:Zt=>(0,e.jsx)(Ue,{clusterName:C.name,pod:Zt}),width:"auto"},{title:"Memory usage %",render:Zt=>(0,e.jsx)(Oe,{clusterName:C.name,pod:Zt}),width:"auto"}];gt.push(...It)}const Ct={minWidth:"0",width:"100%"};return(0,e.jsx)("div",{style:Ct,children:(0,e.jsx)(F.X,{options:{paging:!0,search:!1,emptyRowsWhenPaging:!1},data:a.map(It=>({...It,id:It?.metadata?.uid})),columns:gt})})},ns=(0,mt.A)(a=>(0,rt.A)({paper:{width:"50%",justifyContent:"space-between",padding:a.spacing(2.5)}})),on=(0,mt.A)(a=>(0,rt.A)({header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},errorMessage:{marginTop:"1em",marginBottom:"1em"},options:{display:"flex",flexDirection:"row",justifyContent:"space-between"},icon:{fontSize:20},content:{height:"80%"}})),Re=(0,je.A)({root:{padding:"6px 5px"},label:{textTransform:"none"}})(X.A),Sn=({cluster:a,errorMessage:E})=>(0,e.jsx)(B.B,{title:"There was a problem formatting the link to the Kubernetes dashboard",message:`Could not format the link to the dashboard of your cluster named '${a.name}'. Its dashboardApp property has been set to '${a.dashboardApp||"standard"}.'`,children:E&&(0,e.jsxs)(o.A,{variant:"body2",children:["Errors: ",E]})});function ss(a){return JSON.parse(JSON.stringify(a,(C,w)=>String(w)==="null"||String(w)==="undefined"?void 0:w))}const an=({toggleDrawer:a,object:E,renderObject:C,kind:w})=>{const[gt,Ct]=(0,d.useState)(!1),It=(0,i.gf)(y.Y$),Zt=on(),ne=(0,d.useContext)(qt),{value:de,error:ye}=(0,Xt.A)(async()=>It.formatClusterLink({dashboardUrl:ne.dashboardUrl,dashboardApp:ne.dashboardApp,dashboardParameters:ne.dashboardParameters,object:E,kind:w}),[ne,E,w,It]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:Zt.header,children:(0,e.jsxs)(s.A,{container:!0,justifyContent:"flex-start",alignItems:"flex-start",children:[(0,e.jsx)(s.A,{item:!0,xs:11,children:(0,e.jsx)(o.A,{variant:"h5",children:E.metadata?.name??"unknown name"})}),(0,e.jsx)(s.A,{item:!0,xs:1,children:(0,e.jsx)(wt.A,{title:"Close the drawer",onClick:Be=>a(Be,!1),color:"inherit",children:(0,e.jsx)(_t.A,{className:Zt.icon})},"dismiss")}),(0,e.jsx)(s.A,{item:!0,xs:11,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"body1",children:w})}),(0,e.jsx)(s.A,{item:!0,xs:11,children:(0,e.jsx)(Ge.A,{control:(0,e.jsx)(ke.A,{checked:gt,onChange:Be=>{Ct(Be.target.checked)},name:"YAML"}),label:"YAML"})})]})}),ye&&(0,e.jsx)("div",{className:Zt.errorMessage,children:(0,e.jsx)(Sn,{cluster:ne,errorMessage:ye.message||ye.toString()})}),(0,e.jsx)("div",{className:Zt.options,children:(0,e.jsx)("div",{children:de&&(0,e.jsx)(tn.z,{variant:"outlined",color:"primary",size:"small",to:de,endIcon:(0,e.jsx)(Cn.A,{}),children:"Open Kubernetes Dashboard"})})}),(0,e.jsxs)("div",{className:Zt.content,children:[gt&&(0,e.jsx)(mn,{object:E}),!gt&&(0,e.jsx)(nt.t,{metadata:C(ss(E)),options:{nestedValuesAsYaml:!0}})]})]})},Me=({object:a,renderObject:E,kind:C,buttonVariant:w="subtitle2",expanded:gt=!1,children:Ct})=>{const[It,Zt]=(0,d.useState)(gt),ne=ns(),de=(ye,Be)=>{ye.stopPropagation(),Zt(Be)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Re,{onClick:ye=>de(ye,!0),onFocus:ye=>ye.stopPropagation(),children:Ct===void 0?(0,e.jsx)(o.A,{variant:w,children:a.metadata?.name??"unknown object"}):Ct}),(0,e.jsx)(we.Ay,{classes:{paper:ne.paper},anchor:"right",open:It,onClose:ye=>de(ye,!1),onClick:ye=>ye.stopPropagation(),children:(0,e.jsx)(an,{kind:C,toggleDrawer:de,object:a,renderObject:E})})]})};var ze=t(67720);const en=({deployment:a,expanded:E})=>{const C=a.metadata?.namespace;return(0,e.jsx)(Me,{object:a,expanded:E,kind:"Deployment",renderObject:w=>{const gt=(w.status?.conditions??[]).map(ve).reduce((Ct,It)=>(Ct[It[0]]=It[1],Ct),{});return{strategy:w.spec?.strategy??"???",minReadySeconds:w.spec?.minReadySeconds??"???",progressDeadlineSeconds:w.spec?.progressDeadlineSeconds??"???",...gt}},children:(0,e.jsxs)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"body1",children:a.metadata?.name??"unknown object"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:"Deployment"})}),C&&(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(ze.A,{size:"small",label:`namespace: ${C}`})})]})})},Ze=a=>{const{hpa:E,expanded:C,children:w}=a,gt=E?.spec?.metrics?.find(It=>It.type==="Resource"&&It.resource?.name==="cpu")?.resource?.target.averageUtilization,Ct=E?.status?.currentMetrics?.find(It=>It.type==="Resource"&&It.resource?.name==="cpu")?.resource?.current.averageUtilization;return(0,e.jsx)(Me,{kind:"HorizontalPodAutoscaler",object:E,expanded:C,renderObject:It=>({targetCPUUtilizationPercentage:gt,currentCPUUtilizationPercentage:Ct,minReplicas:It.spec?.minReplicas,maxReplicas:It.spec?.maxReplicas,currentReplicas:It.status?.currentReplicas,desiredReplicas:It.status?.desiredReplicas,lastScaleTime:E?.status?.lastScaleTime}),children:w})};function Ve(a,E){return E.filter(C=>C.metadata?.ownerReferences?.some(w=>w.uid===a.metadata?.uid)??!1)}const Qe=(a,E,C)=>Ve(a,E.filter(w=>w.status&&w.status.replicas>0)).reduce((w,gt)=>w.concat(Ve(gt,C)),[]),He=(a,E)=>E.find(C=>(C.spec?.scaleTargetRef?.kind??"").toLocaleLowerCase("en-US")===a.kind.toLocaleLowerCase("en-US")&&(C.metadata?.namespace??"")===(a.namespace??"unknown-namespace")&&(C.spec?.scaleTargetRef?.name??"")===(a.name??"unknown-deployment")),Us=({deployment:a,numberOfCurrentPods:E,numberOfPodsWithErrors:C,hpa:w})=>{const gt=w?.spec?.metrics?.find(It=>It.type==="Resource"&&It.resource?.name==="cpu")?.resource?.target.averageUtilization,Ct=w?.status?.currentMetrics?.find(It=>It.type==="Resource"&&It.resource?.name==="cpu")?.resource?.current.averageUtilization;return(0,e.jsxs)(s.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,e.jsx)(s.A,{xs:4,item:!0,children:(0,e.jsx)(en,{deployment:a})}),w&&(0,e.jsx)(s.A,{item:!0,xs:4,children:(0,e.jsx)(Ze,{hpa:w,children:(0,e.jsxs)(s.A,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["min replicas ",w.spec?.minReplicas??"?"," / max replicas"," ",w.spec?.maxReplicas??"?"]})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["current CPU usage: ",Ct??"?","%"]})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["target CPU usage: ",gt??"?","%"]})})]})})}),(0,e.jsxs)(s.A,{item:!0,container:!0,xs:4,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(it.z3,{children:[E," pods"]})}),(0,e.jsx)(s.A,{item:!0,children:C>0?(0,e.jsxs)(it.Xs,{children:[C," pod",C>1?"s":""," with errors"]}):(0,e.jsx)(it.z3,{children:"No pods with errors"})})]})]})},rs=({deployment:a,ownedPods:E,matchingHpa:C})=>{const w=(0,d.useContext)(Q),gt=E.filter(Ct=>w.has(Ct.metadata?.name??""));return(0,e.jsxs)(I.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)(Us,{deployment:a,numberOfCurrentPods:E.length,numberOfPodsWithErrors:gt.length,hpa:C})}),(0,e.jsx)(tt.A,{children:(0,e.jsx)(We,{pods:E,extraColumns:[Ae,xe]})})]})},nn=({})=>{const a=(0,d.useContext)(lt);return(0,e.jsx)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:a.deployments.map((E,C)=>(0,e.jsx)(s.A,{container:!0,item:!0,xs:!0,children:(0,e.jsx)(s.A,{item:!0,xs:!0,children:(0,e.jsx)(rs,{matchingHpa:He({name:E.metadata?.name,namespace:E.metadata?.namespace,kind:"deployment"},a.horizontalPodAutoscalers),ownedPods:Qe(E,a.replicaSets,a.pods),deployment:E})})},C))})},ln=({statefulset:a,expanded:E})=>{const C=a.metadata?.namespace;return(0,e.jsx)(Me,{object:a,expanded:E,kind:"StatefulSet",renderObject:w=>{const gt=(w.status?.conditions??[]).map(ve).reduce((Ct,It)=>(Ct[It[0]]=It[1],Ct),{});return{updateStrategy:a.spec?.updateStrategy??"???",podManagementPolicy:a.spec?.podManagementPolicy??"???",serviceName:a.spec?.serviceName??"???",selector:a.spec?.selector??"???",revisionHistoryLimit:a.spec?.revisionHistoryLimit??"???",...gt}},children:(0,e.jsxs)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"body1",children:a.metadata?.name??"unknown object"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:"Stateful Set"})}),C&&(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(ze.A,{size:"small",label:`namespace: ${C}`})})]})})},bn=({statefulset:a,numberOfCurrentPods:E,numberOfPodsWithErrors:C,hpa:w})=>{const gt=w?.spec?.metrics?.find(It=>It.type==="Resource"&&It.resource?.name==="cpu")?.resource?.target.averageUtilization,Ct=w?.status?.currentMetrics?.find(It=>It.type==="Resource"&&It.resource?.name==="cpu")?.resource?.current.averageUtilization;return(0,e.jsxs)(s.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,e.jsx)(s.A,{xs:6,item:!0,children:(0,e.jsx)(ln,{statefulset:a})}),w&&(0,e.jsx)(s.A,{item:!0,xs:3,children:(0,e.jsx)(Ze,{hpa:w,children:(0,e.jsxs)(s.A,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["min replicas ",w.spec?.minReplicas??"?"," / max replicas"," ",w.spec?.maxReplicas??"?"]})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["current CPU usage: ",Ct??"?","%"]})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["target CPU usage: ",gt??"?","%"]})})]})})}),(0,e.jsxs)(s.A,{item:!0,container:!0,xs:3,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(it.z3,{children:[E," pods"]})}),(0,e.jsx)(s.A,{item:!0,children:C>0?(0,e.jsxs)(it.Xs,{children:[C," pod",C>1?"s":""," with errors"]}):(0,e.jsx)(it.z3,{children:"No pods with errors"})})]})]})},ws=({statefulset:a,ownedPods:E,matchingHpa:C})=>{const w=(0,d.useContext)(Q),gt=E.filter(Ct=>w.has(Ct.metadata?.name??""));return(0,e.jsxs)(I.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)(bn,{statefulset:a,numberOfCurrentPods:E.length,numberOfPodsWithErrors:gt.length,hpa:C})}),(0,e.jsx)(tt.A,{children:(0,e.jsx)(We,{pods:E,extraColumns:[Ae,xe]})})]})},Dn=({})=>{const a=(0,d.useContext)(lt);return(0,e.jsx)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:a.statefulsets.map((E,C)=>(0,e.jsx)(s.A,{container:!0,item:!0,xs:!0,children:(0,e.jsx)(s.A,{item:!0,xs:!0,children:(0,e.jsx)(ws,{matchingHpa:He({name:E.metadata?.name,namespace:E.metadata?.namespace,kind:"statefulset"},a.horizontalPodAutoscalers),ownedPods:Ve(E,a.pods),statefulset:E})})},C))})},os=({ingress:a,expanded:E})=>{const C=a.metadata?.namespace;return(0,e.jsx)(Me,{object:a,expanded:E,kind:"Ingress",renderObject:w=>w.spec||{},children:(0,e.jsxs)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"body1",children:a.metadata?.name??"unknown object"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:"Ingress"})}),C&&(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(ze.A,{size:"small",label:`namespace: ${C}`})})]})})},cn=({ingress:a})=>(0,e.jsx)(s.A,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",children:(0,e.jsx)(s.A,{xs:12,item:!0,children:(0,e.jsx)(os,{ingress:a})})}),as=({ingress:a})=>(0,e.jsx)(nt.t,{metadata:{...a.spec},options:{nestedValuesAsYaml:!0}}),Ke=({ingress:a})=>(0,e.jsxs)(I.A,{TransitionProps:{unmountOnExit:!0},children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)(cn,{ingress:a})}),(0,e.jsx)(tt.A,{children:(0,e.jsx)(as,{ingress:a})})]}),sn=({})=>{const a=(0,d.useContext)(lt);return(0,e.jsx)(s.A,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",children:a.ingresses.map((E,C)=>(0,e.jsx)(s.A,{item:!0,xs:!0,children:(0,e.jsx)(Ke,{ingress:E})},C))})},ys=({service:a,expanded:E})=>{const C=a.metadata?.namespace;return(0,e.jsx)(Me,{object:a,expanded:E,kind:"Service",renderObject:w=>w.spec||{},children:(0,e.jsxs)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"body1",children:a.metadata?.name??"unknown object"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:"Service"})}),C&&(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(ze.A,{size:"small",label:`namespace: ${C}`})})]})})},$s=({service:a})=>(0,e.jsxs)(s.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,e.jsx)(s.A,{xs:8,item:!0,children:(0,e.jsx)(ys,{service:a})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["Type: ",a.spec?.type??"?"]})})]}),vs=({service:a})=>{const E={};return(a.status?.loadBalancer?.ingress?.length??!1)&&(E.loadbalancer=a.status?.loadBalancer),a.spec?.type==="ClusterIP"&&(E.clusterIP=a.spec.clusterIP),a.spec?.type==="ExternalName"&&(E.externalName=a.spec.externalName),(0,e.jsx)(nt.t,{metadata:{type:a.spec?.type,ports:a.spec?.ports,...E},options:{nestedValuesAsYaml:!0}})},Ns=({service:a})=>(0,e.jsxs)(I.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)($s,{service:a})}),(0,e.jsx)(tt.A,{children:(0,e.jsx)(vs,{service:a})})]}),Ws=({})=>{const a=(0,d.useContext)(lt);return(0,e.jsx)(s.A,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",children:a.services.map((E,C)=>(0,e.jsx)(s.A,{item:!0,xs:!0,children:(0,e.jsx)(Ns,{service:E})},C))})},In=({job:a,expanded:E})=>(0,e.jsx)(Me,{object:a,expanded:E,kind:"Job",renderObject:C=>({parallelism:C.spec?.parallelism??"???",completions:C.spec?.completions??"???",backoffLimit:C.spec?.backoffLimit??"???",startTime:C.status?.startTime??"???"}),children:(0,e.jsxs)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"body1",children:a.metadata?.name??"unknown object"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:"Job"})})]})}),Ks=({job:a})=>(0,e.jsxs)(s.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,e.jsx)(s.A,{xs:6,item:!0,children:(0,e.jsx)(In,{job:a})}),(0,e.jsxs)(s.A,{item:!0,container:!0,xs:6,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,e.jsxs)(s.A,{item:!0,children:[a.status?.succeeded&&(0,e.jsx)(it.z3,{children:"Succeeded"}),a.status?.active&&(0,e.jsx)(it.Ek,{children:"Running"}),a.status?.failed&&(0,e.jsx)(it.Xs,{children:"Failed"})]}),(0,e.jsxs)(s.A,{item:!0,children:["Start time: ",a.status?.startTime?.toString()]}),a.status?.completionTime&&(0,e.jsxs)(s.A,{item:!0,children:["Completion time: ",a.status.completionTime.toString()]})]})]}),Fs=({job:a,ownedPods:E})=>(0,e.jsxs)(I.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)(Ks,{job:a})}),(0,e.jsx)(tt.A,{children:(0,e.jsx)(We,{pods:E})})]}),Ne=({jobs:a})=>{const E=(0,d.useContext)(lt);return(0,e.jsx)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:a.map((C,w)=>(0,e.jsx)(s.A,{container:!0,item:!0,xs:!0,children:(0,e.jsx)(s.A,{item:!0,xs:!0,children:(0,e.jsx)(Fs,{ownedPods:Ve(C,E.pods),job:C})})},w))})},ks=({cronJob:a,expanded:E})=>{const C=a.metadata?.namespace;return(0,e.jsx)(Me,{object:a,expanded:E,kind:"CronJob",renderObject:w=>({schedule:w.spec?.schedule??"???",startingDeadlineSeconds:w.spec?.startingDeadlineSeconds??"???",concurrencyPolicy:w.spec?.concurrencyPolicy??"???",lastScheduleTime:w.status?.lastScheduleTime??"???"}),children:(0,e.jsxs)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"body1",children:a.metadata?.name??"unknown object"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:"CronJob"})}),C&&(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(ze.A,{size:"small",label:`namespace: ${C}`})})]})})};var Es=t(37021),As=t.n(Es);const Mn=new Map([["@yearly","0 0 1 1 *"],["@annually","0 0 1 1 *"],["@monthly","0 0 1 * *"],["@weekly","0 0 * * 0"],["@daily","0 0 * * *"],["@midnight","0 0 * * *"],["@hourly","0 * * * *"]]),Bn=a=>{const E=Mn.get(a)||a;try{return As().toString(E)}catch{return E}},xs=({cronJob:a})=>(0,e.jsxs)(s.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,e.jsx)(s.A,{xs:6,item:!0,children:(0,e.jsx)(ks,{cronJob:a})}),(0,e.jsxs)(s.A,{item:!0,container:!0,xs:6,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:a.spec?.suspend?(0,e.jsx)(it.Xs,{children:"Suspended"}):(0,e.jsx)(it.z3,{children:"Active"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"body1",children:["Schedule:"," ",a.spec?.schedule?`${a.spec.schedule} (${Bn(a.spec.schedule)})`:"N/A"]})})]})]}),Ps=({cronJob:a,ownedJobs:E})=>(0,e.jsxs)(I.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)(xs,{cronJob:a})}),(0,e.jsx)(tt.A,{children:(0,e.jsx)(Ne,{jobs:E.reverse()})})]}),zs=({})=>{const a=(0,d.useContext)(lt);return(0,e.jsx)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:a.cronJobs.map((E,C)=>(0,e.jsx)(s.A,{container:!0,item:!0,xs:!0,children:(0,e.jsx)(s.A,{item:!0,xs:!0,children:(0,e.jsx)(Ps,{ownedJobs:Ve(E,a.jobs),cronJob:E})})},C))})};var Hs=t(45250),Cs=t.n(Hs);const js=({rollout:a,expanded:E})=>{const C=a.metadata?.namespace;return(0,e.jsx)(Me,{object:a,expanded:E,kind:"Rollout",renderObject:()=>({}),children:(0,e.jsxs)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"body1",children:a.metadata?.name??"unknown object"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:"Rollout"})}),C&&(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(ze.A,{size:"small",label:`namespace: ${C}`})})]})})};var Gs=t(77579),dn=t(9181),is=t(21619),ls=t(37877),Vs=t(78733);const Ln=a=>a.hasOwnProperty("setWeight"),Ys=a=>a.hasOwnProperty("pause"),Js=a=>a.hasOwnProperty("analysis"),Qs=a=>Ln(a)?`setWeight ${a.setWeight}%`:Ys(a)?a.pause.duration===void 0?"infinite pause":`pause for ${a.pause.duration}`:Js(a)?(0,e.jsxs)("div",{children:[(0,e.jsx)(o.A,{paragraph:!0,children:"analysis templates:"}),a.analysis.templates.map((E,C)=>(0,e.jsx)(o.A,{paragraph:!0,children:`${E.templateName}${E.clusterScope?" (cluster scoped)":""}`},C))]}):"unknown step",Xs=({currentStepIndex:a,aborted:E,steps:C})=>{const w=a>=C.length?a+1:a;return(0,e.jsx)(Vs.A,{activeStep:E?-1:w,alternativeLabel:!0,children:C.map((gt,Ct)=>(0,e.jsx)(is.A,{children:(0,e.jsx)(ls.A,{"data-testid":`step-${Ct}`,children:Qs(gt)})},Ct)).concat((0,e.jsx)(is.A,{children:(0,e.jsx)(ls.A,{"data-testid":"step--1",children:"Canary promoted"})},"-1"))})},Ts=(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,e.jsx)(dn.A,{}),(0,e.jsx)(o.A,{variant:"subtitle1",children:"Aborted"})]}),Os=a=>a.status?.conditions?.find(E=>E.type==="Progressing"&&E.status==="False"&&E.reason==="RolloutAborted")?.message,Zs=({rollout:a,numberOfCurrentPods:E,numberOfPodsWithErrors:C,hpa:w})=>{const gt=a.status?.pauseConditions?.find(ne=>ne.reason==="CanaryPauseStep")?.startTime,Ct=Os(a),It=w?.spec?.metrics?.find(ne=>ne.type==="Resource"&&ne.resource?.name==="cpu")?.resource?.target.averageUtilization,Zt=w?.status?.currentMetrics?.find(ne=>ne.type==="Resource"&&ne.resource?.name==="cpu")?.resource?.current.averageUtilization;return(0,e.jsxs)(s.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,e.jsx)(s.A,{xs:6,item:!0,children:(0,e.jsx)(js,{rollout:a})}),w&&(0,e.jsx)(s.A,{item:!0,xs:3,children:(0,e.jsx)(Ze,{hpa:w,children:(0,e.jsxs)(s.A,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["min replicas ",w.spec?.minReplicas??"?"," / max replicas"," ",w.spec?.maxReplicas??"?"]})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["current CPU usage: ",Zt??"?","%"]})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(o.A,{variant:"subtitle2",children:["target CPU usage: ",It??"?","%"]})})]})})}),(0,e.jsxs)(s.A,{item:!0,container:!0,xs:3,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(it.z3,{children:[E," pods"]})}),(0,e.jsx)(s.A,{item:!0,children:C>0?(0,e.jsxs)(it.Xs,{children:[C," pod",C>1?"s":""," with errors"]}):(0,e.jsx)(it.z3,{children:"No pods with errors"})})]}),gt&&(0,e.jsx)(s.A,{item:!0,xs:3,children:(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,e.jsx)(Gs.A,{}),(0,e.jsxs)(o.A,{variant:"subtitle1",children:["Paused (",ct.c9.fromISO(gt).toRelative({locale:"en"}),")"]})]})}),Ct&&(0,e.jsx)(s.A,{item:!0,xs:3,children:Ts})]})},_s=({rollout:a,ownedPods:E,matchingHpa:C,defaultExpanded:w})=>{const gt=(0,d.useContext)(Q),Ct=E.filter(ne=>gt.has(ne.metadata?.name??"")),It=a.status?.currentStepIndex??0,Zt=Os(a);return(0,e.jsxs)(I.A,{defaultExpanded:w,TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)(Zs,{rollout:a,numberOfCurrentPods:E.length,numberOfPodsWithErrors:Ct.length,hpa:C})}),(0,e.jsx)(tt.A,{children:(0,e.jsxs)("div",{style:{width:"100%"},children:[(0,e.jsx)("div",{children:(0,e.jsx)(o.A,{variant:"h6",children:"Rollout status"})}),(0,e.jsxs)("div",{style:{margin:"1rem"},children:[Zt&&(0,e.jsxs)(e.Fragment,{children:[Ts,(0,e.jsx)(o.A,{variant:"subtitle2",children:Zt})]}),(0,e.jsx)(Xs,{aborted:Zt!==void 0,steps:a.spec?.strategy?.canary?.steps??[],currentStepIndex:It})]}),(0,e.jsx)("div",{children:(0,e.jsx)(We,{pods:E,extraColumns:[Ae,xe]})})]})})]})},qs=({rollouts:a,defaultExpanded:E=!1})=>{const C=(0,d.useContext)(lt);return(0,e.jsx)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:a.map((w,gt)=>(0,e.jsx)(s.A,{container:!0,item:!0,xs:!0,children:(0,e.jsx)(s.A,{item:!0,xs:!0,children:(0,e.jsx)(_s,{defaultExpanded:E,matchingHpa:He({name:w.metadata?.name,namespace:w.metadata?.namespace,kind:"rollout"},C.horizontalPodAutoscalers),ownedPods:Qe(w,C.replicaSets,C.pods),rollout:w})})},gt))})},tr=a=>a.charAt(0).toLocaleUpperCase("en-US")+a.slice(1),er=({customResource:a,customResourceName:E,expanded:C})=>{const w=tr(E);return(0,e.jsx)(Me,{object:a,expanded:C,kind:w,renderObject:gt=>gt,children:(0,e.jsxs)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"body1",children:a.metadata?.name??"unknown object"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:w})})]})})},Rs=({customResource:a,customResourceName:E})=>(0,e.jsx)(s.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:(0,e.jsx)(s.A,{xs:12,item:!0,children:(0,e.jsx)(er,{customResource:a,customResourceName:E})})}),nr=({customResource:a,customResourceName:E,defaultExpanded:C})=>(0,e.jsxs)(I.A,{defaultExpanded:C,TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)(Rs,{customResource:a,customResourceName:E})}),(0,e.jsx)(tt.A,{children:Object.prototype.hasOwnProperty.call(a,"status")&&(0,e.jsx)(nt.t,{metadata:a.status,options:{nestedValuesAsYaml:!0}})})]}),sr=({customResources:a,customResourceName:E,defaultExpanded:C=!1})=>(0,e.jsx)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:a.map((w,gt)=>(0,e.jsx)(s.A,{container:!0,item:!0,xs:!0,children:(0,e.jsx)(s.A,{item:!0,xs:!0,children:(0,e.jsx)(nr,{defaultExpanded:C,customResource:w,customResourceName:E})})},gt))}),Ss=a=>Cs().groupBy(a,E=>E.kind),rr=({})=>{const a=(0,d.useContext)(lt),E=Ss(a.customResources);return(0,e.jsx)(e.Fragment,{children:Object.entries(E).map(([C,w],gt)=>{switch(C){case"Rollout":return(0,e.jsx)(qs,{rollouts:w},gt);default:return(0,e.jsx)(sr,{customResources:w,customResourceName:C},gt)}})})},or=({daemonset:a,expanded:E})=>{const C=a.metadata?.namespace;return(0,e.jsx)(Me,{object:a,expanded:E,kind:"DaemonSet",renderObject:w=>({updateStrategyType:w.spec?.updateStrategy?.type??"???",minReadySeconds:w.spec?.minReadySeconds??"???",revisionHistoryLimit:w.spec?.revisionHistoryLimit??"???",currentNumberScheduled:w.status?.currentNumberScheduled??"???",desiredNumberScheduled:w.status?.desiredNumberScheduled??"???",numberAvailable:w.status?.numberAvailable??"???",numberMisscheduled:w.status?.numberMisscheduled??"???",numberReady:w.status?.numberReady??"???"}),children:(0,e.jsxs)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"body1",children:a.metadata?.name??"unknown object"})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:"DaemonSet"})}),C&&(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(ze.A,{size:"small",label:`namespace: ${C}`})})]})})},ar=({daemonset:a,numberOfCurrentPods:E,numberOfPodsWithErrors:C})=>(0,e.jsxs)(s.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0,children:[(0,e.jsx)(s.A,{xs:4,item:!0,children:(0,e.jsx)(or,{daemonset:a})}),(0,e.jsxs)(s.A,{item:!0,container:!0,xs:4,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(it.z3,{children:[E," pods"]})}),(0,e.jsx)(s.A,{item:!0,children:C>0?(0,e.jsxs)(it.Xs,{children:[C," pod",C>1?"s":""," with errors"]}):(0,e.jsx)(it.z3,{children:"No pods with errors"})})]})]}),bs=({daemonset:a,ownedPods:E})=>{const C=(0,d.useContext)(Q),w=E.filter(gt=>C.has(gt.metadata?.name??""));return(0,e.jsxs)(I.A,{TransitionProps:{unmountOnExit:!0},variant:"outlined",children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)(ar,{daemonset:a,numberOfCurrentPods:E.length,numberOfPodsWithErrors:w.length})}),(0,e.jsx)(tt.A,{children:(0,e.jsx)(We,{pods:E,extraColumns:[Ae,xe]})})]})},cs=({})=>{const a=(0,d.useContext)(lt);return(0,e.jsx)(s.A,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",children:a.daemonSets.map((E,C)=>(0,e.jsx)(s.A,{container:!0,item:!0,xs:!0,children:(0,e.jsx)(s.A,{item:!0,xs:!0,children:(0,e.jsx)(bs,{ownedPods:Ve(E,a.pods),daemonset:E})})},C))})},ir=({clusterName:a,totalNumberOfPods:E,numberOfPodsWithErrors:C})=>(0,e.jsxs)(s.A,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",spacing:0,children:[(0,e.jsx)(s.A,{xs:6,item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,children:(0,e.jsxs)(s.A,{item:!0,xs:!0,children:[(0,e.jsx)(o.A,{variant:"body1",children:a}),(0,e.jsx)(o.A,{color:"textSecondary",variant:"subtitle1",children:"Cluster"})]})}),(0,e.jsxs)(s.A,{item:!0,container:!0,xs:3,direction:"column",justifyContent:"flex-start",alignItems:"flex-end",spacing:0,children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsxs)(it.z3,{children:[E," pods"]})}),(0,e.jsx)(s.A,{item:!0,children:C>0?(0,e.jsxs)(it.Xs,{children:[C," pods with errors"]}):(0,e.jsx)(it.z3,{children:"No pods with errors"})})]})]}),lr=({clusterObjects:a,podsWithErrors:E})=>{const C=V(a.resources),w=new Map;return w.set(a.cluster.name,a.podMetrics),(0,e.jsx)(qt.Provider,{value:a.cluster,children:(0,e.jsx)(lt.Provider,{value:C,children:(0,e.jsx)($e.Provider,{value:w,children:(0,e.jsx)(Q.Provider,{value:E,children:(0,e.jsxs)(I.A,{TransitionProps:{unmountOnExit:!0},children:[(0,e.jsx)(H.A,{expandIcon:(0,e.jsx)(q.A,{}),children:(0,e.jsx)(ir,{clusterName:a.cluster.title||a.cluster.name,totalNumberOfPods:C.pods.length,numberOfPodsWithErrors:E.size})}),(0,e.jsx)(tt.A,{children:(0,e.jsxs)(s.A,{container:!0,direction:"column",children:[C.customResources.length>0?(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(rr,{})}):void 0,C.deployments.length>0?(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(nn,{})}):void 0,C.daemonSets.length>0?(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(cs,{})}):void 0,C.statefulsets.length>0?(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(Dn,{})}):void 0,C.ingresses.length>0?(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(sn,{})}):void 0,C.services.length>0?(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(Ws,{})}):void 0,C.cronJobs.length>0?(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(zs,{})}):void 0]})})]})})})})})},ds=(a,E)=>a.flatMap(C=>E.flatMap(w=>w.detectErrors(C)));function cr({container:a,containerStatus:E}){return E.ready||E.state?.running?.startedAt===void 0||!a.readinessProbe?!1:ct.c9.fromISO(E.state?.running?.startedAt).plus({seconds:a.readinessProbe?.initialDelaySeconds??0}).plus({seconds:(a.readinessProbe?.periodSeconds??0)*(a.readinessProbe?.failureThreshold??0)})<ct.c9.now()}const Ds=a=>{const E=Cs().groupBy(a.spec?.containers??[],w=>w.name),C=[];for(const w of a.status?.containerStatuses??[]){const gt=E[w.name];gt.length>0&&C.push({container:gt[0],containerStatus:w})}return C},dr=a=>({errorType:"ReadinessProbeFailed",rootCauseExplanation:`The container ${a.status?.containerStatuses?.find(C=>C.ready===!1)?.name} failed to start properly, but is not crashing`,actions:["Ensure that the container starts correctly locally","Check the container's logs looking for error during startup"],type:"events",podName:a.metadata?.name??""}),ur=a=>{const E=(a.status?.containerStatuses??[]).find(w=>w.lastState?.terminated!==void 0),C=E?.lastState?.terminated;if(C)switch(C?.reason){case"Unknown":return{errorType:"Unknown",rootCauseExplanation:`This container has exited with a non-zero exit code (${C.exitCode})`,actions:["Check the crash logs for stacktraces"],container:E.name,type:"logs"};case"Error":return{errorType:"Error",rootCauseExplanation:`This container has exited with a non-zero exit code (${C.exitCode})`,actions:["Check the crash logs for stacktraces"],container:E.name,type:"logs"};case"OOMKilled":return{errorType:"OOMKilled",rootCauseExplanation:`The container "${E.name}" has crashed because it has tried to use more memory that it has been allocated`,actions:["Increase the amount of memory assigned to the container","Ensure the application is memory bounded and is not trying to consume too much memory"],docsLink:"https://kubernetes.io/docs/tasks/configure-pod-container/assign-memory-resource/#exceed-a-container-s-memory-limit",type:"docs"};default:return}},hr=a=>{const E=(a.status?.containerStatuses??[]).find(w=>w.state?.waiting!==void 0);switch((a.status?.containerStatuses??[]).map(w=>w.state?.waiting).find(w=>w?.reason!==void 0)?.reason){case"InvalidImageName":return{errorType:"InvalidImageName",rootCauseExplanation:"The image in the pod is invalid",actions:["Ensure the image name is correct and valid image name"],type:"docs",docsLink:"https://docs.docker.com/engine/reference/commandline/tag/#extended-description"};case"ImagePullBackOff":return{errorType:"ImagePullBackOff",rootCauseExplanation:"The image either could not be found or Kubernetes does not have permission to pull it",actions:["Ensure the image name is correct","Ensure Kubernetes has permission to pull this image"],type:"docs",docsLink:"https://kubernetes.io/docs/concepts/containers/images/#imagepullbackoff"};case"CrashLoopBackOff":return{errorType:"CrashLoopBackOff",rootCauseExplanation:`The container ${E?.name} has crashed many times, it will be exponentially restarted until it stops crashing`,actions:["Check the crash logs for stacktraces"],type:"logs",container:E?.name??"unknown"};case"CreateContainerConfigError":return{errorType:"CreateContainerConfigError",rootCauseExplanation:"There is missing or mismatching configuration required to start the container",actions:["Ensure ConfigMaps references in the Deployment manifest are correct and the keys exist","Ensure Secrets references in the Deployment manifest are correct and the keys exist"],type:"docs",docsLink:"https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/"};default:return}},rn=[{detectErrors:a=>Ds(a).filter(cr).map(E=>({type:"readiness-probe-taking-too-long",message:`The container ${E.container.name} failed to start properly, but is not crashing`,severity:4,proposedFix:dr(a),sourceRef:{name:a.metadata?.name??"unknown pod",namespace:a.metadata?.namespace??"unknown namespace",kind:"Pod",apiGroup:"v1"},occurrenceCount:1}))},{detectErrors:a=>(a.status?.containerStatuses??[]).filter(E=>E.state?.waiting?.message!==void 0).map(E=>({type:"container-waiting",message:E.state?.waiting?.message??"container waiting",severity:4,proposedFix:hr(a),sourceRef:{name:a.metadata?.name??"unknown pod",namespace:a.metadata?.namespace??"unknown namespace",kind:"Pod",apiGroup:"v1"},occurrenceCount:1}))},{detectErrors:a=>(a.status?.containerStatuses??[]).filter(E=>E.restartCount>0).map(E=>({type:"containers-restarting",message:`container=${E.name} restarted ${E.restartCount} times`,severity:4,proposedFix:ur(a),sourceRef:{name:a.metadata?.name??"unknown pod",namespace:a.metadata?.namespace??"unknown namespace",kind:"Pod",apiGroup:"v1"},occurrenceCount:E.restartCount}))}],pr=a=>ds(a,rn),gr=[{detectErrors:a=>(a.status?.conditions??[]).filter(E=>E.status==="False").filter(E=>E.message!==void 0).map(E=>({type:"condition-message-present",message:E.message??"",severity:6,sourceRef:{name:a.metadata?.name??"unknown hpa",namespace:a.metadata?.namespace??"unknown namespace",kind:"Deployment",apiGroup:"apps/v1"},occurrenceCount:1}))}],mr=a=>ds(a,gr),fr=[{detectErrors:a=>(a.spec?.maxReplicas??-1)===a.status?.currentReplicas?[{type:"hpa-max-current-replicas",message:`Current number of replicas (${a.status?.currentReplicas}) is equal to the configured max number of replicas (${a.spec?.maxReplicas??-1})`,severity:8,sourceRef:{name:a.metadata?.name??"unknown hpa",namespace:a.metadata?.namespace??"unknown namespace",kind:"HorizontalPodAutoscaler",apiGroup:"autoscaling/v2"},occurrenceCount:1}]:[]}],yr=a=>ds(a,fr),Is=a=>{const E=new Map;for(const C of a.items){let w=[];const gt=V(C.resources);w=w.concat(pr(gt.pods)),w=w.concat(mr(gt.deployments)),w=w.concat(yr(gt.horizontalPodAutoscalers)),E.set(C.cluster.name,w)}return E};var un=t(82326),Je=t(16454),Un=t(96872);function us({name:a,attributes:E,resourceType:C}){return C?{type:"resource",name:a,attributes:E,resourceType:C}:{type:"basic",name:a,attributes:E}}const vr=us({name:"kubernetes.proxy",attributes:{}}),hs=us({name:"kubernetes.resources.read",attributes:{action:"read"}}),ps=us({name:"kubernetes.clusters.read",attributes:{action:"read"}}),xr=[vr,hs,ps];var wn=t(90712);const gs=(0,Xe.h)({id:"kubernetes",messages:{kubernetesContentPage:{permissionAlert:{title:"Permission required",message:"To view Kubernetes objects, contact your portal administrator to give you the 'kubernetes.clusters.read' and 'kubernetes.resources.read' permission."}}}});function Ms(a){const E=(0,wn.J)({permission:ps}),C=(0,wn.J)({permission:hs}),{t:w}=(0,vn.i)(gs);return E.loading||C.loading?null:E.allowed&&C.allowed?(0,e.jsx)(e.Fragment,{children:a.children}):(0,e.jsx)(B.B,{title:w("kubernetesContentPage.permissionAlert.title"),message:w("kubernetesContentPage.permissionAlert.message")})}const Er=({entity:a,refreshIntervalMs:E})=>{const{kubernetesObjects:C,error:w}=T(a,E),gt=C?.items.map(Zt=>Zt.cluster)??[],Ct=C?.items.filter(Zt=>Zt.errors.length>0)??[],It=C!==void 0?Is(C):new Map;return(0,e.jsx)(un.Y,{themeId:"tool",children:(0,e.jsx)(Je.U,{children:(0,e.jsx)(Ms,{children:(0,e.jsxs)(O.Provider,{value:[...It.values()].flat(),children:[C===void 0&&w===void 0&&(0,e.jsx)(Un.k,{}),Ct.length>0&&(0,e.jsx)(s.A,{container:!0,spacing:3,direction:"column",children:(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(N,{entityName:a.metadata.name,clustersWithErrors:Ct})})}),w!==void 0&&(0,e.jsx)(s.A,{container:!0,spacing:3,direction:"column",children:(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(N,{entityName:a.metadata.name,errorMessage:w})})}),C&&(0,e.jsxs)(s.A,{container:!0,spacing:3,direction:"column",children:[(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(G,{detectedErrors:It,clusters:gt})}),(0,e.jsx)(s.A,{item:!0,children:(0,e.jsx)(o.A,{variant:"h3",children:"Your Clusters"})}),(0,e.jsxs)(s.A,{item:!0,container:!0,children:[C?.items.length<=0&&(0,e.jsx)(s.A,{container:!0,justifyContent:"space-around",direction:"row",alignItems:"center",spacing:2,children:(0,e.jsx)(s.A,{item:!0,xs:8,children:(0,e.jsx)(_.p,{missing:"data",title:"No Kubernetes resources",description:`No resources on any known clusters for ${a.metadata.name}`})})}),C?.items.length>0&&C?.items.map((Zt,ne)=>{const de=new Set(It.get(Zt.cluster.name)?.filter(ye=>ye.sourceRef.kind==="Pod").map(ye=>ye.sourceRef.name));return(0,e.jsx)(s.A,{item:!0,xs:12,children:(0,e.jsx)(lr,{clusterObjects:Zt,podsWithErrors:de})},ne)})]})]})]})})})})},ms="backstage.io/kubernetes-id",Bs="backstage.io/kubernetes-label-selector",Pr="kubernetes.io/api-server",Cr="kubernetes.io/api-server-certificate-authority",jr="kubernetes.io/auth-provider",Tr="kubernetes.io/oidc-token-provider",A="kubernetes.io/skip-metrics-lookup",n="kubernetes.io/skip-tls-verify",l="kubernetes.io/dashboard-url",v="kubernetes.io/dashboard-app",R="kubernetes.io/dashboard-parameters",Z="kubernetes.io/aws-assume-role",ht="kubernetes.io/x-k8s-aws-id",ut="kubernetes.io/aws-external-id",Rt=a=>!!a.metadata.annotations?.[ms]||!!a.metadata.annotations?.[Bs],Kt=a=>{const{entity:E}=(0,r.tN)(),C=E.metadata.annotations?.[ms],w=E.metadata.annotations?.[Bs];return C||w?(0,e.jsx)(c.BV,{children:(0,e.jsx)(c.qh,{path:"/",element:(0,e.jsx)(Er,{entity:E,refreshIntervalMs:a.refreshIntervalMs})})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.o,{annotation:ms}),(0,e.jsx)("h1",{children:"Or use a label selector query, which takes precedence over the previous annotation."}),(0,e.jsx)(X.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/features/kubernetes/configuration#surfacing-your-kubernetes-components-as-part-of-an-entity",children:"Read Kubernetes Plugin Docs"})]})}},12554:(et,m,t)=>{"use strict";t.d(m,{b:()=>p});var e=t(31085),r=t(58837),h=t(58007),c=t(8109),s=t(5951),o=t(31994),d=t(99338);const g=(0,r.A)(u=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:u.spacing(2)},divider:{margin:u.spacing(2)}}),{name:"BackstageErrorPanel"}),i=({error:u,message:f,stack:y,children:T})=>{const O=g();return(0,e.jsxs)(h.A,{dense:!0,children:[(0,e.jsxs)(c.A,{alignItems:"flex-start",children:[(0,e.jsx)(s.A,{classes:{secondary:O.text},primary:"Error",secondary:u}),(0,e.jsx)(o.l,{text:u})]}),(0,e.jsxs)(c.A,{alignItems:"flex-start",children:[(0,e.jsx)(s.A,{classes:{secondary:O.text},primary:"Message",secondary:f}),(0,e.jsx)(o.l,{text:f})]}),y&&(0,e.jsxs)(c.A,{alignItems:"flex-start",children:[(0,e.jsx)(s.A,{classes:{secondary:O.text},primary:"Stack Trace",secondary:y}),(0,e.jsx)(o.l,{text:y})]}),T]})};function p(u){const{title:f,error:y,defaultExpanded:T,titleFormat:O,children:b}=u;return(0,e.jsx)(d.B,{severity:"error",title:f??y.message,defaultExpanded:T,titleFormat:O,children:(0,e.jsx)(i,{error:y.name,message:y.message,stack:y.stack,children:b})})}},13930:(et,m,t)=>{"use strict";t.d(m,{b:()=>r});var e=t(1952);const r=(0,e.Q)("route-ref-type",()=>Symbol("route-ref-type"))},14146:(et,m,t)=>{"use strict";t.d(m,{$:()=>r});var e=t(28967);const r=(0,e.y)({id:"core.scmauth"})},14150:(et,m,t)=>{"use strict";t.d(m,{B:()=>y});var e=t(31085),r=t(77125),h=t(45634),c=t(58007),s=t(8109),o=t(55197),d=t(7031),g=t(72501),i=t(14041);const p=(0,d.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(g.A),u=(0,d.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(r.A),f=(0,d.A)({root:{fontStyle:"italic"}},{name:"BreadcrumbsCurrentPage"})(r.A);function y(T){const{children:O,...b}=T,[B,j]=(0,i.useState)(null),N=i.Children.toArray(O),[F,D,...k]=N,G=k.length?k.pop():N[N.length-1],I=N.length>3,tt=q=>{j(q.currentTarget)},H=()=>{j(null)},V=!!B;return(0,e.jsxs)(i.Fragment,{children:[(0,e.jsxs)(h.A,{"aria-label":"breadcrumb",...b,children:[N.length>1&&(0,e.jsx)(u,{clone:!0,children:F}),N.length>2&&(0,e.jsx)(u,{clone:!0,children:D}),I&&(0,e.jsx)(p,{onClick:tt,children:"..."}),(0,e.jsx)(f,{children:G})]}),(0,e.jsx)(o.Ay,{open:V,anchorEl:B,onClose:H,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,e.jsx)(c.A,{children:k.map((q,it)=>(0,e.jsx)(s.A,{button:!0,children:(0,e.jsx)(u,{clone:!0,children:q})},it))})})]})}},14158:(et,m,t)=>{"use strict";t.d(m,{i:()=>s});var e=t(31085),r=t(78560),h=t(14041),c=t(37281);function s(o){const{entityRefs:d,hideIcons:g,...i}=o;return(0,e.jsx)(e.Fragment,{children:d.map((p,u)=>{const f=typeof p=="string"?p:(0,r.U2)(p);return(0,e.jsxs)(h.Fragment,{children:[u>0&&", ",(0,e.jsx)(c.z,{...i,entityRef:p,hideIcon:g})]},`${u}.${f}`)})})}},14174:(et,m,t)=>{"use strict";t.d(m,{b:()=>g});var e=t(45250),r=t.n(e),h=t(21385);const c="github.com",s="https://api.github.com",o="https://raw.githubusercontent.com";function d(i){const p=i.getOptionalString("host")??c;let u=i.getOptionalString("apiBaseUrl"),f=i.getOptionalString("rawBaseUrl");const y=i.getOptionalString("token")?.trim(),T=i.getOptionalConfigArray("apps")?.map(O=>({appId:O.getNumber("appId"),clientId:O.getString("clientId"),clientSecret:O.getString("clientSecret"),webhookSecret:O.getOptionalString("webhookSecret"),privateKey:O.getString("privateKey"),allowedInstallationOwners:O.getOptionalStringArray("allowedInstallationOwners")}));if(!(0,h.HO)(p))throw new Error(`Invalid GitHub integration config, '${p}' is not a valid host`);return u?u=(0,e.trimEnd)(u,"/"):p===c&&(u=s),f?f=(0,e.trimEnd)(f,"/"):p===c&&(f=o),{host:p,apiBaseUrl:u,rawBaseUrl:f,token:y,apps:T}}function g(i){const p=i.map(d);return p.some(u=>u.host===c)||p.push({host:c,apiBaseUrl:s,rawBaseUrl:o}),p}},14883:(et,m,t)=>{"use strict";t.d(m,{C:()=>T});var e=t(31085),r=t(96872),h=t(14041);const c=(0,h.lazy)(()=>Promise.all([t.e(1072),t.e(6113),t.e(2589),t.e(3157)]).then(t.bind(t,83157)).then(O=>({default:O.AsyncApiDefinition}))),s=O=>(0,e.jsx)(h.Suspense,{fallback:(0,e.jsx)(r.k,{}),children:(0,e.jsx)(c,{...O})}),o=(0,h.lazy)(()=>t.e(3071).then(t.bind(t,33071)).then(O=>({default:O.GraphQlDefinition}))),d=O=>(0,e.jsx)(h.Suspense,{fallback:(0,e.jsx)(r.k,{}),children:(0,e.jsx)(o,{...O})}),g=(0,h.lazy)(()=>Promise.all([t.e(1072),t.e(303),t.e(9603)]).then(t.bind(t,49603)).then(O=>({default:O.OpenApiDefinition}))),i=O=>{const b=O.supportedSubmitMethods?.map(B=>B.toLocaleLowerCase());return(0,e.jsx)(h.Suspense,{fallback:(0,e.jsx)(r.k,{}),children:(0,e.jsx)(g,{...O,supportedSubmitMethods:b})})};var p=t(62112),u=t(54917);const f=O=>{const b=(0,u.A)();return(0,e.jsx)(p.z,{customStyle:{backgroundColor:b.palette.background.default},text:O.definition,language:"protobuf",showCopyCodeButton:!0})},y=O=>{const{definition:b}=O,B=(0,u.A)();return(0,e.jsx)(p.z,{customStyle:{backgroundColor:B.palette.background.default},text:b,language:"typescript",showCopyCodeButton:!0})};function T(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:O=>(0,e.jsx)(i,{definition:O})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:O=>(0,e.jsx)(s,{definition:O})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:O=>(0,e.jsx)(d,{definition:O})},{type:"grpc",title:"gRPC",component:O=>(0,e.jsx)(f,{definition:O})},{type:"trpc",title:"tRPC",component:O=>(0,e.jsx)(y,{definition:O})}]}},14920:(et,m,t)=>{"use strict";t.d(m,{E:()=>r});var e=t(2488);const r=(0,e.I)({id:"catalog-index",optional:!0,defaultTarget:"catalog.catalogIndex"})},15246:(et,m,t)=>{"use strict";t.d(m,{e:()=>e});const e=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"})},15496:(et,m,t)=>{"use strict";t.d(m,{B:()=>c,c:()=>h});var e=t(77555),r=t(2488);const h=(0,e.H)({id:"catalog-graph"}),c=(0,r.I)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0,defaultTarget:"catalog.catalogEntity"})},16400:(et,m,t)=>{"use strict";t.d(m,{T7:()=>d,TY:()=>p,tN:()=>i});var e=t(31085),r=t(78560),h=t(19224),c=t(54852),s=t(4790);const o=(0,c.tK)("entity-context"),d=u=>{const{children:f,entity:y,loading:T,error:O,refresh:b}=u,B={entity:y,loading:T,error:O,refresh:b};return(0,e.jsx)(o.Provider,{value:(0,s.B)({1:B}),children:(0,e.jsx)(h.I,{attributes:{...y?{entityRef:(0,r.U2)(y)}:void 0},children:f})})},g=u=>jsx(d,{entity:u.entity,loading:!u.entity,error:void 0,refresh:void 0,children:u.children});function i(){const u=(0,c.qO)("entity-context");if(!u)throw new Error("Entity context is not available");const f=u.atVersion(1);if(!f)throw new Error("EntityContext v1 not available");if(!f.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:f.entity}}function p(){const u=(0,c.qO)("entity-context");if(!u)throw new Error("Entity context is not available");const f=u.atVersion(1);if(!f)throw new Error("EntityContext v1 not available");const{entity:y,loading:T,error:O,refresh:b}=f;return{entity:y,loading:T,error:O,refresh:b}}},16454:(et,m,t)=>{"use strict";t.d(m,{U:()=>o});var e=t(31085),r=t(58837),h=t(53373),c=t.n(h);const s=(0,r.A)(d=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:d.spacing(3),paddingBottom:d.spacing(3),paddingLeft:d.spacing(2),paddingRight:d.spacing(2),[d.breakpoints.up("sm")]:{paddingLeft:d.spacing(3),paddingRight:d.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function o(d){const{className:g,stretch:i,noPadding:p,children:u,...f}=d,y=s();return(0,e.jsx)("article",{...f,className:c()(y.root,g,{[y.stretch]:i,[y.noPadding]:p}),children:u})}},17138:(et,m,t)=>{"use strict";t.d(m,{d:()=>i});var e=t(31085),r=t(77125),h=t(58837),c=t(72501),s=t(93285);const o=p=>(0,h.A)(u=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:u.spacing(2),textAlign:p.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:u.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),d=({title:p,className:u})=>(0,e.jsx)(c.A,{variant:"h4",component:"h2",className:u,"data-testid":"header-title",children:p}),g=({description:p,className:u})=>p?(0,e.jsx)(c.A,{variant:"body2",className:u,"data-testid":"header-description",children:p}):null;function i(p){const{description:u,title:f,titleComponent:y=void 0,children:T,descriptionComponent:O=void 0,textAlign:b="left"}=p,B=o({textAlign:b})(),j=y||(0,e.jsx)(d,{title:f,className:B.title}),N=O||(0,e.jsx)(g,{description:u,className:B.description});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.m,{title:f}),(0,e.jsxs)(r.A,{className:B.container,children:[(0,e.jsxs)(r.A,{className:B.leftItemsBox,children:[j,N]}),(0,e.jsx)(r.A,{className:B.rightItemsBox,children:T})]})]})}},17174:(et,m,t)=>{"use strict";t.d(m,{s:()=>d});var e=t(31085),r=t(77125),h=t(99703),c=t(58837);const s=g=>(0,h.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:g.spacing(2)}}),o=(0,c.A)(s,{name:"BackstageItemCardGrid"});function d(g){const{children:i,...p}=g,u=o(p);return(0,e.jsx)(r.A,{className:u.root,...p,children:i})}},17749:(et,m,t)=>{"use strict";t.d(m,{Oc:()=>h,Ri:()=>c,rQ:()=>r});var e=t(77555);const r=(0,e.H)({id:"techdocs:index-page"}),h=(0,e.H)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),c=(0,e.H)({id:"techdocs:catalog-reader-view"})},17875:(et,m,t)=>{"use strict";t.d(m,{q:()=>B});var e=t(31085),r=t(24259),h=t(78560),c=t(18139),s=t(30043),o=t(91072),d=t(45809),g=t(16249),i=t(61783),p=t(59447),u=t(14041),f=t(73466),y=t(96290),T=t(10265),O=t(30268),b=t(71135);const B=D=>{const{t:k}=(0,T.i)(O.W),{onChange:G,schema:{title:I=k("fields.entityPicker.title"),description:tt=k("fields.entityPicker.description")},required:H,uiSchema:V,rawErrors:q,formData:it,idSchema:ct,errors:Q}=D,lt=F(V),st=V["ui:options"]?.defaultKind,mt=V["ui:options"]?.defaultNamespace||void 0,rt=V?.["ui:disabled"]??!1,nt=(0,c.gf)(s.v),z=(0,c.gf)(o.n),{value:U,loading:P}=(0,f.A)(async()=>{const J=["kind","metadata.name","metadata.namespace","metadata.title","metadata.description","spec.profile.displayName","spec.type"],{items:ot}=await nt.getEntities(lt?{filter:lt,fields:J}:{filter:void 0,fields:J}),At=new Map(await Promise.all(ot.map(async X=>{const dt=await z.forEntity(X).promise;return[(0,h.U2)(X),dt]})));return{catalogEntities:ot,entityRefToPresentation:At}}),S=V["ui:options"]?.allowArbitraryValues??!0,L=(0,u.useCallback)(J=>{try{const ot=(0,h.KU)(J,{defaultKind:st,defaultNamespace:mt});return(0,h.U2)(ot)}catch{return J}},[st,mt]),$=(0,u.useCallback)((J,ot,At)=>{if(typeof ot!="string")G(ot?(0,h.U2)(ot):void 0);else if(At==="blur"||At==="create-option"){let X=ot;try{X=(0,h.U2)((0,h.KU)(ot,{defaultKind:st,defaultNamespace:mt}))}catch{}(it!==ot||S)&&G(X)}},[G,it,st,mt,S]),K=U?.catalogEntities.find(J=>(0,h.U2)(J)===it)??(S&&it?L(it):"");return(0,u.useEffect)(()=>{H&&!S&&U?.catalogEntities.length===1&&K===""&&G((0,h.U2)(U.catalogEntities[0]))},[U,G,K,H,S]),(0,e.jsx)(b.g,{rawErrors:q,rawDescription:V["ui:description"]??tt,required:H,disabled:rt,errors:Q,children:(0,e.jsx)(i.Ay,{disabled:rt||H&&!S&&U?.catalogEntities.length===1,id:ct?.$id,value:K,loading:P,onChange:$,options:U?.catalogEntities||[],getOptionLabel:J=>typeof J=="string"?J:U?.entityRefToPresentation.get((0,h.U2)(J))?.entityRef,autoSelect:!0,freeSolo:S,renderInput:J=>(0,e.jsx)(g.A,{...J,label:I,margin:"dense",variant:"outlined",required:H,disabled:rt,InputProps:J.InputProps}),renderOption:J=>(0,e.jsx)(d.d,{entityRef:J}),filterOptions:(0,p.Z)({stringify:J=>U?.entityRefToPresentation.get((0,h.U2)(J))?.primaryTitle}),ListboxComponent:y.J})})};function j(D){return typeof D=="object"&&D.exists?r.c:D?.toString()}function N(D){const k={};for(const[G,I]of Object.entries(D))Array.isArray(I)?k[G]=I:k[G]=j(I);return k}function F(D){const k=D["ui:options"]?.allowedKinds,G=D["ui:options"]?.catalogFilter||k&&{kind:k};if(G)return Array.isArray(G)?G.map(N):N(G)}},18050:(et,m,t)=>{"use strict";t.d(m,{NC:()=>f,zZ:()=>y,QJ:()=>u});var e=t(31085),r=t(14041),h=t(19224),c=t(52262),s=t(95208),o=t(72814),d=t(85408);class g extends r.Component{static getDerivedStateFromError(O){return{error:O}}state={error:void 0};handleErrorReset=()=>{this.setState({error:void 0})};render(){const{error:O}=this.state,{app:b,plugin:B}=this.props,{ErrorBoundaryFallback:j}=b.getComponents();return O?(0,e.jsx)(j,{error:O,resetError:this.handleErrorReset,plugin:B}):this.props.children}}var i=t(48813),p=t(89392);function u(T){const{component:O,mountPoint:b,name:B}=T;return y({component:{lazy:()=>O().then(j=>{const N=D=>{const k=(0,c.s)();try{(0,o.S)(b)}catch(G){if(typeof G=="object"&&G!==null){const{message:I}=G;if(typeof I=="string"&&I.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${b} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw G}return(0,r.useEffect)(()=>{k.captureEvent(i.t,"")},[k]),(0,e.jsx)(j,{...D})},F=B||j.displayName||j.name||"LazyComponent";return N.displayName=`RoutableExtension(${F})`,N})},data:{"core.mountPoint":b},name:B})}function f(T){const{component:O,name:b}=T;return y({component:O,name:b})}function y(T){const{data:O={},name:b}=T;b||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let B;if("lazy"in T.component){const N=T.component.lazy;B=(0,r.lazy)(()=>N().then(F=>({default:F}),F=>{const D=b?` of the ${b} extension`:"";throw new p.HK(`Failed lazy loading${D}, try to reload the page`,F)}))}else B=T.component.sync;const j=b||B.displayName||B.name||"Component";return{expose(N){const F=D=>{const k=(0,s.n)(),{Progress:G}=k.getComponents(),I=O?.["core.mountPoint"];return(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(G,{}),children:(0,e.jsx)(g,{app:k,plugin:N,children:(0,e.jsx)(h.I,{attributes:{pluginId:N.getId(),...b&&{extension:b},...I&&{routeRef:I.id}},children:(0,e.jsx)(B,{...D})})})})};(0,d.h)(F,"core.plugin",N),(0,d.h)(F,"core.extensionName",b);for(const[D,k]of Object.entries(O))(0,d.h)(F,D,k);return F.displayName=`Extension(${j})`,F}}}},18139:(et,m,t)=>{"use strict";t.d(m,{Q2:()=>c,gf:()=>s});var e=t(31085),r=t(54852),h=t(89392);function c(){const d=(0,r.qO)("api-context");if(!d)throw new h.EH("API context is not available");const g=d.atVersion(1);if(!g)throw new h.EH("ApiContext v1 not available");return g}function s(d){const i=c().get(d);if(!i)throw new h.EH(`No implementation available for ${d}`);return i}function o(d){return function(i){const p=f=>{const y=c(),T={};for(const O in d)if(d.hasOwnProperty(O)){const b=d[O],B=y.get(b);if(!B)throw new NotImplementedError(`No implementation available for ${b}`);T[O]=B}return jsx(i,{...f,...T})},u=i.displayName||i.name||"Component";return p.displayName=`withApis(${u})`,p}}},18597:(et,m,t)=>{"use strict";t.d(m,{_:()=>Le});var e=t(31085),r=t(55488),h=t(97214),c=t(64398),s=t(82326),o=t(79182),d=t(14150),g=t(96872),i=t(62905),p=t(16454),u=t(99338),f=t(75202),y=t(85408),T=t(76888),O=t(77026),b=t(72814),B=t(18139),j=t(10265),N=t(45809),F=t(25999),D=t(699),k=t(14158),G=t(20987),I=t(16400),tt=t(30043),H=t(37281),V=t(77125),q=t(64947),it=t(76891),ct=t(93453),Q=t(46805),lt=t(61477),st=t(38605),mt=t(31653),rt=t(58837),nt=t(14041),z=t(78560),U=t(99424),P=t(80609),S=t(47090),L=t(95208),$=t(59461),K=t(53373),J=t.n(K),ot=t(18690),At=t(73466),X=t(53318),dt=t(10437);const xt=dt.A;function $t(vt,Nt){if(vt)return vt.toLocaleLowerCase("en-US");if(Nt)try{return(0,z.KU)(Nt).kind.toLocaleLowerCase("en-US")}catch{return}}function wt(vt,Nt){const Qt=(0,L.n)(),Jt=$t(vt,Nt);return Jt&&Qt.getSystemIcon(`kind:${Jt}`)||xt}function _t(vt){const{kind:Nt,entityRef:Qt,...Jt}=vt,qt=wt(Nt,Qt);return(0,e.jsx)(qt,{...Jt})}var Ut=t(80084);const zt=(0,rt.A)(vt=>({node:{fill:vt.palette.grey[300],stroke:vt.palette.grey[300],"&.primary":{fill:vt.palette.primary.light,stroke:vt.palette.primary.light},"&.secondary":{fill:vt.palette.secondary.light,stroke:vt.palette.secondary.light}},text:{fill:vt.palette.getContrastText(vt.palette.grey[300]),"&.primary":{fill:vt.palette.primary.contrastText},"&.secondary":{fill:vt.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Xt(vt){const Nt=(0,B.gf)(tt.v),Qt=(0,z.U2)(vt),{loading:Jt,error:qt,value:ae}=(0,At.A)(async()=>{const oe=await Nt.getEntityAncestors({entityRef:Qt}),le=new Array,Ee=new Array;for(const ve of oe.items){const ue=(0,z.U2)(ve.entity),ge=ue===oe.rootEntityRef;le.push({id:ue,root:ge,...ve.entity});for(const he of ve.parentEntityRefs)Ee.push({from:ue,to:he})}return{nodes:le,edges:Ee}},[Qt]);return{loading:Jt,error:qt,nodes:ae?.nodes||[],edges:ae?.edges||[]}}function se({node:vt}){const Nt=zt(),Qt=(0,ot.Zp)(),Jt=(0,b.S)(G.s),[qt,ae]=(0,nt.useState)(0),[oe,le]=(0,nt.useState)(0),Ee=(0,L.n)(),ve=(0,nt.useRef)(null);(0,nt.useLayoutEffect)(()=>{if(ve.current){let{height:Oe,width:We}=ve.current.getBBox();Oe=Math.round(Oe),We=Math.round(We),(Oe!==oe||We!==qt)&&(ae(We),le(Oe))}},[qt,oe]);const ue=Ee.getSystemIcon(`kind:${vt.kind.toLocaleLowerCase("en-US")}`),ge=10,he=oe,Ae=ue?he+ge:0,xe=Ae+qt+ge*2,Ce=oe+ge*2,Te=vt.metadata.title||(vt.kind&&vt.metadata.name&&vt.metadata.namespace?(0,X.S)({kind:vt.kind,name:vt.metadata.name,namespace:vt.metadata.namespace||""}):vt.id),Ue=()=>{Qt(Jt({kind:vt.kind,namespace:vt.metadata.namespace||r.oQ,name:vt.metadata.name}))};return(0,e.jsxs)("g",{onClick:Ue,className:Nt.clickable,children:[(0,e.jsx)("rect",{className:J()(Nt.node,vt.root?"secondary":"primary"),width:xe,height:Ce,rx:10}),ue&&(0,e.jsx)(_t,{kind:vt.kind,y:ge,x:ge,width:he,height:he,className:J()(Nt.text,vt.root?"secondary":"primary")}),(0,e.jsx)("text",{ref:ve,className:J()(Nt.text,vt.root?"secondary":"primary"),y:Ce/2,x:Ae+(qt+ge*2)/2,textAnchor:"middle",alignmentBaseline:"middle",children:Te})]})}function re(vt){const{loading:Nt,error:Qt,nodes:Jt,edges:qt}=Xt(vt.entity),{t:ae}=(0,j.i)(Ut.j);return Nt?(0,e.jsx)(g.k,{}):Qt?(0,e.jsx)(U._,{error:Qt}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.A,{variant:"h2",children:ae("inspectEntityDialog.ancestryPage.title")}),(0,e.jsxs)($.A,{gutterBottom:!0,children:["This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",(0,e.jsx)(f.N_,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity",children:"processors emitted"})," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."]}),(0,e.jsx)(V.A,{mt:4,children:(0,e.jsx)(P.w,{nodes:Jt,edges:qt,renderNode:se,direction:S.D.Direction.BOTTOM_TOP,zoom:"enable-on-click"})})]})}var ce=t(98890),te=t(58007),ie=t(8109),me=t(74219),ee=t(46123),Wt=t(40703),jt=t(48653),pt=t(46423),Y=t(5951),ft=t(62261),Tt=t(72501),Lt=t(97262);const St=(0,rt.A)(vt=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:vt.spacing(2)},helpIcon:{marginLeft:vt.spacing(1),color:vt.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Ht(vt){const Nt=St();return(0,e.jsx)(Y.A,{...vt,primaryTypographyProps:{className:Nt.monospace},secondaryTypographyProps:{className:Nt.monospace}})}function kt(vt){const Nt=St();return(0,e.jsx)(ft.A,{className:Nt.monospace,children:vt.children})}function Dt(vt){return(0,e.jsx)(V.A,{mt:2,children:(0,e.jsx)(Wt.A,{variant:"outlined",children:(0,e.jsxs)(jt.A,{children:[(0,e.jsxs)(Tt.A,{variant:"h6",gutterBottom:!0,children:[vt.title,vt.helpLink&&(0,e.jsx)(Et,{to:vt.helpLink})]}),vt.children]})})})}function Ft(vt){if(vt.match(/^url:https?:\/\//))return vt.slice(4);if(vt.match(/^https?:\/\//))return vt}function Yt(vt){const[Nt,Qt]=vt.entry,Jt=Ft(Qt);return(0,e.jsxs)(ie.A,{children:[vt.indent&&(0,e.jsx)(pt.A,{}),(0,e.jsx)(Ht,{primary:Nt,secondary:Jt?(0,e.jsx)(f.N_,{to:Jt,children:Qt}):Qt})]})}function Et(vt){const Nt=St();return(0,e.jsx)(f.N_,{to:vt.to,className:Nt.helpIcon,children:(0,e.jsx)(Lt.A,{fontSize:"inherit"})})}const at=(0,rt.A)({root:{display:"flex",flexDirection:"column"}});function yt(vt){const Nt=(0,B.gf)(tt.v),Qt=(0,z.U2)(vt),Jt=vt.metadata.annotations?.[ce.Eo],qt=vt.metadata.annotations?.[ce.r2],{loading:ae,error:oe,value:le}=(0,At.A)(async()=>!Jt&&!qt?[]:(await Nt.getEntities({filter:[...Jt?[{[`metadata.annotations.${ce.Eo}`]:Jt}]:[],...qt?[{[`metadata.annotations.${ce.r2}`]:qt}]:[]]})).items,[Jt,qt]);return{loading:ae,error:oe,location:Jt,originLocation:qt,colocatedEntities:le?.filter(Ee=>(0,z.U2)(Ee)!==Qt)}}function Ot(vt){return(0,e.jsxs)(te.A,{dense:!0,children:[vt.header&&(0,e.jsx)(Yt,{entry:vt.header},"header"),vt.entities.map(Nt=>(0,e.jsx)(ie.A,{children:(0,e.jsx)(Ht,{primary:(0,e.jsx)(H.z,{entityRef:Nt})})},(0,z.U2)(Nt)))]})}function bt(vt){const{entity:Nt}=vt,{t:Qt}=(0,j.i)(Ut.j),{loading:Jt,error:qt,location:ae,originLocation:oe,colocatedEntities:le}=yt(Nt);if(Jt)return(0,e.jsx)(g.k,{});if(qt)return(0,e.jsx)(U._,{error:qt});if(!ae&&!oe)return(0,e.jsx)(me.A,{severity:"warning",children:Qt("inspectEntityDialog.colocatedPage.alertNoLocation")});if(!le?.length)return(0,e.jsx)(me.A,{severity:"info",children:Qt("inspectEntityDialog.colocatedPage.alertNoEntity")});if(ae===oe)return(0,e.jsx)(Ot,{entities:le});const Ee=le.filter(ue=>ue.metadata.annotations?.[ce.Eo]===ae),ve=le.filter(ue=>ue.metadata.annotations?.[ce.r2]===oe);return(0,e.jsxs)(e.Fragment,{children:[Ee.length>0&&(0,e.jsx)(Ot,{entities:Ee,header:["At the same location",ae]}),ve.length>0&&(0,e.jsx)(Ot,{entities:ve,header:["At the same origin",oe]})]})}function Mt(vt){const Nt=at(),{t:Qt}=(0,j.i)(Ut.j);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.A,{variant:"h2",children:Qt("inspectEntityDialog.colocatedPage.title")}),(0,e.jsx)($.A,{children:Qt("inspectEntityDialog.colocatedPage.description")}),(0,e.jsx)("div",{className:Nt.root,children:(0,e.jsx)(bt,{entity:vt.entity})})]})}var W=t(62112);function x(vt){return Object.fromEntries([...Object.entries(vt)].sort((Nt,Qt)=>Nt[0]<Qt[0]?-1:1))}function M(vt){const{t:Nt}=(0,j.i)(Ut.j);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.A,{variant:"h2",children:Nt("inspectEntityDialog.jsonPage.title")}),(0,e.jsx)($.A,{children:Nt("inspectEntityDialog.jsonPage.description")}),(0,e.jsx)($.A,{children:(0,e.jsx)("div",{style:{fontSize:"75%"},"data-testid":"code-snippet",children:(0,e.jsx)(W.z,{text:JSON.stringify(x(vt.entity),void 0,2),language:"json",showCopyCodeButton:!0})})})]})}var _=t(65569),Pt=t(87809),Bt=t.n(Pt),Vt=t(40074),Gt=t.n(Vt),pe=t(31994);const fe=(0,rt.A)({root:{display:"flex",flexDirection:"column"}});function Pe(vt){const Nt=fe(),{apiVersion:Qt,kind:Jt,metadata:qt,spec:ae,relations:oe=[],status:le={}}=vt.entity,Ee=Bt()(Gt()(oe,ge=>ge.targetRef),"type"),{t:ve}=(0,j.i)(Ut.j),ue=(0,z.U2)(vt.entity);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.A,{variant:"h2",children:ve("inspectEntityDialog.overviewPage.title")}),(0,e.jsxs)("div",{className:Nt.root,children:[(0,e.jsx)(Dt,{title:"Identity",children:(0,e.jsxs)(te.A,{dense:!0,children:[(0,e.jsx)(ie.A,{children:(0,e.jsx)(Ht,{primary:"apiVersion",secondary:Qt})}),(0,e.jsx)(ie.A,{children:(0,e.jsx)(Ht,{primary:"kind",secondary:Jt})}),ae?.type&&(0,e.jsx)(ie.A,{children:(0,e.jsx)(Ht,{primary:"spec.type",secondary:ae.type?.toString()})}),qt.uid&&(0,e.jsxs)(ie.A,{children:[(0,e.jsx)(Ht,{primary:"uid",secondary:qt.uid}),(0,e.jsx)(_.A,{children:(0,e.jsx)(pe.l,{text:qt.uid})})]}),qt.etag&&(0,e.jsxs)(ie.A,{children:[(0,e.jsx)(Ht,{primary:"etag",secondary:qt.etag}),(0,e.jsx)(_.A,{children:(0,e.jsx)(pe.l,{text:qt.etag})})]}),(0,e.jsxs)(ie.A,{children:[(0,e.jsx)(Ht,{primary:"entityRef",secondary:ue}),(0,e.jsx)(_.A,{children:(0,e.jsx)(pe.l,{text:ue})})]})]})}),(0,e.jsxs)(Dt,{title:"Metadata",children:[!!Object.keys(qt.annotations||{}).length&&(0,e.jsx)(te.A,{dense:!0,subheader:(0,e.jsxs)(kt,{children:["Annotations",(0,e.jsx)(Et,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"})]}),children:Object.entries(qt.annotations).map(ge=>(0,e.jsx)(Yt,{indent:!0,entry:ge},ge[0]))}),!!Object.keys(qt.labels||{}).length&&(0,e.jsx)(te.A,{dense:!0,subheader:(0,e.jsx)(kt,{children:"Labels"}),children:Object.entries(qt.labels).map(ge=>(0,e.jsx)(Yt,{indent:!0,entry:ge},ge[0]))}),!!qt.tags?.length&&(0,e.jsx)(te.A,{dense:!0,subheader:(0,e.jsx)(kt,{children:"Tags"}),children:qt.tags.map((ge,he)=>(0,e.jsxs)(ie.A,{children:[(0,e.jsx)(pt.A,{}),(0,e.jsx)(Ht,{primary:ge})]},`${ge}-${he}`))})]}),!!oe.length&&(0,e.jsx)(Dt,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations",children:Object.entries(Ee).map(([ge,he],Ae)=>(0,e.jsx)("div",{children:(0,e.jsx)(te.A,{dense:!0,subheader:(0,e.jsx)(kt,{children:ge}),children:he.map(xe=>(0,e.jsx)(ie.A,{children:(0,e.jsx)(Ht,{primary:(0,e.jsx)(H.z,{entityRef:xe.targetRef})})},xe.targetRef))})},Ae))}),!!le.items?.length&&(0,e.jsx)(Dt,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses",children:le.items.map((ge,he)=>(0,e.jsxs)("div",{children:[(0,e.jsxs)(Tt.A,{children:[ge.level,": ",ge.type]}),(0,e.jsx)(V.A,{ml:2,children:ge.message})]},he))})]})]})}var Fe=t(92939);function De(vt){const{t:Nt}=(0,j.i)(Ut.j);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.A,{variant:"h2",children:Nt("inspectEntityDialog.yamlPage.title")}),(0,e.jsx)($.A,{children:Nt("inspectEntityDialog.yamlPage.description")}),(0,e.jsx)($.A,{children:(0,e.jsx)("div",{style:{fontSize:"75%"},"data-testid":"code-snippet",children:(0,e.jsx)(W.z,{text:Fe.Ay.stringify(x(vt.entity)),language:"yaml",showCopyCodeButton:!0})})})]})}const be=(0,rt.A)(vt=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:vt.palette.background.paper},tabs:{borderRight:`1px solid ${vt.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Ie(vt){const{children:Nt,value:Qt,index:Jt,...qt}=vt,ae=be();return(0,e.jsx)("div",{role:"tabpanel",hidden:Qt!==Jt,id:`vertical-tabpanel-${Jt}`,"aria-labelledby":`vertical-tab-${Jt}`,className:ae.tabContents,...qt,children:Qt===Jt&&(0,e.jsx)(V.A,{pl:3,pr:3,children:Nt})})}function we(vt){return{id:`vertical-tab-${vt}`,"aria-controls":`vertical-tabpanel-${vt}`}}const ke={overview:"Overview",ancestry:"Ancestry",colocated:"Colocated",json:"Raw JSON",yaml:"Raw YAML"},Ge=Object.keys(ke);function je(vt){const Nt=be(),[Qt,Jt]=(0,nt.useState)(_e(Ge,vt.initialTab)),{t:qt}=(0,j.i)(Ut.j);return(0,nt.useEffect)(()=>{_e(Ge,vt.initialTab)},[vt.open,vt.initialTab]),vt.entity?(0,e.jsxs)(it.A,{fullWidth:!0,maxWidth:"xl",open:vt.open,onClose:vt.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:Nt.fullHeightDialog},children:[(0,e.jsx)(lt.A,{id:"entity-inspector-dialog-title",children:qt("inspectEntityDialog.title")}),(0,e.jsx)(Q.A,{dividers:!0,children:(0,e.jsxs)("div",{className:Nt.root,children:[(0,e.jsx)(mt.A,{orientation:"vertical",variant:"scrollable",value:Qt,onChange:(ae,oe)=>{Jt(oe),vt.onSelect?.(Ge[oe])},"aria-label":"Inspector options",className:Nt.tabs,children:Ge.map((ae,oe)=>(0,e.jsx)(st.A,{label:ke[ae],...we(oe)},ae))}),(0,e.jsx)(Ie,{value:Qt,index:0,children:(0,e.jsx)(Pe,{entity:vt.entity})}),(0,e.jsx)(Ie,{value:Qt,index:1,children:(0,e.jsx)(re,{entity:vt.entity})}),(0,e.jsx)(Ie,{value:Qt,index:2,children:(0,e.jsx)(Mt,{entity:vt.entity})}),(0,e.jsx)(Ie,{value:Qt,index:3,children:(0,e.jsx)(M,{entity:vt.entity})}),(0,e.jsx)(Ie,{value:Qt,index:4,children:(0,e.jsx)(De,{entity:vt.entity})})]})}),(0,e.jsx)(ct.A,{children:(0,e.jsx)(q.A,{onClick:vt.onClose,color:"primary",children:qt("inspectEntityDialog.closeButtonTitle")})})]}):null}function _e(vt,Nt){return Nt?vt.indexOf(Nt):0}var gn=t(37197);function mn(vt){const Nt=(0,B.gf)(tt.v),Qt=vt.metadata.annotations?.[ce.r2],Jt=vt.metadata.uid,qt=Qt==="bootstrap:bootstrap",ae=(0,At.A)(async()=>{const Ae=Nt.getLocationByRef(Qt);let xe;if(!Qt)xe=Promise.resolve([]);else{const Ce=`metadata.annotations.${ce.r2}`;xe=Nt.getEntities({filter:{[Ce]:Qt},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(Te=>Te.items)}return Promise.all([Ae,xe]).then(([Ce,Te])=>({location:Ce,colocatedEntities:Te}))},[Nt,vt]),oe=(0,nt.useCallback)(async function(){const{location:xe}=ae.value;await Nt.removeLocationById(xe.id)},[Nt,ae]),le=(0,nt.useCallback)(async function(){await Nt.removeEntityByUid(Jt)},[Nt,Jt]);if(qt)return{type:"bootstrap",location:Qt,deleteEntity:le};const{loading:Ee,error:ve,value:ue}=ae;if(Ee)return{type:"loading"};if(ve)return{type:"error",error:ve};const{location:ge,colocatedEntities:he}=ue;return ge?{type:"unregister",location:Qt,colocatedEntities:he.map(z.sM),unregisterLocation:oe,deleteEntity:le}:{type:"only-delete",deleteEntity:le}}var fn=t(34477),Nn=t(54195),yn=t(67457);const Wn=(0,rt.A)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),Kn=({entity:vt,onConfirm:Nt,onClose:Qt})=>{const Jt=(0,B.gf)(fn.k),qt=(0,B.gf)(Nn.U),ae=Wn(),oe=mn(vt),[le,Ee]=(0,nt.useState)(!1),[ve,ue]=(0,nt.useState)(!1),ge=qt.getOptionalString("app.title")??"Backstage",{t:he}=(0,j.i)(Ut.j),Ae=(0,nt.useCallback)(async function(){if("unregisterLocation"in oe){ue(!0);try{await oe.unregisterLocation(),Nt()}catch(Ue){(0,yn.t)(Ue),Jt.post({message:Ue.message})}finally{ue(!1)}}},[Jt,Nt,oe]),xe=(0,nt.useCallback)(async function(){if("deleteEntity"in oe){ue(!0);try{await oe.deleteEntity();const Ue=vt.metadata.title??vt.metadata.name;Nt(),Jt.post({message:he("unregisterEntityDialog.deleteEntitySuccessMessage",{entityName:Ue}),severity:"success",display:"transient"})}catch(Ue){(0,yn.t)(Ue),Jt.post({message:Ue.message})}finally{ue(!1)}}},[Jt,Nt,oe,vt,he]),Ce=()=>(0,e.jsx)(ct.A,{className:ae.dialogActions,children:(0,e.jsx)(q.A,{onClick:Qt,color:"primary",children:he("unregisterEntityDialog.cancelButtonTitle")})});return oe.type==="loading"?(0,e.jsx)(g.k,{}):oe.type==="error"?(0,e.jsx)(U._,{error:oe.error}):oe.type==="bootstrap"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(me.A,{severity:"info",children:he("unregisterEntityDialog.bootstrapState.title",{appTitle:ge,location:oe.location})}),(0,e.jsxs)(V.A,{marginTop:2,children:[!le&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.A,{variant:"text",size:"small",color:"primary",className:ae.advancedButton,onClick:()=>Ee(!0),children:he("unregisterEntityDialog.bootstrapState.advancedOptions")}),(0,e.jsx)(Ce,{})]}),le&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.A,{children:he("unregisterEntityDialog.bootstrapState.advancedDescription")}),(0,e.jsx)(q.A,{variant:"contained",color:"secondary",disabled:ve,onClick:xe,children:he("unregisterEntityDialog.deleteButtonTitle")}),(0,e.jsx)(Ce,{})]})]})]}):oe.type==="only-delete"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.A,{children:he("unregisterEntityDialog.onlyDeleteStateTitle")}),(0,e.jsx)(q.A,{variant:"contained",color:"secondary",disabled:ve,onClick:xe,children:he("unregisterEntityDialog.deleteButtonTitle")}),(0,e.jsx)(Ce,{})]}):oe.type==="unregister"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.A,{children:he("unregisterEntityDialog.unregisterState.title")}),(0,e.jsx)($.A,{component:"ul",children:oe.colocatedEntities.map(Te=>(0,e.jsx)("li",{children:(0,e.jsx)(H.z,{entityRef:Te})},`${Te.kind}:${Te.namespace}/${Te.name}`))}),(0,e.jsx)($.A,{children:he("unregisterEntityDialog.unregisterState.subTitle")}),(0,e.jsx)($.A,{component:"ul",children:(0,e.jsx)("li",{children:oe.location})}),(0,e.jsx)($.A,{children:he("unregisterEntityDialog.unregisterState.description",{appTitle:ge})}),(0,e.jsxs)(V.A,{marginTop:2,children:[(0,e.jsx)(q.A,{variant:"contained",color:"secondary",disabled:ve,onClick:Ae,children:he("unregisterEntityDialog.unregisterState.unregisterButtonTitle")}),!le&&(0,e.jsx)(V.A,{component:"span",marginLeft:2,children:(0,e.jsx)(q.A,{variant:"text",size:"small",color:"primary",className:ae.advancedButton,onClick:()=>Ee(!0),children:he("unregisterEntityDialog.unregisterState.advancedOptions")})})]}),le&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.A,{paddingTop:4,paddingBottom:4,children:(0,e.jsx)(gn.A,{})}),(0,e.jsx)($.A,{children:he("unregisterEntityDialog.unregisterState.advancedDescription")}),(0,e.jsx)(q.A,{variant:"contained",color:"secondary",disabled:ve,onClick:xe,children:he("unregisterEntityDialog.deleteButtonTitle")})]})]}):(0,e.jsx)(me.A,{severity:"error",children:he("unregisterEntityDialog.errorStateTitle")})},Fn=vt=>{const{open:Nt,onConfirm:Qt,onClose:Jt,entity:qt}=vt,{t:ae}=(0,j.i)(Ut.j);return(0,e.jsxs)(it.A,{open:Nt,onClose:Jt,children:[(0,e.jsx)(lt.A,{id:"responsive-dialog-title",children:ae("unregisterEntityDialog.title")}),(0,e.jsx)(Q.A,{children:(0,e.jsx)(Kn,{entity:qt,onConfirm:Qt,onClose:Jt})})]})};var vn=t(73657),Xe=t(58045),En=t(88549),kn=t(26314),zn=t(29365),Ye=t(26343),qe=t(28233),An=t(55197),xn=t(71677),Pn=t(85005),Hn=t(71407),Gn=t(56299),Vn=t(10543),Cn=t(92399);function Yn(vt){const{unregisterEntityOptions:Nt,isUnregisterAllowed:Qt,onUnregisterEntity:Jt,onClose:qt}=vt,{t:ae}=(0,j.i)(Xe.W),oe=typeof Nt?.disableUnregister=="boolean",le=(!Qt||(oe?!!Nt?.disableUnregister:Nt?.disableUnregister==="disable"))??!1;let Ee=(0,e.jsx)(e.Fragment,{});return Nt?.disableUnregister!=="hidden"&&(Ee=(0,e.jsxs)(Ye.A,{onClick:()=>{qt(),Jt()},disabled:le,children:[(0,e.jsx)(pt.A,{children:(0,e.jsx)(Cn.A,{fontSize:"small"})}),(0,e.jsx)(Y.A,{primary:ae("entityContextMenu.unregisterMenuTitle")})]})),(0,e.jsx)(e.Fragment,{children:Ee})}var Jn=t(36338),Qn=t(54852),Xn=t(4790);const Zn=(0,Qn.tK)("entity-context-menu-context"),_n=vt=>{const{children:Nt,onMenuClose:Qt}=vt,Jt={onMenuClose:Qt};return(0,e.jsx)(Zn.Provider,{value:(0,Xn.B)({1:Jt}),children:Nt})},qn=(0,rt.A)(vt=>({button:{color:vt.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function ts(vt){const{UNSTABLE_extraContextMenuItems:Nt,UNSTABLE_contextMenuOptions:Qt,contextMenuItems:Jt,onUnregisterEntity:qt,onInspectEntity:ae}=vt,{t:oe}=(0,j.i)(Xe.W),[le,Ee]=(0,nt.useState)(),ve=qn(),ge=(0,Gn.A)(Vn.Nf).allowed,he=Oe=>{Ee(Oe.currentTarget)},Ae=()=>{Ee(void 0)},xe=(0,B.gf)(fn.k),[Ce,Te]=(0,Jn.A)();(0,nt.useEffect)(()=>{!Ce.error&&Ce.value&&xe.post({message:oe("entityContextMenu.copiedMessage"),severity:"info",display:"transient"})},[Ce,xe,oe]);const Ue=Nt&&[...Nt.map(Oe=>(0,e.jsxs)(Ye.A,{onClick:()=>{Ae(),Oe.onClick()},children:[(0,e.jsx)(pt.A,{children:(0,e.jsx)(Oe.Icon,{fontSize:"small"})}),(0,e.jsx)(Y.A,{primary:Oe.title})]},Oe.title)),(0,e.jsx)(gn.A,{},"the divider is here!")];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(xn.Ay,{title:oe("entityContextMenu.moreButtonTitle"),arrow:!0,children:(0,e.jsx)(zn.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!le,role:"button",onClick:he,"data-testid":"menu-button",className:ve.button,id:"long-menu",children:(0,e.jsx)(Hn.A,{})})}),(0,e.jsx)(An.Ay,{open:!!le,onClose:Ae,anchorEl:le,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu",PaperProps:{style:{minWidth:200}},children:(0,e.jsxs)(qe.A,{autoFocusItem:!!le,children:[Ue,Jt===void 0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Yn,{unregisterEntityOptions:Qt,isUnregisterAllowed:ge,onUnregisterEntity:qt,onClose:Ae}),(0,e.jsxs)(Ye.A,{onClick:()=>{Ae(),ae()},children:[(0,e.jsx)(pt.A,{children:(0,e.jsx)(Pn.A,{fontSize:"small"})}),(0,e.jsx)(Y.A,{primary:oe("entityContextMenu.inspectMenuTitle")})]}),(0,e.jsxs)(Ye.A,{onClick:()=>{Ae(),Te(window.location.toString())},children:[(0,e.jsx)(pt.A,{children:(0,e.jsx)(kn.A,{fontSize:"small"})}),(0,e.jsx)(Y.A,{primary:oe("entityContextMenu.copyURLMenuTitle")})]})]}):(0,e.jsx)(_n,{onMenuClose:Ae,children:Jt})]})})]})}const jn="plugin.catalog.entityLayoutRoute",tn=()=>null;(0,y.h)(tn,jn,!0),(0,y.h)(tn,"core.gatherMountPoints",!0);function Tn(vt){const{entity:Nt,title:Qt}=vt;return(0,e.jsxs)(V.A,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%",children:[(0,e.jsx)(V.A,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",children:Nt?(0,e.jsx)(N.d,{entityRef:Nt,hideIcon:!0}):Qt}),Nt&&(0,e.jsx)(F.u,{entity:Nt})]})}function On(vt,Nt,Qt,Jt){const qt=vt??Jt?.kind??"",ae=Nt??Jt?.metadata.namespace??"";return{headerTitle:`${Jt?.metadata.title??Qt??Jt?.metadata.name??""}${ae&&ae!==r.oQ?` in ${ae}`:""}`,headerType:(()=>{let le=qt.toLocaleLowerCase("en-US");return Jt&&Jt.spec&&"type"in Jt.spec&&(le+=" \u2014 ",le+=Jt.spec.type.toLocaleLowerCase("en-US")),le})()}}function es(vt){const{entity:Nt}=vt,Qt=(0,D.t)(Nt,h.vv),{t:Jt}=(0,j.i)(Xe.W);return(0,e.jsxs)(e.Fragment,{children:[Qt.length>0&&(0,e.jsx)(c.S,{label:Jt("entityLabels.ownerLabel"),contentTypograpyRootComponent:"p",value:(0,e.jsx)(k.i,{entityRefs:Qt,defaultKind:"Group",color:"inherit"})}),Nt.spec?.lifecycle&&(0,e.jsx)(c.S,{label:Jt("entityLabels.lifecycleLabel"),value:Nt.spec.lifecycle?.toString()})]})}function Rn(vt=[],Nt=[]){for(const Qt of Nt){const Jt=vt.find(qt=>qt.type===Qt);if(Jt)return Jt}return null}const $e=(0,rt.A)(vt=>({breadcrumbs:{color:vt.page.fontColor,fontSize:vt.typography.caption.fontSize,textTransform:"uppercase",marginTop:vt.spacing(1),opacity:.8,"& span ":{color:vt.page.fontColor,textDecoration:"underline",textUnderlineOffset:"3px"}}})),Le=vt=>{const{UNSTABLE_extraContextMenuItems:Nt,UNSTABLE_contextMenuOptions:Qt,children:Jt,NotFoundComponent:qt,parentEntityRelations:ae}=vt,oe=$e(),{kind:le,namespace:Ee,name:ve}=(0,T.K)(G.s),{entity:ue,loading:ge,error:he}=(0,I.TY)(),Ae=(0,ot.zy)(),xe=(0,O.O)(Jt,Qe=>Qe.selectByComponentData({key:jn,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:He})=>{if(ue){if(He.if&&!He.if(ue))return[]}else return[];return[{path:He.path,title:He.title,children:He.children,tabProps:He.tabProps}]}),[ue]),{headerTitle:Ce,headerType:Te}=On(le,Ee,ve,ue),[Ue,Oe]=(0,nt.useState)(!1),We=(0,ot.Zp)(),[ns,on]=(0,vn.ok)(),Re=(0,b.S)(En.rQ),Sn=(0,b.S)(En.pS),{t:ss}=(0,j.i)(Xe.W),an=async()=>{Oe(!1),We(Sn?Sn():Re())},Me=Rn(ue?.relations??[],ae??[]),ze=(0,B.gf)(tt.v),{value:en}=(0,At.A)(async()=>Me?Rn((await ze.getEntityByRef(Me?.targetRef))?.relations,ae):null,[Me]);(0,nt.useEffect)(()=>{Oe(!1)},[Ae.pathname]);const Ze=ns.get("inspect"),Ve=typeof Ze=="string";return(0,e.jsxs)(s.Y,{themeId:ue?.spec?.type?.toString()??"home",children:[(0,e.jsx)(o.Y,{title:(0,e.jsx)(Tn,{title:Ce,entity:ue}),pageTitleOverride:Ce,type:Te,subtitle:Me&&(0,e.jsxs)(d.B,{separator:">",className:oe.breadcrumbs,children:[en&&(0,e.jsx)(H.z,{entityRef:en.targetRef,disableTooltip:!0}),(0,e.jsx)(H.z,{entityRef:Me.targetRef,disableTooltip:!0}),ve]}),children:ue&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(es,{entity:ue}),(0,e.jsx)(ts,{UNSTABLE_extraContextMenuItems:Nt,UNSTABLE_contextMenuOptions:Qt,onUnregisterEntity:()=>Oe(!0),onInspectEntity:()=>on("inspect")})]})}),ge&&(0,e.jsx)(g.k,{}),ue&&(0,e.jsx)(i.k,{routes:xe}),he&&(0,e.jsx)(p.U,{children:(0,e.jsx)(me.A,{severity:"error",children:he.toString()})}),!ge&&!he&&!ue&&(0,e.jsx)(p.U,{children:qt||(0,e.jsxs)(u.B,{title:ss("entityLabels.warningPanelTitle"),children:["There is no ",le," with the requested"," ",(0,e.jsx)(f.N_,{to:"https://backstage.io/docs/features/software-catalog/references",children:"kind, namespace, and name"}),"."]})}),Ve&&(0,e.jsx)(je,{entity:ue,initialTab:Ze||void 0,onSelect:Qe=>on(`inspect=${Qe}`),open:!0,onClose:()=>on()}),(0,e.jsx)(Fn,{open:Ue,entity:ue,onConfirm:an,onClose:()=>Oe(!1)})]})};Le.Route=tn},19224:(et,m,t)=>{"use strict";t.d(m,{I:()=>d,p:()=>o});var e=t(31085),r=t(54852),h=t(4790),c=t(14041);const s=(0,r.tK)("analytics-context"),o=()=>{const g=(0,c.useContext)(s);if(g===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const i=g.atVersion(1);if(i===void 0)throw new Error("No context found for version 1.");return i},d=g=>{const{attributes:i,children:p}=g,f={...o(),...i},y=(0,h.B)({1:f});return(0,e.jsx)(s.Provider,{value:y,children:p})}},19579:(et,m,t)=>{"use strict";t.d(m,{v:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.scaffolder.form-fields"})},19742:(et,m,t)=>{"use strict";t.d(m,{M:()=>h});var e=t(95201);const h=e.NH.schema},20570:(et,m,t)=>{"use strict";t.d(m,{y:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.search.queryservice"});class h{constructor(s){this.mockedResults=s}query(){return Promise.resolve(this.mockedResults||{results:[]})}}},20987:(et,m,t)=>{"use strict";t.d(m,{$:()=>o,s:()=>s});var e=t(78560),r=t(55488),h=t(77555),c=t(1952);const s=(0,c.Q)("catalog:entity-route-ref",()=>(0,h.H)({id:"catalog:entity",params:["namespace","kind","name"]}));function o(d,g){let i,p,u;if(typeof d=="string"){const y=(0,e.KU)(d);i=y.kind,p=y.namespace,u=y.name}else"metadata"in d?(i=d.kind,p=d.metadata.namespace,u=d.metadata.name):(i=d.kind,p=d.namespace,u=d.name);i=i.toLocaleLowerCase("en-US"),p=p?.toLocaleLowerCase("en-US")??r.oQ;const{encodeParams:f=!1}=g||{};return f&&(i=encodeURIComponent(i),p=encodeURIComponent(p),u=encodeURIComponent(u)),{kind:i,namespace:p,name:u}}},21332:(et,m,t)=>{"use strict";t.d(m,{n:()=>b});var e=t(31085),r=t(40703),h=t(59469),c=t(48653),s=t(45685),o=t(37197),d=t(58837),g=t(7031),i=t(53373),p=t.n(i),u=t(25646),f=t(66670);const y=(0,d.A)(B=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},contentAlignBottom:{display:"flex",alignItems:"self-end"},header:{padding:B.spacing(2,2,2,2.5)},headerTitle:{fontWeight:B.typography.fontWeightBold},headerSubheader:{paddingTop:B.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),T=(0,g.A)(B=>({root:{display:"inline-block",padding:B.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(h.A),O={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function b(B){const{title:j,subheader:N,divider:F=!0,deepLink:D,slackChannel:k,errorBoundaryProps:G,variant:I,alignContent:tt="normal",children:H,headerStyle:V,headerProps:q,icon:it,action:ct,actionsClassName:Q,actions:lt,cardClassName:st,actionsTopRight:mt,className:rt,noPadding:nt,titleTypographyProps:z,subheaderTypographyProps:U}=B,P=y();let S={},L={};I&&I.split(/[\s]+/g).forEach(ot=>{S={...S,...O.card[ot]},L={...L,...O.cardContent[ot]}});const $=()=>!N&&!it?null:(0,e.jsxs)("div",{"data-testid":"info-card-subheader",children:[N&&(0,e.jsx)("div",{className:P.subheader,children:N}),it]}),K=G||(k?{slackChannel:k}:{});return(0,e.jsx)(r.A,{style:S,className:rt,children:(0,e.jsxs)(f.t,{...K,children:[j&&(0,e.jsx)(s.A,{classes:{root:p()(P.header),title:P.headerTitle,subheader:P.headerSubheader,avatar:P.headerAvatar,action:P.headerAction,content:P.headerContent},title:j,subheader:$(),action:ct,style:{...V},titleTypographyProps:z,subheaderTypographyProps:U,...q}),mt&&(0,e.jsx)(T,{children:mt}),F&&(0,e.jsx)(o.A,{}),(0,e.jsx)(c.A,{className:p()(st,{[P.noPadding]:nt,[P.contentAlignBottom]:tt==="bottom"}),style:L,children:H}),lt&&(0,e.jsx)(h.A,{className:Q,children:lt}),D&&(0,e.jsx)(u.O,{...D})]})})}},21385:(et,m,t)=>{"use strict";t.d(m,{AY:()=>o,HO:()=>s,ku:()=>g,oS:()=>d});var e=t(52536),r=t.n(e),h=t(45250),c=t.n(h);function s(i){const p=new URL("http://example.com");return p.host=i,p.host===i}function o(i){try{return new URL(i),!0}catch{return!1}}function d(i,p){return{list(){return i},byUrl(u){try{const f=typeof u=="string"?new URL(u):u;return i.find(y=>p(y)===f.host)}catch{return}},byHost(u){return i.find(f=>p(f)===u)}}}function g(i){const{url:p,base:u,lineNumber:f}=i;try{return new URL(p),p}catch{}let y;if(p.startsWith("/")){const{href:T,filepath:O}=r()(u);y=new URL(T);const b=(0,h.trimEnd)(y.pathname.substring(0,y.pathname.length-O.length),"/");y.pathname=`${b}${p}`}else y=new URL(p,u);return y.search=new URL(u).search,f&&(y.hash=`L${f}`),y.toString()}},21775:(et,m,t)=>{"use strict";t.d(m,{d:()=>h});var e=t(81308);const h=(0,e._)({output:c=>c.string(),uiOptions:c=>c.object({allowedHosts:c.array(c.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:c.array(c.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:c.array(c.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:c.array(c.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:c.array(c.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:c.object({secretsKey:c.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:c.object({gitea:c.array(c.string()).optional().describe("Additional Gitea scopes to request"),gerrit:c.array(c.string()).optional().describe("Additional Gerrit scopes to request"),github:c.array(c.string()).optional().describe("Additional GitHub scopes to request"),gitlab:c.array(c.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:c.array(c.string()).optional().describe("Additional BitBucket scopes to request"),azure:c.array(c.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})}).schema},22139:(et,m,t)=>{"use strict";t.d(m,{RT:()=>b,eR:()=>B});var e=t(31085),r=t(24259),h=t(78560),c=t(18139),s=t(30043),o=t(91072),d=t(45809),g=t(16249),i=t(61783),p=t(14041),u=t(73466),f=t(96290),y=t(71135),T=t(10265),O=t(30268);const b=D=>{const{t:k}=(0,T.i)(O.W),{onChange:G,schema:{title:I=k("fields.multiEntityPicker.title"),description:tt=k("fields.multiEntityPicker.description")},required:H,uiSchema:V,rawErrors:q,formData:it,idSchema:ct,errors:Q}=D,lt=F(V),st=V["ui:options"]?.defaultKind,mt=V["ui:options"]?.defaultNamespace||void 0,rt=V?.["ui:disabled"]??!1,[nt,z]=(0,p.useState)(0),U=(0,c.gf)(s.v),P=(0,c.gf)(o.n),{value:S,loading:L}=(0,u.A)(async()=>{const{items:ot}=await U.getEntities(lt?{filter:lt}:void 0),At=new Map(await Promise.all(ot.map(async X=>{const dt=await P.forEntity(X).promise;return[(0,h.U2)(X),dt]})));return{entities:ot,entityRefToPresentation:At}}),$=V["ui:options"]?.allowArbitraryValues??!0,K=D.schema.maxItems,J=(0,p.useCallback)((ot,At,X)=>{const dt=At.map(xt=>{if(typeof xt!="string")return xt?(0,h.U2)(xt):void 0;if(X==="blur"||X==="create-option"){let $t=xt;try{$t=(0,h.U2)((0,h.KU)(xt,{defaultKind:st,defaultNamespace:mt}))}catch{}if(it?.includes(xt)||$)return $t}}).filter(xt=>xt!==void 0);z(dt.length),G(dt)},[G,it,st,mt,$]);return(0,p.useEffect)(()=>{H&&!$&&S?.entities?.length===1&&G([(0,h.U2)(S?.entities[0])])},[S,G,H,$]),(0,e.jsx)(y.g,{rawErrors:q,rawDescription:V["ui:description"]??tt,required:H,disabled:rt,errors:Q,children:(0,e.jsx)(i.Ay,{multiple:!0,filterSelectedOptions:!0,disabled:rt||H&&!$&&S?.entities?.length===1,id:ct?.$id,defaultValue:it,loading:L,onChange:J,options:S?.entities||[],renderOption:ot=>(0,e.jsx)(d.d,{entityRef:ot}),getOptionLabel:ot=>typeof ot=="string"?ot:S?.entityRefToPresentation.get((0,h.U2)(ot))?.entityRef,getOptionDisabled:ot=>K?nt>=K:!1,autoSelect:!0,freeSolo:$,renderInput:ot=>(0,e.jsx)(g.A,{...ot,label:I,disabled:rt,margin:"dense",FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:H,InputProps:{...ot.InputProps,required:it?.length===0&&H}}),ListboxComponent:f.J})})},B=(D,k)=>{D.forEach(G=>{try{(0,h.KU)(G)}catch{k.addError(`${G} is not a valid entity ref`)}})};function j(D){return typeof D=="object"&&D.exists?r.c:D?.toString()}function N(D){const k={};for(const[G,I]of Object.entries(D))Array.isArray(I)?k[G]=I:k[G]=j(I);return k}function F(D){const k=D["ui:options"]?.catalogFilter;if(k)return Array.isArray(k)?k.map(N):N(k)}},23654:(et,m,t)=>{"use strict";t.d(m,{mG:()=>s});var e=t(7578),r=t(81308);const h=e.z.record(e.z.string().or(e.z.object({exists:e.z.boolean().optional()})).or(e.z.array(e.z.string()))),s=(0,r._)({output:o=>o.array(o.string()),uiOptions:o=>o.object({defaultKind:o.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:o.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:o.union([o.string(),o.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:o.array(h).or(h).optional().describe("List of key-value filter expression for entities")})}).schema},23730:(et,m,t)=>{"use strict";t.d(m,{m:()=>g,v:()=>i});var e=t(31085),r=t(29365),h=t(71677),c=t(72501),s=t(58837),o=t(92483);const d=(0,s.A)(()=>({icon:{color:"#f3ba37",cursor:"pointer",display:"inline-flex"},iconBorder:{color:"inherit",cursor:"pointer",display:"inline-flex"}}),{name:"BackstageFavoriteToggleIcon"});function g(p){const{isFavorite:u}=p,f=d();return(0,e.jsx)(c.A,{component:"span",className:u?f.icon:f.iconBorder,children:u?(0,e.jsx)(o.Gg,{}):(0,e.jsx)(o.KG,{})})}function i(p){const{id:u,title:f,isFavorite:y,onToggle:T,...O}=p;return(0,e.jsx)(h.Ay,{id:u,title:f,children:(0,e.jsx)(r.A,{"aria-label":f,id:u,onClick:()=>T(!y),color:"inherit",...O,children:(0,e.jsx)(g,{isFavorite:y})})})}},23986:(et,m,t)=>{"use strict";t.d(m,{GF:()=>y,t6:()=>b,Dg:()=>T,GH:()=>O,J0:()=>d,rQ:()=>i,JX:()=>f,bW:()=>u,sP:()=>p,P:()=>B,SE:()=>j,UJ:()=>g});var e=t(2488),r=t(77555),h=t(13930);const c=/^\w+$/;class s{constructor(F,D,k,G){this.id=F,this.path=D,this.parent=k,this.params=G}[h.b]="sub";toString(){return`routeRef{type=sub,id=${this.id}}`}}function o(N){const{id:F,path:D,parent:k}=N,G=D.split("/").filter(H=>H.startsWith(":")).map(H=>H.substring(1)),I=[...k.params,...G];if(k.params.some(H=>G.includes(H)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!D.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${D}'`);if(D.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${D}'`);for(const H of G)if(!c.test(H))throw new Error(`SubRouteRef path has invalid param, got '${H}'`);return new s(F,D,k,I)}const d=(0,e.I)({id:"register-component",optional:!0,defaultTarget:"catalog-import.importPage"}),g=(0,e.I)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"],defaultTarget:"techdocs.docRoot"}),i=(0,r.H)({id:"scaffolder"});o({id:"scaffolder/legacy/selected-template",parent:i,path:"/templates/:templateName"});const p=o({id:"scaffolder/selected-template",parent:i,path:"/templates/:namespace/:templateName"}),u=o({id:"scaffolder/task",parent:i,path:"/tasks/:taskId"}),f=o({id:"scaffolder/list-tasks",parent:i,path:"/tasks"}),y=o({id:"scaffolder/actions",parent:i,path:"/actions"}),T=o({id:"scaffolder/edit",parent:i,path:"/edit"}),O=o({id:"scaffolder/editor",parent:i,path:"/template"}),b=o({id:"scaffolder/customFields",parent:i,path:"/custom-fields"}),B=o({id:"scaffolder/editorForm",parent:i,path:"/template-form"}),j=o({id:"scaffolder/templating-extensions",parent:i,path:"/templating-extensions"})},24259:(et,m,t)=>{"use strict";t.d(m,{c:()=>e});const e=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111")},24453:(et,m,t)=>{"use strict";t.d(m,{m:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.error"})},24855:(et,m,t)=>{"use strict";t.d(m,{e:()=>T});var e=t(31085),r=t(14041),h=t(29365),c=t(9684),s=t(21332),o=t(64947),d=t(76891),g=t(93453),i=t(46805),p=t(61477);const u=b=>{const{open:B,close:j,componentName:N,children:F}=b;return(0,e.jsxs)(d.A,{open:B,onClose:()=>j(),children:[(0,e.jsx)(p.A,{children:N?`Settings - ${N}`:"Settings"}),(0,e.jsx)(i.A,{children:F}),(0,e.jsx)(g.A,{children:(0,e.jsx)(o.A,{onClick:()=>j(),color:"primary",variant:"contained",children:"Close"})})]})};var f=t(18050),y=t(95208);function T(b){const{title:B,components:j,name:N,description:F,layout:D,settings:k}=b,G=k?.schema!==void 0;return(0,f.zZ)({name:N,data:{title:B,description:F,"home.widget.config":{layout:D,settings:k}},component:{lazy:()=>j().then(I=>tt=>(0,e.jsx)(O,{...tt,...I,title:tt.title||B,isCustomizable:G}))}})}function O(b){const{Renderer:B,Content:j,Settings:N,Actions:F,ContextProvider:D,isCustomizable:k,title:G,...I}=b,tt=(0,y.n)(),{Progress:H}=tt.getComponents(),[V,q]=(0,r.useState)(!1);if(B)return(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(H,{}),children:(0,e.jsx)(B,{...G&&{title:G},Content:j,...F?{Actions:F}:{},...N&&!k?{Settings:N}:{},...D?{ContextProvider:D}:{},...I})});const it={divider:!!G,...G&&{title:G},...N&&!k?{action:(0,e.jsx)(h.A,{onClick:()=>q(!0),children:(0,e.jsx)(c.A,{children:"Settings"})})}:{},...F?{actions:(0,e.jsx)(F,{})}:{}},ct=(0,e.jsxs)(s.n,{...it,children:[N&&!k&&(0,e.jsx)(u,{open:V,componentName:G,close:()=>q(!1),children:(0,e.jsx)(N,{})}),(0,e.jsx)(j,{...I})]});return(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(H,{}),children:D?(0,e.jsx)(D,{...I,children:ct}):ct})}},25080:(et,m,t)=>{"use strict";t.d(m,{N:()=>o,e:()=>s});var e=t(18050),r=t(50809),h=t(15496);const c=(0,r.i)({id:"catalog-graph",routes:{catalogGraph:h.c},externalRoutes:{catalogEntity:h.B}}),s=c.provide((0,e.NC)({name:"EntityCatalogGraphCard",component:{lazy:()=>t.e(3684).then(t.bind(t,93684)).then(d=>d.CatalogGraphCard)}})),o=c.provide((0,e.QJ)({name:"CatalogGraphPage",component:()=>t.e(370).then(t.bind(t,60370)).then(d=>d.CatalogGraphPage),mountPoint:h.c}))},25646:(et,m,t)=>{"use strict";t.d(m,{O:()=>i});var e=t(31085),r=t(77125),h=t(37197),c=t(58837),s=t(72501),o=t(52235),d=t(75202);const g=(0,c.A)(p=>({root:{maxWidth:"fit-content",padding:p.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:p.palette.textSubtle},arrow:{color:p.palette.textSubtle}}),{name:"BackstageBottomLink"});function i(p){const{link:u,title:f,onClick:y}=p,T=g();return(0,e.jsxs)(r.A,{children:[(0,e.jsx)(h.A,{}),(0,e.jsx)(d.N_,{to:u,onClick:y,underline:"none",children:(0,e.jsxs)(r.A,{display:"flex",alignItems:"center",className:T.root,children:[(0,e.jsx)(r.A,{className:T.boxTitle,fontWeight:"fontWeightBold",m:1,children:(0,e.jsx)(s.A,{children:(0,e.jsx)("strong",{children:f})})}),(0,e.jsx)(o.A,{className:T.arrow})]})})]})}},25673:(et,m,t)=>{"use strict";t.d(m,{c_:()=>B,Xs:()=>T,z3:()=>f,Ek:()=>O,ly:()=>y});var e=t(31085),r=t(58837),h=t(72501),c=t(7707),s=t(35726),o=t(9181),d=t(53373),g=t.n(d);const i=({className:j,dataTestId:N})=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",className:j,"data-testid":N,children:(0,e.jsx)("path",{d:"M280-420q25 0 42.5-17.5T340-480q0-25-17.5-42.5T280-540q-25 0-42.5 17.5T220-480q0 25 17.5 42.5T280-420Zm200 0q25 0 42.5-17.5T540-480q0-25-17.5-42.5T480-540q-25 0-42.5 17.5T420-480q0 25 17.5 42.5T480-420Zm200 0q25 0 42.5-17.5T740-480q0-25-17.5-42.5T680-540q-25 0-42.5 17.5T620-480q0 25 17.5 42.5T680-420ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})}),p=({className:j,dataTestId:N})=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",className:j,"data-testid":N,children:(0,e.jsx)("path",{d:"M140-440q-25 0-42.5-17.5T80-500q0-25 17.5-42.5T140-560h240q25 0 42.5 17.5T440-500q0 25-17.5 42.5T380-440H140Zm440 0q-25 0-42.5-17.5T520-500q0-25 17.5-42.5T580-560h240q25 0 42.5 17.5T880-500q0 25-17.5 42.5T820-440H580Z"})}),u=(0,r.A)(j=>({status:{fontWeight:j.typography.fontWeightMedium,alignItems:"baseline",display:"flex"},statusIcon:{flexShrink:0,position:"relative",top:"0.125em",marginRight:j.spacing(1)},statusIconSize:{width:"0.8em",height:"0.8em"},statusIconSizeForImg:{width:"1.2em",height:"1.2em"},ok:{fill:j.palette.status.ok||"#3E8635"},warning:{fill:j.palette.status.warning||"#F0AB00"},error:{fill:j.palette.status.error||"#C9190B"},pending:{fill:j.palette.status.aborted||"#6A6E73"},running:{fill:j.palette.status.aborted||"#6A6E73"},aborted:{fill:j.palette.status.aborted||"#6A6E73"}}),{name:"BackstageStatus"});function f(j){const{children:N,...F}=j,D=u(F);return(0,e.jsxs)(h.A,{component:"span",className:g()(D.status),"aria-label":"Status ok","aria-hidden":"true",...F,children:[(0,e.jsx)(c.A,{"data-testid":"status-ok",className:g()(D.ok,D.statusIconSize,D.statusIcon)}),N]})}function y(j){const{children:N,...F}=j,D=u(F);return(0,e.jsxs)(h.A,{component:"span",className:g()(D.status),"aria-label":"Status warning","aria-hidden":"true",...F,children:[(0,e.jsx)(s.A,{"data-testid":"status-warning",className:g()(D.warning,D.statusIconSize,D.statusIcon)}),N]})}function T(j){const{children:N,...F}=j,D=u(F);return(0,e.jsxs)(h.A,{component:"span",className:g()(D.status),"aria-label":"Status error","aria-hidden":"true",...F,children:[(0,e.jsx)(o.A,{"data-testid":"status-error",className:g()(D.error,D.statusIconSize,D.statusIcon)}),N]})}function O(j){const{children:N,...F}=j,D=u(F);return(0,e.jsxs)(h.A,{component:"span",className:g()(D.status),"aria-label":"Status pending","aria-hidden":"true",...F,children:[(0,e.jsx)(i,{dataTestId:"status-pending",className:g()(D.pending,D.statusIconSizeForImg,D.statusIcon)}),N]})}function b(j){const{children:N,...F}=j,D=u(F);return jsxs(Typography,{component:"span",className:classNames(D.status),"aria-label":"Status running","aria-hidden":"true",...F,children:[jsx(RunningIcon,{dataTestId:"status-running",className:classNames(D.running,D.statusIcon,D.statusIconSizeForImg)}),N]})}function B(j){const{children:N,...F}=j,D=u(F);return(0,e.jsxs)(h.A,{component:"span",className:g()(D.status),"aria-label":"Status aborted","aria-hidden":"true",...F,children:[(0,e.jsx)(p,{dataTestId:"status-aborted",className:g()(D.aborted,D.statusIcon,D.statusIconSizeForImg)}),N]})}},25752:(et,m,t)=>{"use strict";t.d(m,{z:()=>F});var e=t(31085),r=t(18139),h=t(56004),c=t(14146),s=t(14041),o=t(22771),d=t(97909),g=t(77125),i=t(37197),p=t(72501),u=t(63163),f=t(95061),y=t(51253),T=t(16249),O=t(61783);const b=({onChange:D,state:k,rawErrors:G,accessToken:I,isDisabled:tt,required:H})=>{const{host:V,workspace:q,repository:it,branch:ct}=k,[Q,lt]=(0,s.useState)([]),st=(0,r.gf)(u.z),mt=(0,s.useCallback)(()=>{if(!st.autocomplete||!q||!it||!I||V!=="bitbucket.org"){lt([]);return}st.autocomplete({token:I,resource:"branches",context:{workspace:q,repository:it},provider:"bitbucket-cloud"}).then(({results:rt})=>{lt(rt.map(nt=>nt.id))}).catch(()=>{lt([])})},[V,q,it,I,st]);return(0,o.A)(mt,500,[mt]),(0,e.jsxs)(f.A,{margin:"normal",required:H,error:G?.length>0&&!ct,children:[(0,e.jsx)(O.Ay,{value:ct,onChange:(rt,nt)=>{D({branch:nt||""})},disabled:tt,options:Q,renderInput:rt=>(0,e.jsx)(T.A,{...rt,label:"Branch",disabled:tt,required:H}),freeSolo:!0,autoSelect:!0}),(0,e.jsx)(y.A,{children:"The branch of the repository"})]})},B=({onChange:D,state:k,rawErrors:G,isDisabled:I,required:tt})=>{const{branch:H}=k;return(0,e.jsxs)(f.A,{margin:"normal",required:tt,error:G?.length>0&&!H,children:[(0,e.jsx)(T.A,{id:"branchInput",label:"Branch",disabled:I,onChange:V=>D({branch:V.target.value}),value:H}),(0,e.jsx)(y.A,{children:"The branch of the repository"})]})},j=({onChange:D,state:k,rawErrors:G,accessToken:I,isDisabled:tt,required:H})=>{const{host:V,owner:q,repository:it,branch:ct}=k,[Q,lt]=(0,s.useState)([]),st=(0,r.gf)(u.z),mt=(0,s.useCallback)(()=>{if(!st.autocomplete||!q||!it||!I||!V){lt([]);return}st.autocomplete({token:I,resource:"branches",context:{host:V,owner:q,repository:it},provider:"github"}).then(({results:rt})=>{lt(rt.map(nt=>nt.id))}).catch(()=>{lt([])})},[V,q,it,I,st]);return(0,o.A)(mt,500,[mt]),(0,e.jsxs)(f.A,{margin:"normal",required:H,error:G?.length>0&&!ct,children:[(0,e.jsx)(O.Ay,{value:ct,onChange:(rt,nt)=>{D({branch:nt||""})},disabled:tt,options:Q,renderInput:rt=>(0,e.jsx)(T.A,{...rt,label:"Branch",disabled:tt,required:H}),freeSolo:!0,autoSelect:!0}),(0,e.jsx)(y.A,{children:"The branch of the repository"})]})};var N=t(28364);const F=D=>{const{uiSchema:k,onChange:G,rawErrors:I,formData:tt,schema:H,formContext:V,required:q}=D,{formData:{repoUrl:it}}=V,[ct,Q]=(0,s.useState)({branch:tt||""}),{host:lt,branch:st}=ct,mt=(0,r.gf)(h.Y),rt=(0,r.gf)(c.$),{secrets:nt,setSecrets:z}=(0,d.Z)();(0,o.A)(async()=>{const{requestUserCredentials:$}=k?.["ui:options"]??{};if(!$||!lt||nt[$.secretsKey])return;const{token:K}=await rt.getCredentials({url:`https://${lt}`,additionalScope:{repoWrite:!0,customScopes:$.additionalScopes}});z({[$.secretsKey]:K})},500,[lt,k]),(0,s.useEffect)(()=>{if(it){const $=new URL(`https://${it}`);Q(K=>({...K,host:$.host,workspace:$.searchParams.get("workspace")||"",repository:$.searchParams.get("repo")||"",owner:$.searchParams.get("owner")||""}))}},[it]),(0,s.useEffect)(()=>{G(st)},[st,G]);const U=(0,s.useCallback)($=>{Q(K=>({...K,...$}))},[Q]),P=(lt&&mt.byHost(lt)?.type)??null,S=()=>{switch(P){case"bitbucket":return(0,e.jsx)(b,{onChange:U,state:ct,rawErrors:I,accessToken:k?.["ui:options"]?.requestUserCredentials?.secretsKey&&nt[k["ui:options"].requestUserCredentials.secretsKey],isDisabled:k?.["ui:disabled"]??!1,required:q});case"github":return(0,e.jsx)(j,{onChange:U,state:ct,rawErrors:I,accessToken:k?.["ui:options"]?.requestUserCredentials?.secretsKey&&nt[k["ui:options"].requestUserCredentials.secretsKey],isDisabled:k?.["ui:disabled"]??!1,required:q});default:return(0,e.jsx)(B,{onChange:U,state:ct,rawErrors:I,isDisabled:k?.["ui:disabled"]??!1,required:q})}},L=k["ui:description"]??H.description;return(0,e.jsxs)(e.Fragment,{children:[H.title&&(0,e.jsxs)(g.A,{my:1,children:[(0,e.jsx)(p.A,{variant:"h5",children:H.title}),(0,e.jsx)(i.A,{})]}),L&&(0,e.jsx)(p.A,{variant:"body1",children:(0,e.jsx)(N.h,{content:L})}),S()]})}},25999:(et,m,t)=>{"use strict";t.d(m,{u:()=>y});var e=t(31085),r=t(78560),h=t(18139),c=t(14041),s=t(46123),o=t(9974),d=t(96403);function g(T){return typeof T=="string"?T:(0,r.U2)(T)}function i(T){const O=(0,h.gf)(o.a),[b,B]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{const N=O.starredEntitie$().subscribe({next(F){B(F.has(g(T)))}});return()=>{N.unsubscribe()}},[T,O]),{toggleStarredEntity:(0,c.useCallback)(()=>O.toggleStarred(g(T)).then(),[T,O]),isStarredEntity:b}}var p=t(80084),u=t(10265),f=t(23730);const y=T=>{const{toggleStarredEntity:O,isStarredEntity:b}=i(T.entity),{t:B}=(0,u.i)(p.j),j=B(b?"favoriteEntity.removeFromFavorites":"favoriteEntity.addToFavorites"),N=`favorite-${(0,r.U2)(T.entity).replace(/[^a-zA-Z0-9-_]/g,"-")}`;return(0,e.jsx)(f.v,{title:j,id:N,isFavorite:b,onToggle:O,...T})}},27482:(et,m,t)=>{"use strict";t.d(m,{r:()=>r});var e=t(97963);const r=(0,e.h)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select theme {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}},signOutMenu:{title:"Sign Out",moreIconTitle:"more"},pinToggle:{title:"Pin Sidebar",description:"Prevent the sidebar from collapsing",switchTitles:{unpin:"Unpin Sidebar",pin:"Pin Sidebar"},ariaLabelTitle:"Pin Sidebar Switch"},identityCard:{title:"Backstage Identity",noIdentityTitle:"No Backstage Identity",userEntity:"User Entity",ownershipEntities:"Ownership Entities"},defaultProviderSettings:{description:"Provides authentication towards {{provider}} APIs and identities"},emptyProviders:{title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:{title:"Open app-config.yaml and make the changes as highlighted below:",readMoreButtonTitle:"Read More"}},providerSettingsItem:{title:{signIn:"Sign in to {{title}}",signOut:"Sign out from {{title}}"},buttonTitle:{signIn:"Sign in",signOut:"Sign out"}},authProviders:{title:"Available Providers"},defaultSettingsPage:{tabsTitle:{general:"General",authProviders:"Authentication Providers",featureFlags:"Feature Flags"}},featureFlags:{title:"Feature Flags",description:"Please refresh the page when toggling feature flags",emptyFlags:{title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:{title:"An example for how to add a feature flag is highlighted below:",readMoreButtonTitle:"Read More"}},filterTitle:"Filter",clearFilter:"Clear filter",flagItem:{title:{disable:"Disable",enable:"Enable"},subtitle:{registeredInApplication:"Registered in the application",registeredInPlugin:"Registered in {{pluginId}} plugin"}}},settingsLayout:{title:"Settings"},sidebarTitle:"Settings"}})},28364:(et,m,t)=>{"use strict";t.d(m,{h:()=>u});var e=t(31085),r=t(58837),h=t(60767),c=t(28138),s=t(14041),o=t(62112);const d=(0,r.A)(f=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${f.palette.border}`},"& th, & td":{border:`1px solid ${f.palette.border}`,padding:f.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:f.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:f.palette.background.paper},"& tr":{backgroundColor:f.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:f.palette.background.default},"& a":{color:f.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),g=(f,y)=>y?typeof y=="string"?f+y:s.Children.toArray(y.props.children).reduce(g,f):f,i=({level:f,children:y})=>{const b=s.Children.toArray(y).reduce(g,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return(0,s.createElement)(`h${f}`,{id:b},y)},p={code:({inline:f,className:y,children:T,...O})=>{const b=String(T).replace(/\n+$/,""),B=/language-(\w+)/.exec(y||"");return!f&&B?(0,e.jsx)(o.z,{language:B[1],text:b}):(0,e.jsx)("code",{className:y,...O,children:T})},h1:i,h2:i,h3:i,h4:i,h5:i,h6:i};function u(f){const{content:y,dialect:T="gfm",linkTarget:O,transformLinkUri:b,transformImageUri:B,className:j}=f,N=d();return(0,e.jsx)(h.$,{remarkPlugins:T==="gfm"?[c.A]:[],className:`${N.markdown} ${j??""}`.trim(),children:y,components:p,linkTarget:O,transformLinkUri:b,transformImageUri:B})}},28967:(et,m,t)=>{"use strict";t.d(m,{y:()=>r});class e{constructor(c){if(this.config=c,!c.id.split(".").flatMap(o=>o.split("-")).every(o=>o.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${c.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function r(h){return new e(h)}},29021:(et,m,t)=>{"use strict";t.d(m,{X:()=>J});var e=t(31085),r=t(10265),h=t(25301),c=t(77125),s=t(29365),o=t(7031),d=t(58837),g=t(54917),i=t(72501),p=t(83313),u=t(89019),f=t(62461),y=t(68887),T=t(63798),O=t(64704),b=t(6774),B=t(75625),j=t(65859),N=t(45917),F=t(5416),D=t(33494),k=t(80113),G=t(26229),I=t(46802),tt=t(45250),H=t(14041),V=t(89475),q=t(64947),it=t(81252);const ct=(0,d.A)(X=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:X.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:X.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${X.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:X.spacing(2)}}}),{name:"BackstageTableFilters"}),Q=X=>{const dt=ct(),{onChangeFilters:xt}=X,{t:$t}=(0,r.i)(V.O),[wt,_t]=(0,H.useState)({...X.selectedFilters}),[Ut,zt]=(0,H.useState)(!1),Xt=()=>{_t({}),zt(se=>!se)};return(0,H.useEffect)(()=>{xt(wt)},[wt,xt]),(0,e.jsxs)(c.A,{className:dt.root,children:[(0,e.jsxs)(c.A,{className:dt.header,children:[(0,e.jsx)(c.A,{className:dt.value,children:$t("table.filter.title")}),(0,e.jsx)(q.A,{color:"primary",onClick:Xt,children:$t("table.filter.clearAll")})]}),(0,e.jsx)(c.A,{className:dt.filters,children:X.filters?.length&&X.filters.map(se=>(0,e.jsx)(it.w,{triggerReset:Ut,...se.element,selected:wt[se.element.label],onChange:re=>_t({...wt,[se.element.label]:re})},se.element.label))})]})};var lt=t(78467);function st(X){return(0,e.jsx)("tbody",{"data-testid":"loading-indicator",children:(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:X.colSpan,children:(0,e.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"},children:(0,e.jsx)(lt.A,{size:"5rem"})})})})})}const mt={Add:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(p.A,{...X,ref:dt})),Check:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(f.A,{...X,ref:dt})),Clear:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(O.A,{...X,ref:dt})),Delete:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(b.A,{...X,ref:dt})),DetailPanel:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(T.A,{...X,ref:dt})),Edit:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(B.A,{...X,ref:dt})),Export:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(G.A,{...X,ref:dt})),Filter:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(j.A,{...X,ref:dt})),FirstPage:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(F.A,{...X,ref:dt})),LastPage:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(D.A,{...X,ref:dt})),NextPage:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(T.A,{...X,ref:dt})),PreviousPage:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(y.A,{...X,ref:dt})),ResetSearch:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(O.A,{...X,ref:dt})),Search:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(N.A,{...X,ref:dt})),SortArrow:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(u.A,{...X,ref:dt})),ThirdStateCheck:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(k.A,{...X,ref:dt})),ViewColumn:(0,H.forwardRef)((X,dt)=>(0,e.jsx)(I.A,{...X,ref:dt}))};function rt(X,dt){const xt=dt.split(".");let $t=X[xt[0]];for(let wt=1;wt<xt.length;++wt){if($t===void 0)return $t;const _t=xt[wt];$t=$t[_t]}return $t}const nt=(0,o.A)(X=>({header:{padding:X.spacing(1,2,1,2.5),borderTop:`1px solid ${X.palette.grey.A100}`,borderBottom:`1px solid ${X.palette.grey.A100}`,fontWeight:X.typography.fontWeightBold,position:"static",wordBreak:"normal",textTransform:"uppercase"}}),{name:"BackstageTableHeader"})(h.rV),z=(0,o.A)(X=>({root:{padding:X.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:X.typography.fontWeightBold}},searchField:{paddingRight:X.spacing(2)}}),{name:"BackstageTableToolbar"})(h.Nb),U=(0,d.A)(X=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:X.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),P=(0,d.A)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function S(X,dt){return X.map(xt=>{const $t=xt.headerStyle??{};let wt=xt.cellStyle||{};if(xt.highlight)if($t.color=dt.palette.textContrast,typeof wt=="object")wt.fontWeight=dt.typography.fontWeightBold;else{const _t=wt;wt=(Ut,zt,Xt)=>({..._t(Ut,zt,Xt),fontWeight:dt.typography.fontWeightBold})}return{...xt,headerStyle:$t,cellStyle:wt}})}function L(X,dt){return(0,tt.transform)(X,(xt,$t,wt)=>{(0,tt.isEqual)($t,dt[wt])||(xt[wt]=$t)})}const $={search:"",filtersOpen:!1,filters:{}};function K(X){const{toolbarRef:dt,setSearch:xt,hasFilters:$t,selectedFiltersLength:wt,toggleFilters:_t}=X,{t:Ut}=(0,r.i)(V.O),zt=U(),Xt=(0,H.useCallback)(se=>{X.onSearchChanged(se),xt(se)},[X,xt]);return $t?(0,e.jsxs)(c.A,{className:zt.root,children:[(0,e.jsxs)(c.A,{className:zt.root,children:[(0,e.jsx)(s.A,{onClick:_t,"aria-label":"filter list",children:(0,e.jsx)(j.A,{})}),(0,e.jsxs)(i.A,{className:zt.title,children:[Ut("table.filter.title")," (",wt,")"]})]}),(0,e.jsx)(z,{...X,ref:dt,onSearchChanged:Xt})]}):(0,e.jsx)(z,{...X,ref:dt,onSearchChanged:Xt})}function J(X){const{data:dt,columns:xt,emptyContent:$t,options:wt,title:_t,subtitle:Ut,localization:zt,filters:Xt,initialState:se,onStateChange:re,components:ce,isLoading:te,style:ie,...me}=X,{t:ee}=(0,r.i)(V.O),Wt=P(),jt=(0,g.A)(),pt={...$,...se},[Y,ft]=(0,H.useState)(pt.filtersOpen),Tt=(0,H.useCallback)(()=>ft(Mt=>!Mt),[ft]),[Lt,St]=(0,H.useState)(pt.filters),[Ht,kt]=(0,H.useState)(pt.search);(0,H.useEffect)(()=>{if(re){const Mt=L({search:Ht,filtersOpen:Y,filters:Lt},$);re(Mt)}},[Ht,Y,Lt,re]);const Dt=(0,H.useCallback)(Mt=>xt.find(W=>W.title===Mt)?.field,[xt]),Ft=(0,H.useMemo)(()=>{if(typeof dt=="function"||!Lt)return dt;const Mt=Object.values(Lt);return dt&&Mt.flat().length?dt.filter(x=>!!Object.entries(Lt).filter(([,M])=>!!M.length).every(([M,_])=>{const Pt=rt(x,Dt(M));return Array.isArray(Pt)&&Array.isArray(_)?Pt.some(Bt=>_.includes(Bt)):Array.isArray(Pt)?Pt.includes(_):Array.isArray(_)?_.includes(Pt):Pt===_})):dt},[dt,Lt,Dt]),Yt=Object.values(Lt).flat().length,Et=!!Xt?.length,at=(0,H.useCallback)(Mt=>(0,e.jsx)(K,{setSearch:kt,hasFilters:Et,selectedFiltersLength:Yt,toggleFilters:Tt,...Mt}),[Tt,Et,Yt,kt]),yt=typeof dt!="function"&&dt.length===0,Ot=xt.length,bt=(0,H.useMemo)(()=>ot({hasNoRows:yt,emptyContent:$t,columnCount:Ot,loading:te}),[yt,$t,Ot,te]);return(0,e.jsxs)(c.A,{className:Wt.root,children:[Y&&dt&&typeof dt!="function"&&Xt?.length&&(0,e.jsx)(Q,{filters:At(Xt,dt,xt,ee),selectedFilters:Lt,onChangeFilters:St}),(0,e.jsx)(h.Ay,{components:{Header:nt,Body:bt,Toolbar:at,...ce},options:wt,columns:S(xt,jt),icons:mt,title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.A,{variant:"h5",component:"h2",children:_t}),Ut&&(0,e.jsx)(i.A,{color:"textSecondary",variant:"body1",children:Ut})]}),data:Ft,style:{width:"100%",...ie},localization:{...zt,body:{emptyDataSourceMessage:ee("table.body.emptyDataSourceMessage"),...zt?.body},pagination:{firstTooltip:ee("table.pagination.firstTooltip"),labelDisplayedRows:ee("table.pagination.labelDisplayedRows"),labelRowsSelect:ee("table.pagination.labelRowsSelect"),lastTooltip:ee("table.pagination.lastTooltip"),nextTooltip:ee("table.pagination.nextTooltip"),previousTooltip:ee("table.pagination.previousTooltip"),...zt?.pagination},toolbar:{searchPlaceholder:ee("table.toolbar.search"),searchTooltip:ee("table.toolbar.search"),...zt?.toolbar}},...me})]})}J.icons=Object.freeze(mt);function ot({columnCount:X,emptyContent:dt,hasNoRows:xt,loading:$t}){return wt=>$t?(0,e.jsx)(st,{colSpan:X}):dt&&xt?(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:X,children:dt})})}):(0,e.jsx)(h.C6,{...wt})}function At(X,dt,xt,$t){const wt=Ut=>{const zt=new Set,Xt=se=>{se!=null&&zt.add(se)};return dt&&dt.forEach(se=>{const re=rt(se,xt.find(ce=>ce.title===Ut)?.field);Array.isArray(re)?re.forEach(Xt):Xt(re)}),zt},_t=Ut=>({placeholder:$t("table.filter.placeholder"),label:Ut.column,multiple:Ut.type==="multiple-select",items:[...wt(Ut.column)].sort().map(zt=>({label:zt,value:zt}))});return X.map(Ut=>({type:Ut.type,element:_t(Ut)}))}},29666:(et,m,t)=>{"use strict";t.d(m,{y:()=>c});var e=t(45250),r=t.n(e);class h{static isValidPrefixAndOrSuffix(o,d,g,i){if(typeof o!="string")return!1;const p=o.split(d);return p.length===1?i(p[0]):p.length===2?g(p[0])&&i(p[1]):!1}static isJsonSafe(o){try{return r().isEqual(o,JSON.parse(JSON.stringify(o)))}catch{return!1}}static isValidDnsSubdomain(o){return typeof o=="string"&&o.length>=1&&o.length<=253&&o.split(".").every(h.isValidDnsLabel)}static isValidDnsLabel(o){return typeof o=="string"&&o.length>=1&&o.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(o)}static isValidTag(o){return typeof o=="string"&&o.length>=1&&o.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(o)}static isValidUrl(o){if(typeof o!="string")return!1;try{return new URL(o),!0}catch{return!1}}static isValidString(o){return typeof o=="string"&&o?.trim()?.length>=1}static isNonEmptyString(o){return typeof o=="string"&&o?.trim()?.length>=1}}class c{static isValidApiVersion(o){return h.isValidPrefixAndOrSuffix(o,"/",h.isValidDnsSubdomain,d=>d.length>=1&&d.length<=63&&/^[a-z0-9A-Z]+$/.test(d))}static isValidKind(o){return typeof o=="string"&&o.length>=1&&o.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(o)}static isValidObjectName(o){return typeof o=="string"&&o.length>=1&&o.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(o)}static isValidNamespace(o){return h.isValidDnsLabel(o)}static isValidLabelKey(o){return h.isValidPrefixAndOrSuffix(o,"/",h.isValidDnsSubdomain,c.isValidObjectName)}static isValidLabelValue(o){return o===""||c.isValidObjectName(o)}static isValidAnnotationKey(o){return h.isValidPrefixAndOrSuffix(o,"/",h.isValidDnsSubdomain,c.isValidObjectName)}static isValidAnnotationValue(o){return typeof o=="string"}}},30043:(et,m,t)=>{"use strict";t.d(m,{v:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.catalog.service"})},30268:(et,m,t)=>{"use strict";t.d(m,{W:()=>r});var e=t(97963);const r=(0,e.h)({id:"scaffolder",messages:{actionsPage:{title:"Installed actions",pageTitle:"Create a New Component",subtitle:"This is the collection of all installed actions",content:{emptyState:{title:"No information to display",description:"There are no actions installed or there was an issue communicating with backend."},searchFieldPlaceholder:"Search for an action"},action:{input:"Input",output:"Output",examples:"Examples"}},fields:{entityNamePicker:{title:"Name",description:"Unique name of the component"},entityPicker:{title:"Entity",description:"An entity from the catalog"},entityTagsPicker:{title:"Tags",description:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"},multiEntityPicker:{title:"Entity",description:"An entity from the catalog"},myGroupsPicker:{title:"Entity",description:"An entity from the catalog"},ownedEntityPicker:{title:"Entity",description:"An entity from the catalog"},ownerPicker:{title:"Owner",description:"The owner of the component"},azureRepoPicker:{organization:{title:"Organization",description:"The Organization that this repo will belong to"},project:{title:"Project",description:"The Project that this repo will belong to"}},bitbucketRepoPicker:{workspaces:{title:"Allowed Workspaces",inputTitle:"Workspaces",description:"The Workspace that this repo will belong to"},project:{title:"Allowed Projects",inputTitle:"Projects",description:"The Project that this repo will belong to"}},gerritRepoPicker:{owner:{title:"Owner",description:"The owner of the project (optional)"},parent:{title:"Parent",description:"The project parent that the repo will belong to"}},giteaRepoPicker:{owner:{title:"Owner Available",inputTitle:"Owner",description:"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project."}},githubRepoPicker:{owner:{title:"Owner Available",inputTitle:"Owner",description:"The organization, user or project that this repo will belong to"}},gitlabRepoPicker:{owner:{title:"Owner Available",inputTitle:"Owner",description:"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project."}},repoUrlPicker:{host:{title:"Host",description:"The host where the repository will be created"},repository:{title:"Repositories Available",inputTitle:"Repository",description:"The name of the repository"}}},listTaskPage:{title:"List template tasks",pageTitle:"Templates Tasks",subtitle:"All tasks that have been started",content:{emptyState:{title:"No information to display",description:"There are no tasks or there was an issue communicating with backend."},tableTitle:"Tasks",tableCell:{taskID:"Task ID",template:"Template",created:"Created",owner:"Owner",status:"Status"}}},ownerListPicker:{title:"Task Owner",options:{owned:"Owned",all:"All"}},ongoingTask:{title:"Run of",pageTitle:{hasTemplateName:"Run of {{templateName}}",noTemplateName:"Scaffolder Run"},subtitle:"Task {{taskId}}",cancelButtonTitle:"Cancel",retryButtonTitle:"Retry",startOverButtonTitle:"Start Over",hideLogsButtonTitle:"Hide Logs",showLogsButtonTitle:"Show Logs",contextMenu:{hideLogs:"Hide Logs",showLogs:"Show Logs",hideButtonBar:"Hide Button Bar",retry:"Retry",showButtonBar:"Show Button Bar",startOver:"Start Over",cancel:"Cancel"}},templateEditorForm:{stepper:{emptyText:"There are no spec parameters in the template to preview."}},renderSchema:{tableCell:{name:"Name",title:"Title",description:"Description",type:"Type"},undefined:"No schema defined"},templatingExtensions:{title:"Templating Extensions",pageTitle:"Templating Extensions",subtitle:"This is the collection of available templating extensions",content:{emptyState:{title:"No information to display",description:"There are no templating extensions available or there was an issue communicating with the backend."},searchFieldPlaceholder:"Search for an extension",filters:{title:"Filters",notAvailable:"There are no template filters defined.",metadataAbsent:"Filter metadata unavailable",schema:{input:"Input",arguments:"Arguments",output:"Output"},examples:"Examples"},functions:{title:"Functions",notAvailable:"There are no global template functions defined.",schema:{arguments:"Arguments",output:"Output"},examples:"Examples"},values:{title:"Values",notAvailable:"There are no global template values defined."}}},templateTypePicker:{title:"Categories"},templateIntroPage:{title:"Manage Templates",subtitle:"Edit, preview, and try out templates, forms, and custom fields"},templateFormPage:{title:"Template Editor",subtitle:"Edit, preview, and try out templates forms"},templateCustomFieldPage:{title:"Custom Field Explorer",subtitle:"Edit, preview, and try out custom fields"},templateEditorPage:{title:"Template Editor",subtitle:"Edit, preview, and try out templates and template forms",dryRunResults:{title:"Dry-run results"},dryRunResultsList:{title:"Result {{resultId}}",downloadButtonTitle:"Download as .zip",deleteButtonTitle:"Delete result"},dryRunResultsView:{tab:{files:"Files",log:"Log",output:"Output"}},taskStatusStepper:{skippedStepTitle:"Skipped"},customFieldExplorer:{selectFieldLabel:"Choose Custom Field Extension",fieldForm:{title:"Field Options",applyButtonTitle:"Apply"},fieldPreview:{title:"Field Preview"},preview:{title:"Template Spec"}},templateEditorBrowser:{closeConfirmMessage:"Are you sure? Unsaved changes will be lost",saveIconTooltip:"Save all files",reloadIconTooltip:"Reload directory",closeIconTooltip:"Close directory"},templateEditorIntro:{title:"Get started by choosing one of the options below",loadLocal:{title:"Load Template Directory",description:"Load a local template directory, allowing you to both edit and try executing your own template.",unsupportedTooltip:"Only supported in some Chromium-based browsers with the page loaded over HTTPS"},createLocal:{title:"Create New Template",description:"Create a local template directory, allowing you to both edit and try executing your own template.",unsupportedTooltip:"Only supported in some Chromium-based browsers with the page loaded over HTTPS"},formEditor:{title:"Template Form Playground",description:"Preview and edit a template form, either using a sample template or by loading a template from the catalog."},fieldExplorer:{title:"Custom Field Explorer",description:"View and play around with available installed custom field extensions."}},templateEditorTextArea:{saveIconTooltip:"Save file",refreshIconTooltip:"Reload file",emptyStateParagraph:"Please select an action on the file menu."},templateFormPreviewer:{title:"Load Existing Template"}},templateListPage:{title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",pageTitle:"Create a new component",templateGroups:{defaultTitle:"Templates",otherTitle:"Other Templates"},contentHeader:{registerExistingButtonTitle:"Register Existing Component",supportButtonTitle:"Create new software components using standard templates. Different templates create different kinds of components (services, websites, documentation, ...)."},additionalLinksForEntity:{viewTechDocsTitle:"View TechDocs"}},templateWizardPage:{title:"Create a new component",subtitle:"Create new software components using standard templates in your organization",pageTitle:"Create a new component",pageContextMenu:{editConfigurationTitle:"Edit Configuration"}},templateEditorToolbar:{customFieldExplorerTooltip:"Custom Fields Explorer",installedActionsDocumentationTooltip:"Installed Actions Documentation",templatingExtensionsDocumentationTooltip:"Templating Extensions Documentation",addToCatalogButton:"Publish",addToCatalogDialogTitle:"Publish changes",addToCatalogDialogContent:{stepsIntroduction:"Follow the instructions below to create or update a template:",stepsListItems:`Save the template files in a local directory
Create a pull request to a new or existing git repository
If the template already exists, the changes will be reflected in the software catalog once the pull request gets merged
But if you are creating a new template, follow the documentation linked below to register the new template repository in software catalog`},addToCatalogDialogActions:{documentationButton:"Go to the documentation",documentationUrl:"https://backstage.io/docs/features/software-templates/adding-templates/"}},templateEditorToolbarFileMenu:{button:"File",options:{openDirectory:"Open template directory",createDirectory:"Create template directory",closeEditor:"Close template editor"}},templateEditorToolbarTemplatesMenu:{button:"Templates"}}})},31072:(et,m,t)=>{"use strict";t.d(m,{Rv:()=>o,U1:()=>u,hC:()=>s,i8:()=>g,yY:()=>p});var e=t(14041);const r=72,h=24,c=18,s={drawerWidthClosed:r,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:r,iconSize:r-h*2,iconPadding:h,selectedIndicatorWidth:3,userBadgePadding:c,userBadgeDiameter:r-c*2,mobileSidebarHeight:56},o=f=>({...s,...f,iconContainerWidth:s.drawerWidthClosed,iconSize:s.drawerWidthClosed-s.iconPadding*2,userBadgeDiameter:s.drawerWidthClosed-s.userBadgePadding*2}),d={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:s.defaultOpenDelayMs+200},g=f=>({...d,...f}),i="@backstage/core/sidebar-intro-dismissed",p=(0,e.createContext)({sidebarConfig:s,submenuConfig:d}),u=(0,e.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}})},31766:(et,m,t)=>{"use strict";t.d(m,{S:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.scaffolder.form-decorators"})},31994:(et,m,t)=>{"use strict";t.d(m,{l:()=>u});var e=t(31085),r=t(18139),h=t(24453),c=t(29365),s=t(71677),o=t(99594),d=t(14041),g=t(36338),i=t(89475),p=t(10265);function u(f){const{t:y}=(0,p.i)(i.O),{text:T,tooltipDelay:O=1e3,tooltipText:b=y("copyTextButton.tooltipText"),"aria-label":B="Copy text"}=f,j=(0,r.gf)(h.m),[N,F]=(0,d.useState)(!1),[{error:D},k]=(0,g.A)();(0,d.useEffect)(()=>{D&&j.post(D)},[D,j]);const G=I=>{I.stopPropagation(),F(!0),k(T)};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.Ay,{id:"copy-test-tooltip",title:b,placement:"top",leaveDelay:O,onClose:()=>F(!1),open:N,children:(0,e.jsx)(c.A,{onClick:G,"aria-label":B,children:(0,e.jsx)(o.A,{})})})})}},32293:(et,m,t)=>{"use strict";t.d(m,{o:()=>k});var e=t(31085),r=t(77125),h=t(64947),c=t(58837),s=t(72501),o=t(65995),d=t(62112),g=t(75202),i=t(16400),p=t(14041),u=t(46343),f=t.n(u),y=t(40074),T=t.n(y),O=t(46123),b=t.n(O),B=t(96403),j=t.n(B);const N=(0,c.A)(G=>({code:{borderRadius:6,margin:G.spacing(2,0),background:G.palette.type==="dark"?"#444":G.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function F(G,I){const tt=I?.kind||"Component",H=I?.metadata.name||"example",V=I?.spec?.type||"website",q=I?.spec?.owner||"user:default/guest",it=`apiVersion: backstage.io/v1alpha1
kind: ${tt}
metadata:
  name: ${H}
  annotations:${G.map(lt=>`
    ${lt}: value`).join("")}
spec:
  type: ${V}
  owner: ${q}`;let ct=6;const Q=[];return G.forEach(()=>{Q.push(ct),ct++}),{yamlText:it,lineNumbers:Q}}function D(G,I="Component"){const tt=G.length<=1;return(0,e.jsxs)(e.Fragment,{children:["The ",tt?"annotation":"annotations"," ",G.map(H=>(0,e.jsx)("code",{children:H})).reduce((H,V)=>(0,e.jsxs)(e.Fragment,{children:[H,", ",V]}))," ",tt?"is":"are"," missing. You need to add the"," ",tt?"annotation":"annotations"," to your ",I," if you want to enable this tool."]})}function k(G){let I;try{I=(0,i.tN)().entity}catch{}const{annotation:tt,readMoreUrl:H}=G,V=Array.isArray(tt)?tt:[tt],q=H||"https://backstage.io/docs/features/software-catalog/well-known-annotations",it=N(),ct=I?.kind||"Component",{yamlText:Q,lineNumbers:lt}=F(V,I);return(0,e.jsx)(o.p,{missing:"field",title:"Missing Annotation",description:D(V,ct),action:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.A,{variant:"body1",children:["Add the annotation to your ",ct," YAML as shown in the highlighted example below:"]}),(0,e.jsx)(r.A,{className:it.code,children:(0,e.jsx)(d.z,{text:Q,language:"yaml",showLineNumbers:!0,highlightedNumbers:lt,customStyle:{background:"inherit",fontSize:"115%"}})}),(0,e.jsx)(h.A,{color:"primary",component:g.N_,to:q,children:"Read more"})]})})}},33129:(et,m,t)=>{"use strict";t.d(m,{$7:()=>d,GR:()=>u,Hd:()=>p,Vk:()=>c,Yj:()=>h,Zj:()=>o,cz:()=>f,dM:()=>y,py:()=>s,u0:()=>g,zk:()=>i});var e=t(31085),r=t(28967),h=(T=>(T.SignedIn="SignedIn",T.SignedOut="SignedOut",T))(h||{});const c=(0,r.y)({id:"core.auth.google"}),s=(0,r.y)({id:"core.auth.github"}),o=(0,r.y)({id:"core.auth.okta"}),d=(0,r.y)({id:"core.auth.gitlab"}),g=(0,r.y)({id:"core.auth.microsoft"}),i=(0,r.y)({id:"core.auth.onelogin"}),p=(0,r.y)({id:"core.auth.bitbucket"}),u=(0,r.y)({id:"core.auth.bitbucket-server"}),f=(0,r.y)({id:"core.auth.atlassian"}),y=(0,r.y)({id:"core.auth.vmware-cloud"})},33986:(et,m,t)=>{"use strict";t.d(m,{I:()=>B,Z:()=>b});var e=t(31085),r=t(18139),h=t(54195),c=t(95208),s=t(19224),o=t(29365),d=t(34839),g=t(16249),i=t(64947),p=t(45917),u=t(14041),f=t(22771),y=t(87437),T=t(10265),O=t(92469);const b=(0,u.forwardRef)((j,N)=>{const{onChange:F,onKeyDown:D=()=>{},onClear:k=()=>{},onSubmit:G=()=>{},debounceTime:I=200,clearButton:tt=!0,fullWidth:H=!0,value:V,label:q,placeholder:it,inputProps:ct={},InputProps:Q={},endAdornment:lt,...st}=j,mt=(0,r.gf)(h.U),[rt,nt]=(0,u.useState)(""),z=(0,u.useRef)(""),{t:U}=(0,T.i)(O._);(0,u.useEffect)(()=>{nt(X=>X===z.current?String(V):X)},[V,z]),(0,f.A)(()=>{z.current=rt,F(rt)},I,[rt]);const P=(0,u.useCallback)(X=>{nt(X.target.value)},[nt]),S=(0,u.useCallback)(X=>{D&&D(X),G&&X.key==="Enter"&&G()},[D,G]),L=(0,u.useCallback)(()=>{z.current="",F(""),nt(""),k&&k()},[F,k]),$=q?void 0:U("searchBar.title"),K=it??U("searchBar.placeholder",{org:mt.getOptionalString("app.title")||"Backstage"}),J=(0,c.n)().getSystemIcon("search")||p.A,ot=(0,e.jsx)(d.A,{position:"start",children:(0,e.jsx)(o.A,{"aria-label":"Query",size:"small",disabled:!0,children:(0,e.jsx)(J,{})})}),At=(0,e.jsx)(d.A,{position:"end",children:(0,e.jsx)(i.A,{"aria-label":"Clear",size:"small",onClick:L,onKeyDown:X=>{X.key==="Enter"&&X.stopPropagation()},children:"Clear"})});return(0,e.jsx)(y.Lt,{inheritParentContextIfAvailable:!0,children:(0,e.jsx)(g.A,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:N,value:rt,label:q,placeholder:K,InputProps:{startAdornment:ot,endAdornment:tt?At:lt,...Q},inputProps:{"aria-label":$,...ct},fullWidth:H,onChange:P,onKeyDown:S,...st})})}),B=(0,u.forwardRef)((j,N)=>{const{value:F="",onChange:D,...k}=j,{term:G,setTerm:I}=(0,y.SQ)();(0,u.useEffect)(()=>{F&&I(String(F))},[F,I]);const tt=(0,u.useCallback)(H=>{D?D(H):I(H)},[D,I]);return(0,e.jsx)(y.Lt,{inheritParentContextIfAvailable:!0,children:(0,e.jsx)(s.I,{attributes:{pluginId:"search",extension:"SearchBar"},children:(0,e.jsx)(b,{...k,ref:N,value:G,onChange:tt})})})})},34477:(et,m,t)=>{"use strict";t.d(m,{k:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.alert"})},34861:(et,m,t)=>{"use strict";t.d(m,{T:()=>N});var e=t(31085),r=t(14041),h=t(18139),c=t(94223),s=t(24453),o=t(16249),d=t(61783),g=t(59447),i=t(30043),p=t(91072),u=t(45809),f=t(89392),y=t(73466),T=t(78560),O=t(96290),b=t(10265),B=t(30268),j=t(71135);const N=F=>{const{t:D}=(0,b.i)(B.W),{schema:{title:k=D("fields.myGroupsPicker.title"),description:G=D("fields.myGroupsPicker.description")},required:I,rawErrors:tt,onChange:H,formData:V,uiSchema:q,errors:it}=F,ct=(0,h.gf)(c.K),Q=(0,h.gf)(i.v),lt=(0,h.gf)(s.m),st=(0,h.gf)(p.n),mt=q?.["ui:disabled"]??!1,{value:rt,loading:nt}=(0,y.A)(async()=>{const{userEntityRef:P}=await ct.getBackstageIdentity();if(!P)return lt.post(new f.m_("No user entity ref found")),{catalogEntities:[],entityRefToPresentation:new Map};const{items:S}=await Q.getEntities({filter:{kind:"Group","relations.hasMember":[P]}}),L=new Map(await Promise.all(S.map(async $=>{const K=await st.forEntity($).promise;return[(0,T.U2)($),K]})));return{catalogEntities:S,entityRefToPresentation:L}}),z=(P,S)=>{H(S?(0,T.U2)(S):"")},U=rt?.catalogEntities.find(P=>(0,T.U2)(P)===V)||null;return(0,r.useEffect)(()=>{I&&rt?.catalogEntities.length===1&&!U&&H((0,T.U2)(rt.catalogEntities[0]))},[rt,H,U,I]),(0,e.jsx)(j.g,{rawErrors:tt,rawDescription:q["ui:description"]??G,required:I,disabled:mt,errors:it,children:(0,e.jsx)(d.Ay,{disabled:I&&rt?.catalogEntities.length===1,id:"OwnershipEntityRefPicker-dropdown",options:rt?.catalogEntities||[],value:U,loading:nt,onChange:z,getOptionLabel:P=>rt?.entityRefToPresentation.get((0,T.U2)(P))?.primaryTitle,autoSelect:!0,renderInput:P=>(0,e.jsx)(o.A,{...P,label:k,margin:"dense",FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:I,InputProps:P.InputProps}),renderOption:P=>(0,e.jsx)(u.d,{entityRef:P}),filterOptions:(0,g.Z)({stringify:P=>rt?.entityRefToPresentation.get((0,T.U2)(P))?.primaryTitle}),ListboxComponent:O.J})})}},35177:(et,m,t)=>{"use strict";t.d(m,{s:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.oauthrequest"})},35625:(et,m,t)=>{"use strict";t.d(m,{g:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.kubernetes-auth-providers.service"})},36521:(et,m,t)=>{"use strict";t.d(m,{s:()=>d});var e=t(18139),r=t(94223),h=t(34477),c=t(14041),s=t(73466),o=t(30043);const d=()=>{const g=(0,e.gf)(r.K),i=(0,e.gf)(h.k),p=(0,e.gf)(o.v),{value:u,loading:f,error:y}=(0,s.A)(async()=>{let T=await g.getProfileInfo();const O=await g.getBackstageIdentity(),b=await p.getEntityByRef(O.userEntityRef);return T.picture===void 0&&b?.spec?.profile?.picture&&(T={...T,picture:b.spec.profile.picture}),{profile:T,identity:O}},[]);return(0,c.useEffect)(()=>{y&&i.post({message:`Failed to load user identity: ${y}`,severity:"error"})},[y,i]),f||y?{profile:{},displayName:"",loading:f}:{profile:u.profile,backstageIdentity:u.identity,displayName:u.profile.displayName??u.identity.userEntityRef,loading:f}}},36611:(et,m,t)=>{"use strict";t.d(m,{e:()=>nt});var e=t(31085),r=t(18139),h=t(56004),c=t(14146),s=t(97909),o=t(77125),d=t(37197),g=t(72501),i=t(14041),p=t(22771),u=t(95061),f=t(51253),y=t(16249),T=t(81252),O=t(10265),b=t(30268);const B=z=>{const{allowedOrganizations:U=[],allowedProject:P=[],rawErrors:S,state:L,onChange:$,isDisabled:K}=z,{t:J}=(0,O.i)(b.W),ot=U?U.map(xt=>({label:xt,value:xt})):[{label:"Loading...",value:"loading"}],At=P?P.map(xt=>({label:xt,value:xt})):[{label:"Loading...",value:"loading"}],{organization:X,project:dt}=L;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(u.A,{margin:"normal",required:!0,error:S?.length>0&&!X,children:U?.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(T.w,{native:!0,label:J("fields.azureRepoPicker.organization.title"),onChange:xt=>$({organization:String(Array.isArray(xt)?xt[0]:xt)}),disabled:K||U.length===1,selected:X,items:ot}),(0,e.jsx)(f.A,{children:J("fields.azureRepoPicker.organization.description")})]}):(0,e.jsx)(y.A,{id:"orgInput",label:J("fields.azureRepoPicker.organization.title"),onChange:xt=>$({organization:xt.target.value}),helperText:J("fields.azureRepoPicker.organization.description"),disabled:K,value:X})}),(0,e.jsx)(u.A,{margin:"normal",required:!0,error:S?.length>0&&!dt,children:P?.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(T.w,{native:!0,label:J("fields.azureRepoPicker.project.title"),onChange:xt=>$({project:String(Array.isArray(xt)?xt[0]:xt)}),disabled:K||P.length===1,selected:dt,items:At}),(0,e.jsx)(f.A,{children:J("fields.azureRepoPicker.project.description")})]}):(0,e.jsx)(y.A,{id:"projectInput",label:J("fields.azureRepoPicker.project.title"),onChange:xt=>$({project:xt.target.value}),value:dt,disabled:K,helperText:J("fields.azureRepoPicker.project.description")})})]})};var j=t(63163),N=t(61783);const F=z=>{const{allowedOwners:U=[],allowedProjects:P=[],onChange:S,rawErrors:L,state:$,accessToken:K,isDisabled:J}=z,{t:ot}=(0,O.i)(b.W),{host:At,workspace:X,project:dt}=$,xt=U?U?.map(te=>({label:te,value:te})):[],$t=P?P?.map(te=>({label:te,value:te})):[];(0,i.useEffect)(()=>{At==="bitbucket.org"&&U.length&&S({workspace:U[0]})},[U,At,S]);const wt=(0,r.gf)(j.z),[_t,Ut]=(0,i.useState)([]),[zt,Xt]=(0,i.useState)([]),se=(0,i.useCallback)(()=>{if(!wt.autocomplete||!K||At!=="bitbucket.org"){Ut([]);return}wt.autocomplete({token:K,resource:"workspaces",provider:"bitbucket-cloud"}).then(({results:te})=>{Ut(te.map(ie=>ie.id))}).catch(()=>{Ut([])})},[wt,K,At]);(0,p.A)(se,500,[se]);const re=(0,i.useCallback)(()=>{if(!wt.autocomplete||!K||At!=="bitbucket.org"||!X){Xt([]);return}wt.autocomplete({token:K,resource:"projects",context:{workspace:X},provider:"bitbucket-cloud"}).then(({results:te})=>{Xt(te.map(ie=>ie.id))}).catch(()=>{Xt([])})},[wt,K,At,X]);(0,p.A)(re,500,[re]);const ce=(0,i.useCallback)(()=>{if(!wt.autocomplete||!K||At!=="bitbucket.org"||!X||!dt){S({availableRepos:[]});return}wt.autocomplete({token:K,resource:"repositories",context:{workspace:X,project:dt},provider:"bitbucket-cloud"}).then(({results:te})=>{S({availableRepos:te.map(ie=>({name:ie.id}))})}).catch(()=>{S({availableRepos:[]})})},[wt,K,At,X,dt,S]);return(0,p.A)(ce,500,[ce]),(0,e.jsxs)(e.Fragment,{children:[At==="bitbucket.org"&&(0,e.jsxs)(u.A,{margin:"normal",required:!0,error:L?.length>0&&!X,children:[U?.length?(0,e.jsx)(T.w,{native:!0,label:ot("fields.bitbucketRepoPicker.workspaces.title"),onChange:te=>S({workspace:String(Array.isArray(te)?te[0]:te)}),disabled:J||U.length===1,selected:X,items:xt}):(0,e.jsx)(N.Ay,{value:X,onChange:(te,ie)=>{S({workspace:ie||""})},options:_t,renderInput:te=>(0,e.jsx)(y.A,{...te,label:ot("fields.bitbucketRepoPicker.workspaces.inputTitle"),disabled:J,required:!0}),disabled:J,freeSolo:!0,autoSelect:!0}),(0,e.jsx)(f.A,{children:ot("fields.bitbucketRepoPicker.workspaces.description")})]}),(0,e.jsxs)(u.A,{margin:"normal",required:!0,error:L?.length>0&&!dt,children:[P?.length?(0,e.jsx)(T.w,{native:!0,label:ot("fields.bitbucketRepoPicker.project.title"),onChange:te=>S({project:String(Array.isArray(te)?te[0]:te)}),disabled:J||P.length===1,selected:dt,items:$t}):(0,e.jsx)(N.Ay,{value:dt,onChange:(te,ie)=>{S({project:ie||""})},options:zt,disabled:J,renderInput:te=>(0,e.jsx)(y.A,{...te,label:ot("fields.bitbucketRepoPicker.project.inputTitle"),disabled:J,required:!0}),freeSolo:!0,autoSelect:!0}),(0,e.jsx)(f.A,{children:ot("fields.bitbucketRepoPicker.project.description")})]})]})},D=z=>{const{onChange:U,rawErrors:P,state:S,isDisabled:L}=z,{t:$}=(0,O.i)(b.W),{workspace:K,owner:J}=S;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(u.A,{margin:"normal",error:P?.length>0&&!K,children:(0,e.jsx)(y.A,{id:"ownerInput",label:$("fields.gerritRepoPicker.owner.title"),onChange:ot=>U({owner:ot.target.value}),helperText:$("fields.gerritRepoPicker.owner.description"),disabled:L,value:J})}),(0,e.jsx)(u.A,{margin:"normal",required:!0,error:P?.length>0&&!K,children:(0,e.jsx)(y.A,{id:"parentInput",label:$("fields.gerritRepoPicker.parent.title"),onChange:ot=>U({workspace:ot.target.value}),disabled:L,value:K,helperText:$("fields.gerritRepoPicker.parent.description")})})]})},k=z=>{const{allowedOwners:U=[],state:P,onChange:S,rawErrors:L,isDisabled:$}=z,{t:K}=(0,O.i)(b.W),J=U?U.map(At=>({label:At,value:At})):[{label:"Loading...",value:"loading"}],{owner:ot}=P;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(u.A,{margin:"normal",required:!0,error:L?.length>0&&!ot,children:U?.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(T.w,{native:!0,label:K("fields.giteaRepoPicker.owner.title"),onChange:At=>S({owner:String(Array.isArray(At)?At[0]:At)}),disabled:$||U.length===1,selected:ot,items:J}),(0,e.jsx)(f.A,{children:K("fields.giteaRepoPicker.owner.description")})]}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(y.A,{id:"ownerInput",label:K("fields.giteaRepoPicker.owner.inputTitle"),onChange:At=>S({owner:At.target.value}),helperText:K("fields.giteaRepoPicker.owner.description"),disabled:$,value:ot})})})})};var G=t(82438),I=t.n(G),tt=t(40105),H=t.n(tt);const V=z=>{const{allowedOwners:U=[],rawErrors:P,state:S,onChange:L,accessToken:$,isDisabled:K}=z,{t:J}=(0,O.i)(b.W),ot=U?U.map(zt=>({label:zt,value:zt})):[{label:"Loading...",value:"loading"}],{host:At,owner:X}=S,dt=(0,r.gf)(j.z),[xt,$t]=(0,i.useState)([]),wt=(0,i.useCallback)(()=>{if(!dt.autocomplete||!$||!At){$t([]);return}dt.autocomplete({token:$,resource:"repositoriesWithOwner",provider:"github",context:{host:At}}).then(({results:zt})=>{$t(zt.map(Xt=>{const[se,re]=Xt.id.split("/");return{owner:se,name:re}}))}).catch(()=>{$t([])})},[dt,$,At]);(0,p.A)(wt,500,[wt]);const _t=(0,i.useMemo)(()=>I()(H()(xt,"owner")),[xt]),Ut=(0,i.useCallback)(()=>{const zt=xt.flatMap(Xt=>Xt.owner===X?[{name:Xt.name}]:[]);L({availableRepos:zt})},[xt,X,L]);return(0,p.A)(Ut,500,[Ut]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(u.A,{margin:"normal",required:!0,error:P?.length>0&&!X,children:[U?.length?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(T.w,{native:!0,label:J("fields.githubRepoPicker.owner.title"),onChange:zt=>L({owner:String(Array.isArray(zt)?zt[0]:zt)}),disabled:K||U.length===1,selected:X,items:ot})}):(0,e.jsx)(N.Ay,{value:X,onChange:(zt,Xt)=>{L({owner:Xt||""})},options:_t,renderInput:zt=>(0,e.jsx)(y.A,{...zt,label:J("fields.githubRepoPicker.owner.inputTitle"),disabled:K,required:!0}),freeSolo:!0,disabled:K,autoSelect:!0}),(0,e.jsx)(f.A,{children:J("fields.githubRepoPicker.owner.description")})]})})},q=z=>{const{allowedOwners:U=[],state:P,onChange:S,rawErrors:L,accessToken:$,isDisabled:K}=z,[J,ot]=(0,i.useState)([]),{t:At}=(0,O.i)(b.W),X=U?U.map(Ut=>({label:Ut,value:Ut})):[{label:"Loading...",value:"loading"}],{owner:dt,host:xt}=P,$t=(0,r.gf)(j.z),wt=(0,i.useCallback)(()=>{if(!$t.autocomplete||!$||!xt){ot([]);return}$t.autocomplete({token:$,resource:"groups",provider:"gitlab",context:{host:xt}}).then(({results:Ut})=>{ot(Ut.map(zt=>({title:zt.title,id:zt.id})))}).catch(()=>{ot([])})},[$t,$,xt]);(0,p.A)(wt,500,[wt]);const _t=(0,i.useCallback)(()=>{if(!$t.autocomplete||!$||!xt||!dt){S({availableRepos:[]});return}const Ut=J.find(zt=>zt.title===dt);$t.autocomplete({token:$,resource:"repositories",context:{id:Ut?.id??"",host:xt},provider:"gitlab"}).then(({results:zt})=>{S({availableRepos:zt.map(Xt=>({name:Xt.title,id:Xt.id}))})}).catch(()=>{S({availableRepos:[]})})},[$t,$,xt,dt,S,J]);return(0,p.A)(_t,500,[_t]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(u.A,{margin:"normal",required:!0,error:L?.length>0&&!dt,children:U?.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(T.w,{native:!0,label:At("fields.gitlabRepoPicker.owner.title"),onChange:Ut=>S({owner:String(Array.isArray(Ut)?Ut[0]:Ut)}),disabled:K||U.length===1,selected:dt,items:X}),(0,e.jsx)(f.A,{children:At("fields.gitlabRepoPicker.owner.description")})]}):(0,e.jsx)(N.Ay,{value:dt,onChange:(Ut,zt)=>{S({owner:zt||""})},options:J.map(Ut=>Ut.title),renderInput:Ut=>(0,e.jsx)(y.A,{...Ut,label:At("fields.gitlabRepoPicker.owner.title"),disabled:K,required:!0}),freeSolo:!0,disabled:K,autoSelect:!0})})})};var it=t(96872),ct=t(73466);const Q=z=>{const{host:U,hosts:P,onChange:S,rawErrors:L,isDisabled:$}=z,{t:K}=(0,O.i)(b.W),J=(0,r.gf)(j.z),{value:{integrations:ot}={integrations:[]},loading:At}=(0,ct.A)(async()=>await J.getIntegrationsList({allowedHosts:P??[]}));(0,i.useEffect)(()=>{U||(P?.length?S(P[0]):ot?.length&&S(ot[0].host))},[P,U,S,ot]);const X=ot?ot.filter(dt=>P?.length?P?.includes(dt.host):!0).map(dt=>({label:dt.title,value:dt.host})):[{label:"Loading...",value:"loading"}];return At?(0,e.jsx)(it.k,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(u.A,{margin:"normal",required:!0,error:L?.length>0&&!U,children:[(0,e.jsx)(T.w,{native:!0,disabled:$||P?.length===1,label:K("fields.repoUrlPicker.host.title"),onChange:dt=>S(String(Array.isArray(dt)?dt[0]:dt)),selected:U,items:X,"data-testid":"host-select"}),(0,e.jsx)(f.A,{children:K("fields.repoUrlPicker.host.description")})]})})},lt=z=>{const{repoName:U,allowedRepos:P,onChange:S,rawErrors:L,availableRepos:$,isDisabled:K}=z,{t:J}=(0,O.i)(b.W);(0,i.useEffect)(()=>{U||P?.length&&S({name:P[0]})},[P,U,S]);const ot=P?P.map(At=>({label:At,value:At})):[{label:"Loading...",value:"loading"}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(u.A,{margin:"normal",required:!0,error:L?.length>0&&!U,children:[P?.length?(0,e.jsx)(T.w,{native:!0,label:J("fields.repoUrlPicker.repository.title"),onChange:At=>S({name:String(Array.isArray(At)?At[0]:At)}),disabled:K||P.length===1,selected:U,items:ot}):(0,e.jsx)(N.Ay,{value:U,onInputChange:(At,X)=>{const dt=$?.find(xt=>xt.name===X);S(dt||{name:X||""})},options:($||[]).map(At=>At.name),renderInput:At=>(0,e.jsx)(y.A,{...At,label:J("fields.repoUrlPicker.repository.inputTitle"),required:!0}),freeSolo:!0,autoSelect:!0,disabled:K}),(0,e.jsx)(f.A,{children:J("fields.repoUrlPicker.repository.description")})]})})};function st(z){if(!z.host)return;const U=new URLSearchParams;return z.owner&&U.set("owner",z.owner),z.repoName&&U.set("repo",z.repoName),z.organization&&U.set("organization",z.organization),z.workspace&&U.set("workspace",z.workspace),z.project&&U.set("project",z.project),`${z.host}?${U.toString()}`}function mt(z){let U="",P="",S="",L="",$="",K="";try{if(z){const J=new URL(`https://${z}`);U=J.host,P=J.searchParams.get("owner")||"",S=J.searchParams.get("repo")||"",L=J.searchParams.get("organization")||"",$=J.searchParams.get("workspace")||"",K=J.searchParams.get("project")||""}}catch{}return{host:U,owner:P,repoName:S,organization:L,workspace:$,project:K}}var rt=t(28364);const nt=z=>{const{uiSchema:U,onChange:P,rawErrors:S,formData:L,schema:$}=z,[K,J]=(0,i.useState)(mt(L)),[ot,At]=(0,i.useState)(void 0),X=(0,r.gf)(h.Y),dt=(0,r.gf)(c.$),{secrets:xt,setSecrets:$t}=(0,s.Z)(),wt=(0,i.useMemo)(()=>U?.["ui:options"]?.allowedHosts??[],[U]),_t=(0,i.useMemo)(()=>U?.["ui:options"]?.allowedOrganizations??[],[U]),Ut=(0,i.useMemo)(()=>U?.["ui:options"]?.allowedOwners??[],[U]),zt=(0,i.useMemo)(()=>U?.["ui:options"]?.allowedProjects??[],[U]),Xt=(0,i.useMemo)(()=>U?.["ui:options"]?.allowedRepos??[],[U]),se=(0,i.useMemo)(()=>U?.["ui:disabled"]??!1,[U]),{owner:re,organization:ce,project:te,repoName:ie}=K;(0,i.useEffect)(()=>{P(st(K))},[K,P]),(0,i.useEffect)(()=>{_t.length>0&&!ce&&J(jt=>({...jt,organization:_t[0]}))},[J,_t,ce]),(0,i.useEffect)(()=>{Ut.length>0&&!re&&J(jt=>({...jt,owner:Ut[0]}))},[J,Ut,re]),(0,i.useEffect)(()=>{zt.length>0&&!te&&J(jt=>({...jt,project:zt[0]}))},[J,zt,te]),(0,i.useEffect)(()=>{Xt.length>0&&!ie&&J(jt=>({...jt,repoName:Xt[0]}))},[J,Xt,ie]);const me=(0,i.useCallback)(jt=>{J(pt=>({...pt,...jt}))},[J]);(0,p.A)(async()=>{const{requestUserCredentials:jt}=U?.["ui:options"]??{};if(!jt||!K.host||xt[jt.secretsKey]&&ot===K.host)return;const{token:pt}=await dt.getCredentials({url:`https://${K.host}`,additionalScope:{repoWrite:!0,customScopes:jt.additionalScopes}});$t({[jt.secretsKey]:pt}),At(K.host)},500,[K,U]);const ee=(K.host&&X.byHost(K.host)?.type)??null,Wt=U["ui:description"]??$.description;return(0,e.jsxs)(e.Fragment,{children:[$.title&&(0,e.jsxs)(o.A,{my:1,children:[(0,e.jsx)(g.A,{variant:"h5",children:$.title}),(0,e.jsx)(d.A,{})]}),Wt&&(0,e.jsx)(g.A,{variant:"body1",children:(0,e.jsx)(rt.h,{content:Wt})}),(0,e.jsx)(Q,{host:K.host,hosts:wt,onChange:jt=>J(pt=>({...pt,host:jt})),rawErrors:S,isDisabled:se}),ee==="github"&&(0,e.jsx)(V,{allowedOwners:Ut,onChange:me,rawErrors:S,state:K,isDisabled:se,accessToken:U?.["ui:options"]?.requestUserCredentials?.secretsKey&&xt[U["ui:options"].requestUserCredentials.secretsKey]}),ee==="gitea"&&(0,e.jsx)(k,{allowedOwners:Ut,allowedRepos:Xt,rawErrors:S,state:K,isDisabled:se,onChange:me}),ee==="gitlab"&&(0,e.jsx)(q,{allowedOwners:Ut,rawErrors:S,state:K,onChange:me,isDisabled:se,accessToken:U?.["ui:options"]?.requestUserCredentials?.secretsKey&&xt[U["ui:options"].requestUserCredentials.secretsKey]}),ee==="bitbucket"&&(0,e.jsx)(F,{allowedOwners:Ut,allowedProjects:zt,rawErrors:S,state:K,onChange:me,isDisabled:se,accessToken:U?.["ui:options"]?.requestUserCredentials?.secretsKey&&xt[U["ui:options"].requestUserCredentials.secretsKey]}),ee==="azure"&&(0,e.jsx)(B,{allowedOrganizations:_t,allowedProject:zt,rawErrors:S,state:K,isDisabled:se,onChange:me}),ee==="gerrit"&&(0,e.jsx)(D,{rawErrors:S,state:K,onChange:me,isDisabled:se}),(0,e.jsx)(lt,{repoName:K.repoName,allowedRepos:Xt,onChange:jt=>J(pt=>({...pt,repoName:jt.id||jt.name})),isDisabled:se,rawErrors:S,availableRepos:K.availableRepos})]})}},37281:(et,m,t)=>{"use strict";t.d(m,{z:()=>d});var e=t(31085),r=t(75202),h=t(72814),c=t(14041),s=t(20987),o=t(45809);const d=(0,c.forwardRef)((i,p)=>{const{entityRef:u,defaultKind:f,defaultNamespace:y,title:T,children:O,hideIcon:b,disableTooltip:B,...j}=i,N=g(i.entityRef),F=O??T??(0,e.jsx)(o.d,{entityRef:u,defaultKind:f,defaultNamespace:y,hideIcon:b,disableTooltip:B});return(0,e.jsx)(r.N_,{...j,ref:p,to:N,children:F})});function g(i){const p=(0,h.S)(s.s),u=(0,s.$)(i,{encodeParams:!0});return p(u)}},37987:(et,m,t)=>{"use strict";t.d(m,{E:()=>Tr});const e="Invalid discovery URL pattern,";class r{constructor(n){this.parts=n}static compile(n){const l=n.split(/\{\{\s*pluginId\s*\}\}/),v=l.join("pluginId");let R;try{R=new URL(v)}catch{throw new Error(`${e} URL '${v}' is invalid`)}if(R.hash)throw new Error(`${e} URL must not have a hash`);if(R.search)throw new Error(`${e} URL must not have a query`);if(v.endsWith("/"))throw new Error(`${e} URL must not end with a slash`);return new r(l)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class h{constructor(n,l){this.endpoints=n,this.defaultEndpoint=l}static fromConfig(n,l){const v=l?.pathPattern??"/api/{{ pluginId }}",R=n.getString("backend.baseUrl"),Z=n.getOptionalConfigArray("discovery.endpoints")?.flatMap(ht=>{const ut=typeof ht.get("target")=="object"?ht.getOptionalString("target.external"):ht.getString("target");if(!ut)return[];const Rt=r.compile(ut);return ht.getStringArray("plugins").map(Kt=>[Kt,Rt])});return new h(new Map(Z),r.compile(`${R}${v}`))}async getBaseUrl(n){const l=this.endpoints.get(n);return l?l.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}var c=t(96403),s=t.n(c);class o{isClosed=!1;terminatingError;observable=new(s())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}));subscribers=new Set;[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(l=>l.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(l=>l.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,l,v){const R=typeof n=="function"?{next:n,error:l,complete:v}:n;return this.observable.subscribe(R)}}class d{isClosed;currentValue;terminatingError;observable;constructor(n){this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(s())(l=>this.isClosed?(this.terminatingError?l.error(this.terminatingError):l.complete(),()=>{}):(l.next(this.currentValue),this.subscribers.add(l),()=>{this.subscribers.delete(l)}))}subscribers=new Set;[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(l=>l.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(l=>l.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,l,v){const R=typeof n=="function"?{next:n,error:l,complete:v}:n;return this.observable.subscribe(R)}}class g{subject=new o;post(n){this.subject.next(n)}alert$(){return this.subject}}class i{captureEvent(n){}}class p{constructor(n,l){this.alertApi=n,this.errorApi=l}post(n,l){return l?.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,l)}error$(){return this.errorApi.error$()}}class u{subject=new o;post(n,l){this.subject.next({error:n,context:l})}error$(){return this.subject}}class f{static forward(n,l){window.addEventListener("unhandledrejection",v=>{n.post(v.reason,l)})}}const y=new Map;class T{constructor(n,l){this.namespace=n,this.errorApi=l}static hasSubscribed=!1;static create(n){return new T(n.namespace??"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{for(const[l,v]of y.entries())n.key?.startsWith(l)&&v.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let l,v="absent";try{const R=localStorage.getItem(this.getKeyName(n));R&&(l=JSON.parse(R,(Z,ht)=>(typeof ht=="object"&&ht!==null&&Object.freeze(ht),ht)),v="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:l,presence:v}}forBucket(n){const l=`${this.namespace}/${n}`;return y.has(l)||y.set(l,new T(l,this.errorApi)),y.get(l)}async set(n,l){localStorage.setItem(this.getKeyName(n),JSON.stringify(l)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return T.hasSubscribed||(T.addStorageEventListener(),T.hasSubscribed=!0),this.observable.filter(({key:l})=>l===n)}handleStorageChange(n){if(!n?.startsWith(this.namespace))return;const l=n?.slice(`${this.namespace}/`.length);l.includes("/")||this.notifyChanges(decodeURIComponent(l))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const l=this.snapshot(n);for(const v of this.subscribers)v.next(l)}subscribers=new Set;observable=new(s())(n=>(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))}function O(A){let n=A.baseImplementation||t.g.fetch;const l=[A.middleware??[]].flat().reverse();for(const v of l)n=v.apply(n);return{fetch:n}}class b{constructor(n,l,v,R){this.identityApi=n,this.allowUrl=l,this.headerName=v,this.headerValue=R}static create(n){const l=B(n),v=n.header?.name||"authorization",R=n.header?.value||(Z=>`Bearer ${Z}`);return new b(n.identityApi,l,v,R)}static getDiscoveryUrlPrefixes(n){return(n.getOptionalConfigArray("discovery.endpoints")||[]).flatMap(v=>{const R=typeof v.get("target")=="object"?v.getString("target.external"):v.getString("target");return v.getStringArray("plugins").map(ht=>R.replace(/\{\{\s*pluginId\s*\}\}/g,ht))})}apply(n){return async(l,v)=>{const R=new Request(l,v),{token:Z}=await this.identityApi.getCredentials();return R.headers.get(this.headerName)||typeof Z!="string"||!Z||!this.allowUrl(R.url)?n(l,v):(R.headers.set(this.headerName,this.headerValue(Z)),n(R))}}}function B(A){return A.allowUrl?A.allowUrl:A.urlPrefixAllowlist?j(A.urlPrefixAllowlist):A.config?j([A.config.getString("backend.baseUrl"),...b.getDiscoveryUrlPrefixes(A.config)]):()=>!1}function j(A){const n=A.map(l=>l.replace(/\/$/,""));return l=>n.some(v=>l===v||l.startsWith(`${v}/`))}function N(A,n){return!n||n==="/"?A:`${A.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class F{constructor(n){this.discoveryApi=n}apply(n){return async(l,v)=>{const R=new Request(l,v),Z="plugin://";if(!R.url.startsWith(Z))return n(l,v);const{hostname:ht,pathname:ut,search:Rt,hash:Kt,username:a,password:E}=new URL(`http://${R.url.substring(Z.length)}`);let C=await this.discoveryApi.getBaseUrl(ht);if(a||E){const gt=new URL(C),Ct=`${a}${E?`:${E}`:""}@`;C=`${gt.protocol}//${Ct}${gt.host}${gt.pathname}`}const w=`${N(C,ut)}${Rt}${Kt}`;return n(w,typeof l=="string"||D(l)?v:l)}}}function D(A){return typeof A=="object"&&A?.constructor===URL}class k{static resolvePluginProtocol(n){return new F(n.discoveryApi)}static injectIdentityAuth(n){return b.create(n)}constructor(){}}function G(A,n){for(const l of n)if(!A.has(l))return!1;return!0}function I(A,...n){const l=new Set(A);for(const v of n)for(const R of v)l.add(R);return l}class tt{requests=[];subject=new d(this.getCurrentPending());request(n){return new Promise((l,v)=>{this.requests.push({scopes:n,resolve:l,reject:v}),this.subject.next(this.getCurrentPending())})}resolve(n,l){this.requests=this.requests.filter(v=>G(n,v.scopes)?(v.resolve(l),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(l=>l.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((l,v)=>I(l,v.scopes),this.requests[0].scopes);return{scopes:n,resolve:l=>{n&&this.resolve(n,l)},reject:l=>{n&&this.reject(l)}}}}class H{subject=new o;currentRequests=[];handlerCount=0;createAuthRequester(n){const l=new tt,v=this.handlerCount;return this.handlerCount++,l.pending().subscribe({next:R=>{const Z=this.currentRequests.slice(),ht=this.makeAuthRequest(R,n);ht?Z[v]=ht:delete Z[v],this.currentRequests=Z,this.subject.next(Z.filter(Boolean))}}),R=>l.request(R)}makeAuthRequest(n,l){const{scopes:v}=n;if(v)return{provider:l.provider,trigger:async()=>{const R=await l.onAuthRequest(v);n.resolve(R)},reject:()=>{const R=new Error("Login failed, rejected by user");R.name="RejectedError",n.reject(R)}}}authRequest$(){return this.subject}}function V(A){return new Promise((n,l)=>{const v=A.width||500,R=A.height||700,Z=window.screen.width/2-v/2,ht=window.screen.height/2-R/2,ut=new URL(A.url).origin,Rt=window.open(A.url,A.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${v},height=${R},top=${ht},left=${Z}`);let Kt="";if(!Rt||typeof Rt.closed>"u"||Rt.closed){const w=new Error("Failed to open auth popup.");w.name="PopupRejectedError",l(w);return}const a=w=>{if(w.source!==Rt||w.origin!==ut)return;const{data:gt}=w;if(gt.type==="config_info"){Kt=gt.targetOrigin;return}if(gt.type!=="authorization_response")return;const Ct=gt;if("error"in Ct){const It=new Error(Ct.error.message);It.name=Ct.error.name,l(It)}else n(Ct.response);C()},E=setInterval(()=>{if(Rt.closed){const w=`Login failed, ${Kt&&Kt!==window.location.origin?`Incorrect app origin, expected ${Kt}`:"popup was closed"}`,gt=new Error(w);gt.name="PopupClosedError",l(gt),C()}},100);function C(){window.removeEventListener("message",a),clearInterval(E)}window.addEventListener("message",a)})}let q=!1;function it(A){return[...A].join(" ")}class ct{discoveryApi;environment;provider;joinScopesFunc;authRequester;sessionTransform;enableExperimentalRedirectFlow;popupOptions;constructor(n){const{configApi:l,discoveryApi:v,environment:R,provider:Z,joinScopes:ht=it,oauthRequestApi:ut,sessionTransform:Rt=a=>a,popupOptions:Kt}=n;!q&&!l&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),q=!0),this.enableExperimentalRedirectFlow=l?l.getOptionalBoolean("enableExperimentalRedirectFlow")??!1:!1,this.authRequester=ut.createAuthRequester({provider:Z,onAuthRequest:async a=>this.enableExperimentalRedirectFlow?this.executeRedirect(a):this.showPopup(a)}),this.discoveryApi=v,this.environment=R,this.provider=Z,this.joinScopesFunc=ht,this.sessionTransform=Rt,this.popupOptions=Kt}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const l=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n.scopes)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(R=>{throw new Error(`Auth refresh request failed, ${R}`)});if(!l.ok){const R=new Error(`Auth refresh request failed, ${l.statusText}`);throw R.status=l.status,R}const v=await l.json();if(v.error){const R=new Error(v.error.message);throw v.error.name&&(R.name=v.error.name),R}return await this.sessionTransform(v)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(l=>{throw new Error(`Logout request failed, ${l}`)});if(!n.ok){const l=new Error(`Logout request failed, ${n.statusText}`);throw l.status=n.status,l}}async showPopup(n){const l=this.joinScopesFunc(n),v=await this.buildUrl("/start",{scope:l,origin:window.location.origin,flow:"popup"}),R=this.popupOptions?.size?.fullscreen?window.screen.width:this.popupOptions?.size?.width||450,Z=this.popupOptions?.size?.fullscreen?window.screen.height:this.popupOptions?.size?.height||730,ht=await V({url:v,name:`${this.provider.title} Login`,width:R,height:Z});return await this.sessionTransform(ht)}async executeRedirect(n){const l=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:l,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,l){const v=await this.discoveryApi.getBaseUrl("auth"),R=this.buildQueryString({...l,env:this.environment});return`${v}/${this.provider.id}${n}${R}`}buildQueryString(n){if(!n)return"";const l=Object.entries(n).map(([v,R])=>{if(typeof R=="string")return`${encodeURIComponent(v)}=${encodeURIComponent(R)}`;if(R)return encodeURIComponent(v)}).filter(Boolean).join("&");return l?`?${l}`:""}}function Q(A,n){for(const l of n)if(!A.has(l))return!1;return!0}class lt{constructor(n){this.options=n}sessionExistsAndHasScope(n,l){if(!n)return!1;if(!l||this.options.sessionScopes===void 0)return!0;const v=this.options.sessionScopes(n);return Q(v,l)}getExtendedScope(n,l){const v=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const R=this.options.sessionScopes(n);for(const Z of R)v.add(Z)}if(l)for(const R of l)v.add(R);return v}}var st=t(33129);class mt{subject=new d(st.Yj.SignedOut);signedIn=!1;setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?st.Yj.SignedIn:st.Yj.SignedOut))}sessionState$(){return this.subject}}class rt{connector;helper;sessionScopesFunc;sessionShouldRefreshFunc;stateTracker=new mt;refreshPromise;currentSession;constructor(n){const{connector:l,defaultScopes:v=new Set,sessionScopes:R,sessionShouldRefresh:Z}=n;this.connector=l,this.sessionScopesFunc=R,this.sessionShouldRefreshFunc=Z,this.helper=new lt({sessionScopes:R,defaultScopes:v})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const v=await this.collapsedSessionRefresh(n.scopes),R=this.sessionScopesFunc(this.currentSession),Z=this.sessionScopesFunc(v);return Q(Z,R)&&(this.currentSession=v),v}catch(v){if(n.optional)return;throw v}}if(!n.instantPopup)try{const l=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=l,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession({scopes:this.helper.getExtendedScope(this.currentSession,n)});try{const l=await this.refreshPromise;if(!this.helper.sessionExistsAndHasScope(l,n))throw new Error("Refreshed session did not receive the required scopes");return this.stateTracker.setIsSignedIn(!0),l}finally{delete this.refreshPromise}}}const nt={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class z{static createAuthConnector(n){if("authConnector"in n)return n.authConnector;const{scopeTransform:l=Kt=>Kt,configApi:v,discoveryApi:R,environment:Z="development",provider:ht=nt,oauthRequestApi:ut,popupOptions:Rt}=n;return new ct({configApi:v,discoveryApi:R,environment:Z,provider:ht,oauthRequestApi:ut,sessionTransform({backstageIdentity:Kt,...a}){const E={...a,providerInfo:{idToken:a.providerInfo.idToken,accessToken:a.providerInfo.accessToken,scopes:z.normalizeScopes(a.providerInfo.scope,{scopeTransform:l}),expiresAt:a.providerInfo.expiresInSeconds?new Date(Date.now()+a.providerInfo.expiresInSeconds*1e3):void 0}};return Kt&&(E.backstageIdentity={token:Kt.token,identity:Kt.identity,expiresAt:Kt.expiresInSeconds?new Date(Date.now()+Kt.expiresInSeconds*1e3):void 0}),E},popupOptions:Rt})}static create(n){const{defaultScopes:l=[],scopeTransform:v=ht=>ht}=n,R=z.createAuthConnector(n),Z=new rt({connector:R,defaultScopes:new Set(l),sessionScopes:ht=>ht.providerInfo.scopes,sessionShouldRefresh:ht=>{let ut=1/0;return ht.providerInfo?.expiresAt&&(ut=Math.min(ut,(ht.providerInfo.expiresAt.getTime()-Date.now())/1e3)),ht.backstageIdentity?.expiresAt&&(ut=Math.min(ut,(ht.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),ut<60*3}});return new z({sessionManager:Z,scopeTransform:v})}sessionManager;scopeTransform;constructor(n){this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,l){const v=z.normalizeScopes(n,{scopeTransform:this.scopeTransform});return(await this.sessionManager.getSession({...l,scopes:v}))?.providerInfo.accessToken??""}async getIdToken(n={}){return(await this.sessionManager.getSession({...n,scopes:new Set(["openid"])}))?.providerInfo.idToken??""}async getBackstageIdentity(n={}){return(await this.sessionManager.getSession(n))?.backstageIdentity}async getProfile(n={}){return(await this.sessionManager.getSession(n))?.profile}static normalizeScopes(n,l){if(!n)return new Set;const v=Array.isArray(n)?n:n.split(/[\s|,]/).filter(Boolean),R=l?l.scopeTransform(v):v;return new Set(R)}}const U={id:"google",title:"Google",icon:()=>null},P="https://www.googleapis.com/auth/";class S{static create(n){const{configApi:l,discoveryApi:v,oauthRequestApi:R,environment:Z="development",provider:ht=U,defaultScopes:ut=["openid",`${P}userinfo.email`,`${P}userinfo.profile`]}=n;return z.create({configApi:l,discoveryApi:v,oauthRequestApi:R,provider:ht,environment:Z,defaultScopes:ut,scopeTransform(Rt){return Rt.map(Kt=>Kt==="openid"?Kt:Kt==="profile"||Kt==="email"?`${P}userinfo.${Kt}`:Kt.startsWith(P)?Kt:`${P}${Kt}`)}})}}const L={id:"microsoft",title:"Microsoft",icon:()=>null};class ${oauth2;configApi;environment;provider;oauthRequestApi;discoveryApi;scopeTransform;static MicrosoftGraphID="00000003-0000-0000-c000-000000000000";static create(n){return new $(n)}constructor(n){const{configApi:l,environment:v="development",provider:R=L,oauthRequestApi:Z,discoveryApi:ht,defaultScopes:ut=["openid","offline_access","profile","email","User.Read"],scopeTransform:Rt=Kt=>Kt.concat("offline_access")}=n;this.configApi=l,this.environment=v,this.provider=R,this.oauthRequestApi=Z,this.discoveryApi=ht,this.scopeTransform=Rt,this.oauth2={[$.MicrosoftGraphID]:z.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:ut})}}microsoftGraph(){return this.oauth2[$.MicrosoftGraphID]}static resourceForScopes(n){const l=[...new Set(n.split(" ").map($.resourceForScope).filter(R=>R!=="openid"))];if(l.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${l.join(", ")}. Access tokens can only have a single audience.`));const v=l[0]??$.MicrosoftGraphID;return Promise.resolve(v)}static resourceForScope(n){const l=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/)?.groups;if(l){const{resourceURI:v}=l;return v.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return $.MicrosoftGraphID}}async getAccessToken(n,l){const v=n===void 0?$.MicrosoftGraphID:await $.resourceForScopes(Array.isArray(n)?n.join(" "):n);return v in this.oauth2||(this.oauth2[v]=z.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[v].getAccessToken(n,l)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}}const K={id:"github",title:"GitHub",icon:()=>null};class J{static create(n){const{configApi:l,discoveryApi:v,environment:R="development",provider:Z=K,oauthRequestApi:ht,defaultScopes:ut=["read:user"]}=n;return z.create({configApi:l,discoveryApi:v,oauthRequestApi:ht,provider:Z,environment:R,defaultScopes:ut})}}const ot={id:"okta",title:"Okta",icon:()=>null},At=new Set(["openid","profile","email","phone","address","groups","offline_access"]),X="okta.";class dt{static create(n){const{configApi:l,discoveryApi:v,environment:R="development",provider:Z=ot,oauthRequestApi:ht,defaultScopes:ut=["openid","email","profile","offline_access"]}=n;return z.create({configApi:l,discoveryApi:v,oauthRequestApi:ht,provider:Z,environment:R,defaultScopes:ut,scopeTransform(Rt){return Rt.map(Kt=>At.has(Kt)||Kt.startsWith(X)?Kt:`${X}${Kt}`)}})}}const xt={id:"gitlab",title:"GitLab",icon:()=>null};class $t{static create(n){const{configApi:l,discoveryApi:v,environment:R="development",provider:Z=xt,oauthRequestApi:ht,defaultScopes:ut=["read_user"]}=n;return z.create({configApi:l,discoveryApi:v,oauthRequestApi:ht,provider:Z,environment:R,defaultScopes:ut})}}const wt={id:"onelogin",title:"onelogin",icon:()=>null},_t=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Ut="onelogin.";class zt{static create(n){const{configApi:l,discoveryApi:v,environment:R="development",provider:Z=wt,oauthRequestApi:ht}=n;return z.create({configApi:l,discoveryApi:v,oauthRequestApi:ht,provider:Z,environment:R,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(ut){return ut.map(Rt=>_t.has(Rt)||Rt.startsWith(Ut)?Rt:`${Ut}${Rt}`)}})}}const Xt={id:"bitbucket",title:"Bitbucket",icon:()=>null};class se{static create(n){const{configApi:l,discoveryApi:v,environment:R="development",provider:Z=Xt,oauthRequestApi:ht,defaultScopes:ut=["account"]}=n;return z.create({configApi:l,discoveryApi:v,oauthRequestApi:ht,provider:Z,environment:R,defaultScopes:ut})}}const re={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class ce{static create(n){const{configApi:l,discoveryApi:v,environment:R="development",provider:Z=re,oauthRequestApi:ht,defaultScopes:ut=["PROJECT_ADMIN"]}=n;return z.create({configApi:l,discoveryApi:v,oauthRequestApi:ht,provider:Z,environment:R,defaultScopes:ut})}}const te={id:"atlassian",title:"Atlassian",icon:()=>null};class ie{static create(n){const{configApi:l,discoveryApi:v,environment:R="development",provider:Z=te,oauthRequestApi:ht}=n;return z.create({configApi:l,discoveryApi:v,oauthRequestApi:ht,provider:Z,environment:R})}}const me={id:"vmwareCloudServices",title:"VMware Cloud",icon:()=>null};class ee{static create(n){const{configApi:l,discoveryApi:v,oauthRequestApi:R,environment:Z="development",provider:ht=me,defaultScopes:ut=["openid"]}=n;return z.create({configApi:l,discoveryApi:v,oauthRequestApi:R,provider:ht,environment:Z,defaultScopes:ut})}}var Wt=t(45843),jt=t(61617),pt=t(54195),Y=t(34477),ft=t(43327),Tt=t(24453),Lt=t(83392),St=t(95159),Ht=t(94223),kt=t(35177),Dt=t(40058),Ft=t(71834),Yt=t(10288),Et=t.n(Yt),at=t(20938),yt=t(7578),Ot=t(56240),bt=t(59759);const Mt=yt.z.lazy(()=>yt.z.object({rule:yt.z.string(),resourceType:yt.z.string(),params:yt.z.record(yt.z.any()).optional()}).or(yt.z.object({anyOf:yt.z.array(Mt).nonempty()})).or(yt.z.object({allOf:yt.z.array(Mt).nonempty()})).or(yt.z.object({not:Mt}))),W=yt.z.object({result:yt.z.literal(Ot.b.ALLOW).or(yt.z.literal(Ot.b.DENY))}),x=yt.z.object({result:yt.z.array(yt.z.union([yt.z.literal(Ot.b.ALLOW),yt.z.literal(Ot.b.DENY)]))}).or(W),M=yt.z.union([yt.z.object({result:yt.z.literal(Ot.b.ALLOW).or(yt.z.literal(Ot.b.DENY))}),yt.z.object({result:yt.z.literal(Ot.b.CONDITIONAL),pluginId:yt.z.string(),resourceType:yt.z.string(),conditions:Mt})]),_=(A,n)=>yt.z.object({items:yt.z.array(yt.z.intersection(yt.z.object({id:yt.z.string()}),A)).refine(l=>l.length===n.size&&l.every(({id:v})=>n.has(v)),{message:"Items in response do not match request"})});class Pt{enabled;discovery;enableBatchedRequests;constructor(n){this.discovery=n.discovery,this.enabled=n.config.getOptionalBoolean("permission.enabled")??!1,this.enableBatchedRequests=n.config.getOptionalBoolean("permission.EXPERIMENTAL_enableBatchedRequests")??!1}async authorize(n,l){return this.enabled?this.enableBatchedRequests?this.makeBatchedRequest(n,l):this.makeRequest(n,W,l):n.map(v=>({result:Ot.b.ALLOW}))}async authorizeConditional(n,l){return this.enabled?this.makeRequest(n,M,l):n.map(v=>({result:Ot.b.ALLOW}))}async makeRequest(n,l,v){const R={items:n.map(ut=>({id:at.A(),...ut}))},ht=(await this.makeRawRequest(R,l,v)).items.reduce((ut,Rt)=>(ut[Rt.id]=Rt,ut),{});return R.items.map(ut=>ht[ut.id])}async makeBatchedRequest(n,l){const v={};for(const ht of n){const{permission:ut,resourceRef:Rt}=ht;(0,bt.OL)(ut)?(v[ut.name]||={permission:ut,resourceRef:[],id:at.A()},Rt&&v[ut.name].resourceRef?.push(Rt)):v[ut.name]||={permission:ut,id:at.A()}}const Z=(await this.makeRawRequest({items:Object.values(v)},x,l)).items.reduce((ht,ut)=>(ht[ut.id]=ut,ht),{});return n.map(ht=>{const{id:ut}=v[ht.permission.name],Rt=Z[ut];return Array.isArray(Rt.result)?{result:ht.resourceRef?Rt.result.shift():Rt.result[0]}:{result:Rt.result}})}async makeRawRequest(n,l,v){const R=await this.discovery.getBaseUrl("permission"),Z=await Et()(`${R}/authorize`,{method:"POST",body:JSON.stringify(n),headers:{...this.getAuthorizationHeader(v?.token),"content-type":"application/json"}});if(!Z.ok)throw await Ft.o.fromResponse(Z);const ht=await Z.json();return _(l,new Set(n.items.map(({id:ut})=>ut))).parse(ht)}getAuthorizationHeader(n){return n?{Authorization:`Bearer ${n}`}:{}}}class Bt{constructor(n,l){this.permissionClient=n,this.identityApi=l}static create(n){const{config:l,discovery:v,identity:R}=n,Z=new Pt({discovery:v,config:l});return new Bt(Z,R)}async authorize(n){return(await this.permissionClient.authorize([n],await this.identityApi.getCredentials()))[0]}}const Vt=[(0,Wt.b)({api:jt.I,deps:{configApi:pt.U},factory:({configApi:A})=>h.fromConfig(A)}),(0,Wt.b)({api:Y.k,deps:{},factory:()=>new g}),(0,Wt.b)({api:ft.c,deps:{},factory:()=>new i}),(0,Wt.b)({api:Tt.m,deps:{alertApi:Y.k},factory:({alertApi:A})=>{const n=new p(A,new u);return f.forward(n,{hidden:!1}),n}}),(0,Wt.b)({api:Lt.F,deps:{errorApi:Tt.m},factory:({errorApi:A})=>T.create({errorApi:A})}),(0,Wt.b)({api:St.a,deps:{configApi:pt.U,identityApi:Ht.K,discoveryApi:jt.I},factory:({configApi:A,identityApi:n,discoveryApi:l})=>O({middleware:[k.resolvePluginProtocol({discoveryApi:l}),k.injectIdentityAuth({identityApi:n,config:A})]})}),(0,Wt.b)({api:kt.s,deps:{},factory:()=>new H}),(0,Wt.b)({api:st.Vk,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>S.create({configApi:l,discoveryApi:A,oauthRequestApi:n,environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:st.u0,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>$.create({configApi:l,discoveryApi:A,oauthRequestApi:n,environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:st.py,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>J.create({configApi:l,discoveryApi:A,oauthRequestApi:n,defaultScopes:["read:user"],environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:st.Zj,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>dt.create({configApi:l,discoveryApi:A,oauthRequestApi:n,environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:st.$7,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>$t.create({configApi:l,discoveryApi:A,oauthRequestApi:n,environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:st.zk,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>zt.create({configApi:l,discoveryApi:A,oauthRequestApi:n,environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:st.Hd,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>se.create({configApi:l,discoveryApi:A,oauthRequestApi:n,defaultScopes:["account"],environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:st.GR,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>ce.create({configApi:l,discoveryApi:A,oauthRequestApi:n,defaultScopes:["REPO_READ"],environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:st.cz,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>ie.create({configApi:l,discoveryApi:A,oauthRequestApi:n,environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:st.dM,deps:{discoveryApi:jt.I,oauthRequestApi:kt.s,configApi:pt.U},factory:({discoveryApi:A,oauthRequestApi:n,configApi:l})=>ee.create({configApi:l,discoveryApi:A,oauthRequestApi:n,environment:l.getOptionalString("auth.environment")})}),(0,Wt.b)({api:Dt.x,deps:{discovery:jt.I,identity:Ht.K,config:pt.U},factory:({config:A,discovery:n,identity:l})=>Bt.create({config:A,discovery:n,identity:l})})];var Gt=t(31085),pe=t(64947),fe=t(41544),Pe=t(12554),Fe=t(96872),De=t(18690),be=t(73657);function Ie({children:A}){return(0,De.Ri)()?(0,Gt.jsx)(Gt.Fragment,{children:A}):(0,Gt.jsx)(De.fS,{children:A})}const we=()=>(0,Gt.jsx)(fe.M,{status:"404",statusMessage:"PAGE NOT FOUND"}),ke=({step:A,error:n})=>{let l="";return A==="load-config"?l=`The configuration failed to load, someone should have a look at this error: ${n.message}`:A==="load-chunk"&&(l=`Lazy loaded chunk failed to load, try to reload the page: ${n.message}`),(0,Gt.jsx)(Ie,{children:(0,Gt.jsx)(fe.M,{statusMessage:l,stack:n.stack})})},Ge=({error:A,resetError:n,plugin:l})=>(0,Gt.jsx)(Pe.b,{title:`Error in ${l?.getId()}`,defaultExpanded:!0,error:A,children:(0,Gt.jsx)(pe.A,{variant:"outlined",onClick:n,children:"Retry"})}),je={Progress:Fe.k,Router:be.Kd,NotFoundErrorPage:we,BootErrorPage:ke,ErrorBoundaryFallback:Ge};var _e=t(14451),gn=t(27799),mn=t(94389),fn=t(20947),Nn=t(20473),yn=t(45917),Wn=t(39347),Kn=t(63309),Fn=t(82451),vn=t(85121),Xe=t(17400),En=t(42226),kn=t(69550),zn=t(52755),Ye=t(89350),qe=t(8911),An=t(33602),xn=t(48108),Pn=t(77225),Hn=t(55700),Gn=t(71865),Vn=t(80109),Cn=t(15303),Yn=t(39330);const Jn={brokenImage:gn.A,catalog:qe.A,scaffolder:fn.A,techdocs:Nn.A,search:yn.A,chat:Wn.A,dashboard:Kn.A,docs:Fn.A,email:vn.A,github:En.A,group:An.A,help:kn.A,"kind:api":Xe.A,"kind:component":Ye.A,"kind:domain":_e.A,"kind:group":An.A,"kind:location":zn.A,"kind:system":mn.A,"kind:user":xn.A,"kind:resource":Hn.A,"kind:template":Gn.A,user:xn.A,warning:Pn.A,star:Vn.A,unstarred:Cn.A,externalLink:Yn.A};var Qn=t(58733),Xn=t(55288),Zn=t(91360),_n=t(50868),qn=t(12285),ts=t(87271),jn=t(64636);jn.A.configure(A=>`v5-${A}`);const tn=(0,Xn.A)({productionPrefix:"jss4-"});function Tn(A){const{children:n,theme:l,noCssBaseline:v=!1}=A,R=l.getTheme("v4"),Z=l.getTheme("v5");let ht;v||(ht=(0,Gt.jsx)(Qn.Ay,{}));let ut=(0,Gt.jsxs)(Gt.Fragment,{children:[ht,n]});return R&&(ut=(0,Gt.jsx)(Zn.Ay,{generateClassName:tn,children:(0,Gt.jsx)(_n.A,{theme:R,children:ut})})),Z&&(ut=(0,Gt.jsx)(qn.A,{injectFirst:!0,children:(0,Gt.jsx)(ts.A,{theme:Z,children:ut})})),ut}const On={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}};var es=t(98392),Rn=t(17161);const $e={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},Le={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function vt(A){const{colors:n,shape:l,options:v}=A,Z=`linear-gradient(90deg, ${(n.length===1?[n[0],n[0]]:n).join(", ")})`,ht=`${l},  ${Z}`,ut=v?.fontColor??"#FFFFFF";return{colors:n,shape:l,backgroundImage:ht,fontColor:ut}}const Nt={home:vt({colors:Le.teal,shape:$e.wave}),documentation:vt({colors:Le.pinkSea,shape:$e.wave2}),tool:vt({colors:Le.purpleSky,shape:$e.round}),service:vt({colors:Le.marineBlue,shape:$e.wave}),website:vt({colors:Le.veryBlue,shape:$e.wave}),library:vt({colors:Le.rubyRed,shape:$e.wave}),other:vt({colors:Le.darkGrey,shape:$e.wave}),app:vt({colors:Le.toastyOrange,shape:$e.wave}),apis:vt({colors:Le.teal,shape:$e.wave2}),card:vt({colors:Le.greens,shape:$e.wave})},Qt=16,Jt='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',qt="home",ae={htmlFontSize:Qt,fontFamily:Jt,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};function oe(A){const{palette:n,htmlFontSize:l=Qt,fontFamily:v=Jt,defaultPageTheme:R=qt,pageTheme:Z=Nt,typography:ht}=A;if(!Z[R])throw new Error(`${R} is not defined in pageTheme.`);return ae.htmlFontSize=l,ae.fontFamily=v,{palette:n,typography:ht??ae,page:Z[R],getPageTheme:({themeId:ut})=>Z[ut]??Z[R]}}var le=t(80012);const Ee={MuiCssBaseline:{styleOverrides:A=>({html:{height:"100%",fontFamily:A.typography.fontFamily},body:{height:"100%",fontFamily:A.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:A.palette.background.paper,width:"1em"},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:A.palette.textVerySubtle,border:`3px solid ${A.palette.background.paper}`},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:A.palette.mode==="dark"?(0,le.a)(A.palette.textVerySubtle,.2):(0,le.e$)(A.palette.textVerySubtle,.2)},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:A.palette.mode==="dark"?(0,le.a)(A.palette.textVerySubtle,.2):(0,le.e$)(A.palette.textVerySubtle,.2)}},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:A})=>({"&:nth-of-type(odd)":{backgroundColor:A.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:A})=>({"&:nth-of-type(odd)":{backgroundColor:A.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:A})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:A.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:A})=>({padding:A.spacing(1.5,2,1.5,2.5)}),head:({theme:A})=>({wordBreak:"break-word",overflow:"hidden",color:A.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:A})=>({color:A.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,le.e$)(A.palette.link,.3),background:(0,le.a)(A.palette.link,.95)},[A.breakpoints.up("md")]:{minWidth:120,fontSize:A.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:A})=>({color:A.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&:focus svg":{opacity:.5},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:A})=>({marginRight:A.spacing(1),marginBottom:A.spacing(1)}),label:({theme:A})=>({lineHeight:A.spacing(2.5),fontWeight:A.typography.fontWeightMedium,fontSize:A.spacing(1.75)}),labelSmall:({theme:A})=>({fontSize:A.spacing(1.5)}),deleteIcon:({theme:A})=>({width:A.spacing(3),height:A.spacing(3),margin:A.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:A})=>({width:A.spacing(2),height:A.spacing(2),margin:A.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}},ve=A=>(...n)=>{const l=n.length===0?[1]:n,v=(R,Z)=>typeof R=="string"?R:Z*R;return l.map(R=>{const Z=v(R,A);return typeof Z=="number"?`${Z}px`:Z}).join(" ")};function ue(A,n){if(!n||typeof n=="string")return;const l=typeof n=="function"?n(A):n;if(l)return{"@global":l}}function ge(A,n){if(!(!n||typeof n=="string")){if(typeof n=="object"){const l={...A},v=A.spacing(1);return typeof v=="number"&&(l.spacing=ve(v)),Object.fromEntries(Object.entries(n).map(([R,Z])=>typeof Z=="function"?[R,Z({theme:l})]:[R,Z]))}return n}}const he=/^&.Mui-([\w-]+)$/;function Ae(A){let n=A;if(!A||typeof A!="object")return n;for(const l of Object.keys(A)){const v=A[l];if(!(!v||typeof v!="object"))for(const R of Object.keys(v)){const Z=R,ht=Z.match(he);if(ht){const[,ut]=ht,{[Z]:Rt,...Kt}=v;Rt&&(n={...n,[l]:Kt,[ut]:Rt})}}}return n}function xe(A,n={}){const l={},v={};for(const R of Object.keys(n)){const Z=n[R];Z&&("styleOverrides"in Z&&(R==="MuiCssBaseline"?l[R]=ue(A,Z.styleOverrides):l[R]=Ae(ge(A,Z.styleOverrides))),"defaultProps"in Z&&(v[R]=Z.defaultProps))}return{overrides:l,props:v}}class Ce{#t=new Map;constructor(n,l){this.#t=new Map,n&&this.#t.set("v4",n),l&&this.#t.set("v5",l)}getTheme(n){return this.#t.get(n)}}function Te(A){const n=oe(A),l={...Ee,...A.components},v=(0,Rn.A)({...n,components:l}),R=xe(v,l),Z={...(0,es.A)(n),...R};return new Ce(Z,v)}function Ue(A){const n=adaptV4Theme(A),l=createTheme$1(A);return new Ce(l,createTheme(n))}const Oe={light:Te({palette:On.light}),dark:Te({palette:On.dark})};var We=t(75962),ns=t(87145);const on=[{id:"light",title:"Light Theme",variant:"light",icon:(0,Gt.jsx)(ns.A,{}),Provider:({children:A})=>(0,Gt.jsx)(Tn,{theme:Oe.light,children:A})},{id:"dark",title:"Dark Theme",variant:"dark",icon:(0,Gt.jsx)(We.A,{}),Provider:({children:A})=>(0,Gt.jsx)(Tn,{theme:Oe.dark,children:A})}];var Re=t(14041),Sn=t(73466),ss=t(39067),an=t.n(ss);class Me{holders;constructor(...n){this.holders=n}get(n){for(const l of this.holders){const v=l.get(n);if(v)return v}}}var ze=t(54852),en=t(4790);const Ze=(0,ze.tK)("api-context"),Ve=A=>{const{apis:n,children:l}=A,v=(0,Re.useContext)(Ze)?.atVersion(1),R=v?new Me(n,v):n;return(0,Gt.jsx)(Ze.Provider,{value:(0,en.B)({1:R}),children:l})};Ve.propTypes={apis:an().shape({get:an().func.isRequired}).isRequired,children:an().node};class Qe{constructor(n){this.factories=n}static validateFactories(n,l){for(const v of l){const R=[v],Z=new Set;for(;R.length;){const ht=R.shift(),ut=n.get(ht);if(ut)for(const Rt of Object.values(ut.deps)){if(Rt.id===v.id)throw new Error(`Circular dependency of api factory for ${v}`);Z.has(Rt)||(Z.add(Rt),R.push(Rt))}}}}apis=new Map;get(n){return this.load(n)}load(n,l=[]){const v=this.apis.get(n.id);if(v)return v;const R=this.factories.get(n);if(!R)return;if(l.includes(R.api))throw new Error(`Circular dependency of api factory for ${R.api}`);const Z=this.loadDeps(n,R.deps,[...l,R.api]),ht=R.factory(Z);return this.apis.set(n.id,ht),ht}loadDeps(n,l,v){const R={};for(const Z in l)if(l.hasOwnProperty(Z)){const ht=l[Z],ut=this.load(ht,v);if(!ut)throw new Error(`No API factory available for dependency ${ht} of dependent ${n}`);R[Z]=ut}return R}}var He=(A=>(A[A.default=10]="default",A[A.app=50]="app",A[A.static=100]="static",A))(He||{});class Us{factories=new Map;register(n,l){const v=He[n],R=this.factories.get(l.api.id);return R&&R.priority>=v?!1:(this.factories.set(l.api.id,{priority:v,factory:l}),!0)}get(n){const l=this.factories.get(n.id);if(l)return l.factory}getAllApis(){const n=new Set;for(const{factory:l}of this.factories.values())n.add(l.api);return n}}var rs=t(68541),nn=t(86702);const ln="theme";class bn{constructor(n){this.themes=n}static createWithStorage(n){const l=new bn(n);if(!window.localStorage)return l;const v=window.localStorage.getItem(ln)??void 0;return l.setActiveThemeId(v),l.activeThemeId$().subscribe(R=>{R?window.localStorage.setItem(ln,R):window.localStorage.removeItem(ln)}),window.addEventListener("storage",R=>{if(R.key===ln){const Z=localStorage.getItem(ln)??void 0;l.setActiveThemeId(Z)}}),l}activeThemeId;subject=new d(void 0);getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const ws=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function Dn(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function os(A){return typeof A!="object"||A===null?A:Array.isArray(A)?A.map(os):Object.fromEntries(Object.entries(A).map(([n,l])=>[n,os(l)]))}function cn(A,n){if(A===null)return;if(A===void 0)return n===void 0?void 0:cn(n);if(typeof A!="object"||Array.isArray(A))return A;const l=Dn(n)?n:{},v={};for(const R of new Set([...Object.keys(A),...Object.keys(l)])){const Z=cn(A[R],l[R]);Z!==void 0&&(v[R]=Z)}return v}function as(A){if(A===null)return"null";if(Array.isArray(A))return"array";const n=typeof A;return n==="number"&&isNaN(A)?"nan":n==="string"&&A===""?"empty-string":n}const Ke={type(A,n,l,v){return`Invalid type in config for key '${A}' in '${n}', got ${l}, wanted ${v}`},missing(A,n){return`Missing required config value at '${A}' in '${n}'`},convert(A,n,l){return`Unable to convert config value for key '${A}' in '${n}' to a ${l}`}};class sn{constructor(n,l="mock-config",v,R=""){this.data=n,this.context=l,this.fallback=v,this.prefix=R}filteredKeys;notifiedFilteredKeys=new Set;static fromConfigs(n){return n.length===0?new sn(void 0):n.reduce((l,{data:v,context:R,filteredKeys:Z,deprecatedKeys:ht})=>{const ut=new sn(v,R,l);if(ut.filteredKeys=Z,ht)for(const{key:Rt,description:Kt}of ht)console.warn(`The configuration key '${Rt}' of ${R} is deprecated and may be removed soon. ${Kt||""}`);return ut},void 0)}has(n){const l=this.readValue(n);return l===null?!1:l!==void 0?!0:this.fallback?.has(n)??!1}keys(){const n=this.data?Object.keys(this.data):[],l=this.fallback?.keys()??[];return[...new Set([...n,...l])].filter(v=>this.data?.[v]!==null)}get(n){const l=this.getOptional(n);if(l===void 0)throw new Error(Ke.missing(this.fullKey(n??""),this.context));return l}getOptional(n){const l=os(this.readValue(n)),v=this.fallback?.getOptional(n);if(l!==null)return l===void 0?cn(v):v===void 0?cn(l):cn(l,v)}getConfig(n){const l=this.getOptionalConfig(n);if(l===void 0)throw new Error(Ke.missing(this.fullKey(n),this.context));return l}getOptionalConfig(n){const l=this.readValue(n),v=this.fallback?.getOptionalConfig(n);if(Dn(l))return this.copy(l,n,v);if(l!==null){if(l!==void 0)throw new TypeError(Ke.type(this.fullKey(n),this.context,as(l),"object"));return v}}getConfigArray(n){const l=this.getOptionalConfigArray(n);if(l===void 0)throw new Error(Ke.missing(this.fullKey(n),this.context));return l}getOptionalConfigArray(n){const l=this.readConfigValue(n,v=>{if(!Array.isArray(v))return{expected:"object-array"};for(const[R,Z]of v.entries())if(!Dn(Z))return{expected:"object-array",value:Z,key:`${n}[${R}]`};return!0});if(l)return l.map((v,R)=>this.copy(v,`${n}[${R}]`))}getNumber(n){const l=this.getOptionalNumber(n);if(l===void 0)throw new Error(Ke.missing(this.fullKey(n),this.context));return l}getOptionalNumber(n){const l=this.readConfigValue(n,R=>typeof R=="number"||typeof R=="string"||{expected:"number"});if(typeof l=="number"||l===void 0)return l;const v=Number(l);if(!Number.isFinite(v))throw new Error(Ke.convert(this.fullKey(n),this.context,"number"));return v}getBoolean(n){const l=this.getOptionalBoolean(n);if(l===void 0)throw new Error(Ke.missing(this.fullKey(n),this.context));return l}getOptionalBoolean(n){const l=this.readConfigValue(n,R=>typeof R=="boolean"||typeof R=="number"||typeof R=="string"||{expected:"boolean"});if(typeof l=="boolean"||l===void 0)return l;const v=String(l).trim();if(/^(?:y|yes|true|1|on)$/i.test(v))return!0;if(/^(?:n|no|false|0|off)$/i.test(v))return!1;throw new Error(Ke.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const l=this.getOptionalString(n);if(l===void 0)throw new Error(Ke.missing(this.fullKey(n),this.context));return l}getOptionalString(n){return this.readConfigValue(n,l=>typeof l=="string"&&l!==""||{expected:"string"})}getStringArray(n){const l=this.getOptionalStringArray(n);if(l===void 0)throw new Error(Ke.missing(this.fullKey(n),this.context));return l}getOptionalStringArray(n){return this.readConfigValue(n,l=>{if(!Array.isArray(l))return{expected:"string-array"};for(const[v,R]of l.entries())if(typeof R!="string"||R==="")return{expected:"string-array",value:R,key:`${n}[${v}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,l,v){const R=new sn(n,this.context,v,this.fullKey(l));return R.filteredKeys=this.filteredKeys,R}readConfigValue(n,l){const v=this.readValue(n);if(v===void 0)return this.fallback?.readConfigValue(n,l);if(v===null)return;const R=l(v);if(R!==!0){const{key:Z=n,value:ht=v,expected:ut}=R;throw new TypeError(Ke.type(this.fullKey(Z),this.context,as(ht),ut))}return v}readValue(n){const l=n?n.split("."):[];for(const R of l)if(!ws.test(R))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let v=this.data;for(const[R,Z]of l.entries())if(Dn(v))v=v[Z];else if(v!=null){const ht=this.fullKey(l.slice(0,R).join("."));throw new TypeError(Ke.type(ht,this.context,as(v),"object"))}return v}}function ys(A){if(A.length<3)throw new Error(`The '${A}' feature flag must have a minimum length of three characters.`);if(A.length>150)throw new Error(`The '${A}' feature flag must not exceed 150 characters.`);if(!A.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${A}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class $s{registeredFeatureFlags=[];flags;registerFlag(n){ys(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===nn.S.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[v,R]of Object.entries(n.states))this.flags.set(v,R);const l=Array.from(this.flags.entries()).filter(([,v])=>v===nn.S.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(l)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const l=JSON.parse(n);if(typeof l!="object"||l===null||Array.isArray(l))return new Map;const v=Object.entries(l).filter(([R,Z])=>(ys(R),Z===nn.S.Active));return new Map(v)}catch{return new Map}}}var vs=t(90608),Ns=t(87350);function Ws(A){const n={};for(const v in A.collectors)A.collectors.hasOwnProperty(v)&&(n[v]=A.collectors[v]());const l=[{node:Re.Children.toArray(A.root),parent:void 0,contexts:{}}];for(;l.length!==0;){const{node:v,parent:R,contexts:Z}=l.shift();Re.Children.forEach(v,ht=>{if(!(0,Re.isValidElement)(ht))return;const ut={};for(const Rt in n)if(n.hasOwnProperty(Rt)){const Kt=n[Rt];ut[Rt]=Kt.visit(Kt.accumulator,ht,R,Z[Rt])}for(const Rt of A.discoverers){const Kt=Rt(ht);Kt&&l.push({node:Kt,parent:ht,contexts:ut})}})}return Object.fromEntries(Object.entries(n).map(([v,R])=>[v,R.accumulator]))}function In(A,n){return()=>({accumulator:A(),visit:n})}function Ks(A){return A.props?.children}function Fs(A){if(A.props?.path&&A.props?.element)return A.props?.element}var Ne=t(85408);const ks=In(()=>new Set,(A,n)=>{const l=(0,Ne.E)(n,"core.plugin");l&&A.add(l)});var Es=t(18139);const As=A=>{const{children:n}=A,l=(0,Es.gf)(nn.B),v="with"in A?l.isActive(A.with):!l.isActive(A.without);return(0,Gt.jsx)(Gt.Fragment,{children:v?n:null})};(0,Ne.h)(As,"core.featureFlagged",!0);const Mn={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Bn(A){const n=A;return n?.type?n.type.displayName??n.type.name??String(n.type):String(n)}const xs=A=>{const n=new Set;return A&&n.add(A),n};function Ps(A,n=new Array){return Re.Children.forEach(A,l=>{if(!(0,Re.isValidElement)(l))return;const v=(0,Ne.E)(l,"core.mountPoint");if(v){const R=(0,Ne.E)(l,"core.plugin");n.push({routeRef:v,plugin:R})}Ps(l.props.children,n)}),n}const zs=In(()=>({paths:new Map,parents:new Map,objects:new Array}),(A,n,l,v)=>{if(v?.isElementAncestor)return v;if(l?.props.element===n)return{...v,isElementAncestor:!0};const R=n.props?.path,Z=(0,Ne.E)(n,"core.mountPoint");if(Z&&R)throw new Error(`Path property may not be set directly on a routable extension "${Bn(n)}"`);const ht=v?.obj?.children??A.objects;if(R!==void 0){if(typeof R!="string")throw new Error(`Element path must be a string at "${Bn(n)}"`);const ut=R.startsWith("/")?R.slice(1):R,Rt=n.props.element;if((0,Ne.E)(n,"core.gatherMountPoints")){if(Rt)throw new Error(`Mount point gatherers may not have an element prop "${Bn(n)}"`);const Kt={path:ut,element:"gathered",routeRefs:new Set,caseSensitive:!!n.props?.caseSensitive,children:[Mn],plugins:new Set};return ht.push(Kt),{obj:Kt,gatherPath:ut,routeRef:v?.routeRef,gatherRouteRef:v?.routeRef}}if(Rt){const[Kt,...a]=Ps(Rt);if(a.length>0)throw new Error(`Route element with path "${R}" may not contain multiple routable extensions`);if(!Kt)return v;const{routeRef:E,plugin:C}=Kt,w={path:ut,element:"mounted",routeRefs:new Set([E]),caseSensitive:!!n.props?.caseSensitive,children:[Mn],plugins:xs(C)};return ht.push(w),A.paths.set(E,ut),A.parents.set(E,v?.routeRef),{obj:w,routeRef:E??v?.routeRef,gatherPath:ut,gatherRouteRef:v?.gatherRouteRef}}}if(Z){if(v?.gatherPath===void 0)throw new Error(`Routable extension "${Bn(n)}" with mount point "${Z}" must be assigned a path`);v?.obj?.routeRefs.add(Z);const ut=(0,Ne.E)(n,"core.plugin");return ut&&v?.obj?.plugins.add(ut),A.paths.set(Z,v.gatherPath),A.parents.set(Z,v?.gatherRouteRef),{...v,routeRef:Z}}return v}),Hs=In(()=>({paths:new Map,parents:new Map,objects:new Array}),(A,n,l,v)=>{if(l?.props.element===n)return v;let R=v?.obj,Z=v?.routeRef,ht=v?.sticky;const ut=n.props?.path,Rt=R?.children??A.objects,Kt=!!n.props?.caseSensitive;let a=v?.path;if((0,Ne.E)(n,"core.gatherMountPoints")){if(!ut)throw new Error("Mount point gatherer must have a path");a=ut}const E=n.props?.element;let C=(0,Ne.E)(n,"core.mountPoint");if(!C&&(0,Re.isValidElement)(E)&&(C=(0,Ne.E)(E,"core.mountPoint")),C){let gt=ut;if(a&&(gt?a=void 0:gt=a),!gt)throw new Error("Mounted routable extension must have a path");A.paths.set(C,gt),Z&&ht?(A.parents.set(C,Z),ut&&(Z=C,ht=!1)):(A.parents.set(C,Z),Z=C),ut?(R={caseSensitive:Kt,path:ut,element:"mounted",routeRefs:new Set([C]),children:[Mn],plugins:xs((0,Ne.E)(n.props.element,"core.plugin"))},Rt.push(R)):R?.routeRefs.add(C)}if((0,Ne.E)(n,"core.gatherMountPoints")&&(ht=!0),(0,Ne.E)(n,"core.gatherMountPoints")){if(!ut)throw new Error("Mount point gatherer must have a path");C||(R={caseSensitive:Kt,path:ut,element:"gathered",routeRefs:new Set,children:[Mn],plugins:v?.obj?.plugins||new Set},Rt.push(R))}return{obj:R,path:a,routeRef:Z,sticky:ht}}),Cs=In(()=>new Set,(A,n)=>{if(n.type===As){const l=n.props;A.add("with"in l?l.with:l.without)}});var js=t(21613),Gs=t(1952);const dn=(0,Gs.Q)("route-ref-type",()=>Symbol("route-ref-type"));function is(A){return A[dn]==="absolute"}function ls(A){return A[dn]==="sub"}function Vs(A){return A[dn]==="external"}function Ln(...A){const n=A.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}var Ys=t(46155),Js=t.n(Ys);function Qs(A,n,l){let v,R="";if(is(A))v=A;else if(ls(A))v=A.parent,R=A.path;else if(Vs(A)){const ut=l.get(A);if(!ut)return[void 0,""];if(is(ut))v=ut;else if(ls(ut))v=ut.parent,R=ut.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${ut}`)}else throw A[dn]?new Error(`Unknown or invalid route ref type, ${A[dn]}`):new Error(`Unknown object passed to useRouteRef, got ${A}`);if(!v)return[void 0,""];const Z=n.get(v);if(Z===void 0)return[void 0,""];const ht=Ln(Z,R);return[v,ht]}function Xs(A,n,l,v,R){const Z=(0,js.ue)(R,n)??[],ht=Array();let ut=-1;for(let a=A;a&&(ut=Z.findIndex(E=>E.route.routeRefs.has(a)),ut===-1);a=v.get(a))ht.unshift(a);ht.length===0&&(ut-=1);const Rt=ut===-1?"":Z[ut].pathname,Kt=ht.slice(0,-1).map(a=>{const E=l.get(a);if(E===void 0)throw new Error(`No path for ${a}`);if(E.includes(":"))throw new Error(`Cannot route to ${A} with parent ${a} as it has parameters`);return E});return`${Ln(Rt,...Kt)}/`}class Ts{constructor(n,l,v,R,Z){this.routePaths=n,this.routeParents=l,this.routeObjects=v,this.routeBindings=R,this.appBasePath=Z}resolve(n,l){const[v,R]=Qs(n,this.routePaths,this.routeBindings);if(!v)return;let Z;typeof l=="string"?Z=this.trimPath(l):l.pathname?Z={...l,pathname:this.trimPath(l.pathname)}:Z=l;const ht=this.appBasePath+Xs(v,Z,this.routePaths,this.routeParents,this.routeObjects);return(...[Rt])=>{const Kt=Rt&&Js()(Rt,a=>typeof a=="string"?a.replaceAll(/[&?#;\/]/g,E=>encodeURIComponent(E)):a);return Ln(ht,(0,js.tW)(R,Kt))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const Os=(0,ze.tK)("routing-context"),Zs=({routePaths:A,routeParents:n,routeObjects:l,routeBindings:v,basePath:R="",children:Z})=>{const ht=new Ts(A,n,l,v,R),ut=(0,en.B)({1:ht});return(0,Gt.jsx)(Os.Provider,{value:ut,children:Z})};function _s(A,n){const l=new Set(n.values());l.delete(void 0);for(const v of n.keys()){if(l.has(v))continue;let R=v,Z="";for(;R;){const ut=A.get(R);if(ut===void 0)throw new Error(`No path for ${R}`);Z=Ln(ut,Z),R=n.get(R)}const ht=Z.match(/:(\w+)/g);if(ht){for(let ut=0;ut<ht.length;ut++)for(let Rt=ut+1;Rt<ht.length;Rt++)if(ht[Rt]===ht[ut])throw new Error(`Parameter ${ht[Rt]} is duplicated in path ${Z}`)}}}function qs(A,n){for(const l of n)if(l.externalRoutes){for(const[v,R]of Object.entries(l.externalRoutes))if(!R.optional&&!A.has(R))throw new Error(`External route '${v}' of the '${l.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const tr=(0,ze.tK)("app-context"),er=({appContext:A,children:n})=>{const l=(0,en.B)({1:A});return(0,Gt.jsx)(tr.Provider,{value:l,children:n})},Rs="app",nr=`${Rs}-auth-cookie-expires-at`,sr=5*6e4,Ss=5e3,rr=2,or=5*6e4;function ar({discoveryApi:A,fetchApi:n,errorApi:l}){let v=!1,R,Z=!0,ht=Ss;const ut="BroadcastChannel"in window?new BroadcastChannel(nr):void 0,Rt=C=>{const w=(1+3*Math.random())*6e4;return Math.max(C-Date.now(),sr)-w},Kt=async()=>{try{const w=`${await A.getBaseUrl(Rs)}/.backstage/auth/v1/cookie`,gt=await n.fetch(w,{credentials:"include"});if(!gt.ok)throw new Error(`Request failed with status ${gt.status} ${gt.statusText}, see request towards ${w} for more details`);const Ct=await gt.json();if(!Ct.expiresAt)throw new Error("No expiration date in response");const It=Date.parse(Ct.expiresAt);if(Number.isNaN(It))throw new Error("Invalid expiration date in response");Z=!0,ut?.postMessage({action:"COOKIE_REFRESH_SUCCESS",payload:{expiresAt:new Date(It).toISOString()}}),E(Rt(It))}catch(C){Z?(Z=!1,ht=Ss):(ht=Math.min(or,ht*rr),console.error("Session cookie refresh failed",C),l.post(new Error("Session refresh failed, see developer console for details"))),E(ht)}},a=C=>{const{data:w}=C;if(!(w===null||typeof w!="object")&&"action"in w&&w.action==="COOKIE_REFRESH_SUCCESS"){const gt=Date.parse(w.payload.expiresAt);if(Number.isNaN(gt)){console.warn("Received invalid expiration from session refresh channel");return}E(Rt(gt))}};function E(C){v||(R&&clearTimeout(R),R=setTimeout(Kt,C))}return ut?.addEventListener("message",a),Kt(),()=>{v=!0,R&&clearTimeout(R),ut?.removeEventListener("message",a),ut?.close()}}function bs(A){return new Error(`Tried to access IdentityApi ${A} before app was loaded`)}function cs(A){console.warn(`WARNING: Call to ${A} is deprecated and will break in the future`)}class ir{target;waitForTarget;resolveTarget=()=>{};signOutTargetUrl="/";#t;constructor(){this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,l){this.target=n,this.signOutTargetUrl=l.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw bs("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return cs("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw bs("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return cs("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(l=>l.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return cs("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),await this.#t?.(),window.location.href=this.signOutTargetUrl}enableCookieAuth(n){if(this.#t)return;const l=ar(n);this.#t=async()=>{l();const v=await n.discoveryApi.getBaseUrl("app");try{await fetch(`${v}/.backstage/auth/v1/cookie`,{method:"DELETE",credentials:"include"})}catch{}}}}var lr=t(11746);function ds(A,n,l){if(A!==void 0){const R=l.find(Z=>Z.id===A);if(R)return R}if(n){const R=l.find(Z=>Z.variant==="dark");if(R)return R}const v=l.find(R=>R.variant==="light");return v||l[0]}const cr=()=>{const A=(0,Re.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,l]=(0,Re.useState)(A.matches);return(0,Re.useEffect)(()=>{const v=R=>{l(R.matches)};return A.addListener(v),()=>{A.removeListener(v)}},[A]),n};function Ds({children:A}){const n=(0,Es.gf)(rs.Q),l=(0,lr.A)(n.activeThemeId$(),n.getActiveThemeId()),v=window.matchMedia?cr():!1,R=ds(l,v,n.getInstalledThemes());if(!R)throw new Error("App has no themes");return(0,Gt.jsx)(R.Provider,{children:A})}const dr=async()=>ur();function ur(A="__APP_INJECTED_RUNTIME_CONFIG__"){const n=new Array,l=[{context:"app-config.yaml",data:{app:{baseUrl:"http://localhost:3000",title:"Pukara Portal"},organization:{name:"Pukara"},backend:{baseUrl:"http://localhost:7007"},techdocs:{builder:"local"},auth:{environment:"development",providers:{github:{}}},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}},permission:{enabled:!0}}}];if(l){if(!Array.isArray(l))throw new Error("Static configuration has invalid format");n.push(...l)}const v=document.querySelectorAll('script[type="backstage.io/config"]');if(v.length>0)for(const Z of v)try{const ht=Z.textContent;if(!ht)throw new Error("tag is empty");let ut;try{ut=JSON.parse(ht)}catch(Rt){throw new Error(`failed to parse config; ${Rt}`)}if(!Array.isArray(ut))throw new Error("data is not an array");n.push(...ut)}catch(ht){throw new Error(`Failed to load config from script tag, ${ht.message}`)}else if(A!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const Z=JSON.parse(A);Array.isArray(Z)?n.push(...Z):n.push({data:Z,context:"env"})}catch(Z){throw new Error(`Failed to load runtime configuration, ${Z}`)}const R=window.__APP_CONFIG__;return R&&n.push({context:"window",data:R}),n}class hr{apis=[];add(n,l){return this.apis.push([n.id,l]),l}build(){return new rn(new Map(this.apis))}}class rn{constructor(n){this.apis=n}static builder(){return new hr}static from(n){return new rn(new Map(n.map(([l,v])=>[l.id,v])))}static with(n,l){return new rn(new Map([[n.id,l]]))}with(n,l){return new rn(new Map([...this.apis,[n.id,l]]))}get(n){return this.apis.get(n.id)}}function pr(A){const n=new Map,l=new Map;for(const v of A){for(const[R,Z]of Object.entries(v.routes??{})){const ht=`${v.getId()}.${R}`;if(n.has(ht))throw new Error(`Unexpected duplicate route '${ht}'`);n.set(ht,Z)}for(const[R,Z]of Object.entries(v.externalRoutes??{})){const ht=`${v.getId()}.${R}`;if(l.has(ht))throw new Error(`Unexpected duplicate external route '${ht}'`);l.set(ht,Z)}}return{routes:n,externalRoutes:l}}function gr(A,n,l){const v=pr(l),R=new Map,Z=new Set;A&&A({bind:(Rt,Kt)=>{for(const[a,E]of Object.entries(Kt)){const C=Rt[a];if(!C)throw new Error(`Key ${a} is not an existing external route`);if(!E&&!C.optional)throw new Error(`External route ${a} is required but was ${E===!1?"disabled":"not provided"}`);E?R.set(C,E):E===!1&&Z.add(C)}}});const ht=n.getOptionalConfig("app.routes.bindings")?.get();if(ht)for(const[ut,Rt]of Object.entries(ht)){if(!mr(Rt))throw new Error(`Invalid config at app.routes.bindings['${ut}'], value must be a non-empty string or false`);const Kt=v.externalRoutes.get(ut);if(!Kt)throw new Error(`Invalid config at app.routes.bindings, '${ut}' is not a valid external route`);if(!(R.has(Kt)||Z.has(Kt)))if(Rt===!1)Z.add(Kt);else{const a=v.routes.get(Rt);if(!a)throw new Error(`Invalid config at app.routes.bindings['${ut}'], '${Rt}' is not a valid route`);R.set(Kt,a)}}for(const ut of v.externalRoutes.values())if(!R.has(ut)&&!Z.has(ut)){const Rt="getDefaultTarget"in ut?ut.getDefaultTarget():void 0;if(Rt){const Kt=v.routes.get(Rt);Kt&&R.set(ut,Kt)}}return R}function mr(A){return!!(A===!1||typeof A=="string"&&A)}var fr=t(51750),yr=t(45681),Is=t(55362);const un="language",Je="en";class Un{static create(n){const l=n?.availableLanguages??[Je];if(l.length!==new Set(l).size)throw new Error(`Supported languages may not contain duplicates, got '${l.join("', '")}'`);if(!l.includes(Je))throw new Error(`Supported languages must include '${Je}'`);const v=n?.defaultLanguage??Je;if(!l.includes(v))throw new Error(`Initial language must be one of the supported languages, got '${v}'`);return new Un(l,v)}static createWithStorage(n){const l=Un.create(n);if(!window.localStorage)return l;const v=window.localStorage.getItem(un),{languages:R}=l.getAvailableLanguages();return v&&R.includes(v)&&l.setLanguage(v),l.language$().subscribe(({language:Z})=>{Z!==window.localStorage.getItem(un)&&window.localStorage.setItem(un,Z)}),window.addEventListener("storage",Z=>{if(Z.key===un){const ht=localStorage.getItem(un)??void 0;ht&&l.setLanguage(ht)}}),l}#t;#e;#n;constructor(n,l){this.#t=n,this.#e=l,this.#n=new d({language:this.#e})}getAvailableLanguages(){return{languages:this.#t.slice()}}setLanguage(n){const l=n??Je;if(l!==this.#e){if(l&&!this.#t.includes(l))throw new Error(`Failed to change language to '${l}', available languages are '${this.#t.join("', '")}'`);this.#e=l,this.#n.next({language:l})}}getLanguage(){return{language:this.#e}}language$(){return this.#n}}var us=t(47304);function vr(A){const n=A;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function hs(A){const n=A;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}function ps(A){return Object.fromEntries(Object.entries(A).filter(n=>n[1]!==null))}class xr{constructor(n){this.onLoad=n}#t=new Set;#e=new Map;#n=new Map;addTranslationResource(n){const l=vr(n);for(const v of l.resources){const R=this.#s(v.language,l.id);this.#n.has(R)||this.#n.set(R,v.loader)}}#s(n,l){return`${n}/${l}`}needsLoading(n,l){const v=this.#s(n,l);return this.#n.get(v)?!this.#t.has(v):!1}async load(n,l){const v=this.#s(n,l),R=this.#n.get(v);if(!R||this.#t.has(v))return;const Z=this.#e.get(v);if(Z){await Z;return}const ht=R().then(ut=>{this.onLoad({language:n,namespace:l,messages:ut.messages}),this.#t.add(v)},ut=>{throw this.#t.add(v),ut});this.#e.set(v,ht),await ht}}class wn{#t;#e;#n;static fromI18n(n){const l=n.services.interpolator,v=l.format;let R;return l.format=(Z,ht,ut,Rt)=>ht?v(Z,ht,ut,Rt):R?.(Z,ht,ut,Rt)??Z,new wn(Math.random().toString(36).substring(2,8),Z=>{R=Z})}constructor(n,l){this.#t=l,this.#e=n,this.#n=new RegExp(`\\$${n}\\(([^)]+)\\)`)}wrapT(n){return(l,v)=>{let R;this.#t(ut=>{if((0,Re.isValidElement)(ut)){R||(R=new Map);const Rt=R.size.toString();return R.set(Rt,ut),`$${this.#e}(${Rt})`}return ut});const Z=n(l,v);if(!R)return Z;const ht=Z.split(this.#n);return(0,Re.createElement)(Re.Fragment,null,...ht.map((ut,Rt)=>Rt%2===0?ut:R?.get(ut)).filter(Boolean))}}}class gs{static create(n){const{languages:l}=n.languageApi.getAvailableLanguages(),v=(0,us.Q_)({fallbackLng:Je,supportedLngs:l,interpolation:{escapeValue:!1,alwaysFormat:!0},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(v.init(),!v.isInitialized)throw new Error("i18next was unexpectedly not initialized");const R=wn.fromI18n(v),{language:Z}=n.languageApi.getLanguage();Z!==Je&&v.changeLanguage(Z);const ht=new xr(Kt=>{v.addResourceBundle(Kt.language,Kt.namespace,ps(Kt.messages),!1,!0)}),ut=n?.resources||[];for(let Kt=ut.length-1;Kt>=0;Kt--){const a=ut[Kt];a.$$type==="@backstage/TranslationResource"?ht.addTranslationResource(a):a.$$type==="@backstage/TranslationMessages"&&v.addResourceBundle(Je,a.id,ps(a.messages),!0,!1)}const Rt=new gs(v,ht,n.languageApi.getLanguage().language,R);return n.languageApi.language$().subscribe(({language:Kt})=>{Rt.#a(Kt)}),Rt}#t;#e;#n;#s;#r=new Set;#o=new Set;constructor(n,l,v,R){this.#t=n,this.#e=l,this.#n=v,this.#s=R}getTranslation(n){const l=hs(n);return this.#l(l),this.#i(l)}translation$(n){const l=hs(n);return this.#l(l),new(s())(v=>{let R={};const Z=()=>{R={};const ut=R;this.#e.load(this.#n,l.id).then(()=>{if(ut===R){const Rt=this.#i(l);Rt.ready&&v.next(Rt)}},Rt=>{ut===R&&v.error(Array.isArray(Rt)?Rt[0]:Rt)})},ht=()=>{const ut=this.#i(l);ut.ready?v.next(ut):Z()};return this.#e.needsLoading(this.#n,l.id)&&Z(),this.#o.add(ht),()=>{this.#o.delete(ht)}})}#a(n){this.#n!==n&&(this.#n=n,this.#t.changeLanguage(n),this.#o.forEach(l=>l()))}#i(n){if(this.#e.needsLoading(this.#n,n.id))return{ready:!1};const l=this.#t.getFixedT(null,n.id);return{ready:!0,t:this.#s.wrapT(l)}}#l(n){if(this.#r.has(n.id))return;this.#r.add(n.id);const l=n.getDefaultMessages();this.#t.addResourceBundle(Je,n.id,l,!0,!1);const v=n.getDefaultResource();v&&this.#e.addTranslationResource(v)}}function Ms(A){const n=new URL(A);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function Er(A){const n=sn.fromConfigs(A),l=n.getOptionalString("app.baseUrl"),v=n.getOptionalString("backend.baseUrl");let R=A,Z,ht;if(l&&v){const ut=new URL(l).origin,Rt=new URL(v).origin;if(ut===Rt){const Kt=Ms(v);v!==Kt&&(Z=Kt)}}if(l){const ut=Ms(l);l!==ut&&(ht=ut)}return(ht||Z)&&(R=R.concat({data:{app:ht&&{baseUrl:ht},backend:Z&&{baseUrl:Z}},context:"relative-resolver"})),R}function ms(){return(document.querySelector('meta[name="backstage-app-mode"]')?.getAttribute("content")??"public")==="protected"}function Bs(A,n,l){const v=!!A,R=(0,Sn.A)(A||(()=>Promise.resolve([])));let Z;if(v&&R.loading){const{Progress:Rt}=n;Z=(0,Gt.jsx)(Rt,{})}else if(R.error){const{BootErrorPage:Rt}=n;Z=(0,Gt.jsx)(Rt,{step:"load-config",error:R.error})}const{ThemeProvider:ht=Ds}=n;return Z?{node:(0,Gt.jsx)(Ve,{apis:rn.with(rs.Q,l),children:(0,Gt.jsx)(ht,{children:Z})})}:{api:sn.fromConfigs(R.value?.length?Er(R.value):[])}}class Pr{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class Cr{apiHolder;configApi;apis;icons;plugins;featureFlags;components;themes;configLoader;defaultApis;bindRoutes;appLanguageApi;translationResources;appIdentityProxy=new ir;apiFactoryRegistry;constructor(n){this.apis=n.apis??[],this.icons=n.icons,this.plugins=new Set(n.plugins??[]),this.featureFlags=n.featureFlags??[],this.components=n.components,this.themes=n.themes,this.configLoader=n.configLoader??dr,this.defaultApis=n.defaultApis??[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new Us,this.appLanguageApi=Un.createWithStorage({defaultLanguage:n.__experimentalTranslations?.defaultLanguage,availableLanguages:n.__experimentalTranslations?.availableLanguages}),this.translationResources=n.__experimentalTranslations?.resources??[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const l=this.getProvider();return()=>(0,Gt.jsx)(l,{children:n})}#t=!1;getProvider(){if(this.#t)throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");this.#t=!0;const n=new Pr(this);let l,v;return({children:Z})=>{const ht=(0,Re.useRef)(!0),ut=(0,Re.useMemo)(()=>bn.createWithStorage(this.themes),[]),{routing:Rt,featureFlags:Kt}=(0,Re.useMemo)(()=>{const Ct=(0,fr.h)();Ct&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const It=Ws({root:Z,discoverers:[Ks,Fs],collectors:{routing:Ct?Hs:zs,collectedPlugins:ks,featureFlags:Cs}});return It.collectedPlugins.forEach(Zt=>this.plugins.add(Zt)),this.verifyPlugins(this.plugins),this.getApiHolder(),It},[Z]),a=Bs(this.configLoader,this.components,ut),E="api"in a;if(E){const{api:Ct}=a;this.configApi=Ct}if("node"in a)return a.node;if(v)throw v;if(!l)try{l=gr(this.bindRoutes,a.api,this.plugins),_s(Rt.paths,Rt.parents),qs(l,this.plugins)}catch(Ct){throw v=Ct,Ct}if(E&&ht.current){ht.current=!1;const Ct=this.getApiHolder().get(nn.B);if(Ct){for(const ne of this.featureFlags)Ct.registerFlag({...ne,pluginId:""});for(const ne of this.plugins.values())if("getFeatureFlags"in ne)for(const de of ne.getFeatureFlags())Ct.registerFlag({name:de.name,pluginId:ne.getId()});else for(const de of ne.output())de.type==="feature-flag"&&Ct.registerFlag({name:de.name,pluginId:ne.getId()});const It=Ct.getRegisteredFlags(),Zt=new Set(It.map(ne=>ne.name));for(const ne of Kt)Zt.has(ne)||Ct.registerFlag({name:ne,pluginId:""})}}const{ThemeProvider:C=Ds,Progress:w}=this.components,gt=this.getApiHolder();if(ms()){const Ct=gt.get(Tt.m),It=gt.get(St.a),Zt=gt.get(jt.I);if(!Ct||!It||!Zt)throw new Error("App is running in protected mode but missing required APIs");this.appIdentityProxy.enableCookieAuth({errorApi:Ct,fetchApi:It,discoveryApi:Zt})}return(0,Gt.jsx)(Ve,{apis:gt,children:(0,Gt.jsx)(er,{appContext:n,children:(0,Gt.jsx)(C,{children:(0,Gt.jsx)(Zs,{routePaths:Rt.paths,routeParents:Rt.parents,routeObjects:Rt.objects,routeBindings:l,basePath:(0,Is.D)(a.api),children:(0,Gt.jsx)(yr.W.Provider,{value:{routeObjects:Rt.objects,appIdentityProxy:this.appIdentityProxy},children:(0,Gt.jsx)(Re.Suspense,{fallback:(0,Gt.jsx)(w,{}),children:Z})})})})})})}}getRouter(){return Is.L}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const l of n.getApis())this.apiFactoryRegistry.get(l.api)||this.apiFactoryRegistry.register("default",l);return Qe.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:rs.Q,deps:{},factory:()=>bn.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:pt.U,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:Ht.K,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:vs.p,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:Ns.J,deps:{languageApi:vs.p},factory:({languageApi:n})=>gs.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:nn.B,deps:{},factory:()=>new $s});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const l of n.getApis())if(!this.apiFactoryRegistry.register("default",l))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${l.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return Qe.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Qe(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const l=new Set;for(const v of n){const R=v.getId();if(l.has(R))throw new Error(`Duplicate plugin found '${R}'`);l.add(R)}}}function jr(A){return new Cr(A)}function Tr(A){return jr({...A,apis:A?.apis??[],bindRoutes:A?.bindRoutes,components:{...je,...A?.components},configLoader:A?.configLoader,defaultApis:Vt,icons:{...Jn,...A?.icons},plugins:A?.plugins??[],featureFlags:A?.featureFlags??[],themes:A?.themes??on})}},39649:(et,m,t)=>{"use strict";t.d(m,{B:()=>st});var e=t(31085),r=t(77125),h=t(64947),c=t(58837),s=t(5893),o=t(53373),d=t.n(o),g=t(14041),i=t(31072),p=t(77026),u=t(1125),f=t(29365),y=t(73845),T=t(72501),O=t(32881),b=t(27326),B=t(45250),j=t(18690),N=t(77366),F=t(58269),D=t(88835);const k=(0,c.A)(rt=>({root:{position:"fixed",backgroundColor:rt.palette.navigation.background,color:rt.palette.navigation.color,bottom:0,left:0,right:0,zIndex:rt.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:nt=>({background:rt.palette.navigation.background,width:"100%",bottom:`${nt.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${nt.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:rt.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:rt.spacing(2,3)},overlayHeaderClose:{color:rt.palette.navigation.color},marginMobileSidebar:nt=>({marginBottom:`${nt.sidebarConfig.mobileSidebarHeight}px`})})),G=rt=>(0,B.orderBy)(rt,({props:{priority:nt}})=>Number.isInteger(nt)?nt:-1,"desc"),I=(0,g.createElement)(F.C).type,tt=({children:rt,label:nt="Menu",open:z,onClose:U})=>{const{sidebarConfig:P}=(0,g.useContext)(i.yY),S=k({sidebarConfig:P});return(0,e.jsxs)(y.Ay,{anchor:"bottom",open:z,onClose:U,ModalProps:{BackdropProps:{classes:{root:S.marginMobileSidebar}}},classes:{root:S.marginMobileSidebar,paperAnchorBottom:S.overlay},children:[(0,e.jsxs)(r.A,{className:S.overlayHeader,children:[(0,e.jsx)(T.A,{variant:"h3",children:nt}),(0,e.jsx)(f.A,{onClick:U,classes:{root:S.overlayHeaderClose},children:(0,e.jsx)(O.A,{})})]}),(0,e.jsx)(r.A,{component:"nav",children:rt})]})},H=rt=>{const{sidebarConfig:nt}=(0,g.useContext)(i.yY),{children:z}=rt,U=k({sidebarConfig:nt}),P=(0,j.zy)(),[S,L]=(0,g.useState)(-1);(0,g.useEffect)(()=>{L(-1)},[P.pathname]);let $=(0,p.O)(z,J=>J.getElements().filter(ot=>ot.type===I));if(z)$.length?$=G($):$.push((0,e.jsx)(F.C,{icon:(0,e.jsx)(b.A,{}),children:z},"default_menu"));else return null;const K=S>=0&&!$[S].props.to;return(0,e.jsx)(N.T9,{value:{isOpen:!0,setOpen:()=>{}},children:(0,e.jsxs)(D.k.Provider,{value:{selectedMenuItemIndex:S,setSelectedMenuItemIndex:L},children:[(0,e.jsx)(tt,{label:$[S]&&$[S].props.label,open:K,onClose:()=>L(-1),children:$[S]&&$[S].props.children}),(0,e.jsx)(u.A,{className:U.root,"data-testid":"mobile-sidebar-root",component:"nav",children:$})]})})};var V=t(7496),q=t(65901),it=t(10265),ct=t(89475);const Q=(0,c.A)(rt=>({root:{left:0,top:0,bottom:0,zIndex:rt.zIndex.appBar,position:"fixed"},drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",left:0,top:0,bottom:0,position:"absolute",background:rt.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:rt.transitions.create("width",{easing:rt.transitions.easing.sharp,duration:rt.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:nt=>({width:nt.sidebarConfig.drawerWidthClosed}),drawerOpen:nt=>({width:nt.sidebarConfig.drawerWidthOpen,transition:rt.transitions.create("width",{easing:rt.transitions.easing.sharp,duration:rt.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),lt=rt=>{const{sidebarConfig:nt}=(0,g.useContext)(i.yY),{openDelayMs:z=nt.defaultOpenDelayMs,closeDelayMs:U=nt.defaultCloseDelayMs,disableExpandOnHover:P,children:S}=rt,L=Q({sidebarConfig:nt}),$=(0,s.A)(_t=>_t.breakpoints.down("md"),{noSsr:!0}),[K,J]=(0,g.useState)(0),ot=(0,g.useRef)(),{isPinned:At,toggleSidebarPinState:X}=(0,q.Ut)(),dt=()=>{At||P||(ot.current&&(clearTimeout(ot.current),ot.current=void 0),K!==2&&!$&&(ot.current=window.setTimeout(()=>{ot.current=void 0,J(2)},z),J(1)))},xt=()=>{At||P||(ot.current&&(clearTimeout(ot.current),ot.current=void 0),K===1?J(0):K===2&&(ot.current=window.setTimeout(()=>{ot.current=void 0,J(0)},U)))},$t=K===2&&!$||At,wt=_t=>{_t?(J(2),X()):(J(0),X())};return(0,e.jsxs)("nav",{style:{},"aria-label":"sidebar nav",children:[(0,e.jsx)(mt,{}),(0,e.jsx)(N.T9,{value:{isOpen:$t,setOpen:wt},children:(0,e.jsx)(r.A,{className:L.root,"data-testid":"sidebar-root",onMouseEnter:P?()=>{}:dt,onFocus:P?()=>{}:dt,onMouseLeave:P?()=>{}:xt,onBlur:P?()=>{}:xt,children:(0,e.jsx)(r.A,{className:d()(L.drawer,L.drawerWidth,{[L.drawerOpen]:$t}),children:S})})})]})},st=rt=>{const nt=(0,i.Rv)(rt.sidebarOptions??{}),z=(0,i.i8)(rt.submenuOptions??{}),{children:U,disableExpandOnHover:P,openDelayMs:S,closeDelayMs:L}=rt,{isMobile:$}=(0,q.Ut)();return $?(0,e.jsx)(H,{children:U}):(0,e.jsx)(i.yY.Provider,{value:{sidebarConfig:nt,submenuConfig:z},children:(0,e.jsx)(lt,{openDelayMs:S,closeDelayMs:L,disableExpandOnHover:P,children:U})})};function mt(){const{sidebarConfig:rt}=(0,g.useContext)(i.yY),{focusContent:nt,contentRef:z}=(0,V.H)(),U=Q({sidebarConfig:rt}),{t:P}=(0,it.i)(ct.O);return z?.current?(0,e.jsx)(h.A,{onClick:nt,variant:"contained",className:d()(U.visuallyHidden),children:P("skipToContent")}):null}},39896:(et,m,t)=>{"use strict";t.d(m,{z$:()=>G,ec:()=>D});var e=t(31085),r=t(14041),h=t(85408),c=t(52262),s=t(18050),o=t(77026),d=t(58007),g=t(8109),i=t(19224),p=t(51470),u=t(46423),f=t(5951),y=t(77125),T=t(72501),O=t(75202);const b=({result:I,highlight:tt,icon:H,secondaryAction:V,lineClamp:q=5})=>I?(0,e.jsxs)(e.Fragment,{children:[H&&(0,e.jsx)(u.A,{children:H}),(0,e.jsx)(f.A,{primaryTypographyProps:{variant:"h6"},primary:(0,e.jsx)(O.N_,{noTrack:!0,to:I.location,children:tt?.fields.title?(0,e.jsx)(p.e,{text:tt?.fields.title||"",preTag:tt?.preTag||"",postTag:tt?.postTag||""}):I.title}),secondary:(0,e.jsx)(T.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:q,overflow:"hidden"},color:"textSecondary",variant:"body2",children:tt?.fields.text?(0,e.jsx)(p.e,{text:tt.fields.text,preTag:tt.preTag,postTag:tt.postTag}):I.text})}),V&&(0,e.jsx)(y.A,{alignItems:"flex-end",children:V})]}):null,B=I=>(0,e.jsx)(i.I,{attributes:{pluginId:"search",extension:"DefaultResultListItem"},children:(0,e.jsx)(b,{...I})}),j="search.results.list.items.extensions.v1",N=(I,tt)=>{for(const H of I)if(!(!(0,r.isValidElement)(H)||!(0,h.E)(H,j)?.(tt)))return(0,r.cloneElement)(H,{rank:tt.rank,highlight:tt.highlight,result:tt.document,...H.props});return null},F=I=>{const{rank:tt,result:H,noTrack:V,children:q,alignItems:it="flex-start",...ct}=I,Q=(0,c.s)(),lt=(0,r.useCallback)(()=>{V||H&&Q.captureEvent("discover",H.title,{attributes:{to:H.location},value:tt})},[tt,H,V,Q]);return(0,e.jsx)(g.A,{divider:!0,alignItems:it,onClickCapture:lt,...ct,children:q})},D=I=>{const{name:tt,component:H,predicate:V=()=>!0}=I;return(0,s.zZ)({name:tt,component:{lazy:()=>H().then(q=>it=>(0,e.jsx)(F,{rank:it.rank,result:it.result,noTrack:it.noTrack,children:(0,r.createElement)(q,it)}))},data:{[j]:V}})},k=I=>{const tt=(0,o.O)(I,H=>H.selectByComponentData({key:j}).getElements(),[I]);return(0,r.useCallback)((H,V)=>{const q=N(tt,H);return(0,e.jsx)(r.Fragment,{children:q??(0,e.jsx)(F,{rank:H.rank,result:H.document,children:(0,e.jsx)(B,{rank:H.rank,highlight:H.highlight,result:H.document})})},V)},[tt])},G=I=>{const{results:tt,children:H,...V}=I,q=k(H);return(0,e.jsx)(d.A,{...V,children:tt.map(q)})}},40058:(et,m,t)=>{"use strict";t.d(m,{x:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.permission.api"})},41507:(et,m,t)=>{"use strict";t.d(m,{m:()=>i});var e=t(31085),r=t(16400),h=t(85408),c=t(18139),s=t(77026),o=t(73466);const d="core.backstage.entitySwitch",g=f=>null;(0,h.h)(g,d,!0);const i=f=>{const{entity:y,loading:T}=(0,r.TY)(),O=(0,c.Q2)(),b=(0,s.O)(f.children,j=>j.selectByComponentData({key:d,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(N=>{if(T&&!y)return[];const{if:F,children:D}=N.props;return y?[{if:F?.(y,{apis:O}),children:D}]:[{if:F===void 0,children:D}]}),[O,y,T]);if(b.some(j=>typeof j.if=="object"&&"then"in j.if))return(0,e.jsx)(p,{results:b,renderMultipleMatches:f.renderMultipleMatches});if(f.renderMultipleMatches==="all"){const j=b.filter(N=>N.if).map(N=>N.children);return j.length===0?u(b):(0,e.jsx)(e.Fragment,{children:j})}return b.find(j=>j.if)?.children??u(b)};function p({results:f,renderMultipleMatches:y}){const{loading:T,value:O}=(0,o.A)(async()=>{const b=f.map(async({if:B,children:j})=>{try{if(await B)return j}catch{}return null});if(y==="all"){const B=(await Promise.all(b)).filter(Boolean);return B.length===0?u(f):(0,e.jsx)(e.Fragment,{children:B})}return(await Promise.all(b)).find(Boolean)??u(f)},[f]);return T||!O?null:O}function u(f){return f.filter(y=>y.if===void 0)[0]?.children??null}i.Case=g},41544:(et,m,t)=>{"use strict";t.d(m,{M:()=>H});var e=t(31085),r=t(42899),h=t(58837),c=t(72501),s=t(18690),o=t(75202),d=t(45250),g=t(14041),i=t(70209);const p=t.p+"static/mic-drop.fe3ef4d0.svg",u=(0,h.A)(V=>({micDrop:{maxWidth:"60%",bottom:V.spacing(2),right:V.spacing(2),[V.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:V.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),f=()=>{const V=u();return(0,e.jsx)("img",{src:p,className:V.micDrop,alt:"Girl dropping mic from her hands"})};var y=t(10265),T=t(89475),O=t(18846),b=t(62112),B=t(86451),j=t(57586),N=t(12784),F=t(12528),D=t(93285),k=t(16975);const G=(0,h.A)(V=>({title:{paddingBottom:V.spacing(5),[V.breakpoints.down("xs")]:{paddingBottom:V.spacing(4),fontSize:V.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function I(V){const{stack:q}=V,it=G(),{t:ct}=(0,y.i)(T.O),[Q,lt]=(0,g.useState)(!1);return Q?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c.A,{variant:"h6",className:it.title,children:(0,e.jsx)(o.N_,{to:"#",onClick:()=>lt(!1),children:ct("errorPage.showLessDetails")})}),(0,e.jsx)(b.z,{text:q,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})]}):(0,e.jsx)(c.A,{variant:"h6",className:it.title,children:(0,e.jsx)(o.N_,{to:"#",onClick:()=>lt(!0),children:ct("errorPage.showMoreDetails")})})}const tt=(0,h.A)(V=>({container:{padding:V.spacing(8),[V.breakpoints.down("xs")]:{padding:V.spacing(2)}},title:{paddingBottom:V.spacing(5),[V.breakpoints.down("xs")]:{paddingBottom:V.spacing(4),fontSize:V.typography.h3.fontSize}},subtitle:{color:V.palette.textSubtle}}),{name:"BackstageErrorPage"});function H(V){const{status:q="",statusMessage:it,additionalInfo:ct,supportUrl:Q,stack:lt}=V,st=tt(),mt=(0,s.Zp)(),rt=(0,i.l)(),{t:nt}=(0,y.i)(T.O);return(0,e.jsxs)(r.A,{container:!0,className:st.container,children:[(0,e.jsxs)(r.A,{item:!0,xs:12,sm:8,md:4,children:[(0,e.jsx)(c.A,{"data-testid":"error",variant:"body1",className:st.subtitle,children:nt("errorPage.subtitle",{status:q,statusMessage:it})}),(0,e.jsx)(c.A,{variant:"body1",className:st.subtitle,children:ct}),(0,e.jsx)(c.A,{variant:"h2",className:st.title,children:nt("errorPage.title")}),(0,e.jsxs)(c.A,{variant:"h6",className:st.title,children:[(0,e.jsx)(o.N_,{to:"#","data-testid":"go-back-link",onClick:()=>mt(-1),children:nt("errorPage.goBack")}),"... or please"," ",(0,e.jsx)(o.N_,{to:Q||rt.url,children:"contact support"})," if you think this is a bug."]}),lt&&(0,e.jsx)(I,{stack:lt})]}),(0,e.jsx)(f,{})]})}},43327:(et,m,t)=>{"use strict";t.d(m,{c:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.analytics"})},43685:(et,m,t)=>{"use strict";t.d(m,{yW:()=>wt,XQ:()=>$t,sU:()=>jt,TZ:()=>_t,E:()=>ie,JF:()=>ee,yE:()=>se,bb:()=>te,yP:()=>re,Sz:()=>Xt,N8:()=>Ut,Z9:()=>xt});var e=t(78560),r=t(79112),h=t(71834),c=t(24259);function s(pt){return!pt.cursor}function o(pt,Y){if(!pt.length)return[];const{maxCountPerChunk:ft=1e3,maxStringLengthPerChunk:Tt=90*2**10,extraStringLengthPerRef:Lt=3}={},St=[];let Ht=0,kt=0,Dt=0;for(let Ft=0;Ft<pt.length;++Ft){const Yt=pt[Ft].length+Lt;Dt>0&&(kt+Yt>Tt||Dt+1>ft)&&(St.push(pt.slice(Ht,Ft)),Ht=Ft,kt=0,Dt=0),kt+=Yt,Dt+=1}return St.push(pt.slice(Ht,pt.length)),St}var d=t(10288),g=t.n(d);const i="catalog";var p=t(94214);class u{discoveryApi;fetchApi;constructor(Y){this.discoveryApi=Y.discoveryApi,this.fetchApi=Y.fetchApi||{fetch:g()}}async deleteEntityByUid(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/entities/by-uid/{uid}").expand({uid:Y.path.uid});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"DELETE"})}async getEntities(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/entities{?fields,limit,filter*,offset,after,order*}").expand({...Y.query});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"GET"})}async getEntitiesByQuery(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/entities/by-query{?fields,limit,offset,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}").expand({...Y.query});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"GET"})}async getEntitiesByRefs(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/entities/by-refs{?filter*}").expand({...Y.query});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"POST",body:JSON.stringify(Y.body)})}async getEntityAncestryByName(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/entities/by-name/{kind}/{namespace}/{name}/ancestry").expand({kind:Y.path.kind,namespace:Y.path.namespace,name:Y.path.name});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"GET"})}async getEntityByName(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/entities/by-name/{kind}/{namespace}/{name}").expand({kind:Y.path.kind,namespace:Y.path.namespace,name:Y.path.name});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"GET"})}async getEntityByUid(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/entities/by-uid/{uid}").expand({uid:Y.path.uid});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"GET"})}async getEntityFacets(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/entity-facets{?facet*,filter*}").expand({...Y.query});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"GET"})}async refreshEntity(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/refresh").expand({});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"POST",body:JSON.stringify(Y.body)})}async validateEntity(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/validate-entity").expand({});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"POST",body:JSON.stringify(Y.body)})}async analyzeLocation(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/analyze-location").expand({});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"POST",body:JSON.stringify(Y.body)})}async createLocation(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/locations{?dryRun}").expand({...Y.query});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"POST",body:JSON.stringify(Y.body)})}async deleteLocation(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/locations/{id}").expand({id:Y.path.id});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"DELETE"})}async getLocation(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/locations/{id}").expand({id:Y.path.id});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"GET"})}async getLocationByEntity(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/locations/by-entity/{kind}/{namespace}/{name}").expand({kind:Y.path.kind,namespace:Y.path.namespace,name:Y.path.name});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"GET"})}async getLocations(Y,ft){const Tt=await this.discoveryApi.getBaseUrl(i),St=p.parse("/locations").expand({});return await this.fetchApi.fetch(`${Tt}${St}`,{headers:{"Content-Type":"application/json",...ft?.token&&{Authorization:`Bearer ${ft?.token}`}},method:"GET"})}}class f{apiClient;constructor(Y){this.apiClient=new u(Y)}async getEntityAncestors(Y,ft){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,e.KU)(Y.entityRef)},ft))}async getLocations(Y,ft){return{items:(await this.requestRequired(await this.apiClient.getLocations(Y??{},ft))).map(Lt=>Lt.data)}}async getLocationById(Y,ft){return await this.requestOptional(await this.apiClient.getLocation({path:{id:Y}},ft))}async getLocationByEntity(Y,ft){return await this.requestOptional(await this.apiClient.getLocationByEntity({path:(0,e.KU)(Y)},ft))}async getEntities(Y,ft){const{filter:Tt=[],fields:Lt=[],order:St,offset:Ht,limit:kt,after:Dt}=Y??{},Ft=[];if(St)for(const Et of[St].flat())Et&&Ft.push(`${Et.order}:${Et.field}`);return{items:await this.requestRequired(await this.apiClient.getEntities({query:{fields:Lt,limit:kt,filter:this.getFilterValue(Tt),offset:Ht,after:Dt,order:St?Ft:void 0}},ft))}}async getEntitiesByRefs(Y,ft){const Tt=async St=>{const Ht=await this.apiClient.getEntitiesByRefs({body:{entityRefs:St,fields:Y.fields},query:{filter:this.getFilterValue(Y.filter)}},ft);if(!Ht.ok)throw await h.o.fromResponse(Ht);return(await Ht.json()).items.map(Dt=>Dt??void 0)};let Lt;for(const St of o(Y.entityRefs)){const Ht=await Tt(St);Lt?Lt.push(...Ht):Lt=Ht}return{items:Lt??[]}}async queryEntities(Y={},ft){const Tt={};if(s(Y)){const{fields:Lt=[],filter:St,limit:Ht,offset:kt,orderFields:Dt,fullTextFilter:Ft}=Y;Tt.filter=this.getFilterValue(St),Ht!==void 0&&(Tt.limit=Ht),kt!==void 0&&(Tt.offset=kt),Dt!==void 0&&(Tt.orderField=(Array.isArray(Dt)?Dt:[Dt]).map(({field:Et,order:at})=>`${Et},${at}`)),Lt.length&&(Tt.fields=Lt);const Yt=Ft?.term?.trim();Yt&&(Tt.fullTextFilterTerm=Yt),Ft?.fields?.length&&(Tt.fullTextFilterFields=Ft.fields)}else{const{fields:Lt=[],limit:St,cursor:Ht}=Y;Tt.cursor=Ht,St!==void 0&&(Tt.limit=St),Lt.length&&(Tt.fields=Lt)}return this.requestRequired(await this.apiClient.getEntitiesByQuery({query:Tt},ft))}async getEntityByRef(Y,ft){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,e.KU)(Y)},ft))}async getEntityByName(Y,ft){const{kind:Tt,namespace:Lt="default",name:St}=Y;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:Tt,namespace:Lt,name:St}},ft))}async refreshEntity(Y,ft){const Tt=await this.apiClient.refreshEntity({body:{entityRef:Y}},ft);if(Tt.status!==200)throw new Error(await Tt.text())}async getEntityFacets(Y,ft){const{filter:Tt=[],facets:Lt}=Y;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:Lt,filter:this.getFilterValue(Tt)}},ft))}async addLocation(Y,ft){const{type:Tt="url",target:Lt,dryRun:St}=Y,Ht=await this.apiClient.createLocation({body:{type:Tt,target:Lt},query:{dryRun:St?"true":void 0}},ft);if(Ht.status!==201)throw new Error(await Ht.text());const{location:kt,entities:Dt,exists:Ft}=await Ht.json();if(!kt)throw new Error(`Location wasn't added: ${Lt}`);return{location:kt,entities:Dt,exists:Ft}}async getLocationByRef(Y,ft){return(await this.requestRequired(await this.apiClient.getLocations({},ft))).map(Lt=>Lt.data).find(Lt=>Y===(0,r.KL)(Lt))}async removeLocationById(Y,ft){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:Y}},ft))}async removeEntityByUid(Y,ft){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:Y}},ft))}async validateEntity(Y,ft,Tt){const Lt=await this.apiClient.validateEntity({body:{entity:Y,location:ft}},Tt);if(Lt.ok)return{valid:!0};if(Lt.status!==400)throw await h.o.fromResponse(Lt);const{errors:St=[]}=await Lt.json();return{valid:!1,errors:St}}async requestIgnored(Y){if(!Y.ok)throw await h.o.fromResponse(Y)}async requestRequired(Y){if(!Y.ok)throw await h.o.fromResponse(Y);return Y.json()}async requestOptional(Y){if(!Y.ok){if(Y.status===404)return;throw await h.o.fromResponse(Y)}return await Y.json()}getFilterValue(Y=[]){const ft=[];for(const Tt of[Y].flat()){const Lt=[];for(const[St,Ht]of Object.entries(Tt))for(const kt of[Ht].flat())kt===c.c?Lt.push(St):typeof kt=="string"&&Lt.push(`${St}=${kt}`);Lt.length&&ft.push(Lt.join(","))}return ft}}var y=t(30043),T=t(9974),O=t(91072),b=t(20987),B=t(88549),j=t(50809),N=t(45843),F=t(61617),D=t(95159),k=t(83392),G=t(18050),I=t(39896);function tt(pt){const{years:Y=0,months:ft=0,weeks:Tt=0,days:Lt=0,hours:St=0,minutes:Ht=0,seconds:kt=0,milliseconds:Dt=0}=pt;return((((Y*365+ft*30+Tt*7+Lt)*24+St)*60+Ht)*60+kt)*1e3+Dt}var H=t(25033),V=t.n(H),q=t(96403),it=t.n(q),ct=t(96479),Q=t(14451),lt=t(94389),st=t(17400),mt=t(71865),rt=t(52755),nt=t(89350),z=t(33602),U=t(48108),P=t(55700);const S={seconds:10},L={milliseconds:50},$={api:st.A,component:nt.A,system:lt.A,resource:P.A,domain:Q.A,location:rt.A,user:U.A,group:z.A,template:mt.A};function K(pt){return{async:pt.async,render:({entityRef:Y,entity:ft,context:Tt})=>({snapshot:(0,ct.T)(ft||Y,Tt),loadEntity:pt.async})}}class J extends Map{#t;#e=new Map;constructor(Y){super(),this.#t=Y}set(Y,ft){const Tt=super.set(Y,ft);return this.#e.set(Y,Date.now()),Tt}get(Y){if(!this.has(Y))return;const ft=this.#e.get(Y);if(Date.now()-ft>this.#t){this.delete(Y);return}return super.get(Y)}delete(Y){return this.#e.delete(Y),super.delete(Y)}clear(){return this.#e.clear(),super.clear()}}class ot{static createLocal(){return new ot({renderer:K({async:!1})})}static create(Y){return new ot(Y)}#t;#e;#n;#s;#r;constructor(Y){const ft=Y.cacheTtl??S,Tt=Y.batchDelay??L,Lt=Y.renderer??K({async:!0}),St={};if(Object.entries($).forEach(([Ht,kt])=>{St[Ht.toLocaleLowerCase("en-US")]=kt}),Object.entries(Y.kindIcons??{}).forEach(([Ht,kt])=>{St[Ht.toLocaleLowerCase("en-US")]=kt}),Lt.async){if(!Y.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");this.#n=this.#a({cacheTtl:ft,batchDelay:Tt,renderer:Lt,catalogApi:Y.catalogApi})}this.#e=tt(ft),this.#t=new Map,this.#s=St,this.#r=Lt}forEntity(Y,ft){const{entityRef:Tt,kind:Lt,entity:St,needsLoad:Ht}=this.#o(Y),kt=at=>{const{snapshot:yt}=this.#r.render({entityRef:Tt,loading:at.loading,entity:at.entity,context:ft||{}});return{...yt,entityRef:Tt,Icon:this.#i(yt.Icon,Lt)}};let Dt;try{Dt=kt({loading:Ht,entity:St})}catch{Dt={primaryTitle:Tt,entityRef:Tt}}if(!Ht)return{snapshot:Dt,promise:Promise.resolve(Dt)};const Ft=Promise.resolve().then(()=>this.#n?.load(Tt)).then(at=>kt({loading:!1,entity:at??St})).catch(()=>{}),Yt=new(it())(at=>{let yt=!1;return Ft.then(Ot=>{Ot&&at.next(Ot)}).finally(()=>{yt||at.complete()}),()=>{yt=!0}}),Et=Ft.then(at=>at??Dt);return{snapshot:Dt,update$:Yt,promise:Et}}#o(Y){if(typeof Y!="string")return{entity:Y,kind:Y.kind,entityRef:(0,e.U2)(Y),needsLoad:!1};const ft=this.#t.get(Y),Tt=ft?.entity,St=(!ft||Date.now()-ft.updatedAt>this.#e)&&this.#r.async!==!1&&this.#n!==void 0;return{entity:Tt,kind:(0,e.KU)(Y).kind,entityRef:Y,needsLoad:St}}#a(Y){const ft=tt(Y.cacheTtl),Tt=tt(Y.batchDelay);return new(V())(async Lt=>{const{items:St}=await Y.catalogApi.getEntitiesByRefs({entityRefs:Lt,fields:["kind","metadata.name","metadata.namespace","metadata.title","metadata.description","spec.profile.displayName","spec.type"]}),Ht=Date.now();return Lt.forEach((kt,Dt)=>{this.#t.set(kt,{updatedAt:Ht,entity:St[Dt]})}),St},{name:"DefaultEntityPresentationApi",cacheMap:new J(ft),maxBatchSize:100,batchScheduleFn:Tt?Lt=>setTimeout(Lt,Tt):void 0})}#i(Y,ft){return Y||(Y===!1?!1:this.#s[ft.toLocaleLowerCase("en-US")])}}var At=t(45250);async function X({storageApi:pt}){const Y=pt.forBucket("settings"),ft=pt.forBucket("starredEntities"),Tt=Y.snapshot("starredEntities").value;if(!(0,At.isArray)(Tt))return;const Lt=new Set(ft.snapshot("entityRefs").value??[]);Tt.filter(At.isString).map(St=>St.split(":")).filter(St=>St.length===4&&St[0]==="entity").map(([St,Ht,kt,Dt])=>(0,e.U2)({kind:Ht,namespace:kt,name:Dt})).forEach(St=>Lt.add(St)),await ft.set("entityRefs",Array.from(Lt)),await Y.remove("starredEntities")}class dt{settingsStore;starredEntities;constructor(Y){X(Y).then(),this.settingsStore=Y.storageApi.forBucket("starredEntities"),this.starredEntities=new Set(this.settingsStore.snapshot("entityRefs").value??[]),this.settingsStore.observe$("entityRefs").subscribe({next:ft=>{this.starredEntities=new Set(ft.value??[]),this.notifyChanges()}})}async toggleStarred(Y){this.starredEntities.has(Y)?this.starredEntities.delete(Y):this.starredEntities.add(Y),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}subscribers=new Set;observable=new(it())(Y=>(Y.next(new Set(this.starredEntities)),this.subscribers.add(Y),()=>{this.subscribers.delete(Y)}));notifyChanges(){for(const Y of this.subscribers)Y.next(new Set(this.starredEntities))}}const xt=(0,j.i)({id:"catalog",apis:[(0,N.b)({api:y.v,deps:{discoveryApi:F.I,fetchApi:D.a},factory:({discoveryApi:pt,fetchApi:Y})=>new f({discoveryApi:pt,fetchApi:Y})}),(0,N.b)({api:T.a,deps:{storageApi:k.F},factory:({storageApi:pt})=>new dt({storageApi:pt})}),(0,N.b)({api:O.n,deps:{catalogApi:y.v},factory:({catalogApi:pt})=>ot.create({catalogApi:pt})})],routes:{catalogIndex:B.rQ,catalogEntity:b.s},externalRoutes:{createComponent:B.qP,viewTechDoc:B.UJ,createFromTemplate:B.Zg,unregisterRedirect:B.pS}}),$t=xt.provide((0,G.QJ)({name:"CatalogIndexPage",component:()=>Promise.all([t.e(7248),t.e(9489),t.e(6320)]).then(t.bind(t,76320)).then(pt=>pt.CatalogPage),mountPoint:B.rQ})),wt=xt.provide((0,G.QJ)({name:"CatalogEntityPage",component:()=>t.e(2086).then(t.bind(t,22086)).then(pt=>pt.CatalogEntityPage),mountPoint:b.s})),_t=xt.provide((0,G.NC)({name:"EntityAboutCard",component:{lazy:()=>Promise.all([t.e(2460),t.e(9537)]).then(t.bind(t,99537)).then(pt=>pt.AboutCard)}})),Ut=xt.provide((0,G.NC)({name:"EntityLinksCard",component:{lazy:()=>t.e(7054).then(t.bind(t,87054)).then(pt=>pt.EntityLinksCard)}})),zt=xt.provide((0,G.NC)({name:"EntityLabelsCard",component:{lazy:()=>t.e(4428).then(t.bind(t,24428)).then(pt=>pt.EntityLabelsCard)}})),Xt=xt.provide((0,G.NC)({name:"EntityHasSystemsCard",component:{lazy:()=>t.e(9661).then(t.bind(t,29661)).then(pt=>pt.HasSystemsCard)}})),se=xt.provide((0,G.NC)({name:"EntityHasComponentsCard",component:{lazy:()=>t.e(6236).then(t.bind(t,16236)).then(pt=>pt.HasComponentsCard)}})),re=xt.provide((0,G.NC)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>t.e(638).then(t.bind(t,40638)).then(pt=>pt.HasSubcomponentsCard)}})),ce=xt.provide((0,G.NC)({name:"EntityHasSubdomainsCard",component:{lazy:()=>t.e(6797).then(t.bind(t,96797)).then(pt=>pt.HasSubdomainsCard)}})),te=xt.provide((0,G.NC)({name:"EntityHasResourcesCard",component:{lazy:()=>t.e(5061).then(t.bind(t,85061)).then(pt=>pt.HasResourcesCard)}})),ie=xt.provide((0,G.NC)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>t.e(5380).then(t.bind(t,65380)).then(pt=>pt.DependsOnComponentsCard)}})),me=xt.provide((0,G.NC)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>t.e(3057).then(t.bind(t,53057)).then(pt=>pt.DependencyOfComponentsCard)}})),ee=xt.provide((0,G.NC)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>t.e(8341).then(t.bind(t,98341)).then(pt=>pt.DependsOnResourcesCard)}})),Wt=xt.provide((0,G.NC)({name:"RelatedEntitiesCard",component:{lazy:()=>t.e(6169).then(t.bind(t,26169)).then(pt=>pt.RelatedEntitiesCard)}})),jt=xt.provide((0,I.ec)({name:"CatalogSearchResultListItem",component:()=>t.e(8146).then(t.bind(t,28146)).then(pt=>pt.CatalogSearchResultListItem),predicate:pt=>pt.type==="software-catalog"}))},44390:(et,m,t)=>{"use strict";t.d(m,{o:()=>g});var e=t(31085),r=t(77125),h=t(58837),c=t(38605),s=t(31653),o=t(14041);const d=(0,h.A)(i=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:i.palette.background.paper,paddingLeft:i.spacing(3),minWidth:0},defaultTab:{...i.typography.caption,padding:i.spacing(3,3),textTransform:"uppercase",fontWeight:i.typography.fontWeightBold,color:i.palette.text.secondary},selected:{color:i.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:i.palette.background.default,color:i.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function g(i){const{tabs:p,onChange:u,selectedIndex:f}=i,[y,T]=(0,o.useState)(f??0),O=d(),b=(0,o.useCallback)((B,j)=>{f===void 0&&T(j),u&&u(j)},[f,u]);return(0,o.useEffect)(()=>{f!==void 0&&T(f)},[f]),(0,e.jsx)(r.A,{className:O.tabsWrapper,children:(0,e.jsx)(s.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:b,value:y,children:p.map((B,j)=>(0,e.jsx)(c.A,{"data-testid":`header-tab-${j}`,label:B.label,value:j,className:O.defaultTab,classes:{selected:O.selected,root:O.tabRoot},...B.tabProps},B.id))})})}},45681:(et,m,t)=>{"use strict";t.d(m,{W:()=>r});var e=t(14041);const r=(0,e.createContext)(void 0)},45809:(et,m,t)=>{"use strict";t.d(m,{d:()=>u});var e=t(31085),r=t(77125),h=t(71677),c=t(58837),s=t(46123),o=t.n(s),d=t(46509),g=t(96403),i=t.n(g);const p=(0,c.A)(f=>({root:{display:"inline-flex",alignItems:"center",textDecoration:"inherit"},icon:{marginRight:f.spacing(.5),color:f.palette.text.secondary,"& svg":{verticalAlign:"middle"}}}),{name:"CatalogReactEntityDisplayName"}),u=f=>{const{entityRef:y,hideIcon:T,disableTooltip:O,defaultKind:b,defaultNamespace:B}=f,j=p(),{primaryTitle:N,secondaryTitle:F,Icon:D}=(0,d.f)(y,{defaultKind:b,defaultNamespace:B});let k=(0,e.jsx)(e.Fragment,{children:N});return k=(0,e.jsxs)(r.A,{component:"span",className:j.root,children:[D&&!T?(0,e.jsx)(r.A,{component:"span",className:j.icon,children:(0,e.jsx)(D,{fontSize:"inherit"})}):null,k]}),F&&!O&&(k=(0,e.jsx)(h.Ay,{enterDelay:1500,title:F,children:k})),k}},45843:(et,m,t)=>{"use strict";t.d(m,{b:()=>e});function e(r,h){return"id"in r?{api:r,deps:{},factory:()=>h}:r}},46509:(et,m,t)=>{"use strict";t.d(m,{f:()=>d});var e=t(78560),r=t(18139),h=t(14041),c=t(91072),s=t(96479);function o(g,i,p){const[u,f]=(0,h.useState)(g);return(0,h.useEffect)(()=>{f(g);const y=i?.subscribe({next:T=>{f(T)},complete:()=>{y?.unsubscribe()}});return()=>{y?.unsubscribe()}},p),u}function d(g,i){const u=(0,r.Q2)().get(c.n),f=[u,JSON.stringify(g),JSON.stringify(i||null)],y=(0,h.useMemo)(()=>{if(!u){const T=(0,s.T)(g,i);return{snapshot:T,promise:Promise.resolve(T)}}return u.forEntity(typeof g=="string"||"metadata"in g?g:(0,e.U2)(g),i)},f);return o(y.snapshot,y.update$,[y])}},47090:(et,m,t)=>{"use strict";t.d(m,{D:()=>e});var e;(r=>{(h=>{h.TOP_BOTTOM="TB",h.BOTTOM_TOP="BT",h.LEFT_RIGHT="LR",h.RIGHT_LEFT="RL"})(r.Direction||(r.Direction={})),(h=>{h.UP_LEFT="UL",h.UP_RIGHT="UR",h.DOWN_LEFT="DL",h.DOWN_RIGHT="DR"})(r.Alignment||(r.Alignment={})),(h=>{h.NETWORK_SIMPLEX="network-simplex",h.TIGHT_TREE="tight-tree",h.LONGEST_PATH="longest-path"})(r.Ranker||(r.Ranker={})),(h=>{h.LEFT="l",h.RIGHT="r",h.CENTER="c"})(r.LabelPosition||(r.LabelPosition={}))})(e||(e={}))},48534:(et,m,t)=>{"use strict";t.d(m,{J:()=>c,y:()=>h});var e=t(77555),r=t(2488);const h=(0,e.H)({id:"api-docs"}),c=(0,r.I)({id:"register-component",optional:!0,defaultTarget:"catalog-import.importPage"})},48813:(et,m,t)=>{"use strict";t.d(m,{J:()=>c,t:()=>h});var e=t(1952);const r=(0,e.Q)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),h="_ROUTABLE-EXTENSION-RENDERED";class c{constructor(o,d={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=o,this.context=d,r.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{r.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...r.mostRecentGatheredNavigation,...r.mostRecentRoutableExtensionRender}),r.mostRecentGatheredNavigation=void 0,r.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),r.beforeUnloadRegistered=!0)}setContext(o){this.context=o}captureEvent(o,d,{value:g,attributes:i}={}){const{_routeNodeType:p,...u}=this.context;if(o===h){r.mostRecentGatheredNavigation&&(r.mostRecentRoutableExtensionRender={context:{...u,extension:"App"}});return}if(r.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...r.mostRecentGatheredNavigation,...r.mostRecentRoutableExtensionRender})}catch(f){console.warn("Error during analytics event capture. %o",f)}r.mostRecentGatheredNavigation=void 0,r.mostRecentRoutableExtensionRender=void 0}if(o==="navigate"&&p==="gathered"&&u.pluginId==="root"){r.mostRecentGatheredNavigation={action:o,subject:d,value:g,attributes:i,context:u};return}try{this.analyticsApi.captureEvent({action:o,subject:d,value:g,attributes:i,context:u})}catch(f){console.warn("Error during analytics event capture. %o",f)}}}},49415:(et,m,t)=>{"use strict";t.d(m,{Br:()=>u,Io:()=>T,Rf:()=>i,Vw:()=>p,aR:()=>y,hR:()=>g,l:()=>O,pW:()=>f});var e=t(31085),r=t(90338),h=t(50809),c=t(45843),s=t(18050),o=t(14883),d=t(48534);const g=(0,h.i)({id:"api-docs",routes:{root:d.y},apis:[(0,c.b)({api:r.P,deps:{},factory:()=>{const b=(0,o.C)();return{getApiDefinitionWidget:B=>b.find(j=>j.type===B.spec.type)}}})],externalRoutes:{registerApi:d.J}}),i=g.provide((0,s.QJ)({name:"ApiExplorerPage",component:()=>Promise.all([t.e(7248),t.e(9489),t.e(116)]).then(t.bind(t,90116)).then(b=>b.ApiExplorerIndexPage),mountPoint:d.y})),p=g.provide((0,s.NC)({name:"EntityApiDefinitionCard",component:{lazy:()=>t.e(7996).then(t.bind(t,27996)).then(b=>b.ApiDefinitionCard)}})),u=g.provide((0,s.NC)({name:"EntityConsumedApisCard",component:{lazy:()=>t.e(2389).then(t.bind(t,2389)).then(b=>b.ConsumedApisCard)}})),f=g.provide((0,s.NC)({name:"EntityConsumingComponentsCard",component:{lazy:()=>t.e(2852).then(t.bind(t,92852)).then(b=>b.ConsumingComponentsCard)}})),y=g.provide((0,s.NC)({name:"EntityProvidedApisCard",component:{lazy:()=>t.e(2389).then(t.bind(t,2389)).then(b=>b.ProvidedApisCard)}})),T=g.provide((0,s.NC)({name:"EntityProvidingComponentsCard",component:{lazy:()=>t.e(2852).then(t.bind(t,92852)).then(b=>b.ProvidingComponentsCard)}})),O=g.provide((0,s.NC)({name:"EntityHasApisCard",component:{lazy:()=>t.e(2389).then(t.bind(t,2389)).then(b=>b.HasApisCard)}}))},49707:(et,m,t)=>{"use strict";t.d(m,{l:()=>r,s:()=>h});var e=t(28967);const r=(0,e.y)({id:"plugin.techdocs.service"}),h=(0,e.y)({id:"plugin.techdocs.storageservice"})},49907:(et,m,t)=>{"use strict";t.d(m,{m:()=>s});var e=t(31085),r=t(77125),h=t(58837);const c=(0,h.A)(o=>({value:{marginBottom:o.spacing(.75)},subvalue:{color:o.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function s(o){const{value:d,subvalue:g}=o,i=c();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.A,{className:i.value,children:d}),(0,e.jsx)(r.A,{className:i.subvalue,children:g})]})}},50809:(et,m,t)=>{"use strict";t.d(m,{i:()=>r});class e{constructor(c){this.config=c}getId(){return this.config.id}getApis(){return this.config.apis??[]}getFeatureFlags(){return this.config.featureFlags?.slice()??[]}get routes(){return this.config.routes??{}}get externalRoutes(){return this.config.externalRoutes??{}}provide(c){return c.expose(this)}toString(){return`plugin{${this.config.id}}`}}function r(h){return new e(h)}},51470:(et,m,t)=>{"use strict";t.d(m,{e:()=>s});var e=t(31085),r=t(14041),h=t(58837);const c=(0,h.A)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),s=o=>{const{text:d,preTag:g,postTag:i}=o,p=c(),u=(0,r.useMemo)(()=>d.split(new RegExp(`(${g}.+?${i})`)),[i,g,d]);return(0,e.jsx)(e.Fragment,{children:u.map((f,y)=>f.includes(g)?(0,e.jsx)("mark",{className:p.highlight,children:f.replace(new RegExp(`${g}|${i}`,"g"),"")},y):f)})}},51750:(et,m,t)=>{"use strict";t.d(m,{h:()=>h});var e=t(31085),r=t(18690);function h(){const[c]=(0,r.AV)((0,e.jsx)(r.qh,{index:!0,element:(0,e.jsx)("div",{})}));return!c.index}},52262:(et,m,t)=>{"use strict";t.d(m,{s:()=>d});var e=t(19224),r=t(18139),h=t(43327),c=t(14041),s=t(48813);function o(){try{return(0,r.gf)(h.c)}catch{return{captureEvent:()=>{}}}}function d(){const g=(0,c.useRef)(null),i=(0,e.p)(),p=o();function u(){return g.current===null&&(g.current=new s.J(p)),g.current}const f=u();return f.setContext(i),f}},53318:(et,m,t)=>{"use strict";t.d(m,{S:()=>c,Z:()=>s});var e=t(55488),r=t(46123),h=t.n(r);function c(o,d){const g=d?.defaultKind;let i,p,u;return"metadata"in o?(i=o.kind,p=o.metadata.namespace,u=o.metadata.name):(i=o.kind,p=o.namespace,u=o.name),(p===void 0||p==="")&&(p=e.oQ),d?.defaultNamespace!==void 0?d?.defaultNamespace===p&&(p=void 0):p===e.oQ&&(p=void 0),i=i.toLocaleLowerCase("en-US"),i=g&&g.toLocaleLowerCase("en-US")===i?void 0:i,`${i?`${i}:`:""}${p?`${p}/`:""}${u}`}function s(o,d){for(const g of["spec.profile.displayName","metadata.title"]){const i=h()(o,g);if(i&&typeof i=="string")return i}return d}},54195:(et,m,t)=>{"use strict";t.d(m,{U:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.config"})},54852:(et,m,t)=>{"use strict";t.d(m,{qO:()=>c,tK:()=>h});var e=t(14041),r=t(1952);function h(o){return(0,r.Q)(o,()=>(0,e.createContext)(void 0))}function c(o){return(0,e.useContext)(h(o))}function s(o){return{set(d){globalThis[`__@backstage/${o}__`]=createContext(createVersionedValueMap(d))},reset(){delete globalThis[`__@backstage/${o}__`]}}}},55362:(et,m,t)=>{"use strict";t.d(m,{L:()=>N,D:()=>b});var e=t(31085),r=t(14041),h=t(18139),c=t(54195),s=t(95208),o=t(85408),d=t(45681),g=t(51750),i=t(21613),p=t(18690),u=t(52262),f=t(19224);const y=(F,D)=>{try{const G=(0,i.ue)(D,{pathname:F})?.filter(q=>q?.route.routeRefs?.size>0).pop(),I=G?.route;if(!I||I.path===""&&F!=="/")return;let tt;I.routeRefs.size===1&&(tt=I.routeRefs.values().next().value);let H;I.plugins.size===1&&(H=I.plugins.values().next().value);const V=Object.entries(G?.params||{}).reduce((q,[it,ct])=>(ct!==void 0&&it!=="*"&&(q[it]=ct),q),{});return{extension:"App",pluginId:H?.getId()||"root",...tt?{routeRef:tt.id}:{},_routeNodeType:I.element,params:V}}catch{return}},T=({pathname:F,search:D,hash:k,attributes:G})=>{const I=(0,u.s)();return(0,r.useEffect)(()=>{I.captureEvent("navigate",`${F}${D}${k}`,{attributes:G})},[I,F,D,k,G]),null},O=({routeObjects:F})=>{const{pathname:D,search:k,hash:G}=(0,p.zy)(),{params:I,...tt}=y(D,F)||{params:{}};return(0,e.jsx)(f.I,{attributes:tt,children:(0,e.jsx)(T,{pathname:D,search:k,hash:G,attributes:I})})};function b(F){return(0,g.h)()?B(F):""}function B(F){let{pathname:D}=new URL(F.getOptionalString("app.baseUrl")??"/","http://sample.dev");return D=D.replace(/\/*$/,""),D}function j({component:F,appIdentityProxy:D,children:k}){const[G,I]=(0,r.useState)(),tt=(0,h.gf)(c.U),H=B(tt);return G?(D.setTarget(G,{signOutTargetUrl:H||"/"}),(0,e.jsx)(e.Fragment,{children:k})):(0,e.jsx)(F,{onSignInSuccess:I})}function N(F){const{Router:D,SignInPage:k}=(0,s.n)().getComponents(),G=(0,h.gf)(c.U),I=B(G),tt=`${I}/*`,H=(0,r.useContext)(d.W);if(!H)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:V,appIdentityProxy:q}=H;return k?(0,g.h)()?(0,e.jsxs)(D,{children:[(0,e.jsx)(O,{routeObjects:V}),(0,e.jsx)(j,{component:k,appIdentityProxy:q,children:(0,e.jsx)(p.BV,{children:(0,e.jsx)(p.qh,{path:tt,element:(0,e.jsx)(e.Fragment,{children:F.children})})})})]}):(0,e.jsxs)(D,{basename:I,children:[(0,e.jsx)(O,{routeObjects:V}),(0,e.jsx)(j,{component:k,appIdentityProxy:q,children:F.children})]}):(q.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:I||"/"}),(0,g.h)()?(0,e.jsxs)(D,{children:[(0,e.jsx)(O,{routeObjects:V}),(0,e.jsx)(p.BV,{children:(0,e.jsx)(p.qh,{path:tt,element:(0,e.jsx)(e.Fragment,{children:F.children})})})]}):(0,e.jsxs)(D,{basename:I,children:[(0,e.jsx)(O,{routeObjects:V}),F.children]}))}(0,o.h)(N,"core.type","AppRouter")},55488:(et,m,t)=>{"use strict";t.d(m,{P:()=>h,_P:()=>r,oQ:()=>e});const e="default",r="backstage.io/view-url",h="backstage.io/edit-url",c="kubernetes.io/api-server",s="kubernetes.io/api-server-certificate-authority",o="kubernetes.io/auth-provider"},56004:(et,m,t)=>{"use strict";t.d(m,{L:()=>bt,Y:()=>Mt});var e=t(21385);const r="amazonaws.com";function h(W){const x=W.getOptionalString("endpoint"),M=W.getOptionalBoolean("s3ForcePathStyle")??!1;let _,Pt;if(x){try{const fe=new URL(x);_=fe.host,Pt=fe.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${x}' is not a valid URL`)}if(Pt!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${x}'`)}else _=r;const Bt=W.getOptionalString("accessKeyId"),Vt=W.getOptionalString("secretAccessKey")?.trim(),Gt=W.getOptionalString("roleArn"),pe=W.getOptionalString("externalId");return{host:_,endpoint:x,s3ForcePathStyle:M,accessKeyId:Bt,secretAccessKey:Vt,roleArn:Gt,externalId:pe}}function c(W){const x=W.map(h);return x.some(M=>M.host===r)||x.push({host:r}),x}class s{constructor(x){this.integrationConfig=x}static factory=({config:x})=>{const M=c(x.getOptionalConfigArray("integrations.awsS3")??[]);return(0,e.oS)(M.map(_=>new s(_)),_=>_.config.host)};get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(x){return(0,e.ku)(x)}resolveEditUrl(x){return x}}const o="console.aws.amazon.com";function d(W){const x=W.getOptionalString("accessKeyId"),M=W.getOptionalString("secretAccessKey")?.trim(),_=W.getOptionalString("roleArn"),Pt=W.getOptionalString("externalId"),Bt=W.getString("region");return{host:W.getOptionalString("host")||`${Bt}.${o}`,accessKeyId:x,secretAccessKey:M,roleArn:_,externalId:Pt,region:Bt}}function g(W){return W.map(d)}class i{constructor(x){this.integrationConfig=x}static factory=({config:x})=>{const M=g(x.getOptionalConfigArray("integrations.awsCodeCommit")??[]);return(0,e.oS)(M.map(_=>new i(_)),_=>_.config.host)};get type(){return"awsCodeCommit"}get config(){return this.integrationConfig}get title(){return this.integrationConfig.host}resolveUrl(x){return(0,e.ku)(x)}resolveEditUrl(x){const _=new URL(x).pathname.match(/^\/codesuite\/codecommit\/repositories\/([^\/]+)\//);if(!_)throw new Error("");const[,Pt]=_;return p(x,Pt)}}function p(W,x,M){return W.replace(new RegExp(`/codesuite/codecommit/repositories/${x}/(browse|files/edit)/`),`/codesuite/codecommit/repositories/${x}/files/edit/`)}const u="GB";class f{static fromRepoUrl(x){const M=new URL(x);let _,Pt,Bt;const Vt=M.pathname.split("/").map(Pe=>decodeURIComponent(Pe));if(Vt[2]==="_git"?(_=Vt[1],Pt=Bt=Vt[3]):Vt[3]==="_git"?(_=Vt[1],Pt=Vt[2],Bt=Vt[4]):Vt[4]==="_git"&&(_=`${Vt[1]}/${Vt[2]}`,Pt=Vt[3],Bt=Vt[5]),!_||!Pt||!Bt)throw new Error("Azure URL must point to a git repository");const Gt=M.searchParams.get("path")??void 0;let pe;const fe=M.searchParams.get("version");if(fe){if(fe.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");pe=fe.slice(2)}return new f(M.origin,_,Pt,Bt,Gt,pe)}#t;#e;#n;#s;#r;#o;constructor(x,M,_,Pt,Bt,Vt){this.#t=x,this.#e=M,this.#n=_,this.#s=Pt,this.#r=Bt,this.#o=Vt}#a=(...x)=>{const M=new URL(this.#t);return M.pathname=x.map(_=>encodeURIComponent(_)).join("/"),M};toRepoUrl(){let x;return this.#n===this.#s?x=this.#a(this.#e,"_git",this.#s):x=this.#a(this.#e,this.#n,"_git",this.#s),this.#r&&x.searchParams.set("path",this.#r),this.#o&&x.searchParams.set("version",u+this.#o),x.toString()}toFileUrl(){if(!this.#r)throw new Error("Azure URL must point to a specific path to be able to download a file");const x=this.#a(this.#e,this.#n,"_apis","git","repositories",this.#s,"items");return x.searchParams.set("api-version","6.0"),x.searchParams.set("path",this.#r),this.#o&&x.searchParams.set("version",this.#o),x.toString()}toArchiveUrl(){const x=this.#a(this.#e,this.#n,"_apis","git","repositories",this.#s,"items");return x.searchParams.set("recursionLevel","full"),x.searchParams.set("download","true"),x.searchParams.set("api-version","6.0"),this.#r&&x.searchParams.set("scopePath",this.#r),this.#o&&x.searchParams.set("version",this.#o),x.toString()}toCommitsUrl(){const x=this.#a(this.#e,this.#n,"_apis","git","repositories",this.#s,"commits");return x.searchParams.set("api-version","6.0"),this.#o&&x.searchParams.set("searchCriteria.itemVersion.version",this.#o),x.toString()}getOwner(){return this.#e}getProject(){return this.#n}getRepo(){return this.#s}getPath(){return this.#r}getRef(){return this.#o}}const y="dev.azure.com",T=["clientId","clientSecret","managedIdentityClientId","tenantId","personalAccessToken"],O=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["ManagedIdentityClientAssertion",["clientId","managedIdentityClientId","tenantId"]],["PersonalAccessToken",["personalAccessToken"]]]);function b(W){for(const x of O.entries()){const[M,_]=x,Pt=T.filter(Bt=>!_.includes(Bt));if(_.every(Bt=>W[Bt]!==void 0)&&Pt.every(Bt=>W[Bt]===void 0))return{kind:M,organizations:W.organizations,..._.reduce((Bt,Vt)=>(Bt[Vt]=W[Vt],Bt),{})}}throw new Error("is not a valid credential")}function B(W){const x=W.getOptionalString("host")??y;let M=W.getOptionalConfigArray("credentials")?.map(Bt=>({organizations:Bt.getOptionalStringArray("organizations"),personalAccessToken:Bt.getOptionalString("personalAccessToken")?.trim(),tenantId:Bt.getOptionalString("tenantId")?.trim(),clientId:Bt.getOptionalString("clientId")?.trim(),clientSecret:Bt.getOptionalString("clientSecret")?.trim(),managedIdentityClientId:Bt.getOptionalString("managedIdentityClientId")?.trim()}));const _=W.getOptionalString("token")?.trim();if(W.getOptional("credential")!==void 0&&W.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(W.getOptional("token")!==void 0&&W.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(_!==void 0){const Bt=[{personalAccessToken:_}];M=M?.concat(Bt)??Bt}if(W.getOptional("credential")!==void 0){const Bt=[{organizations:W.getOptionalStringArray("credential.organizations"),token:W.getOptionalString("credential.token")?.trim(),tenantId:W.getOptionalString("credential.tenantId"),clientId:W.getOptionalString("credential.clientId"),clientSecret:W.getOptionalString("credential.clientSecret")?.trim()}];M=M?.concat(Bt)??Bt}if(!(0,e.HO)(x))throw new Error(`Invalid Azure integration config, '${x}' is not a valid host`);let Pt;if(M!==void 0){const Bt=M?.reduce((Vt,Gt,pe)=>{let fe;try{b(Gt)}catch(Pe){fe=Pe.message}return fe!==void 0&&Vt.push(`credential at position ${pe+1} ${fe}`),Vt},Array.of()).concat(Object.entries(M.filter(Vt=>Vt.organizations!==void 0&&Vt.organizations.length>0).reduce((Vt,Gt,pe)=>(Gt.organizations?.forEach(fe=>{Vt[fe]||(Vt[fe]=[]),Vt[fe].push(pe+1)}),Vt),{})).filter(([Vt,Gt])=>Gt.length>1).reduce((Vt,[Gt,pe])=>(Vt.push(`organization ${Gt} is specified multiple times in credentials at positions ${pe.slice(0,pe.length-1).join(", ")} and ${pe[pe.length-1]}`),Vt),Array.of()));if(Bt?.length>0)throw new Error(`Invalid Azure integration config for ${x}: ${Bt.join("; ")}`);if(Pt=M.map(Vt=>b(Vt)),Pt.some(Vt=>Vt.kind!=="PersonalAccessToken")&&x!==y)throw new Error(`Invalid Azure integration config for ${x}, only personal access tokens can be used with hosts other than ${y}`);if(Pt.filter(Vt=>Vt.organizations===void 0||Vt.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${x}, you cannot specify multiple credentials without organizations`)}return{host:x,credentials:Pt,commitSigningKey:W.getOptionalString("commitSigningKey")}}function j(W){const x=W.map(B);return x.some(M=>M.host===y)||x.push({host:y}),x}class N{constructor(x){this.integrationConfig=x}static factory=({config:x})=>{const M=j(x.getOptionalConfigArray("integrations.azure")??[]);return(0,e.oS)(M.map(_=>new N(_)),_=>_.config.host)};get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(x){const{url:M,base:_}=x;if((0,e.AY)(M))return M;try{const Pt=f.fromRepoUrl(_),Bt=new URL(_),Vt=new URL(`https://a.com${Pt.getPath()??""}`),Gt=new URL(M,Vt).pathname;return Bt.searchParams.set("path",Gt),x.lineNumber&&(Bt.searchParams.set("line",String(x.lineNumber)),Bt.searchParams.set("lineEnd",String(x.lineNumber+1)),Bt.searchParams.set("lineStartColumn","1"),Bt.searchParams.set("lineEndColumn","1")),Bt.toString()}catch{return new URL(M,_).toString()}}resolveEditUrl(x){return x}}var F=t(52536),D=t.n(F);const k="bitbucket.org",G="https://api.bitbucket.org/2.0";function I(W){const x=k,M=G,_=W.getString("username"),Pt=W.getString("appPassword")?.trim();return{host:x,apiBaseUrl:M,username:_,appPassword:Pt,commitSigningKey:W.getOptionalString("commitSigningKey")}}function tt(W){const x=W.map(I);return x.length===0&&x.push({host:k,apiBaseUrl:G}),x}class H{constructor(x){this.integrationConfig=x}static factory=({config:x})=>{const M=tt(x.getOptionalConfigArray("integrations.bitbucketCloud")??[]);return(0,e.oS)(M.map(_=>new H(_)),_=>_.config.host)};get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(x){const M=(0,e.ku)(x);if(x.lineNumber){const _=new URL(M);return _.hash=`lines-${x.lineNumber}`,_.toString()}return M}resolveEditUrl(x){const M=D()(x),_=new URL(x);return _.searchParams.set("mode","edit"),_.searchParams.set("at",M.ref),_.toString()}}var V=t(45250);const q="bitbucket.org",it="https://api.bitbucket.org/2.0";function ct(W){const x=W.getOptionalString("host")??q;let M=W.getOptionalString("apiBaseUrl");const _=W.getOptionalString("token")?.trim(),Pt=W.getOptionalString("username"),Bt=W.getOptionalString("appPassword")?.trim();if(!(0,e.HO)(x))throw new Error(`Invalid Bitbucket integration config, '${x}' is not a valid host`);return M?M=(0,V.trimEnd)(M,"/"):x===q?M=it:M=`https://${x}/rest/api/1.0`,{host:x,apiBaseUrl:M,token:_,username:Pt,appPassword:Bt,commitSigningKey:W.getOptionalString("commitSigningKey")}}function Q(W){const x=W.map(ct);return x.some(M=>M.host===q)||x.push({host:q,apiBaseUrl:it}),x}class lt{constructor(x){this.integrationConfig=x}static factory=({config:x})=>{const M=Q(x.getOptionalConfigArray("integrations.bitbucket")??[...x.getOptionalConfigArray("integrations.bitbucketCloud")??[],...x.getOptionalConfigArray("integrations.bitbucketServer")??[]]);return(0,e.oS)(M.map(_=>new lt(_)),_=>_.config.host)};get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(x){const M=(0,e.ku)(x);if(!x.lineNumber)return M;const _=new URL(M);return this.integrationConfig.host==="bitbucket.org"?_.hash=`lines-${x.lineNumber}`:_.hash=`${x.lineNumber}`,_.toString()}resolveEditUrl(x){const M=D()(x),_=new URL(x);return _.searchParams.set("mode","edit"),_.searchParams.set("spa","0"),_.searchParams.set("at",M.ref),_.toString()}}function st(W){const x=W.getString("host");let M=W.getOptionalString("apiBaseUrl");const _=W.getOptionalString("token")?.trim(),Pt=W.getOptionalString("username"),Bt=W.getOptionalString("password");if(!(0,e.HO)(x))throw new Error(`Invalid Bitbucket Server integration config, '${x}' is not a valid host`);return M?M=(0,V.trimEnd)(M,"/"):M=`https://${x}/rest/api/1.0`,{host:x,apiBaseUrl:M,token:_,username:Pt,password:Bt,commitSigningKey:W.getOptionalString("commitSigningKey")}}function mt(W){return W.map(st)}class rt{constructor(x){this.integrationConfig=x}static factory=({config:x})=>{const M=mt(x.getOptionalConfigArray("integrations.bitbucketServer")??[]);return(0,e.oS)(M.map(_=>new rt(_)),_=>_.config.host)};get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(x){const M=(0,e.ku)(x);if(x.lineNumber){const _=new URL(M);return _.hash=x.lineNumber.toString(),_.toString()}return M}resolveEditUrl(x){return x.includes("?")?x.substring(0,x.indexOf("?")):x}}function nt(W){const x=W.getString("host");let M=W.getOptionalString("baseUrl"),_=W.getOptionalString("cloneUrl");const Pt=W.getOptionalBoolean("disableEditUrl");let Bt=W.getString("gitilesBaseUrl");const Vt=W.getOptionalString("username"),Gt=W.getOptionalString("password")?.trim();if((0,e.HO)(x)){if(M&&!(0,e.AY)(M))throw new Error(`Invalid Gerrit integration config, '${M}' is not a valid baseUrl`);if(_&&!(0,e.AY)(_))throw new Error(`Invalid Gerrit integration config, '${_}' is not a valid cloneUrl`);if(!(0,e.AY)(Bt))throw new Error(`Invalid Gerrit integration config, '${Bt}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${x}' is not a valid host`);return M?M=(0,V.trimEnd)(M,"/"):M=`https://${x}`,_?_=(0,V.trimEnd)(_,"/"):_=M,Bt=(0,V.trimEnd)(Bt,"/"),{host:x,baseUrl:M,cloneUrl:_,disableEditUrl:Pt,gitilesBaseUrl:Bt,username:Vt,password:Gt,commitSigningKey:W.getOptionalString("commitSigningKey")}}function z(W){return W.map(nt)}var U=t(1048).Buffer;const P=")]}'";function S(W,x){const M=new URL(W.gitilesBaseUrl),_=new URL(x),Bt=_.pathname.substring(_.pathname.startsWith("/a/")?2:0).replace(M.pathname,"").split("/").filter(Fe=>!!Fe),Vt=Bt.indexOf("+");if(Vt<=0)throw new Error(`Unable to parse project from url: ${x}`);const Gt=trimStart(Bt.slice(0,Vt).join("/"),"/"),pe=Bt.indexOf("heads");if(pe<=0)throw new Error(`Unable to parse branch from url: ${x}`);const fe=Bt[pe+1],Pe=Bt.slice(pe+2).join("/");return{branch:fe,filePath:Pe===""?"/":Pe,project:Gt}}function L(W,x){const M=new URL(W.gitilesBaseUrl),_=new URL(x),Bt=(0,V.trimStart)(_.pathname.substring(_.pathname.startsWith("/a/")?2:0).replace(M.pathname,""),"/").split("/").filter(De=>!!De),Vt=(0,V.takeWhile)(Bt,De=>De!=="+");if(Vt.length===0)throw new Error(`Unable to parse gitiles url: ${x}`);const Gt=Bt.slice(Vt.length+1),pe=(0,V.join)(Vt,"/");if(Gt.length>0&&Gt[0]==="HEAD"){const De=Gt.shift(),be=(0,V.join)(Gt,"/");return{project:pe,ref:De,refType:"head",path:be||"/",basePath:(0,V.trimEnd)(x.replace(be,""),"/")}}if(Gt.length>0&&Gt[0].length===40){const De=Gt.shift(),be=(0,V.join)(Gt,"/");return{project:pe,ref:De,refType:"sha",path:be||"/",basePath:(0,V.trimEnd)(x.replace(be,""),"/")}}const fe=(0,V.join)(Gt,"/"),Fe=/^refs\/(?<refsReference>heads|tags)\/(?<ref>.*?)(\/|$)/.exec(fe);if(Fe){const De=Fe[0];let be;const{refsReference:Ie,ref:we}=Fe.groups||{},ke=fe.replace(De,"");switch(Ie){case"heads":be="branch";break;case"tags":be="tag";break;default:throw new Error(`Unable to parse gitiles url: ${x}`)}return{project:pe,ref:we,refType:be,path:ke||"/",basePath:(0,V.trimEnd)(x.replace(ke,""),"/")}}throw new Error(`Unable to parse gitiles : ${x}`)}function $(W,x,M,_){return`${W.baseUrl}/admin/repos/edit/repo/${x}/branch/refs/heads/${M}/file/${(0,V.trimStart)(_,"/")}`}function K(W,x,M,_){const Pt=_==="/"||_===""?".tar.gz":`/${_}.tar.gz`;return`${At(W)}/${x}/+archive/refs/heads/${M}${Pt}`}function J(W,x){const{path:M,ref:_,project:Pt,refType:Bt}=L(W,x),Vt=M==="/"||M===""?".tar.gz":`/${M}.tar.gz`;if(Bt==="branch")return`${At(W)}/${Pt}/+archive/refs/heads/${_}${Vt}`;if(Bt==="sha")return`${At(W)}/${Pt}/+archive/${_}${Vt}`;throw new Error(`Unsupported gitiles ref type: ${Bt}`)}function ot(W){return W.password?"/a/":"/"}function At(W){if(!W.baseUrl||!W.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(W.gitilesBaseUrl.startsWith(W.baseUrl))return W.gitilesBaseUrl.replace(W.baseUrl.concat("/"),W.baseUrl.concat(ot(W)));if(W.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return W.gitilesBaseUrl}function X(W,x){const{branch:M,project:_}=S(W,x);return`${W.baseUrl}${ot(W)}projects/${encodeURIComponent(_)}/branches/${M}`}function dt(W,x){const{project:M}=S(W,x);return`${W.cloneUrl}${ot(W)}${M}`}function xt(W,x){const{ref:M,refType:_,path:Pt,project:Bt}=L(W,x);if(_==="branch")return`${W.baseUrl}${ot(W)}projects/${encodeURIComponent(Bt)}/branches/${M}/files/${encodeURIComponent(Pt)}/content`;if(_==="sha")return`${W.baseUrl}${ot(W)}projects/${encodeURIComponent(Bt)}/commits/${M}/files/${encodeURIComponent(Pt)}/content`;throw new Error(`Unsupported gitiles ref type: ${_}`)}function $t(W){return`${W.baseUrl}${ot(W)}projects/`}function wt(W){const x={};if(!W.password)return x;const M=U.from(`${W.username}:${W.password}`,"utf8");return x.Authorization=`Basic ${M.toString("base64")}`,{headers:x}}async function _t(W){const x=await W.text();if(x.startsWith(P))try{return JSON.parse(x.slice(P.length))}catch(M){throw new Error(`Invalid response from Gerrit: ${x.slice(0,10)} - ${M}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${x.slice(0,10)}`)}class Ut{constructor(x){this.integrationConfig=x}static factory=({config:x})=>{const M=z(x.getOptionalConfigArray("integrations.gerrit")??[]);return(0,e.oS)(M.map(_=>new Ut(_)),_=>_.config.host)};get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(x){const{url:M,base:_,lineNumber:Pt}=x;let Bt;if(M.startsWith("/")){const{basePath:Vt}=L(this.config,_);return Vt+M}return M?Bt=new URL(M,_):Bt=new URL(_),Pt&&(Bt.hash=Pt.toString()),Bt.toString()}resolveEditUrl(x){if(this.config.disableEditUrl)return x;const M=L(this.config,x);return $(this.config,M.project,M.ref,M.path)}}var zt=t(58167),Xt=t(85911);function se(W){const x=W.getString("host");let M=W.getOptionalString("baseUrl");const _=W.getOptionalString("username"),Pt=W.getOptionalString("password")?.trim();if((0,e.HO)(x)){if(M&&!(0,e.AY)(M))throw new Error(`Invalid Gitea integration config, '${M}' is not a valid baseUrl`)}else throw new Error(`Invalid Gitea integration config, '${x}' is not a valid host`);return M?M=(0,V.trimEnd)(M,"/"):M=`https://${x}`,{host:x,baseUrl:M,username:_,password:Pt,commitSigningKey:W.getOptionalString("commitSigningKey")}}var re=t(1048).Buffer;function ce(W,x){const M=Wt(W,x);return`${M.url}/${M.owner}/${M.name}/_edit/${M.ref}/${M.path}`}function te(W,x){const M=Wt(W,x);return`${M.url}/api/v1/repos/${M.owner}/${M.name}/contents/${M.path}?ref=${M.ref}`}function ie(W,x){const M=Wt(W,x);return`${M.url}/api/v1/repos/${M.owner}/${M.name}/archive/${M.ref}.tar.gz`}function me(W,x){const M=Wt(W,x);return`${M.url}/api/v1/repos/${M.owner}/${M.name}/git/commits/${M.ref}`}function ee(W){const x={},{username:M,password:_}=W;return _?(M?x.Authorization=`basic ${re.from(`${M}:${_}`).toString("base64")}`:x.Authorization=`token ${_}`,{headers:x}):x}function Wt(W,x){const M=W.baseUrl??`https://${W.host}`;try{const[_,Pt,Bt,Vt,Gt,pe,...fe]=x.replace(M,"").split("/"),Pe=fe.join("/").replace(/^\//,"");return{url:M,owner:Pt,name:Bt,ref:pe,path:Pe}}catch(_){throw new Error(`Incorrect URL: ${x}, ${_}`)}}class jt{constructor(x){this.config=x}static factory=({config:x})=>{const _=(x.getOptionalConfigArray("integrations.gitea")??[]).map(Pt=>se(Pt));return(0,e.oS)(_.map(Pt=>new jt(Pt)),Pt=>Pt.config.host)};get type(){return"gitea"}get title(){return this.config.host}resolveUrl(x){return(0,e.ku)(x)}resolveEditUrl(x){return ce(this.config,x)}}function pt(W){const x=W.getString("host"),M=W.getOptionalString("token"),_=W.getOptionalString("apiKey");if(!(0,e.HO)(x))throw new Error(`Invalid Harness Code integration config, '${x}' is not a valid host`);return{host:x,apiKey:_,token:M}}function Y(W,x){const M=Ht(W,x);return`${M.baseUrl}/ng/account/${M.accountId}/module/code${M.orgName!==""?`/orgs/${M.orgName}`:""}${M.projectName!==""?`/projects/${M.projectName}`:""}/repos/${M.repoName}/files/${M.branch}/~/${M.path}`}function ft(W,x){const M=Ht(W,x);let _=`${M.baseUrl}/gateway/code/api/v1/repos/${M.accountId}`;return M.orgName&&(_+=`/${M.orgName}`),M.projectName&&(_+=`/${M.projectName}`),_+=`/${M.repoName}/+/raw/${M.path}?routingId=${M.accountId}&git_ref=refs/heads/${M.refString}`,_}function Tt(W,x){const M=Ht(W,x);let _=`${M.baseUrl}/gateway/code/api/v1/repos/${M.accountId}`;return M.orgName&&(_+=`/${M.orgName}`),M.projectName&&(_+=`/${M.projectName}`),_+=`/${M.repoName}/+/archive/${M.branch}.zip?routingId=${M.accountId}`,_}function Lt(W,x){const M=Ht(W,x);let _=`${M.baseUrl}/gateway/code/api/v1/repos/${M.accountId}`;return M.orgName&&(_+=`/${M.orgName}`),M.projectName&&(_+=`/${M.projectName}`),_+=`/${M.repoName}/+/content?routingId=${M.accountId}&include_commit=true&git_ref=refs/heads/${M.branch}`,_}function St(W){const x={},{token:M,apiKey:_}=W;return _?x["x-api-key"]=_:M&&(x.Authorization=`Bearer ${M}`),{headers:x}}function Ht(W,x){const M=`https://${W.host}`;try{const _=new URL(x),Pt=_.pathname.split("/").filter(je=>je!==""),Bt=_.pathname.split("/"),Vt=Pt.findIndex(je=>je==="account")+1,Gt=Pt[Vt],pe=Pt.findIndex(je=>je==="orgs"),fe=pe!==-1?Pt[pe+1]:"",Pe=Pt.findIndex(je=>je==="projects"),Fe=Pe!==-1?Pt[Pe+1]:"",De=Pt.findIndex((je,_e)=>je==="repos"&&_e>Math.max(Vt,pe,Pe))+1,be=Pt[De],Ie=Bt.slice(Bt.findIndex(je=>je==="files"||je==="edit")+1),we=Ie.findIndex(je=>je==="~"),ke=Ie.slice(0,we).join("/"),Ge=we!==-1?Ie.slice(we+1).join("/").replace(/^\//,""):"";return{baseUrl:M,accountId:Gt,orgName:fe,projectName:Fe,refString:ke,path:Ge,repoName:be,refDashStr:Ie.slice(0,we).join("-"),branch:we!==-1?Ie.slice(0,we).join("/"):Ie.join("/")}}catch(_){throw new Error(`Incorrect URL: ${x}, ${_}`)}}class kt{constructor(x){this.config=x}static factory=({config:x})=>{const _=(x.getOptionalConfigArray("integrations.harness")??[]).map(Pt=>pt(Pt));return(0,e.oS)(_.map(Pt=>new kt(Pt)),Pt=>Pt.config.host)};get type(){return"harness"}get title(){return this.config.host}resolveUrl(x){return(0,e.ku)(x)}resolveEditUrl(x){return Y(this.config,x)}}const Dt="blob.core.windows.net";function Ft(W){const x=W.getOptionalString("endpoint"),M=W.getString("accountName"),_=W.getOptionalString("accountKey")?.trim(),Pt=W.getOptionalString("sasToken")?.trim(),Bt=W.getOptionalString("connectionString")?.trim(),Vt=W.getOptionalString("endpointSuffix")?.trim();let Gt,pe;if(x){try{const Pe=new URL(x);Gt=Pe.host,pe=Pe.pathname}catch{throw new Error(`invalid azureBlobStorage integration config, endpoint '${x}' is not a valid URL`)}if(pe!=="/")throw new Error(`invalid azureBlobStorage integration config, endpoints cannot contain path, got '${x}'`)}else Gt=Dt;const fe=W.has("aadCredential")?{clientId:W.getString("aadCredential.clientId"),tenantId:W.getString("aadCredential.tenantId"),clientSecret:W.getString("aadCredential.clientSecret")?.trim()}:void 0;if(_&&Pt)throw new Error(`Invalid Azure Blob Storage config for ${M}: Both account key and SAS token cannot be used simultaneously.`);if(fe&&(_||Pt))throw new Error(`Invalid Azure Blob Storage config for ${M}: Cannot use both Azure AD credentials and account keys/SAS tokens for the same account.`);return{host:Gt,endpoint:x,accountName:M,accountKey:_,sasToken:Pt,connectionString:Bt,endpointSuffix:Vt,aadCredential:fe}}function Yt(W){const x=W.map(Ft);return x.some(M=>M.host===Dt)||x.push({host:Dt}),x}class Et{constructor(x){this.integrationConfig=x}static factory=({config:x})=>{const M=Yt(x.getOptionalConfigArray("integrations.azureBlobStorage")??[]);return(0,e.oS)(M.map(_=>new Et(_)),_=>_.config.host)};get type(){return"azureBlobStorage"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(x){return(0,e.ku)(x)}resolveEditUrl(x){return x}}var at=t(46996);class yt{byType;static fromConfig(x){return new yt({awsS3:s.factory({config:x}),awsCodeCommit:i.factory({config:x}),azureBlobStorage:Et.factory({config:x}),azure:N.factory({config:x}),bitbucket:lt.factory({config:x}),bitbucketCloud:H.factory({config:x}),bitbucketServer:rt.factory({config:x}),gerrit:Ut.factory({config:x}),github:zt.U.factory({config:x}),gitlab:Xt._.factory({config:x}),gitea:jt.factory({config:x}),harness:kt.factory({config:x})})}constructor(x){this.byType=x}get awsS3(){return this.byType.awsS3}get awsCodeCommit(){return this.byType.awsCodeCommit}get azureBlobStorage(){return this.byType.azureBlobStorage}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}get harness(){return this.byType.harness}list(){return Object.values(this.byType).flatMap(x=>x.list())}byUrl(x){let M=Object.values(this.byType).map(_=>_.byUrl(x)).filter(Boolean);if(M.length>1){const _=M.filter(Pt=>!(Pt instanceof lt));_.length!==0&&(M=_)}return M[0]}byHost(x){return Object.values(this.byType).map(M=>M.byHost(x)).find(Boolean)}resolveUrl(x){const M=this.byUrl(x.base);return M?M.resolveUrl(x):(0,e.ku)(x)}resolveEditUrl(x){const M=this.byUrl(x);return M?M.resolveEditUrl(x):x}}var Ot=t(28967);class bt{static fromConfig(x){return yt.fromConfig(x)}}const Mt=(0,Ot.y)({id:"integration.scmintegrations"})},56240:(et,m,t)=>{"use strict";t.d(m,{b:()=>e});var e=(r=>(r.DENY="DENY",r.ALLOW="ALLOW",r.CONDITIONAL="CONDITIONAL",r))(e||{})},56299:(et,m,t)=>{"use strict";t.d(m,{A:()=>c});var e=t(78560),r=t(90712),h=t(16400);function c(s){const{entity:o,loading:d,error:g}=(0,h.TY)(),{allowed:i,loading:p,error:u}=(0,r.J)({permission:s,resourceRef:o?(0,e.U2)(o):void 0});return d||p?{loading:!0,allowed:!1}:g?{loading:!1,allowed:!1,error:g}:{loading:!1,allowed:i,error:u}}},58021:(et,m,t)=>{"use strict";t.d(m,{w:()=>g});var e=t(31085),r=t(9684),h=t(74268),c=t(7370),s=t(72814),o=t(10265),d=t(27482);const g=i=>{const p=(0,s.S)(h.kQ),u=i.icon?i.icon:r.A,{t:f}=(0,o.i)(d.r);return(0,e.jsx)(c.uk,{text:f("sidebarTitle"),to:p(),icon:u})}},58045:(et,m,t)=>{"use strict";t.d(m,{W:()=>r});var e=t(97963);const r=(0,e.h)({id:"catalog",messages:{indexPage:{title:"{{orgName}} Catalog",createButtonTitle:"Create",supportButtonContent:"All your software catalog entities"},aboutCard:{title:"About",refreshButtonTitle:"Schedule entity refresh",editButtonTitle:"Edit Metadata",createSimilarButtonTitle:"Create something similar",refreshScheduledMessage:"Refresh scheduled",launchTemplate:"Launch Template",viewTechdocs:"View TechDocs",viewSource:"View Source",descriptionField:{label:"Description",value:"No description"},ownerField:{label:"Owner",value:"No Owner"},domainField:{label:"Domain",value:"No Domain"},systemField:{label:"System",value:"No System"},parentComponentField:{label:"Parent Component",value:"No Parent Component"},typeField:{label:"Type"},lifecycleField:{label:"Lifecycle"},tagsField:{label:"Tags",value:"No Tags"},targetsField:{label:"Targets"}},searchResultItem:{lifecycle:"Lifecycle",Owner:"Owner"},catalogTable:{warningPanelTitle:"Could not fetch catalog entities.",viewActionTitle:"View",editActionTitle:"Edit",starActionTitle:"Add to favorites",unStarActionTitle:"Remove from favorites"},dependencyOfComponentsCard:{title:"Dependency of components",emptyMessage:"No component depends on this component"},dependsOnComponentsCard:{title:"Depends on components",emptyMessage:"No component is a dependency of this component"},dependsOnResourcesCard:{title:"Depends on resources",emptyMessage:"No resource is a dependency of this component"},entityContextMenu:{copiedMessage:"Copied!",moreButtonTitle:"More",inspectMenuTitle:"Inspect entity",copyURLMenuTitle:"Copy entity URL",unregisterMenuTitle:"Unregister entity"},entityLabelsCard:{title:"Labels",emptyDescription:"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:",readMoreButtonTitle:"Read more"},entityLabels:{warningPanelTitle:"Entity not found",ownerLabel:"Owner",lifecycleLabel:"Lifecycle"},entityLinksCard:{title:"Links",emptyDescription:"No links defined for this entity. You can add links to your entity YAML as shown in the highlighted example below:",readMoreButtonTitle:"Read more"},entityNotFound:{title:"Entity was not found",description:"Want to help us build this? Check out our Getting Started documentation.",docButtonTitle:"DOCS"},deleteEntity:{dialogTitle:"Are you sure you want to delete this entity?",deleteButtonTitle:"Delete",cancelButtonTitle:"Cancel",description:"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."},entityProcessingErrorsDescription:"The error below originates from",entityRelationWarningDescription:`This entity has relations to other entities, which can't be found in the catalog.
 Entities not found are: `,hasComponentsCard:{title:"Has components",emptyMessage:"No component is part of this system"},hasResourcesCard:{title:"Has resources",emptyMessage:"No resource is part of this system"},hasSubcomponentsCard:{title:"Has subcomponents",emptyMessage:"No subcomponent is part of this component"},hasSubdomainsCard:{title:"Has subdomains",emptyMessage:"No subdomain is part of this domain"},hasSystemsCard:{title:"Has systems",emptyMessage:"No system is part of this domain"},relatedEntitiesCard:{emptyHelpLinkTitle:"Learn how to change this"},systemDiagramCard:{title:"System Diagram",description:"Use pinch & zoom to move around the diagram.",edgeLabels:{partOf:"part of",provides:"provides",dependsOn:"depends on"}}}})},58167:(et,m,t)=>{"use strict";t.d(m,{F:()=>c,U:()=>h});var e=t(21385),r=t(14174);class h{constructor(o){this.integrationConfig=o}static factory=({config:o})=>{const d=(0,r.b)(o.getOptionalConfigArray("integrations.github")??[]);return(0,e.oS)(d.map(g=>new h(g)),g=>g.config.host)};get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(o){return c((0,e.ku)(o),"tree")}resolveEditUrl(o){return c(o,"edit")}parseRateLimitInfo(o){return{isRateLimited:o.status===429||o.status===403&&o.headers.get("x-ratelimit-remaining")==="0"}}}function c(s,o){return s.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(d,g,i,p)=>`//${g}/${i}/${p}/${o}/`)}},58269:(et,m,t)=>{"use strict";t.d(m,{C:()=>f});var e=t(31085),r=t(13085),h=t(58837),c=t(14041),s=t(18690),o=t(75202),d=t(31072),g=t(88835),i=t(65901);const p=(0,h.A)(y=>({root:{flexGrow:0,margin:y.spacing(0,2),color:y.palette.navigation.color},selected:T=>({color:`${y.palette.navigation.selectedColor}!important`,borderTop:`solid ${T.sidebarConfig.selectedIndicatorWidth}px ${y.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),u=y=>{const{to:T,label:O,icon:b,value:B}=y,{sidebarConfig:j}=(0,c.useContext)(d.yY),N=p({sidebarConfig:j}),F=(0,s.zy)(),{selectedMenuItemIndex:D,setSelectedMenuItemIndex:k}=(0,c.useContext)(g.k),G=(tt,H)=>{k(H===D?-1:H)},I=B===D&&D>=0||B!==D&&!(D>=0)&&T===F.pathname;return(0,e.jsx)(r.A,{"aria-label":O,label:O,icon:b,component:o.N_,to:T||F.pathname,onChange:G,value:B,selected:I,classes:N})},f=y=>{const{children:T,to:O,label:b,icon:B,value:j}=y,{isMobile:N}=(0,i.Ut)();return N?(0,e.jsx)(u,{to:O,label:b,icon:B,value:j}):(0,e.jsx)(e.Fragment,{children:T})}},58464:(et,m,t)=>{"use strict";t.d(m,{_:()=>h});var e=t(81308);const h=(0,e._)({output:c=>c.string(),uiOptions:c=>c.object({requestUserCredentials:c.object({secretsKey:c.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:c.object({gitea:c.array(c.string()).optional().describe("Additional Gitea scopes to request"),gerrit:c.array(c.string()).optional().describe("Additional Gerrit scopes to request"),github:c.array(c.string()).optional().describe("Additional GitHub scopes to request"),gitlab:c.array(c.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:c.array(c.string()).optional().describe("Additional BitBucket scopes to request"),azure:c.array(c.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})}).schema},59759:(et,m,t)=>{"use strict";t.d(m,{OL:()=>r});function e(g,i){return g.name===i.name}function r(g,i){return"resourceType"in g?!i||g.resourceType===i:!1}function h(g){return g.attributes.action==="create"}function c(g){return g.attributes.action==="read"}function s(g){return g.attributes.action==="update"}function o(g){return g.attributes.action==="delete"}function d(g){return{authorize:async(i,p)=>await g.authorize(i,p),authorizeConditional(i,p){const u=i;return g.authorize(u,p)}}}},60197:(et,m,t)=>{"use strict";t.d(m,{z:()=>I});var e=t(31085),r=t(58837),h=t(76891),c=t(93453),s=t(46805),o=t(61477),d=t(58007),g=t(64947),i=t(14041),p=t(11746),u=t(8109),f=t(91467),y=t(5951),T=t(72501),O=t(67457),b=t(89475),B=t(10265);const j=(0,r.A)(tt=>({root:{paddingLeft:tt.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),N=({request:tt,busy:H,setBusy:V})=>{const q=j(),[it,ct]=(0,i.useState)(),{t:Q}=(0,B.i)(b.O),lt=async()=>{V(!0);try{await tt.trigger()}catch(mt){ct((0,O.b)(mt)?mt.message:"An unspecified error occurred")}finally{V(!1)}},st=tt.provider.icon;return(0,e.jsxs)(u.A,{disabled:H,classes:{root:q.root},children:[(0,e.jsx)(f.A,{children:(0,e.jsx)(st,{fontSize:"large"})}),(0,e.jsx)(y.A,{primary:tt.provider.title,secondary:it&&(0,e.jsx)(T.A,{color:"error",children:it})}),(0,e.jsx)(g.A,{color:"primary",variant:"contained",onClick:lt,children:Q("oauthRequestDialog.login")})]})};var F=t(18139),D=t(35177),k=t(54195);const G=(0,r.A)(tt=>({dialog:{paddingTop:tt.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:tt.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:tt.spacing(2,0)}}),{name:"OAuthRequestDialog"});function I(tt){const H=G(),[V,q]=(0,i.useState)(!1),it=(0,F.gf)(D.s),ct=(0,F.gf)(k.U),{t:Q}=(0,B.i)(b.O),lt=ct.getOptionalBoolean("enableExperimentalRedirectFlow")??!1,st=(0,p.A)((0,i.useMemo)(()=>it.authRequest$(),[it]),[]),mt=()=>{st.forEach(rt=>rt.reject())};return(0,e.jsxs)(h.A,{open:!!st.length,fullWidth:!0,maxWidth:"xs",classes:{paper:H.dialog},"aria-labelledby":"oauth-req-dialog-title",children:[(0,e.jsxs)("main",{children:[(0,e.jsxs)(o.A,{classes:{root:H.title},id:"oauth-req-dialog-title",children:[(0,e.jsx)(T.A,{className:H.titleHeading,variant:"h1",variantMapping:{h1:"span"},children:Q("oauthRequestDialog.title")}),lt?(0,e.jsx)(T.A,{children:Q("oauthRequestDialog.authRedirectTitle")}):null]}),(0,e.jsx)(s.A,{dividers:!0,classes:{root:H.contentList},children:(0,e.jsx)(d.A,{children:st.map(rt=>(0,e.jsx)(N,{request:rt,busy:V,setBusy:q},rt.provider.title))})})]}),(0,e.jsx)(c.A,{classes:{root:H.actionButtons},children:(0,e.jsx)(g.A,{onClick:mt,children:Q("oauthRequestDialog.rejectAll")})})]})}},60241:(et,m,t)=>{"use strict";t.d(m,{O:()=>e});var e=(r=>(r.TOP_BOTTOM="TB",r.BOTTOM_TOP="BT",r.LEFT_RIGHT="LR",r.RIGHT_LEFT="RL",r))(e||{})},60540:(et,m,t)=>{"use strict";t.d(m,{i:()=>i});var e=t(31085),r=t(14041),h=t(18690),c=t(95208),s=t(77026),o=t(85408),d=t(51750);let g=!1;const i=p=>{const u=(0,c.n)(),{NotFoundErrorPage:f}=u.getComponents(),y=(0,r.useMemo)(()=>(0,d.h)(),[]),O=[...(0,s.O)(p.children,b=>b.getElements().flatMap(B=>{let j=B.props.path;if(j==="")return[];j=j?.replace(/\/\*$/,"")??"/";let N=y?B:B.props.element;return!y&&!N&&(N=B,g||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),g=!0)),[{path:j,element:N,children:B.props.children?[{path:j==="/"?"/":"*",element:B.props.children}]:void 0}]}).sort((B,j)=>j.path.localeCompare(B.path)).map(B=>({...B,path:B.path==="/"?"/":`${B.path}/*`}))),{path:"*",element:(0,e.jsx)(f,{})}];return(0,h.Ye)(O)};(0,o.h)(i,"core.type","FlatRoutes")},61617:(et,m,t)=>{"use strict";t.d(m,{I:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.discovery"})},62112:(et,m,t)=>{"use strict";t.d(m,{z:()=>g});var e=t(31085),r=t(77125),h=t(54917),c=t(20279),s=t(40697),o=t(25577),d=t(31994);function g(i){const{text:p,language:u,showLineNumbers:f=!1,highlightedNumbers:y,customStyle:T,showCopyCodeButton:O=!1}=i,b=(0,h.A)(),B=b.palette.type==="dark"?s.A:o.A,j=b.palette.type==="dark"?"#256bf3":"#e6ffed";return(0,e.jsxs)(r.A,{position:"relative",children:[(0,e.jsx)(c.A,{customStyle:T,language:u,style:B,showLineNumbers:f,wrapLines:!0,lineNumberStyle:{color:b.palette.textVerySubtle},lineProps:N=>y?.includes(N)?{style:{backgroundColor:j}}:{},children:p}),O&&(0,e.jsx)(r.A,{position:"absolute",top:0,right:0,children:(0,e.jsx)(d.l,{text:p})})]})}},62416:(et,m,t)=>{"use strict";t.d(m,{_:()=>r});var e=t(29666);const r=(h,c)=>{e.y.isValidObjectName(h)||c.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")}},62713:(et,m,t)=>{"use strict";t.d(m,{XK:()=>z});var e=t(70984),r=t(35625),h=t(78560),c=t(89392);class s{discoveryApi;fetchApi;kubernetesAuthProvidersApi;constructor(P){this.discoveryApi=P.discoveryApi,this.fetchApi=P.fetchApi,this.kubernetesAuthProvidersApi=P.kubernetesAuthProvidersApi}async handleResponse(P){if(!P.ok){const S=await P.text();let L;switch(P.status){case 404:L="Could not find the Kubernetes Backend (HTTP 404). Make sure the plugin has been fully installed.";break;default:L=`Request failed with ${P.status} ${P.statusText}, ${S}`}throw new Error(L)}return await P.json()}async postRequired(P,S){const L=`${await this.discoveryApi.getBaseUrl("kubernetes")}${P}`,$=await this.fetchApi.fetch(L,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});return this.handleResponse($)}async getCluster(P){const S=await this.getClusters().then(L=>L.find($=>$.name===P));if(!S)throw new c.m_(`Cluster ${P} not found`);return S}async getCredentials(P,S){return await this.kubernetesAuthProvidersApi.getCredentials(P==="oidc"?`${P}.${S}`:P)}async getObjectsByEntity(P){return await this.postRequired(`/services/${P.entity.metadata.name}`,P)}async getWorkloadsByEntity(P){return await this.postRequired("/resources/workloads/query",{auth:P.auth,entityRef:(0,h.U2)(P.entity)})}async getCustomObjectsByEntity(P){return await this.postRequired("/resources/custom/query",{entityRef:(0,h.U2)(P.entity),auth:P.auth,customResources:P.customResources})}async getClusters(){const P=`${await this.discoveryApi.getBaseUrl("kubernetes")}/clusters`,S=await this.fetchApi.fetch(P);return(await this.handleResponse(S)).items}async proxy(P){const{authProvider:S,oidcTokenProvider:L}=await this.getCluster(P.clusterName),$=await this.getCredentials(S,L),K=`${await this.discoveryApi.getBaseUrl("kubernetes")}/proxy${P.path}`,J=s.getKubernetesHeaders(P,$?.token,S,L);return await this.fetchApi.fetch(K,{...P.init,headers:J})}static getKubernetesHeaders(P,S,L,$){const K=s.getKubernetesAuthHeaderByAuthProvider(L,$);return{...P.init?.headers,"Backstage-Kubernetes-Cluster":P.clusterName,...S&&{[K]:S}}}static getKubernetesAuthHeaderByAuthProvider(P,S){let L="Backstage-Kubernetes-Authorization";return L=L.concat("-",P),S&&(L=L.concat("-",S)),L}}class o{kubernetesApi;constructor(P){this.kubernetesApi=P.kubernetesApi}async handleText(P){if(!P.ok){const S=await P.text();let L;switch(P.status){default:L=`Proxy request failed with ${P.status} ${P.statusText}, ${S}`}throw new Error(L)}return await P.text()}async handleJson(P){if(!P.ok){const S=await P.text();let L=`Request failed with ${P.status} ${P.statusText}, ${S}`;switch(P.status){case 404:L=`Proxy request failed with ${P.status} ${P.statusText}, ${S}`;break;default:L=`Request failed with ${P.status} ${P.statusText}, ${S}`}throw new Error(L)}return await P.json()}async getEventsByInvolvedObjectName({clusterName:P,involvedObjectName:S,namespace:L}){return await this.kubernetesApi.proxy({clusterName:P,path:`/api/v1/namespaces/${L}/events?fieldSelector=involvedObject.name=${S}`,init:{method:"GET"}}).then($=>this.handleJson($)).then($=>$.items)}async getPodLogs({podName:P,namespace:S,clusterName:L,containerName:$,previous:K}){const J=new URLSearchParams({container:$});return K&&J.append("previous",""),await this.kubernetesApi.proxy({clusterName:L,path:`/api/v1/namespaces/${S}/pods/${P}/log?${J.toString()}`,init:{method:"GET"}}).then(ot=>this.handleText(ot)).then(ot=>({text:ot}))}async deletePod({podName:P,namespace:S,clusterName:L}){return await this.kubernetesApi.proxy({clusterName:L,path:`/api/v1/namespaces/${S}/pods/${P}`,init:{method:"DELETE"}}).then($=>this.handleText($)).then($=>({text:$}))}}class d{authProvider;constructor(P){this.authProvider=P}async decorateRequestBodyForAuth(P){const S=(await this.getCredentials()).token;return"auth"in P?P.auth.google=S:P.auth={google:S},P}async getCredentials(){return{token:await this.authProvider.getAccessToken("https://www.googleapis.com/auth/cloud-platform.read-only")}}}class g{async decorateRequestBodyForAuth(P){return P}async getCredentials(){return{}}}class i{providerName;authProvider;constructor(P,S){this.providerName=P,this.authProvider=S}async decorateRequestBodyForAuth(P){const S=(await this.getCredentials()).token,L={...P.auth};return L.oidc?L.oidc[this.providerName]=S:L.oidc={[this.providerName]:S},P.auth=L,P}async getCredentials(){return{token:await this.authProvider.getIdToken()}}}class p{constructor(P){this.microsoftAuthApi=P}async decorateRequestBodyForAuth(P){return{...P,auth:{...P.auth,aks:(await this.getCredentials()).token}}}async getCredentials(){return{token:await this.microsoftAuthApi.getAccessToken("6dae42f8-4368-4678-94ff-3960e28e3630/user.read")}}}class u{kubernetesAuthProviderMap;constructor(P){this.kubernetesAuthProviderMap=new Map,this.kubernetesAuthProviderMap.set("google",new d(P.googleAuthApi)),this.kubernetesAuthProviderMap.set("serviceAccount",new g),this.kubernetesAuthProviderMap.set("googleServiceAccount",new g),this.kubernetesAuthProviderMap.set("aws",new g),this.kubernetesAuthProviderMap.set("azure",new g),this.kubernetesAuthProviderMap.set("localKubectlProxy",new g),this.kubernetesAuthProviderMap.set("aks",new p(P.microsoftAuthApi)),P.oidcProviders&&Object.keys(P.oidcProviders).forEach(S=>{this.kubernetesAuthProviderMap.set(`oidc.${S}`,new i(S,P.oidcProviders[S]))})}async decorateRequestBodyForAuth(P,S){const L=this.kubernetesAuthProviderMap.get(P);if(L)return await L.decorateRequestBodyForAuth(S);throw P.startsWith("oidc.")?new Error(`KubernetesAuthProviders has no oidcProvider configured for ${P}`):new Error(`authProvider "${P}" has no KubernetesAuthProvider defined for it`)}async getCredentials(P){const S=this.kubernetesAuthProviderMap.get(P);if(S)return await S.getCredentials();throw P.startsWith("oidc.")?new Error(`KubernetesAuthProviders has no oidcProvider configured for ${P}`):new Error(`authProvider "${P}" has no KubernetesAuthProvider defined for it`)}}const f="https://portal.azure.com/#blade/Microsoft_Azure_ContainerService/AksK8ResourceMenuBlade/overview-Deployment/aksClusterId",y=["subscriptionId","resourceGroup","clusterName"];class T{async formatClusterLink(P){if(!P.dashboardParameters)throw new Error("AKS dashboard requires a dashboardParameters option");const S=P.dashboardParameters;for(const X of y)if(typeof S[X]!="string")throw new Error(`AKS dashboard requires a "${X}" of type string in the dashboardParameters option`);const L=`/subscriptions/${S.subscriptionId}/resourceGroups/${S.resourceGroup}/providers/Microsoft.ContainerService/managedClusters/${S.clusterName}`,{name:$,namespace:K,uid:J}=P.object.metadata,{selector:ot}=P.object.spec,At={kind:P.kind,metadata:{name:$,namespace:K,uid:J},spec:{selector:ot}};return new URL(`${f}/${encodeURIComponent(L)}/resource/${encodeURIComponent(JSON.stringify(At))}`)}}class O{async formatClusterLink(P){throw new Error("EKS formatter is not yet implemented. Please, contribute!")}}const b={deployment:"deployment",pod:"pod",ingress:"ingress",service:"service",horizontalpodautoscaler:"deployment"};class B{constructor(P){this.googleAuthApi=P}async formatClusterLink(P){if(!P.dashboardParameters)throw new Error("GKE dashboard requires a dashboardParameters option");const S=P.dashboardParameters;if(typeof S.projectId!="string")throw new Error('GKE dashboard requires a "projectId" of type string in the dashboardParameters option');if(typeof S.region!="string")throw new Error('GKE dashboard requires a "region" of type string in the dashboardParameters option');if(typeof S.clusterName!="string")throw new Error('GKE dashboard requires a "clusterName" of type string in the dashboardParameters option');const L=new URL("https://console.cloud.google.com/"),$=encodeURIComponent(S.region),K=encodeURIComponent(S.clusterName),J=encodeURIComponent(P.object.metadata?.name??""),ot=encodeURIComponent(P.object.metadata?.namespace??""),At=b[P.kind.toLocaleLowerCase("en-US")];let X;if(ot&&J&&At){const $t=["ingress","pod"].includes(At)?"details":"overview";X=`kubernetes/${At}/${$}/${K}/${ot}/${J}/${$t}`}else X=`kubernetes/clusters/details/${$}/${K}/details`;const dt=new URL(X,L);if(dt.searchParams.set("project",S.projectId),this.googleAuthApi){const xt=await this.googleAuthApi.getProfile({optional:!0});xt?.email&&dt.searchParams.set("authuser",xt.email)}return dt}}const j={deployment:"deployment",pod:"pod",ingress:"ingress",service:"service",horizontalpodautoscaler:"deployment",statefulset:"statefulset"};class N{async formatClusterLink(P){if(!P.dashboardUrl)throw new Error("standard dashboard requires a dashboardUrl option");const S=new URL(P.dashboardUrl.href),L=encodeURIComponent(P.object.metadata?.name??""),$=encodeURIComponent(P.object.metadata?.namespace??""),K=j[P.kind.toLocaleLowerCase("en-US")];return S.pathname.endsWith("/")||(S.pathname+="/"),K&&L&&$?S.hash=`/${K}/${$}/${L}`:$&&(S.hash="/workloads"),$&&(S.hash+=`?namespace=${$}`),S}}const F={deployment:"deployments",ingress:"ingresses",service:"services",horizontalpodautoscaler:"horizontalpodautoscalers",persistentvolume:"persistentvolumes"};class D{async formatClusterLink(P){if(!P.dashboardUrl)throw new Error("OpenShift dashboard requires a dashboardUrl option");const S=new URL(P.dashboardUrl.href),L=encodeURIComponent(P.object.metadata?.name??""),$=encodeURIComponent(P.object.metadata?.namespace??""),K=F[P.kind.toLocaleLowerCase("en-US")];S.pathname.endsWith("/")||(S.pathname+="/");let J="";return $?L&&K?J=`k8s/ns/${$}/${K}/${L}`:J=`k8s/cluster/projects/${$}`:K&&(J=`k8s/cluster/${K}`,L&&(J+=`/${L}`)),new URL(J,S)}}const k={deployment:"apps.deployment",ingress:"networking.k8s.io.ingress",service:"service",horizontalpodautoscaler:"autoscaling.horizontalpodautoscaler"};class G{async formatClusterLink(P){if(!P.dashboardUrl)throw new Error("Rancher dashboard requires a dashboardUrl option");const S=new URL(P.dashboardUrl.href),L=encodeURIComponent(P.object.metadata?.name??""),$=encodeURIComponent(P.object.metadata?.namespace??""),K=k[P.kind.toLocaleLowerCase("en-US")];S.pathname.endsWith("/")||(S.pathname+="/");let J="";return K&&L&&$?J=`explorer/${K}/${$}/${L}`:$&&(J="explorer/workload"),new URL(J,S)}}class I{async formatClusterLink(P){const{dashboardUrl:S,dashboardParameters:L,object:$,kind:K}=P;if(!S&&!L?.internal)throw new Error("Dashboard URL is required or dashboardInternal must be true");const J=L?.clusterName??"default",ot=this.getHeadlampPath(K,$,J);if(!ot)throw new Error(`Could not find path for kind: ${K}`);let At;if(L?.internal)At=new URL(window.location.origin),At.pathname=L.headlampRoute||"/headlamp";else{if(!S?.href)throw new Error("Dashboard URL is required when not using internal dashboard");At=new URL(S.href)}return At.searchParams.set("to",ot),At}NAMESPACED_RESOURCES=new Set(["pod","deployment","replicaset","statefulset","daemonset","job","cronjob","service","ingress","configmap","secret","serviceaccount","role","rolebinding","networkpolicy","horizontalpodautoscaler","poddisruptionbudget","persistentvolumeclaim"]);getHeadlampPath(P,S,L){const $=P.toLocaleLowerCase("en-US"),{name:K}=S.metadata??{};let{namespace:J}=S.metadata??{};if(!K)throw new Error(`Resource name is required for kind: ${P}`);if(this.NAMESPACED_RESOURCES.has($)&&!J)throw new Error(`Namespace is required for namespaced resource: ${P}`);return J||(J="default"),{namespace:`/c/${L}/namespaces/${K}`,node:`/c/${L}/nodes/${K}`,persistentvolume:`/c/${L}/storage/persistentvolumes/${K}`,persistentvolumeclaim:`/c/${L}/storage/persistentvolumeclaims/${J}/${K}`,pod:`/c/${L}/pods/${J}/${K}`,deployment:`/c/${L}/deployments/${J}/${K}`,replicaset:`/c/${L}/replicasets/${J}/${K}`,statefulset:`/c/${L}/statefulsets/${J}/${K}`,daemonset:`/c/${L}/daemonsets/${J}/${K}`,job:`/c/${L}/jobs/${J}/${K}`,cronjob:`/c/${L}/cronjobs/${J}/${K}`,service:`/c/${L}/services/${J}/${K}`,ingress:`/c/${L}/ingresses/${J}/${K}`,configmap:`/c/${L}/configmaps/${J}/${K}`,secret:`/c/${L}/secrets/${J}/${K}`,serviceaccount:`/c/${L}/serviceaccounts/${J}/${K}`,role:`/c/${L}/roles/${J}/${K}`,rolebinding:`/c/${L}/rolebindings/${J}/${K}`,clusterrole:`/c/${L}/clusterroles/${K}`,clusterrolebinding:`/c/${L}/clusterrolebindings/${K}`,storageclass:`/c/${L}/storage/storageclasses/${K}`,networkpolicy:`/c/${L}/networkpolicies/${J}/${K}`,horizontalpodautoscaler:`/c/${L}/horizontalpodautoscalers/${J}/${K}`,poddisruptionbudget:`/c/${L}/poddisruptionbudgets/${J}/${K}`,customresourcedefinition:`/c/${L}/customresourcedefinitions/${K}`}[$]??""}}const tt="standard";function H(U){return{standard:new N,aks:new T,eks:new O,gke:new B(U.googleAuthApi),openshift:new D,rancher:new G,headlamp:new I}}class V{formatters;defaultFormatterName;constructor(P){this.formatters=P.formatters,this.defaultFormatterName=P.defaultFormatterName}async formatClusterLink(P){if(!P.dashboardUrl&&!P.dashboardParameters)return;if(P.dashboardUrl&&!P.object)return P.dashboardUrl;const S=P.dashboardApp??this.defaultFormatterName,L=this.formatters[S];if(!L)throw new Error(`Could not find Kubernetes dashboard app named '${S}'`);return(await L.formatClusterLink({dashboardUrl:P.dashboardUrl?new URL(P.dashboardUrl):void 0,dashboardParameters:P.dashboardParameters,object:P.object,kind:P.kind})).toString()}}var q=t(77555),it=t(50809),ct=t(45843),Q=t(61617),lt=t(95159),st=t(33129),mt=t(18050);const rt=(0,q.H)({id:"kubernetes"}),z=(0,it.i)({id:"kubernetes",apis:[(0,ct.b)({api:e.Y1,deps:{discoveryApi:Q.I,fetchApi:lt.a,kubernetesAuthProvidersApi:r.g},factory:({discoveryApi:U,fetchApi:P,kubernetesAuthProvidersApi:S})=>new s({discoveryApi:U,fetchApi:P,kubernetesAuthProvidersApi:S})}),(0,ct.b)({api:e.uv,deps:{kubernetesApi:e.Y1},factory:({kubernetesApi:U})=>new o({kubernetesApi:U})}),(0,ct.b)({api:r.g,deps:{gitlabAuthApi:st.$7,googleAuthApi:st.Vk,microsoftAuthApi:st.u0,oktaAuthApi:st.Zj,oneloginAuthApi:st.zk},factory:({gitlabAuthApi:U,googleAuthApi:P,microsoftAuthApi:S,oktaAuthApi:L,oneloginAuthApi:$})=>{const K={gitlab:U,google:P,microsoft:S,okta:L,onelogin:$};return new u({microsoftAuthApi:S,googleAuthApi:P,oidcProviders:K})}}),(0,ct.b)({api:e.Y$,deps:{googleAuthApi:st.Vk},factory:U=>{const P=H(U);return new V({formatters:P,defaultFormatterName:tt})}})],routes:{entityContent:rt}}).provide((0,mt.QJ)({name:"EntityKubernetesContent",component:()=>Promise.resolve().then(t.bind(t,11835)).then(U=>U.Router),mountPoint:rt}))},62905:(et,m,t)=>{"use strict";t.d(m,{k:()=>p});var e=t(31085),r=t(14041),h=t(93285),c=t(18690),s=t(21613),o=t(16454),d=t(44390),g=t(75202);function i(u){const f=(0,c.g)(),T=u.map(({path:N,children:F})=>({caseSensitive:!1,path:`${N}/*`,element:F})).sort((N,F)=>F.path.replace(/\/\*$/,"").localeCompare(N.path.replace(/\/\*$/,""))),O=(0,c.Ye)(T)??u[0]?.children;let b=f["*"]??"";b.startsWith("/")||(b=`/${b}`);const[B]=(0,s.ue)(T,b)??[],j=B?u.findIndex(N=>`${N.path}/*`===B.route.path):0;return{index:j===-1?0:j,element:O,route:u[j]??u[0]}}function p(u){const{routes:f}=u,{index:y,route:T,element:O}=i(f),b=(0,r.useMemo)(()=>f.map(B=>{const{path:j,title:N,tabProps:F}=B;let D=j;return D=D.replace(/\/\*$/,""),D=D.replace(/^\//,""),{id:j,label:N,tabProps:{component:g.N_,to:D,...F}}}),[f]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(d.o,{tabs:b,selectedIndex:y}),(0,e.jsxs)(o.U,{children:[(0,e.jsx)(h.m,{title:T?.title}),O]})]})}},62958:(et,m,t)=>{"use strict";t.d(m,{q0:()=>N});var e=t(31085),r=t(73466),h=t(45250),c=t.n(h),s=t(65995),o=t(96872),d=t(99424),g=t(18139),i=t(19224),p=t(20570),u=t(87437),f=t(39896),y=t(10265),T=t(92469);const O=F=>{const{children:D}=F,k=(0,u.SQ)(),{result:G,...I}=k;return D(G,I)},b=F=>{const{query:D,children:k}=F,G=(0,g.gf)(p.y),I=(0,r.A)(()=>{const{term:tt="",types:H=[],filters:V={},...q}=D;return G.query({...q,term:tt,types:H,filters:V})},[D]);return k(I,D)},B=F=>{const{query:D,children:k}=F;return D?(0,e.jsx)(b,{query:D,children:k}):(0,e.jsx)(O,{children:k})},j=F=>{const{t:D}=(0,y.i)(T._),{query:k,children:G,noResultsComponent:I=(0,e.jsx)(s.p,{missing:"data",title:D("noResultsDescription")}),...tt}=F;return(0,e.jsx)(B,{query:k,children:({loading:H,error:V,value:q})=>H?(0,e.jsx)(o.k,{}):V?(0,e.jsx)(d._,{title:"Error encountered while fetching search results",error:V}):q?.results.length?(0,h.isFunction)(G)?G(q):(0,e.jsx)(f.z$,{...tt,results:q.results,children:G}):I})},N=F=>(0,e.jsx)(i.I,{attributes:{pluginId:"search",extension:"SearchResult"},children:(0,e.jsx)(j,{...F})})},63163:(et,m,t)=>{"use strict";t.d(m,{z:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.scaffolder.service"})},63374:(et,m,t)=>{"use strict";t.d(m,{M:()=>h});var e=t(81308);const h=(0,e._)({output:c=>c.string()}).schema},63653:(et,m,t)=>{"use strict";t.d(m,{h:()=>c});var e=t(81308),r=t(95201);const c=(0,e._)({output:s=>s.string(),uiOptions:s=>s.object({allowedKinds:s.array(s.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:s.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:s.union([s.string(),s.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:(o=>o.or(o.array()))((0,r.Vy)(s)).optional().describe("List of key-value filter expression for entities")})}).schema},63958:(et,m,t)=>{"use strict";t.d(m,{Gr:()=>St});var e=t(50809),r=t(11618),h=t(15246),c=t(31085),s=t(14041),o=t(87881),d=t(7031),g=t(64947),i=t(63798),p=t(6924),u=t(85639);const f=".md-nav__item--nested .md-toggle",y="@backstage/techdocs-addons/nav-expanded",T=(0,d.A)({root:{position:"absolute",left:"13.7rem",top:"19px",zIndex:2,padding:0,minWidth:0}})(g.A),O=(0,d.A)({root:{height:"20px",width:"20px"}})(i.A),b=(0,d.A)({root:{height:"20px",width:"20px"}})(p.A),B=()=>{const Dt={expandAllNestedNavs:!1},{value:Ft,set:Yt}=(0,o.t)(y,{defaultValue:Dt}),[Et,at]=(0,s.useState)(!1),[...yt]=(0,u.$r)([f]),Ot=(0,s.useCallback)(Mt=>{const W=Mt.checked,x=Ft?.expandAllNestedNavs;return!!(x&&!W||!x&&W)},[Ft]);(0,s.useEffect)(()=>{yt?.length&&(at(!0),yt.forEach(Mt=>{Ot(Mt)&&Mt.click()}))},[Ft,Ot,yt]);const bt=()=>{Yt(Mt=>({expandAllNestedNavs:!Mt?.expandAllNestedNavs}))};return(0,c.jsx)(c.Fragment,{children:Et?(0,c.jsx)(T,{size:"small",onClick:bt,"aria-label":Ft?.expandAllNestedNavs?"collapse-nav":"expand-nav",children:Ft?.expandAllNestedNavs?(0,c.jsx)(b,{}):(0,c.jsx)(O,{})}):null})};var j=t(52536),N=t.n(j),F=t(18139),D=t(54195),k=t(58167),G=t(85911),I=t(56004);const tt="techdocs-report-issue",H=`#${tt}`,V=["github","gitlab"],q='[title^="Edit this page"]',it='[title^="Leave feedback for"]',ct='[data-md-component="main"] .md-content',Q=(Dt,Ft)=>Ft==="github"?(0,k.F)(Dt,"blob"):Ft==="gitlab"?(0,G.B)(Dt,"blob"):(console.error(`Invalid SCM type ${Ft} found in ReportIssue addon for URL ${Dt}!`),Dt),lt=Dt=>{const Ft=Dt.toString().substring(0,70),Yt=Ft.length===70?"...":"";return`Documentation feedback: ${Ft}${Yt}`},st=(Dt,Ft,Yt)=>{const Et="## Documentation Feedback \u{1F4DD}",at="#### The highlighted text:",yt="#### The comment on the text:",Ot="_>replace this line with your comment<_",bt=Dt.toString().trim().split(`
`).map(W=>`> ${W.trim()}`).join(`
`),Mt=[`${Yt} URL: <${window.location.href}> 
Markdown URL: <${Ft}>`];return`${Et}

 ${at} 

 ${bt}

 ${yt} 
 ${Ot}

 ___
${Mt}`},mt=Dt=>{const Ft={title:"",body:""},Yt=(0,u.k0)(Dt),[Et]=(0,u.$r)([q]),at=Et?.href??"",yt=(0,F.gf)(I.Y),bt=(0,F.gf)(D.U).getOptionalString("app.title")||"Backstage";if(!Yt||!at)return Ft;const Mt=yt.byUrl(at)?.type;return Mt?{title:lt(Yt),body:st(Yt,Q(at,Mt),bt)}:Ft},rt=()=>{const Dt=(0,F.gf)(I.Y),[Ft]=(0,u.$r)([q]),Yt=Ft?.href??"";if(!Yt)return null;const Et=Dt.byUrl(Yt)?.type;return Et?{...N()(Q(Yt,Et)),type:Et}:null};var nt=t(58837),z=t(41883),U=t(4321),P=t(85005),S=t(92483),L=t(75202);const $=(0,nt.A)(Dt=>({root:{display:"grid",gridGap:Dt.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Dt.palette.common.black,fontSize:Dt.typography.button.fontSize}})),K=({type:Dt})=>Dt==="github"?S.Hk:P.A,J=({type:Dt})=>Dt.charAt(0).toLocaleUpperCase("en-US")+Dt.slice(1),ot=(Dt,Ft)=>{const{title:Yt,body:Et}=Ft,at=encodeURIComponent(Yt),yt=encodeURIComponent(Et),{protocol:Ot,resource:bt,owner:Mt,name:W,type:x}=Dt,M=`${Ot}://${bt}/${Mt}/${W}`,_=encodeURI(M);return x==="github"?`${_}/issues/new?title=${at}&body=${yt}`:`${_}/issues/new?issue[title]=${at}&issue[description]=${yt}`},At=({template:Dt,repository:Ft})=>{const Yt=$(),Et=K(Ft),at=ot(Ft,Dt);return(0,c.jsxs)(L.N_,{className:Yt.root,to:at,target:"_blank",children:[(0,c.jsx)(Et,{})," Open new ",J(Ft)," issue"]})},X=(0,nt.A)(Dt=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Dt.spacing(1),zIndex:Dt.zIndex.tooltip,background:Dt.palette.common.white}})),dt=({debounceTime:Dt,templateBuilder:Ft,repository:Yt})=>{const Et=X(),[at,yt]=(0,s.useState)(),Ot=mt(Dt),bt=(0,u.k0)(Dt),[Mt,W]=(0,u.$r)([ct,it]);let[x]=(0,u.$r)([H]);return W&&(W.style.display="none"),(0,s.useEffect)(()=>{if(!bt||!bt.containsNode(Mt,!0)||bt.containsNode(x,!0))return;const M=Mt.getBoundingClientRect(),_=bt.getRangeAt(0).getBoundingClientRect(),Pt=_.top-M.top,Bt=50;let Vt=Pt<Bt?101:Pt-16;if(M.top<0){const Gt=Math.abs(M.top);Pt-Gt<Bt&&(Vt+=89)}yt({top:`${Vt}px`,left:`${_.left+_.width/2}px`})},[bt,Mt,x]),x||(x=document.createElement("div"),x.setAttribute("id",tt),Mt.prepend(x)),!bt||!bt.containsNode(Mt,!0)?null:(0,c.jsx)(z.A,{container:x,children:(0,c.jsx)(U.A,{"data-testid":"report-issue-addon",className:Et.root,style:at,children:(0,c.jsx)(At,{repository:Yt,template:Ft?Ft({selection:bt}):Ot})})})},xt=({debounceTime:Dt=500,templateBuilder:Ft})=>{const Yt=rt();return!Yt||!V.includes(Yt.type)?null:(0,c.jsx)(dt,{debounceTime:Dt,templateBuilder:Ft,repository:Yt})};var $t=t(33466),wt=t(54917),_t=t(26343),Ut=t(5951),zt=t(72501),Xt=t(77125),se=t(29365),re=t(18466),ce=t(80113);const te="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",ie=(0,d.A)(Dt=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Dt.palette.common.white,boxShadow:te,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:te}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Dt.palette.textSubtle,fontSize:Dt.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))($t.A),me={key:"techdocs.addons.settings.textsize",defaultValue:100},ee=[{value:90},{value:100},{value:115},{value:130},{value:150}],Wt=(0,nt.A)(Dt=>({container:{color:Dt.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Dt.spacing(1)},increaseButton:{marginLeft:Dt.spacing(1)}})),jt=()=>{const Dt=Wt(),Ft=(0,wt.A)(),[Yt]=(0,u.$r)(["body"]),[Et,at]=(0,s.useState)(()=>{const Pt=localStorage?.getItem(me.key);return Pt?parseInt(Pt,10):me.defaultValue}),yt=(0,s.useMemo)(()=>ee.map(Pt=>Pt.value),[]),Ot=(0,s.useMemo)(()=>yt.indexOf(Et),[yt,Et]),bt=(0,s.useMemo)(()=>yt[0],[yt]),Mt=(0,s.useMemo)(()=>yt[yt.length-1],[yt]),W=(0,s.useCallback)(()=>`${Et}%`,[Et]),x=(0,s.useCallback)((Pt,Bt)=>{Array.isArray(Bt)||(at(Bt),localStorage?.setItem(me.key,String(Bt)))},[at]),M=(0,s.useCallback)(Pt=>{x(Pt,yt[Ot-1])},[Ot,yt,x]),_=(0,s.useCallback)(Pt=>{x(Pt,yt[Ot+1])},[Ot,yt,x]);return(0,s.useEffect)(()=>{if(!Yt)return;const Pt=Ft.typography?.htmlFontSize??16;Yt.style.setProperty("--md-typeset-font-size",`${Pt*(Et/100)}px`)},[Yt,Et,Ft]),(0,c.jsx)(_t.A,{className:Dt.menuItem,button:!0,disableRipple:!0,children:(0,c.jsx)(Ut.A,{primary:(0,c.jsx)(zt.A,{variant:"subtitle2",color:"textPrimary",children:"Text size"}),secondary:(0,c.jsxs)(Xt.A,{className:Dt.container,children:[(0,c.jsx)(se.A,{className:Dt.decreaseButton,size:"small",edge:"start",disabled:Et===bt,onClick:M,"aria-label":"Decrease text size",children:(0,c.jsx)(ce.A,{})}),(0,c.jsx)(ie,{value:Et,"aria-labelledby":"text-size-slider",getAriaValueText:W,valueLabelDisplay:"on",valueLabelFormat:W,marks:ee,step:null,min:bt,max:Mt,onChangeCommitted:x}),(0,c.jsx)(se.A,{className:Dt.increaseButton,size:"small",edge:"end",disabled:Et===Mt,onClick:_,"aria-label":"Increase text size",children:(0,c.jsx)(re.A,{})})]}),disableTypography:!0})})};var pt=t(10527),Y=t(60367);const ft=()=>{const Dt=(0,u.$r)(["img"]);return(0,s.useEffect)(()=>{let Ft=null,Yt=new pt.A({pswpModule:Y.A,initialZoomLevel:1,secondaryZoomLevel:Et=>{const at=Et.elementSize.x,yt=Et.elementSize.y,Ot=Et.panAreaSize.x,bt=Et.panAreaSize.y,Mt=Ot/at,W=bt/yt;return Math.min(Mt,W)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return Dt.forEach((Et,at)=>{Et.onclick=()=>(Ft===null&&(Ft=Dt.map(yt=>({element:yt,src:yt.src,msrc:yt.src,alt:yt.alt,width:yt.clientWidth,height:yt.clientHeight}))),Yt?.loadAndOpen(at,Ft),!1)}),Yt.init(),()=>{Yt?.destroy(),Yt=null}},[Dt]),null},Tt=(0,e.i)({id:"techdocsModuleAddonsContrib"}),Lt=Tt.provide((0,r.Hr)({name:"ExpandableNavigation",location:h.e.PrimarySidebar,component:B})),St=Tt.provide((0,r.Hr)({name:"ReportIssue",location:h.e.Content,component:xt})),Ht=Tt.provide((0,r.Hr)({name:"TextSize",location:h.e.Settings,component:jt})),kt=Tt.provide((0,r.Hr)({name:"LightBox",location:h.e.Content,component:ft}))},64392:(et,m,t)=>{"use strict";t.d(m,{o_:()=>B,$j:()=>N,Wj:()=>F,IP:()=>D,Ju:()=>O});var e=t(49707),r=t(71834),h=t(89392),c=t(92110);class s{configApi;discoveryApi;fetchApi;constructor(G){this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.fetchApi=G.fetchApi}async getCookie(){const I=`${await this.getApiOrigin()}/cookie`,tt=await this.fetchApi.fetch(`${I}`,{credentials:"include"});if(!tt.ok)throw await r.o.fromResponse(tt);return await tt.json()}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(G){const{kind:I,namespace:tt,name:H}=G,q=`${await this.getApiOrigin()}/metadata/techdocs/${tt}/${I}/${H}`,it=await this.fetchApi.fetch(`${q}`);if(!it.ok)throw await r.o.fromResponse(it);return await it.json()}async getEntityMetadata(G){const{kind:I,namespace:tt,name:H}=G,q=`${await this.getApiOrigin()}/metadata/entity/${tt}/${I}/${H}`,it=await this.fetchApi.fetch(`${q}`);if(!it.ok)throw await r.o.fromResponse(it);return await it.json()}}class o{configApi;discoveryApi;fetchApi;constructor(G){this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.fetchApi=G.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){return this.configApi.getOptionalString("techdocs.storageUrl")??`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getOptionalString("techdocs.builder")||"local"}async getEntityDocs(G,I){const{kind:tt,namespace:H,name:V}=G,it=`${await this.getStorageUrl()}/${H}/${tt}/${V}/${I}`,ct=await this.fetchApi.fetch(`${it.endsWith("/")?it:`${it}/`}index.html`);let Q="";switch(ct.status){case 404:throw Q="Page not found. ",I||(Q+="This could be because there is no index.md file in the root of the docs directory of this repository."),new h.m_(Q);case 500:throw Q="Could not generate documentation or an error in the TechDocs backend. ",new Error(Q)}return ct.text()}async syncEntityDocs(G,I=()=>{}){const{kind:tt,namespace:H,name:V}=G,it=`${await this.getApiOrigin()}/sync/${H}/${tt}/${V}`;return new Promise((ct,Q)=>{const lt=new AbortController;(0,c.y)(it,{fetch:this.fetchApi.fetch,signal:lt.signal,onmessage(st){if(st.event==="log")st.data&&I(JSON.parse(st.data));else if(st.event==="finish"){let mt=!1;st.data&&({updated:mt}=JSON.parse(st.data)),ct(mt?"updated":"cached")}else st.event==="error"&&Q(new Error(st.data))},onerror(st){throw lt.abort(),Q(st),st}})})}async getBaseUrl(G,I,tt){const{kind:H,namespace:V,name:q}=I,ct=`${await this.getApiOrigin()}/static/docs/${V}/${H}/${q}/${tt}`;return new URL(G,ct.endsWith("/")?ct:`${ct}/`).toString()}}var d=t(17749),g=t(50809),i=t(45843),p=t(54195),u=t(61617),f=t(95159),y=t(18050),T=t(39896);const O=(0,g.i)({id:"techdocs",apis:[(0,i.b)({api:e.s,deps:{configApi:p.U,discoveryApi:u.I,fetchApi:f.a},factory:({configApi:k,discoveryApi:G,fetchApi:I})=>new o({configApi:k,discoveryApi:G,fetchApi:I})}),(0,i.b)({api:e.l,deps:{configApi:p.U,discoveryApi:u.I,fetchApi:f.a},factory:({configApi:k,discoveryApi:G,fetchApi:I})=>new s({configApi:k,discoveryApi:G,fetchApi:I})})],routes:{root:d.rQ,docRoot:d.Oc,entityContent:d.Ri}}),b=O.provide((0,y.QJ)({name:"TechdocsPage",component:()=>Promise.all([t.e(7248),t.e(3402),t.e(4987)]).then(t.bind(t,74987)).then(k=>k.Router),mountPoint:d.rQ})),B=O.provide((0,y.QJ)({name:"EntityTechdocsContent",component:()=>Promise.all([t.e(7248),t.e(3402),t.e(4987)]).then(t.bind(t,74987)).then(k=>k.LegacyEmbeddedDocsRouter),mountPoint:d.Ri})),j=O.provide((0,y.QJ)({name:"TechDocsCustomHome",component:()=>Promise.all([t.e(7248),t.e(472)]).then(t.bind(t,30472)).then(k=>k.TechDocsCustomHome),mountPoint:d.rQ})),N=O.provide((0,y.QJ)({name:"TechDocsIndexPage",component:()=>Promise.all([t.e(7248),t.e(7640)]).then(t.bind(t,47640)).then(k=>k.TechDocsIndexPage),mountPoint:d.rQ})),F=O.provide((0,y.QJ)({name:"TechDocsReaderPage",component:()=>Promise.all([t.e(3402),t.e(8942)]).then(t.bind(t,88942)).then(k=>k.TechDocsReaderPage),mountPoint:d.Oc})),D=O.provide((0,T.ec)({name:"TechDocsSearchResultListItem",component:()=>t.e(1472).then(t.bind(t,41472)).then(k=>k.TechDocsSearchResultListItem),predicate:k=>k.type==="techdocs"}))},64398:(et,m,t)=>{"use strict";t.d(m,{S:()=>i});var e=t(31085),r=t(42899),h=t(58837),c=t(268),s=t(72501),o=t(75202);const d=(0,h.A)(p=>({root:{textAlign:"left"},label:{color:p.page.fontColor,fontWeight:p.typography.fontWeightBold,letterSpacing:0,fontSize:p.typography.fontSize,marginBottom:p.spacing(1)/2,lineHeight:1},value:{color:(0,c.X4)(p.page.fontColor,.8),fontSize:p.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),g=({value:p,className:u,typographyRootComponent:f})=>(0,e.jsx)(s.A,{component:f??(typeof p=="string"?"p":"span"),className:u,children:p});function i(p){const{label:u,value:f,url:y,contentTypograpyRootComponent:T}=p,O=d(),b=(0,e.jsx)(g,{className:O.value,value:f||"<Unknown>",typographyRootComponent:T});return(0,e.jsx)(r.A,{item:!0,children:(0,e.jsxs)(s.A,{component:"span",className:O.root,children:[(0,e.jsx)(s.A,{className:O.label,children:u}),y?(0,e.jsx)(o.N_,{to:y,children:b}):b]})})}},65901:(et,m,t)=>{"use strict";t.d(m,{Ut:()=>i,qj:()=>g});var e=t(31085),r=t(54852),h=t(4790),c=t(14041);const s={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},o=(0,c.createContext)(s),d=(0,r.tK)("sidebar-pin-state-context");function g(p){const{children:u,value:f}=p;return(0,e.jsx)(o.Provider,{value:f,children:(0,e.jsx)(d.Provider,{value:(0,h.B)({1:f}),children:u})})}const i=()=>{const p=(0,c.useContext)(d),u=(0,c.useContext)(o);if(p===void 0)return u||s;const f=p.atVersion(1);if(f===void 0)throw new Error("No context found for version 1.");return f}},65995:(et,m,t)=>{"use strict";t.d(m,{p:()=>f});var e=t(31085),r=t(42899),h=t(58837),c=t(72501);const s=t.p+"static/missingAnnotation.67f79e98.svg",o=t.p+"static/noInformation.4b426325.svg",d=t.p+"static/createComponent.975d1e1e.svg",g=t.p+"static/noBuild.1715fa71.svg",i=(0,h.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),p=({missing:y})=>{const T=i();switch(y){case"field":return(0,e.jsx)("img",{src:s,className:T.generalImg,alt:"annotation is missing"});case"info":return(0,e.jsx)("img",{src:o,alt:"no Information",className:T.generalImg});case"content":return(0,e.jsx)("img",{src:d,alt:"create Component",className:T.generalImg});case"data":return(0,e.jsx)("img",{src:g,alt:"no Build",className:T.generalImg});default:return null}},u=(0,h.A)(y=>({root:{backgroundColor:y.palette.background.default,padding:y.spacing(2,0,0,0)},action:{marginTop:y.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function f(y){const{title:T,description:O,missing:b,action:B}=y,j=u();return(0,e.jsxs)(r.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:j.root,spacing:2,children:[(0,e.jsx)(r.A,{item:!0,xs:12,md:6,children:(0,e.jsxs)(r.A,{container:!0,direction:"column",children:[(0,e.jsx)(r.A,{item:!0,xs:!0,children:(0,e.jsx)(c.A,{variant:"h5",children:T})}),(0,e.jsx)(r.A,{item:!0,xs:!0,children:(0,e.jsx)(c.A,{variant:"body1",children:O})}),(0,e.jsx)(r.A,{item:!0,xs:!0,className:j.action,children:B})]})}),(0,e.jsx)(r.A,{item:!0,xs:12,md:6,className:j.imageContainer,children:typeof b=="string"?(0,e.jsx)(p,{missing:b}):b.customImage})]})}},66670:(et,m,t)=>{"use strict";t.d(m,{t:()=>i});var e=t(31085),r=t(72501),h=t(14041),c=t(87318),s=t(12554),o=t(89475),d=t(10265);const g=p=>{const{slackChannel:u}=p,{t:f}=(0,d.i)(o.O);if(u){if(typeof u=="string")return(0,e.jsx)(r.A,{children:f("errorBoundary.title",{slackChannel:u})});if(!u.href)return(0,e.jsx)(r.A,{children:f("errorBoundary.title",{slackChannel:u.name})})}else return null;return(0,e.jsx)(c.z,{to:u.href,variant:"contained",children:u.name})},i=class extends h.Component{constructor(u){super(u),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(u,f){console.error(`ErrorBoundary, error: ${u}`,{error:u,errorInfo:f}),this.setState({error:u,errorInfo:f})}render(){const{slackChannel:u,children:f}=this.props,{error:y}=this.state;return y?(0,e.jsx)(s.b,{title:"Something Went Wrong",error:y,children:(0,e.jsx)(g,{slackChannel:u})}):f}}},66839:(et,m,t)=>{"use strict";t.d(m,{R:()=>b,V:()=>B});var e=t(31085),r=t(14041),h=t(73466),c=t(28966),s=t(78560),o=t(54852),d=t(4790),g=t(18139),i=t(54195),p=t(19224),u=t(49707);function f(j,N){return N.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(j.kind=j.kind.toLocaleLowerCase(),j.name=j.name.toLocaleLowerCase(),j.namespace=j.namespace.toLocaleLowerCase()),j}const y=(j,N)=>(0,s.U2)(j)===(0,s.U2)(N),T={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},O=(0,o.tK)("techdocs-reader-page-context"),b=(0,r.memo)(j=>{const{entityRef:N,children:F}=j,D=(0,g.gf)(u.l),k=(0,g.gf)(i.U),G=(0,h.A)(async()=>D.getEntityMetadata(N),[N]),I=(0,c.A)(async()=>D.getTechDocsMetadata(N),[N]),[tt,H]=(0,r.useState)(T.title),[V,q]=(0,r.useState)(T.subtitle),[it,ct]=(0,r.useState)(T.shadowRoot);(0,r.useEffect)(()=>{it&&!I.value&&!I.loading&&I.retry()},[I.value,I.loading,it,I.retry,I]);const Q={metadata:I,entityRef:f(N,k),entityMetadata:G,shadowRoot:it,setShadowRoot:ct,title:tt,setTitle:H,subtitle:V,setSubtitle:q},lt=(0,d.B)({1:Q});return(0,e.jsx)(p.I,{attributes:{entityRef:(0,s.U2)(N)},children:(0,e.jsx)(O.Provider,{value:lt,children:F instanceof Function?F(Q):F})})},(j,N)=>y(j.entityRef,N.entityRef)),B=()=>{const j=(0,r.useContext)(O);if(j===void 0)return T;const N=j.atVersion(1);if(N===void 0)throw new Error("No context found for version 1.");return N}},67296:(et,m,t)=>{"use strict";t.d(m,{r:()=>s});var e=t(31085),r=t(14041),h=t(95208);const c=(0,r.lazy)(()=>t.e(3810).then(t.bind(t,13810)).then(o=>({default:o.RealLogViewer})));function s(o){const{Progress:d}=(0,h.n)().getComponents();return(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(d,{}),children:(0,e.jsx)(c,{...o})})}},67457:(et,m,t)=>{"use strict";t.d(m,{b:()=>e,t:()=>r});function e(h){if(typeof h!="object"||h===null||Array.isArray(h))return!1;const c=h;return!(typeof c.name!="string"||c.name===""||typeof c.message!="string")}function r(h){if(typeof h!="object"||h===null||Array.isArray(h))throw new Error(`Encountered invalid error, not an object, got '${h}'`);const c=h;if(typeof c.name!="string"||c.name==="")throw new Error(`Encountered error object without a name, got '${h}'`);if(typeof c.message!="string")throw new Error(`Encountered error object without a message, got '${h}'`)}},67562:(et,m,t)=>{"use strict";t.d(m,{t:()=>nt});var e=t(31085),r=t(14041),h=t(95479),c=t.n(h),s=t(72501),o=t(58007),d=t(8109),g=t(99703),i=t(7031),p=t(61009),u=t(13677),f=t(54801),y=t(9719);const T=z=>(0,g.A)({root:{fontWeight:z.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:z.spacing(4),border:"0",verticalAlign:"top"}}),O={root:{border:"0",verticalAlign:"top"}},b=z=>(0,g.A)({root:{margin:z.spacing(0,0,-1,0)}}),B=z=>(0,g.A)({root:{padding:z.spacing(0,0,1,0)},random:{}}),j=(0,i.A)(T,{name:"BackstageMetadataTableTitleCell"})(f.A),N=(0,i.A)(O,{name:"BackstageMetadataTableCell"})(f.A),F=({dense:z,children:U})=>(0,e.jsx)(p.A,{size:z?"small":"medium",children:(0,e.jsx)(u.A,{children:U})}),D=({title:z,children:U,...P})=>(0,e.jsxs)(y.A,{children:[z&&(0,e.jsx)(j,{children:z}),(0,e.jsx)(N,{colSpan:z?1:2,...P,children:U})]}),k=(0,i.A)(b,{name:"BackstageMetadataTableList"})(({classes:z,children:U})=>(0,e.jsx)(o.A,{disablePadding:!0,className:z.root,children:U})),G=(0,i.A)(B,{name:"BackstageMetadataTableListItem"})(({classes:z,children:U})=>(0,e.jsx)(d.A,{className:z.root,children:U}));var I=t(62112),tt=t(9911);const H=(0,g.A)({root:{margin:"0 0",listStyleType:"none"}}),V=z=>(0,g.A)({root:{...H.root,paddingLeft:z.spacing(1)}}),q=(0,i.A)(H,{name:"BackstageStructuredMetadataTableList"})(({classes:z,children:U})=>(0,e.jsx)(k,{classes:z,children:U})),it=(0,i.A)(V,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:z,children:U})=>(0,e.jsx)(k,{classes:z,children:U}));function ct(z,U,P){const S=z.map((L,$)=>(0,e.jsx)(G,{children:lt(L,U,P)},$));return P?(0,e.jsx)(it,{children:S}):(0,e.jsx)(q,{children:S})}function Q(z,U,P){const S=Object.keys(z).map(L=>{const $=lt(z[L],U,!0);return(0,e.jsxs)(G,{children:[(0,e.jsx)(s.A,{variant:"body2",component:"span",children:`${U.titleFormat(L)}: `}),$]},L)});return P?(0,e.jsx)(it,{children:S}):(0,e.jsx)(q,{children:S})}function lt(z,U,P){if((0,r.isValidElement)(z))return(0,e.jsx)(r.Fragment,{children:z});if(z!==null&&typeof z=="object"){if(U.nestedValuesAsYaml)return(0,e.jsx)(I.z,{language:"yaml",text:tt.Ay.dump(z),customStyle:{background:"transparent",lineHeight:"1.4",padding:"0",margin:0}});if(!Array.isArray(z))return Q(z,U,P)}return Array.isArray(z)?ct(z,U,P):typeof z=="boolean"?(0,e.jsx)(r.Fragment,{children:z?"\u2705":"\u274C"}):(0,e.jsx)(s.A,{variant:"body2",component:"span",children:z})}const st=({value:z,options:U})=>(0,e.jsx)(r.Fragment,{children:lt(z,U,!1)}),mt=({title:z,value:U,options:P})=>(0,e.jsx)(D,{title:P.titleFormat(z),children:(0,e.jsx)(st,{value:U,options:P})});function rt(z,U){return Object.keys(z).map(P=>(0,e.jsx)(mt,{title:P,value:z[P],options:U},P))}function nt(z){const{metadata:U,dense:P=!0,options:S}=z,L=rt(U,{titleFormat:c(),nestedValuesAsYaml:S?.nestedValuesAsYaml??!1,...S});return(0,e.jsx)(F,{dense:P,children:L})}},68541:(et,m,t)=>{"use strict";t.d(m,{Q:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.apptheme"})},70209:(et,m,t)=>{"use strict";t.d(m,{l:()=>o});var e=t(18139),r=t(54195),h=t(89475),c=t(10265);const s=()=>{const{t:d}=(0,c.i)(h.O);return{url:"https://github.com/backstage/backstage/issues",items:[{title:d("supportConfig.default.title"),icon:"warning",links:[{title:d("supportConfig.default.linkTitle"),url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]}};function o(){const i=(0,e.Q2)().get(r.U)?.getOptionalConfig("app.support"),p=s();return i?{url:i.getString("url"),items:i.getConfigArray("items").flatMap(u=>({title:u.getString("title"),icon:u.getOptionalString("icon"),links:(u.getOptionalConfigArray("links")??[]).flatMap(f=>({url:f.getString("url"),title:f.getOptionalString("title")??""}))}))}:p}},70944:(et,m,t)=>{"use strict";t.d(m,{k:()=>b,s:()=>O});var e=t(31085),r=t(78560),h=t(30043),c=t(16400),s=t(37281),o=t(77125),d=t(99424);const g="backstage.io/catalog-processing";var i=t(18139),p=t(73466),u=t(58045),f=t(10265);const y=B=>B.error&&B.level==="error"&&B.type===g;async function T(B,j){return{items:(await j.getEntityAncestors({entityRef:B})).items.map(D=>({errors:(D.entity.status?.items??[]).filter(y).map(I=>I.error).filter(I=>!!I),entity:D.entity})).filter(D=>D.errors.length>0)}}async function O(B,j){const N=j.apis.get(h.v);if(!N)throw new Error(`No implementation available for ${h.v}`);return(await T((0,r.U2)(B),N)).items.length>0}function b(){const{entity:B}=(0,c.tN)(),j=(0,r.U2)(B),N=(0,i.gf)(h.v),{loading:F,error:D,value:k}=(0,p.A)(async()=>T(j,N),[j,N]),{t:G}=(0,f.i)(u.W);return D?(0,e.jsx)(o.A,{mb:1,children:(0,e.jsx)(d._,{error:D})}):F||!k?null:(0,e.jsx)(e.Fragment,{children:k.items.map((I,tt)=>(0,e.jsxs)(o.A,{mb:1,children:[(0,r.U2)(B)!==(0,r.U2)(I.entity)&&(0,e.jsxs)(o.A,{p:1,children:[G("entityProcessingErrorsDescription")," ",(0,e.jsx)(s.z,{entityRef:I.entity})]}),I.errors.map((H,V)=>(0,e.jsx)(d._,{error:H},V))]},tt))})}},70984:(et,m,t)=>{"use strict";t.d(m,{Y$:()=>c,Y1:()=>r,uv:()=>h});var e=t(28967);const r=(0,e.y)({id:"plugin.kubernetes.service"}),h=(0,e.y)({id:"plugin.kubernetes.proxy-service"}),c=(0,e.y)({id:"plugin.kubernetes.cluster-link-formatter-service"})},71004:(et,m,t)=>{"use strict";t.d(m,{a:()=>h});var e=t(81308);const h=(0,e._)({output:c=>c.string()}).schema},71135:(et,m,t)=>{"use strict";t.d(m,{g:()=>o});var e=t(31085),r=t(28364),h=t(95061),c=t(58837);const s=(0,c.A)(d=>({markdownDescription:{fontSize:d.typography.caption.fontSize,margin:0,color:d.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),o=d=>{const{children:g,displayLabel:i=!0,rawErrors:p=[],errors:u,help:f,rawDescription:y,required:T,disabled:O}=d,b=s();return(0,e.jsxs)(h.A,{fullWidth:!0,error:!!p.length,required:T,disabled:O,children:[g,i&&y?(0,e.jsx)(r.h,{content:y,linkTarget:"_blank",className:b.markdownDescription}):null,u,f]})}},71834:(et,m,t)=>{"use strict";t.d(m,{o:()=>h});var e=t(6442);async function r(c){try{const s=await c.text();if(s){if(c.headers.get("content-type")?.startsWith("application/json"))try{const o=JSON.parse(s);if(o.error&&o.response)return o}catch{}return{error:{name:"Error",message:`Request failed with status ${c.status} ${c.statusText}, ${s}`},response:{statusCode:c.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${c.status} ${c.statusText}`},response:{statusCode:c.status}}}class h extends Error{response;body;cause;statusCode;statusText;static async fromResponse(s){const o=await r(s),d=o.response.statusCode||s.status,g=s.statusText,i=`Request failed with ${d} ${g}`,p=(0,e.cy)(o.error);return new h({message:i,response:s,data:o,cause:p,statusCode:d,statusText:g})}constructor(s){super(s.message),this.name="ResponseError",this.response=s.response,this.body=s.data,this.cause=s.cause,this.statusCode=s.statusCode,this.statusText=s.statusText}}},72814:(et,m,t)=>{"use strict";t.d(m,{S:()=>c});var e=t(14041),r=t(18690),h=t(54852);function c(s){const{pathname:o}=(0,r.zy)(),d=(0,h.qO)("routing-context");if(!d)throw new Error("Routing context is not available");const g=d.atVersion(1),i=(0,e.useMemo)(()=>g&&g.resolve(s,{pathname:o}),[g,s,o]);if(!d)throw new Error("useRouteRef used outside of routing context");if(!g)throw new Error("RoutingContext v1 not available");const p="optional"in s&&s.optional;if(!i&&!p)throw new Error(`No path for ${s}`);return i}},74268:(et,m,t)=>{"use strict";t.d(m,{kQ:()=>c,mu:()=>o});var e=t(77555),r=t(50809),h=t(18050);const c=(0,e.H)({id:"user-settings"}),o=(0,r.i)({id:"user-settings",routes:{settingsPage:c}}).provide((0,h.QJ)({name:"UserSettingsPage",component:()=>t.e(193).then(t.bind(t,30193)).then(d=>d.SettingsPage),mountPoint:c}))},75014:(et,m,t)=>{"use strict";t.d(m,{T:()=>s});var e=t(31085),r=t(95208),h=t(90712),c=t(59759);function s(o){const{permission:d,resourceRef:g}=o,i=(0,h.J)((0,c.OL)(d)?{permission:d,resourceRef:g}:{permission:d}),p=(0,r.n)();if(i.loading)return null;if(i.allowed)return(0,e.jsx)(e.Fragment,{children:o.children});if(o.errorPage)return(0,e.jsx)(e.Fragment,{children:o.errorPage});const{NotFoundErrorPage:u}=p.getComponents();return(0,e.jsx)(u,{})}},75103:(et,m,t)=>{"use strict";t.d(m,{k:()=>ct});var e=t(31085),r=t(78560),h=t(55488),c=t(7370),s=t(76059),o=t(14041),d=t(18690),g=t(21613),i=t(58837),p=t(71677),u=t(72501),f=t(75202),y=t(53373),T=t.n(y),O=t(79065),b=t(55704),B=t(31072),j=t(82775),N=t(77125),F=t(64947);const D=(0,i.A)(Q=>({item:{height:48,width:"100%","&:hover":{background:Q.palette.navigation.navItem?.hoverBackground||"#6f6f6f",color:Q.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:Q.palette.navigation.color,padding:Q.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:Q.palette.common.white},label:{margin:Q.spacing(1.75),marginLeft:Q.spacing(1),fontSize:Q.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:Q.palette.navigation.navItem?.hoverBackground||"#6f6f6f",color:Q.palette.navigation.selectedColor}},dropdownButton:{textTransform:"none",justifyContent:"flex-start"},textContent:{color:Q.palette.navigation.color,paddingLeft:Q.spacing(4),paddingRight:Q.spacing(1),fontSize:Q.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}),{name:"BackstageSidebarSubmenuItem"}),k=Q=>{const{title:lt,subtitle:st,to:mt,icon:rt,dropdownItems:nt,exact:z}=Q,U=D(),{setIsHoveredOn:P}=(0,o.useContext)(B.U1),S=()=>{P(!1)},L=(0,d.x$)(mt??""),$=(0,d.zy)();let K=(0,j.z)($,L,z);const[J,ot]=(0,o.useState)(Q.initialShowDropdown??!1),At=()=>{ot(!J)};return nt!==void 0?(nt.some(X=>{const dt=(0,g.o1)(X.to);return K=(0,j.z)($,dt,z),K}),(0,e.jsxs)(N.A,{className:U.itemContainer,children:[(0,e.jsx)(p.Ay,{title:lt,enterDelay:500,enterNextDelay:500,children:(0,e.jsxs)(F.A,{role:"button",onClick:At,onTouchStart:X=>X.stopPropagation(),className:T()(U.item,U.dropdownButton,K?U.selected:void 0),children:[rt&&(0,e.jsx)(rt,{fontSize:"small"}),(0,e.jsxs)(u.A,{variant:"subtitle1",component:"span",className:U.label,children:[lt,(0,e.jsx)("br",{}),st&&(0,e.jsx)(u.A,{variant:"caption",component:"span",className:U.subtitle,children:st})]}),J?(0,e.jsx)(b.A,{className:U.dropdownArrow}):(0,e.jsx)(O.A,{className:U.dropdownArrow})]})}),nt&&J&&(0,e.jsx)(N.A,{className:U.dropdown,children:nt.map((X,dt)=>(0,e.jsx)(p.Ay,{title:X.title,enterDelay:500,enterNextDelay:500,children:(0,e.jsx)(f.N_,{to:X.to,underline:"none",className:U.dropdownItem,onClick:S,onTouchStart:xt=>xt.stopPropagation(),children:(0,e.jsx)(u.A,{component:"span",className:U.textContent,children:X.title})})},dt))})]})):(0,e.jsx)(N.A,{className:U.itemContainer,children:(0,e.jsx)(p.Ay,{title:lt,enterDelay:500,enterNextDelay:500,children:(0,e.jsxs)(f.N_,{to:mt,underline:"none",className:T()(U.item,K?U.selected:void 0),onClick:S,onTouchStart:X=>X.stopPropagation(),children:[rt&&(0,e.jsx)(rt,{fontSize:"small"}),(0,e.jsxs)(u.A,{variant:"subtitle1",component:"span",className:U.label,children:[lt,(0,e.jsx)("br",{}),st&&(0,e.jsx)(u.A,{variant:"caption",component:"span",className:U.subtitle,children:st})]})]})})})};var G=t(18139),I=t(94223),tt=t(72814),H=t(73466),V=t(30043),q=t(20987),it=t(91072);const ct=Q=>{const{singularTitle:lt,pluralTitle:st,icon:mt,filter:rt}=Q,nt=(0,G.gf)(I.K),z=(0,G.gf)(V.v),U=(0,tt.S)(q.s),P=(0,G.gf)(it.n),{value:S}=(0,H.A)(async()=>{const L=await nt.getBackstageIdentity();return(await z.getEntities({filter:[{kind:"group","relations.hasMember":L.userEntityRef,...rt??{}}],fields:["metadata","kind","spec.profile"]})).items},[]);if(!S?.length)return null;if(S.length===1){const L=S[0];return(0,e.jsx)(c.uk,{text:lt,to:U((0,r.sM)(L)),icon:mt})}return(0,e.jsx)(c.uk,{icon:mt,text:st,children:(0,e.jsx)(s.O,{title:st,children:S?.map(L=>{const $=P.forEntity(L);return(0,e.jsx)(k,{title:$.snapshot.primaryTitle,subtitle:L.metadata.namespace!==h.oQ?L.metadata.namespace:void 0,to:U((0,r.sM)(L)),icon:mt},(0,r.U2)(L))})})})}},75202:(et,m,t)=>{"use strict";t.d(m,{N_:()=>V});var e=t(31085),r=t(95208),h=t(18139),c=t(54195),s=t(52262),o=t(49203),d=t(58837),g=t(72501),i=t(53373),p=t.n(i),u=t(45250),f=t.n(u),y=t(14041),T=t(18690),O=t(73657),b=t(39330);function B(){const[q]=(0,T.AV)((0,e.jsx)(T.qh,{index:!0,element:(0,e.jsx)("div",{})}));return!q.index}const j=(0,d.A)(q=>({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"},externalLinkIcon:{verticalAlign:"bottom",marginLeft:q.spacing(.5)}}),{name:"Link"}),N=()=>{const it=(0,r.n)().getSystemIcon("externalLink")||b.A,ct=j();return(0,e.jsx)(it,{className:ct.externalLinkIcon})},F=q=>/^([a-z+.-]+):/.test(q),D=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,k=window.open;if(k&&!k.__backstage){const q=function(...ct){const Q=String(ct[0]);if(D.test(Q))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return k.apply(this,ct)};q.__backstage=!0,window.open=q}const G=()=>{try{return(0,h.gf)(c.U).getOptionalString("app.baseUrl")}catch{return}},I=()=>{const q="http://sample.dev",it=G()??"/",{pathname:ct}=new URL(it,q);return(0,u.trimEnd)(ct,"/")},tt=q=>{let it=String(q);const ct=I(),Q=F(it),lt=it.startsWith(ct);return!Q&&!lt&&(it=ct.concat(it)),it},H=q=>q instanceof Array?q.map(H).join(" ").trim():typeof q=="object"&&q?H(q?.props?.children):["string","number"].includes(typeof q)?String(q):"",V=(0,y.forwardRef)(({onClick:q,noTrack:it,externalLinkIcon:ct,...Q},lt)=>{const st=j(),mt=(0,s.s)(),rt=B()?tt(Q.to):Q.to,nt=H(Q.children)||rt,z=F(rt),U=z&&!!/^https?:/.exec(rt);if(D.test(rt))throw new Error("Link component rejected javascript: URL as a security precaution");const P=S=>{q?.(S),it||mt.captureEvent("click",nt,{attributes:{to:rt}})};return z?(0,e.jsxs)(o.A,{...U?{target:"_blank",rel:"noopener"}:{},...Q,...Q["aria-label"]?{"aria-label":`${Q["aria-label"]}, Opens in a new window`}:{},ref:lt,href:rt,onClick:P,className:p()(st.externalLink,Q.className),children:[Q.children,ct&&(0,e.jsx)(N,{}),(0,e.jsx)(g.A,{component:"span",className:st.visuallyHidden,children:", Opens in a new window"})]}):(0,e.jsx)(o.A,{...Q,ref:lt,component:O.N_,to:rt,onClick:P})})},75706:(et,m,t)=>{"use strict";t.d(m,{R:()=>e,b:()=>r});const e="scaffolder.extensions.wrapper.v1",r="scaffolder.extensions.field.v1"},76059:(et,m,t)=>{"use strict";t.d(m,{O:()=>u});var e=t(31085),r=t(77125),h=t(58837),c=t(72501),s=t(53373),o=t.n(s),d=t(14041),g=t(31072),i=t(77366);const p=(0,h.A)(f=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:f.spacing(7)+1},drawer:y=>({display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",opacity:0,[f.breakpoints.up("sm")]:{marginLeft:y.left,transition:f.transitions.create(["margin-left","opacity"],{easing:f.transitions.easing.sharp,duration:y.submenuConfig.defaultOpenDelayMs})},top:0,bottom:0,padding:0,background:f.palette.navigation.submenu?.background??"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:y.submenuConfig.drawerWidthClosed,transitionDelay:`${y.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}),drawerOpen:y=>({marginLeft:y.left,opacity:1,width:y.submenuConfig.drawerWidthOpen,[f.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:f.spacing(3),left:0,top:0}}),title:{fontSize:f.typography.h5.fontSize,fontWeight:f.typography.fontWeightMedium,color:f.palette.navigation.color,padding:f.spacing(2.5),[f.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),u=f=>{const{isOpen:y}=(0,i.FS)(),{sidebarConfig:T,submenuConfig:O}=(0,d.useContext)(g.yY),b=y?T.drawerWidthOpen:T.drawerWidthClosed,B=p({left:b,submenuConfig:O}),{isHoveredOn:j}=(0,d.useContext)(g.U1),[N,F]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{F(j)},[j]),(0,e.jsxs)(r.A,{className:o()(B.drawer,{[B.drawerOpen]:N}),children:[(0,e.jsx)(c.A,{variant:"h5",component:"span",className:B.title,children:f.title}),f.children]})}},76242:(et,m,t)=>{"use strict";t.d(m,{g:()=>s});var e=t(45843),r=t(33129),h=t(14146);class c{#t;constructor(d){this.#t=d}async getCredentials(d){const g=new URL(d.url),i=this.#t.find(p=>p.isUrlSupported(g));if(!i)throw new Error(`No auth provider available for '${d.url}', see https://backstage.io/link?scm-auth`);return i.getCredentials(d)}}class s{static createDefaultApiFactory(){return(0,e.b)({api:h.$,deps:{github:r.py,gitlab:r.$7,azure:r.u0,bitbucket:r.Hd},factory:({github:d,gitlab:g,azure:i,bitbucket:p})=>s.merge(s.forGithub(d),s.forGitlab(g),s.forAzure(i),s.forBitbucket(p))})}static forAuthApi(d,g){return new s("generic",d,g.host,g.scopeMapping)}static forGithub(d,g){const i=g?.host??"github.com";return new s("github",d,i,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(d,g){const i=g?.host??"gitlab.com";return new s("gitlab",d,i,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository api"]})}static forAzure(d,g){const i=g?.host??"dev.azure.com";return new s("azure",d,i,{default:["499b84ac-1321-427f-aa17-267ca6975798/vso.build","499b84ac-1321-427f-aa17-267ca6975798/vso.code","499b84ac-1321-427f-aa17-267ca6975798/vso.graph","499b84ac-1321-427f-aa17-267ca6975798/vso.project","499b84ac-1321-427f-aa17-267ca6975798/vso.profile"],repoWrite:["499b84ac-1321-427f-aa17-267ca6975798/vso.code_manage"]})}static forBitbucket(d,g){const i=g?.host??"bitbucket.org",p=g?.scopeMapping?.default??["account","team","pullrequest","snippet","issue","project"],u=g?.scopeMapping?.repoWrite??["pullrequest:write","snippet:write","issue:write"];return new s("bitbucket",d,i,{default:p,repoWrite:u})}static forBitbucketServer(d,g){return this.forBitbucket(d,{host:g.host,scopeMapping:{default:g.scopeMapping?.default??["PUBLIC_REPOS","REPO_READ"],repoWrite:g.scopeMapping?.repoWrite??["REPO_WRITE"]}})}static merge(...d){return new c(d)}#t;#e;#n;#s;constructor(d,g,i,p){this.#t=g,this.#e=i,this.#n=p,this.#s=d}isUrlSupported(d){return d.host===this.#e}getAdditionalScopesForProvider(d){return!d?.customScopes||this.#s==="generic"?[]:d.customScopes?.[this.#s]??[]}async getCredentials(d){const{url:g,additionalScope:i,...p}=d,u=this.#n.default.slice();i?.repoWrite&&u.push(...this.#n.repoWrite);const f=this.getAdditionalScopesForProvider(i);f.length&&u.push(...f);const y=[...new Set(u)],T=await this.#t.getAccessToken(y,p);return{token:T,headers:{Authorization:`Bearer ${T}`}}}}},76888:(et,m,t)=>{"use strict";t.d(m,{K:()=>r});var e=t(18690);function r(h){return(0,e.g)()}},77026:(et,m,t)=>{"use strict";t.d(m,{O:()=>d});var e=t(14041),r=t(85408),h=t(18139),c=t(86702);function s(g,i,p,u){return e.Children.toArray(g).flatMap(f=>{if(!(0,e.isValidElement)(f))return[];if(f.type===e.Fragment)return s(f.props.children,i,p,u);if((0,r.E)(f,"core.featureFlagged")){const y=f.props;return("with"in y?i.isActive(y.with):!i.isActive(y.without))?s(f.props.children,i,p,u):[]}if(p===void 0||p(f))return[f];if(u)throw new Error(u);return s(f.props.children,i,p,u)})}class o{constructor(i,p){this.node=i,this.featureFlagsApi=p}selectByComponentData(i){const p=s(this.node,this.featureFlagsApi,u=>(0,r.E)(u,i.key)!==void 0,i.withStrictError);return new o(p,this.featureFlagsApi)}findComponentData(i){return s(this.node,this.featureFlagsApi,u=>(0,r.E)(u,i.key)!==void 0).map(u=>(0,r.E)(u,i.key)).filter(u=>u!==void 0)}getElements(){return s(this.node,this.featureFlagsApi)}}function d(g,i,p=[]){const u=(0,h.gf)(c.B),f=new o(g,u);return(0,e.useMemo)(()=>i(f),[g,...p])}},77366:(et,m,t)=>{"use strict";t.d(m,{FS:()=>i,T9:()=>g});var e=t(31085),r=t(14041),h=t(54852),c=t(4790);const s={isOpen:!1,setOpen:()=>{}},o=(0,r.createContext)(s),d=(0,h.tK)("sidebar-open-state-context");function g(p){const{children:u,value:f}=p;return(0,e.jsx)(o.Provider,{value:f,children:(0,e.jsx)(d.Provider,{value:(0,c.B)({1:f}),children:u})})}const i=()=>{const p=(0,r.useContext)(d),u=(0,r.useContext)(o);if(p===void 0)return u||s;const f=p.atVersion(1);if(f===void 0)throw new Error("No context found for version 1.");return f}},77462:(et,m,t)=>{"use strict";t.d(m,{D:()=>f});var e=t(31085),r=t(18139),h=t(34477),c=t(10265),s=t(29365),o=t(38097),d=t(72501),g=t(32881),i=t(74219),p=t(14041),u=t(89475);function f(y){const[T,O]=(0,p.useState)([]),b=(0,r.gf)(h.k),{t:B}=(0,c.i)(u.O),{anchorOrigin:j={vertical:"top",horizontal:"center"},transientTimeoutMs:N}=y,F=N??5e3;(0,p.useEffect)(()=>{const G=b.alert$().subscribe(I=>O(tt=>tt.concat(I)));return()=>{G.unsubscribe()}},[b]);const[D]=T;if((0,p.useEffect)(()=>{if(D&&D.display==="transient"){const G=setTimeout(()=>{O(I=>{const tt=I.filter(H=>H!==D);return tt.length===I.length?I:tt})},F);return()=>clearTimeout(G)}},[D,F]),T.length===0)return null;const k=()=>{O(G=>G.filter(I=>I!==D))};return(0,e.jsx)(o.A,{open:!0,anchorOrigin:j,children:(0,e.jsx)(i.A,{action:(0,e.jsx)(s.A,{color:"inherit",size:"small",onClick:k,"data-testid":"error-button-close",children:(0,e.jsx)(g.A,{})}),severity:D.severity,children:(0,e.jsxs)(d.A,{component:"span",children:[String(D.message),T.length>1&&(0,e.jsx)("em",{children:B("alertDisplay.message",{count:T.length-1})})]})})})}},77555:(et,m,t)=>{"use strict";t.d(m,{H:()=>h});var e=t(13930);class r{constructor(s,o){this.id=s,this.params=o}[e.b]="absolute";get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}function h(c){return new r(c.id,c.params??[])}},77795:(et,m,t)=>{"use strict";t.d(m,{_:()=>r});var e=t(56004);const r=(h,c,s)=>{try{const{host:o,searchParams:d}=new URL(`https://${h}`),g=s.apiHolder.get(e.Y);o?(g?.byHost(o)?.type==="bitbucket"?(o==="bitbucket.org"&&!d.get("workspace")&&c.addError("Incomplete repository location provided, workspace not provided"),d.get("project")||c.addError("Incomplete repository location provided, project not provided")):g?.byHost(o)?.type==="azure"?d.get("project")||c.addError("Incomplete repository location provided, project not provided"):g?.byHost(o)?.type!=="gerrit"&&(d.get("owner")||c.addError("Incomplete repository location provided, owner not provided")),d.get("repo")||c.addError("Incomplete repository location provided, repo not provided")):c.addError("Incomplete repository location provided, host not provided")}catch{c.addError("Unable to parse the Repository URL")}}},78183:(et,m,t)=>{"use strict";t.d(m,{G:()=>y,e:()=>f});var e=t(31085),r=t(30043),h=t(16400),c=t(74219),s=t(73466),o=t(77125),d=t(99424),g=t(18139),i=t(58045),p=t(10265);async function u(T,O){const b=T.relations?.map(j=>j.targetRef);if(!b||b?.length<1||b.length>1e3)return[];const B=await O.getEntitiesByRefs({entityRefs:b,fields:["kind","metadata.name","metadata.namespace"]});return b.filter((j,N)=>B.items[N]===void 0)}async function f(T,O){const b=O.apis.get(r.v);if(!b)throw new Error(`No implementation available for ${r.v}`);return(await u(T,b)).length>0}function y(){const{entity:T}=(0,h.tN)(),O=(0,g.gf)(r.v),{loading:b,error:B,value:j}=(0,s.A)(async()=>u(T,O),[T,O]),{t:N}=(0,p.i)(i.W);return B?(0,e.jsx)(o.A,{mb:1,children:(0,e.jsx)(d._,{error:B})}):b||!j||j.length===0?null:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(c.A,{severity:"warning",style:{whiteSpace:"pre-line"},children:[N("entityRelationWarningDescription")," ",j.join(", ")]})})}},78560:(et,m,t)=>{"use strict";t.d(m,{KU:()=>c,U2:()=>s,sM:()=>h});var e=t(55488);function r(o){let d=o.indexOf(":");const g=o.indexOf("/");g!==-1&&g<d&&(d=-1);const i=d===-1?void 0:o.slice(0,d),p=g===-1?void 0:o.slice(d+1,g),u=o.slice(Math.max(d+1,g+1));if(i===""||p===""||u==="")throw new TypeError(`Entity reference "${o}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:i,namespace:p,name:u}}function h(o){return{kind:o.kind,namespace:o.metadata.namespace||e.oQ,name:o.metadata.name}}function c(o,d){if(!o)throw new Error("Entity reference must not be empty");const g=d?.defaultKind,i=d?.defaultNamespace||e.oQ;let p,u,f;if(typeof o=="string"){const y=r(o);p=y.kind??g,u=y.namespace??i,f=y.name}else p=o.kind??g,u=o.namespace??i,f=o.name;if(p)if(u){if(!f){const y=JSON.stringify(o);throw new Error(`Entity reference ${y} had missing or empty name`)}}else{const y=JSON.stringify(o);throw new Error(`Entity reference ${y} had missing or empty namespace`)}else{const y=JSON.stringify(o);throw new Error(`Entity reference ${y} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:p,namespace:u,name:f}}function s(o){let d,g,i;return"metadata"in o?(d=o.kind,g=o.metadata.namespace??e.oQ,i=o.metadata.name):(d=o.kind,g=o.namespace??e.oQ,i=o.name),`${d.toLocaleLowerCase("en-US")}:${g.toLocaleLowerCase("en-US")}/${i.toLocaleLowerCase("en-US")}`}},79112:(et,m,t)=>{"use strict";t.d(m,{Cr:()=>p,KL:()=>i,aY:()=>g});var e=t(45250),r=t.n(e),h=t(78560),c=t(11601),s=t.n(c),o=t(98890);const d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function g(u){if(typeof u!="string")throw new TypeError(`Unable to parse location ref '${u}', unexpected argument ${typeof u}`);const f=u.indexOf(":");if(f<0)throw new TypeError(`Unable to parse location ref '${u}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const y=u.substring(0,f).trim(),T=u.substring(f+1).trim();if(!y||!T)throw new TypeError(`Unable to parse location ref '${u}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(y==="http"||y==="https")throw new TypeError(`Invalid location ref '${u}', please prefix it with 'url:', e.g. 'url:${u}'`);if(d.test(T))throw new TypeError(`Invalid location ref '${u}', target is a javascript: URL`);return{type:y,target:T}}function i(u){const{type:f,target:y}=u;if(f){if(!y)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(d.test(y))throw new TypeError(`Invalid location ref '${f}:${y}', target is a javascript: URL`);return`${f}:${y}`}function p(u){const f=u.metadata?.annotations?.[o.I4]??u.metadata?.annotations?.[o.Eo];if(!f)throw new Error(`Entity '${(0,h.U2)(u)}' is missing location`);return g(f)}},79182:(et,m,t)=>{"use strict";t.d(m,{Y:()=>B});var e=t(31085),r=t(18139),h=t(54195),c=t(77125),s=t(42899),o=t(58837),d=t(71677),g=t(72501),i=t(93285),p=t(75202),u=t(14150),f=t(7496);const y=(0,o.A)(j=>({header:{gridArea:"pageHeader",padding:j.spacing(3),width:"100%",boxShadow:j.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:j.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[j.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:j.page.fontColor,wordBreak:"break-word",fontSize:j.typography.h3.fontSize,marginBottom:0},subtitle:{color:j.page.fontColor,opacity:.8,display:"inline-block",marginTop:j.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:j.spacing(1),color:j.page.fontColor},breadcrumb:{color:j.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-j.spacing(.3),marginBottom:j.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-j.spacing(.3),marginBottom:j.spacing(.3)}}),{name:"BackstageHeader"}),T=({type:j,typeLink:N,classes:F,pageTitle:D})=>j?N?(0,e.jsxs)(u.B,{className:F.breadcrumb,children:[(0,e.jsx)(p.N_,{to:N,children:j}),(0,e.jsx)(g.A,{children:D})]}):(0,e.jsx)(g.A,{className:F.type,children:j}):null,O=({pageTitle:j,classes:N,tooltip:F})=>{const{contentRef:D}=(0,f.H)(),k=(0,e.jsx)(g.A,{ref:D,tabIndex:-1,className:N.title,variant:"h1",children:j});return F?(0,e.jsx)(d.Ay,{title:F,placement:"top-start",children:k}):k},b=({classes:j,subtitle:N})=>N?typeof N!="string"?(0,e.jsx)(e.Fragment,{children:N}):(0,e.jsx)(g.A,{className:j.subtitle,variant:"subtitle2",component:"span",children:N}):null;function B(j){const{children:N,pageTitleOverride:F,style:D,subtitle:k,title:G,tooltip:I,type:tt,typeLink:H}=j,V=y(),it=(0,r.gf)(h.U).getOptionalString("app.title")||"Backstage",ct=F||G,Q=G||F,lt=`${ct} | %s | ${it}`,st=`${ct} | ${it}`;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.m,{titleTemplate:lt,defaultTitle:st}),(0,e.jsxs)("header",{style:D,className:V.header,children:[(0,e.jsxs)(c.A,{className:V.leftItemsBox,children:[(0,e.jsx)(T,{classes:V,type:tt,typeLink:H,pageTitle:Q}),(0,e.jsx)(O,{classes:V,pageTitle:Q,tooltip:I}),(0,e.jsx)(b,{classes:V,subtitle:k})]}),(0,e.jsx)(s.A,{container:!0,className:V.rightItemsBox,spacing:4,children:N})]})]})}},79541:(et,m,t)=>{"use strict";t.d(m,{R:()=>s});var e=t(31085),r=t(16249),h=t(10265),c=t(30268);const s=o=>{const{t:d}=(0,h.i)(c.W),{onChange:g,required:i,schema:{title:p=d("fields.entityNamePicker.title"),description:u=d("fields.entityNamePicker.description")},rawErrors:f,formData:y,uiSchema:{"ui:autofocus":T},idSchema:O,placeholder:b}=o;return(0,e.jsx)(r.A,{id:O?.$id,label:p,placeholder:b,helperText:u,required:i,value:y??"",onChange:({target:{value:B}})=>g(B),margin:"normal",error:f?.length>0&&!y,inputProps:{autoFocus:T},FormHelperTextProps:{margin:"dense",style:{marginLeft:0}}})}},80084:(et,m,t)=>{"use strict";t.d(m,{j:()=>r});var e=t(97963);const r=(0,e.h)({id:"catalog-react",messages:{catalogFilter:{title:"Filters",buttonTitle:"Filters"},entityKindPicker:{title:"Kind",errorMessage:"Failed to load entity kinds"},entityLifecyclePicker:{title:"Lifecycle"},entityNamespacePicker:{title:"Namespace"},entityOwnerPicker:{title:"Owner"},entityProcessingStatusPicker:{title:"Processing Status"},entityTagPicker:{title:"Tags"},entityPeekAheadPopover:{title:"Drill into the entity to see all of the tags.",emailCardAction:{title:"Email {{email}}",subTitle:"mailto {{email}}"},entityCardActionsTitle:"Show details"},entitySearchBar:{placeholder:"Search"},entityTypePicker:{title:"Type",errorMessage:"Failed to load entity types",optionAllTitle:"all"},favoriteEntity:{addToFavorites:"Add to favorites",removeFromFavorites:"Remove from favorites"},inspectEntityDialog:{title:"Entity Inspector",closeButtonTitle:"Close",ancestryPage:{title:"Ancestry"},colocatedPage:{title:"Colocated",description:"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).",alertNoLocation:"Entity had no location information.",alertNoEntity:"There were no other entities on this location."},jsonPage:{title:"Entity as JSON",description:"This is the raw entity data as received from the catalog, on JSON form."},overviewPage:{title:"Overview"},yamlPage:{title:"Entity as YAML",description:"This is the raw entity data as received from the catalog, on YAML form."}},unregisterEntityDialog:{title:"Are you sure you want to unregister this entity?",cancelButtonTitle:"Cancel",deleteButtonTitle:"Delete Entity",deleteEntitySuccessMessage:"Removed entity {{entityName}}",bootstrapState:{title:'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "{{location}}"). If you believe this is in error, please contact the {{appTitle}} integrator.',advancedDescription:"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.",advancedOptions:"Advanced Options"},onlyDeleteStateTitle:"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.",unregisterState:{title:"This action will unregister the following entities:",subTitle:"Located at the following location:",description:"To undo, just re-register the entity in {{appTitle}}.",unregisterButtonTitle:"Unregister Location",advancedOptions:"Advanced Options",advancedDescription:"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."},errorStateTitle:"Internal error: Unknown state"},userListPicker:{defaultOrgName:"Company",personalFilter:{title:"Personal",ownedLabel:"Owned",starredLabel:"Starred"},orgFilterAllLabel:"All"}}})},80609:(et,m,t)=>{"use strict";t.d(m,{w:()=>lt});var e=t(31085),r=t(14041),h=t(86451),c=t(67566),s=t(41809),o=t(57586),d=t.n(o),g=t(12784),i=t.n(g),p=t(47090),u=t(22249),f=t(58837);const y=(0,f.A)(st=>({node:{fill:st.palette.primary.light,stroke:st.palette.primary.light},text:{fill:st.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function T({node:{id:st}}){const mt=y(),[rt,nt]=(0,r.useState)(0),[z,U]=(0,r.useState)(0),P=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(P.current){let{height:K,width:J}=P.current.getBBox();K=Math.round(K),J=Math.round(J),(K!==z||J!==rt)&&(nt(J),U(K))}},[rt,z]);const S=10,L=rt+S*2,$=z+S*2;return(0,e.jsxs)("g",{children:[(0,e.jsx)("rect",{className:mt.node,width:L,height:$,rx:10}),(0,e.jsx)("text",{ref:P,className:mt.text,y:$/2,x:L/2,textAnchor:"middle",alignmentBaseline:"middle",children:st})]})}const O="arrow-marker",b="node",B="edge",j="label",N=(0,u.A)(st=>({node:{transition:`${st.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),F=st=>(0,e.jsx)(T,{...st});function D({render:st=F,setNode:mt,node:rt}){const{width:nt,height:z,x:U=0,y:P=0}=rt,S=rt,L=N(),$=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{if($.current){let{height:K,width:J}=$.current.getBBox();K=Math.round(K),J=Math.round(J),(K!==z||J!==nt)&&mt(rt.id,{...rt,height:K,width:J})}},[rt,nt,z,mt]),(0,e.jsx)("g",{ref:$,"data-testid":b,className:L.node,transform:`translate(${U-nt/2},${P-z/2})`,children:st({node:S})})}var k=t(1121),G=t(79432),I=t(20644),tt=t.n(I);const H=(0,u.A)(st=>({text:{fill:st.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function V({edge:{label:st}}){const mt=H();return(0,e.jsx)("text",{className:mt.text,textAnchor:"middle",children:st})}const q=(0,u.A)(st=>({path:{strokeWidth:1.3,stroke:st.palette.textSubtle,fill:"none",transition:`${st.transitions.duration.shortest}ms`},label:{transition:`${st.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),it=st=>(0,e.jsx)(V,{...st});function ct({render:st=it,setEdge:mt,id:rt,edge:nt,curve:z,showArrowHeads:U}){const{x:P=0,y:S=0,width:L,height:$,points:K}=nt,J=nt,ot=q(),At=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(At.current){let{height:xt,width:$t}=At.current.getBBox();xt=Math.round(xt),$t=Math.round($t),(xt!==$||$t!==L)&&mt(rt,{...nt,height:xt,width:$t})}},[nt,$,L,mt,rt]);let X="";const dt=(0,r.useMemo)(()=>k.A().x(xt=>xt.x).y(xt=>xt.y).curve(G[z]),[z]);if(K){const xt=K.filter($t=>tt()($t.x)&&tt()($t.y));X=dt(xt)||""}return(0,e.jsxs)(e.Fragment,{children:[X&&(0,e.jsx)("path",{"data-testid":B,className:ot.path,markerEnd:U?`url(#${O})`:void 0,d:X}),J.label?(0,e.jsx)("g",{ref:At,"data-testid":j,className:ot.label,transform:`translate(${P},${S})`,children:st({edge:J})}):null]})}const Q="workspace";function lt(st){const{edges:mt,nodes:rt,renderNode:nt,direction:z=p.D.Direction.TOP_BOTTOM,align:U,nodeMargin:P=50,edgeMargin:S=10,rankMargin:L=50,paddingX:$=0,paddingY:K=0,acyclicer:J,ranker:ot=p.D.Ranker.NETWORK_SIMPLEX,labelPosition:At=p.D.LabelPosition.RIGHT,labelOffset:X=10,edgeRanks:dt=1,edgeWeight:xt=1,renderLabel:$t,defs:wt,zoom:_t="enabled",curve:Ut="curveMonotoneX",showArrowHeads:zt=!1,fit:Xt="grow",...se}=st,re=(0,s.A)(),[ce,te]=(0,r.useState)(100),[ie,me]=(0,r.useState)(100),ee=(0,r.useRef)(new(d()).graphlib.Graph),[Wt,jt]=(0,r.useState)(ee.current.graph()?.width||0),[pt,Y]=(0,r.useState)(ee.current.graph()?.height||0),[ft,Tt]=(0,r.useState)([]),[Lt,St]=(0,r.useState)([]),Ht=Math.max(Wt,ce),kt=Math.max(pt,ie),Dt=Math.min(pt,ie),Ft=Xt==="grow"?kt:Dt,Yt=(0,r.useMemo)(()=>i()(bt=>{if(!bt)return;const Mt=c.A(bt),W=c.A(bt.getElementById(Q));function x(){Mt.call(h.s_().scaleExtent([1,1/0]).on("zoom",Pt=>{Pt.transform.x=Math.min(0,Math.max(Pt.transform.x,Ht-Ht*Pt.transform.k)),Pt.transform.y=Math.min(0,Math.max(Pt.transform.y,kt-kt*Pt.transform.k)),W.attr("transform",Pt.transform)}))}_t==="enabled"?x():_t==="enable-on-click"&&Mt.on("click",()=>x());const{width:M,height:_}=bt.getBoundingClientRect();ce!==M&&te(M),ie!==_&&me(_)},100),[ie,ce,Ht,kt,_t]),Et=(0,r.useCallback)(()=>{const bt=ee.current.nodes(),Mt=ee.current.edges();bt.forEach(W=>{rt.some(M=>M.id===W)||ee.current.removeNode(W)}),Mt.forEach(W=>{mt.some(M=>M.from===W.v&&M.to===W.w)||ee.current.removeEdge(W.v,W.w)}),rt.forEach(W=>{const x=ee.current.nodes().find(M=>W.id===M);if(x&&ee.current.node(x)){const{width:M,height:_,x:Pt,y:Bt}=ee.current.node(x);ee.current.setNode(x,{...W,width:M,height:_,x:Pt,y:Bt})}else ee.current.setNode(W.id,{...W,width:0,height:0})}),mt.forEach(W=>{ee.current.setEdge(W.from,W.to,{...W,label:W.label,width:0,height:0,labelpos:At,labeloffset:X,weight:xt,minlen:dt})})},[mt,rt,At,X,xt,dt]),at=(0,r.useMemo)(()=>i()(()=>{d().layout(ee.current);const{height:bt,width:Mt}=ee.current.graph(),W=Math.max(0,bt||0),x=Math.max(0,Mt||0);jt(x),Y(W),Tt(ee.current.nodes()),St(ee.current.edges())},250,{leading:!0}),[]);(0,r.useEffect)(()=>(ee.current.setGraph({rankdir:z,align:U,nodesep:P,edgesep:S,ranksep:L,marginx:$,marginy:K,acyclicer:J,ranker:ot}),Et(),at(),at.cancel),[J,U,z,S,$,K,P,L,ot,Et,at]);function yt(bt,Mt){return ee.current.setNode(bt,Mt),at(),ee.current}function Ot(bt,Mt){return ee.current.setEdge(bt,Mt),at(),ee.current}return(0,e.jsxs)("svg",{ref:Yt,...se,width:"100%",height:Ft,viewBox:`0 0 ${Ht} ${kt}`,children:[(0,e.jsxs)("defs",{children:[(0,e.jsx)("marker",{id:O,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth",children:(0,e.jsx)("path",{fill:re.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})}),wt]}),(0,e.jsx)("g",{id:Q,children:(0,e.jsxs)("svg",{width:Wt,height:pt,y:kt/2-pt/2,x:Ht/2-Wt/2,viewBox:`0 0 ${Wt} ${pt}`,children:[Lt.map(bt=>{const Mt=ee.current.edge(bt);return Mt?(0,e.jsx)(ct,{id:bt,setEdge:Ot,render:$t,edge:Mt,curve:Ut,showArrowHeads:zt},`${bt.v}-${bt.w}`):null}),ft.map(bt=>{const Mt=ee.current.node(bt);return Mt?(0,e.jsx)(D,{setNode:yt,render:nt,node:Mt},bt):null})]})})]})}},81252:(et,m,t)=>{"use strict";t.d(m,{w:()=>G});var e=t(31085),r=t(77125),h=t(69076),c=t(67720),s=t(95061),o=t(64238),d=t(48543),g=t(26343),i=t(81215),p=t(7031),u=t(99703),f=t(58837),y=t(72501),T=t(92399),O=t(14041),b=t(10437);const B=(0,f.A)(I=>(0,u.A)({icon:{position:"absolute",right:I.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageClosedDropdown"}),j=()=>{const I=B();return(0,e.jsx)(b.A,{className:I.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"currentColor"})})},N=(0,f.A)(I=>(0,u.A)({icon:{position:"absolute",right:I.spacing(.5),pointerEvents:"none",color:"#616161"}}),{name:"BackstageOpenedDropdown"}),F=()=>{const I=N();return(0,e.jsx)(b.A,{className:I.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"currentColor"})})},D=(0,p.A)(I=>(0,u.A)({root:{"label + &":{marginTop:I.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:I.palette.primary.main}},input:{borderRadius:I.shape.borderRadius,position:"relative",backgroundColor:I.palette.background.paper,border:"1px solid #ced4da",fontSize:I.typography.body1.fontSize,padding:I.spacing(1.25,3.25,1.25,1.5),transition:I.transitions.create(["border-color","box-shadow"]),"&:focus":{background:I.palette.background.paper,borderRadius:I.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(o.A),k=(0,f.A)(I=>(0,u.A)({formControl:{margin:I.spacing(1,0)},label:{transform:"initial",fontWeight:"bold",fontSize:I.typography.body2.fontSize,fontFamily:I.typography.fontFamily,color:I.palette.text.primary,"&.Mui-focused":{color:I.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:I.typography.body2.fontSize,fontFamily:I.typography.fontFamily,color:I.palette.text.primary,"&.Mui-focused":{color:I.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function G(I){const{multiple:tt,items:H,label:V,placeholder:q,selected:it,onChange:ct,triggerReset:Q,native:lt=!1,disabled:st=!1,margin:mt,"data-testid":rt="select"}=I,nt=k(),[z,U]=(0,O.useState)(it||(tt?[]:"")),[P,S]=(0,O.useState)(!1);(0,O.useEffect)(()=>{U(tt?[]:"")},[Q,tt]),(0,O.useEffect)(()=>{U(it||(tt?[]:""))},[it,tt]);const L=ot=>{U(ot.target.value),ct(ot.target.value)},$=ot=>{if(st){ot.preventDefault();return}S(At=>tt&&!(ot.target instanceof HTMLElement)?!0:!At)},K=()=>{S(!1)},J=ot=>()=>{const At=z.filter(X=>X!==ot);U(At),ct(At)};return(0,e.jsx)(r.A,{className:nt.root,children:(0,e.jsxs)(s.A,{className:nt.formControl,children:[(0,e.jsx)(d.A,{className:nt.formLabel,children:V}),(0,e.jsxs)(i.A,{"aria-label":V,value:z,native:lt,disabled:st,"data-testid":rt,displayEmpty:!0,multiple:tt,margin:mt,onChange:L,open:P,onOpen:$,onClose:K,input:(0,e.jsx)(D,{}),label:V,renderValue:ot=>tt&&z.length!==0?(0,e.jsx)(r.A,{className:nt.chips,children:ot.map(At=>{const X=H.find(dt=>dt.value===At);return X?(0,e.jsx)(c.A,{"data-testid":"chip",label:X?.label,clickable:!0,deleteIcon:(0,e.jsx)(T.A,{"data-testid":"cancel-icon",onMouseDown:dt=>dt.stopPropagation()}),onDelete:J(At),className:nt.chip},X?.value):!1})}):(0,e.jsx)(y.A,{children:z.length===0?q||"":H.find(At=>At.value===ot)?.label}),IconComponent:()=>P?(0,e.jsx)(F,{}):(0,e.jsx)(j,{}),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},children:[!!q&&!tt&&(0,e.jsx)(g.A,{value:[],children:q}),lt?H&&H.map(ot=>(0,e.jsx)("option",{value:ot.value,children:ot.label},ot.value)):H&&H.map(ot=>(0,e.jsxs)(g.A,{value:ot.value,children:[tt&&(0,e.jsx)(h.A,{color:"primary",checked:z.includes(ot.value)||!1,className:nt.checkbox}),ot.label]},ot.value))]})]})})}},81308:(et,m,t)=>{"use strict";t.d(m,{_:()=>h});var e=t(20569),r=t(7578);function h(c){const{output:s,uiOptions:o}=c;return{TProps:void 0,TOutput:void 0,schema:{returnValue:(0,e.Ay)(s(r.z)),uiOptions:o&&(0,e.Ay)(o(r.z))},type:void 0,uiOptionsType:void 0}}},82326:(et,m,t)=>{"use strict";t.d(m,{Y:()=>d});var e=t(31085),r=t(58837),h=t(50868),c=t(53373),s=t.n(c);const o=(0,r.A)(g=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[g.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function d(g){const{themeId:i,className:p,children:u}=g,f=o();return(0,e.jsx)(h.A,{theme:y=>({...y,page:y.getPageTheme({themeId:i})}),children:(0,e.jsx)("main",{className:s()(f.root,p),children:u})})}},82775:(et,m,t)=>{"use strict";t.d(m,{z:()=>s});var e=t(45250),r=t.n(e),h=t(45810),c=t.n(h);function s(o,d,g=!1){const i=new URLSearchParams(d.search).toString(),p=c().parse(i),u=new URLSearchParams(o.search).toString(),f=c().parse(u),y=g?e.isEqual:e.isMatch;return(0,e.isEqual)(d.pathname,o.pathname)&&y(f,p)}},83392:(et,m,t)=>{"use strict";t.d(m,{F:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.storage"})},83421:(et,m,t)=>{"use strict";t.d(m,{n:()=>nt});var e=t(31085),r=t(69076),h=t(67720),c=t(95061),s=t(48543),o=t(5951),d=t(26343),g=t(81215),i=t(58837),p=t(8380),u=t(14041),f=t(18139),y=t(87437),T=t(20570),O=t(8973),b=t(29655),B=t(91567),j=t(77125),N=t(37197),F=t(58007),D=t(8109),k=t(46423),G=t(6924),I=t(72501),tt=t(53364),H=t(73466),V=t(10265),q=t(11235);const it=(0,i.A)(z=>({icon:{color:z.palette.text.primary},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:z.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:z.spacing(2,0),"&.Mui-expanded":{margin:z.spacing(2,0)}},accordionDetails:{padding:z.spacing(0,0,1)}})),ct=z=>{const U=it(),{filters:P,setPageCursor:S,setTypes:L,term:$,types:K}=(0,y.SQ)(),J=(0,f.gf)(T.y),[ot,At]=(0,u.useState)(!0),{defaultValue:X,name:dt,showCounts:xt,types:$t}=z,{t:wt}=(0,V.i)(q.$),_t=()=>At(re=>!re),Ut=re=>()=>{L(re!==""?[re]:[]),S(void 0)};(0,u.useEffect)(()=>{X&&L([X])},[]);const zt=[{value:"",name:wt("searchType.accordion.allTitle"),icon:(0,e.jsx)(tt.A,{})},...$t],Xt=K[0]||"",{value:se}=(0,H.A)(async()=>{if(!xt)return{};const re=await Promise.all(zt.map(ce=>ce.value).map(async ce=>{const{numberOfResults:te}=await J.query({term:$,types:ce?[ce]:[],filters:K.includes(ce)||!K.length&&!ce?P:{},pageLimit:0});return[ce,te!==void 0?wt("searchType.accordion.numberOfResults",{number:te>=1e4?">10000":`${te}`}):" -- "]}));return Object.fromEntries(re)},[P,xt,$,K]);return(0,e.jsxs)(j.A,{children:[(0,e.jsx)(I.A,{variant:"body2",component:"h2",children:dt}),(0,e.jsxs)(O.A,{className:U.accordion,expanded:ot,onChange:_t,children:[(0,e.jsx)(b.A,{classes:{root:U.accordionSummary,content:U.accordionSummaryContent},expandIcon:(0,e.jsx)(G.A,{className:U.icon}),IconButtonProps:{size:"small"},children:ot?wt("searchType.accordion.collapse"):zt.filter(re=>re.value===Xt)[0].name}),(0,e.jsx)(B.A,{classes:{root:U.accordionDetails},children:(0,e.jsx)(F.A,{className:U.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0,children:zt.map(re=>(0,e.jsxs)(u.Fragment,{children:[(0,e.jsx)(N.A,{}),(0,e.jsxs)(D.A,{selected:K[0]===re.value||K.length===0&&re.value==="",onClick:Ut(re.value),button:!0,children:[(0,e.jsx)(k.A,{children:(0,u.cloneElement)(re.icon,{className:U.listItemIcon})}),(0,e.jsx)(o.A,{primary:re.name,secondary:se&&se[re.value]})]})]},re.value))})})]})]})};var Q=t(38605),lt=t(31653);const st=(0,i.A)(z=>({tabs:{borderBottom:`1px solid ${z.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:z.typography.fontWeightBold,fontSize:z.typography.pxToRem(13),color:z.palette.text.primary,minWidth:"130px"}})),mt=z=>{const U=st(),{setPageCursor:P,setTypes:S,types:L}=(0,y.SQ)(),{defaultValue:$,types:K}=z,{t:J}=(0,V.i)(q.$),ot=(X,dt)=>{S(dt!==""?[dt]:[]),P(void 0)};(0,u.useEffect)(()=>{$&&S([$])},[]);const At=[{value:"",name:J("searchType.tabs.allTitle")},...K];return(0,e.jsx)(lt.A,{"aria-label":"List of search types tabs",className:U.tabs,indicatorColor:"primary",value:L.length===0?"":L[0],onChange:ot,children:At.map((X,dt)=>(0,e.jsx)(Q.A,{className:U.tab,label:X.name,value:X.value},dt))})},rt=(0,i.A)(z=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:z.spacing(1)},chip:{margin:2}})),nt=z=>{const{className:U,defaultValue:P,name:S,values:L=[]}=z,$=rt(),{types:K,setTypes:J}=(0,y.SQ)(),{t:ot}=(0,V.i)(q.$);(0,p.A)(()=>{K.length||(P&&Array.isArray(P)?J(P):P&&J([P]))});const At=X=>{const dt=X.target.value;J(dt)};return(0,e.jsxs)(c.A,{className:U,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next",children:[(0,e.jsx)(s.A,{className:$.label,margin:"dense",children:S}),(0,e.jsx)(g.A,{multiple:!0,variant:"outlined",value:K,onChange:At,placeholder:ot("searchType.allResults"),renderValue:X=>(0,e.jsx)("div",{className:$.chips,children:X.map(dt=>(0,e.jsx)(h.A,{label:dt,className:$.chip,size:"small"},dt))}),children:L.map(X=>(0,e.jsxs)(d.A,{value:X,children:[(0,e.jsx)(r.A,{checked:K.indexOf(X)>-1}),(0,e.jsx)(o.A,{primary:X})]},X))})]})};nt.Accordion=z=>(0,e.jsx)(ct,{...z}),nt.Tabs=z=>(0,e.jsx)(mt,{...z})},85294:(et,m,t)=>{"use strict";t.d(m,{VF:()=>h,Wm:()=>c});function e(i,p){return!!(i&&typeof i=="string"&&i?.toLocaleLowerCase("en-US")===p?.toLocaleLowerCase("en-US"))}function r(i,p){return typeof p=="string"?e(i,p):p.length===0||p.some(u=>e(i,u))}function h(i){return d({kind:i})}function c(i){return d({kind:"component",type:i})}function s(i){return d({kind:"resource",type:i})}function o(i){return d({kind:"api",type:i})}function d(i){return p=>!(i.kind&&!r(p.kind,i.kind)||i.type&&!r(p.spec?.type,i.type))}function g(i){return p=>r(p.metadata?.namespace,i)}},85408:(et,m,t)=>{"use strict";t.d(m,{E:()=>s,h:()=>c});var e=t(1952);const r=(0,e.Q)("component-data-store",()=>new WeakMap),h="__backstage_data";function c(o,d,g){const i=o;let p=i[h]??r.get(o);if(p||(p={map:new Map},Object.defineProperty(i,h,{enumerable:!1,configurable:!0,writable:!1,value:p}),r.set(o,p)),p.map.has(d)){const u=o.displayName||o.name;throw new Error(`Attempted to attach duplicate data "${d}" to component "${u}"`)}p.map.set(d,g)}function s(o,d){if(!o)return;const g=o.type;if(!g)return;const i=g[h]??r.get(g);if(i)return i.map.get(d)}},85639:(et,m,t)=>{"use strict";t.d(m,{$r:()=>o,k0:()=>g});var e=t(14041),r=t(12784),h=t.n(r),c=t(66839);const s=()=>{const{shadowRoot:i}=(0,c.V)();return i},o=i=>{const p=s(),[u,f]=(0,e.useState)(p?.firstChild);return(0,e.useEffect)(()=>{let y;return p&&(y=new MutationObserver(()=>{f(p?.firstChild)}),y.observe(p,{attributes:!0,characterData:!0,childList:!0,subtree:!0})),()=>y?.disconnect()},[p]),!u||!(u instanceof HTMLElement)?[]:i.map(y=>u.querySelectorAll(y)).filter(y=>y.length).map(y=>Array.from(y)).flat()},d=i=>i.toString()&&i.rangeCount&&i.getRangeAt(0).getBoundingClientRect().top,g=(i=0)=>{const p=s(),[u,f]=(0,e.useState)(null),y=(0,e.useMemo)(()=>h()(()=>{const T=p,O=T.getSelection?T.getSelection():document.getSelection();O&&d(O)?f(O):f(null)},i),[p,f,i]);return(0,e.useEffect)(()=>(window.document.addEventListener("selectionchange",y),()=>{y.cancel(),window.document.removeEventListener("selectionchange",y)}),[y]),u}},85911:(et,m,t)=>{"use strict";t.d(m,{_:()=>g,B:()=>i});var e=t(21385),r=t(45250);const h="gitlab.com",c="https://gitlab.com/api/v4";function s(p){const u=p.getString("host");let f=p.getOptionalString("apiBaseUrl");const y=p.getOptionalString("token")?.trim();let T=p.getOptionalString("baseUrl");if(f?f=(0,r.trimEnd)(f,"/"):u===h&&(f=c),T?T=(0,r.trimEnd)(T,"/"):T=`https://${u}`,(0,e.HO)(u)){if(!f||!(0,e.AY)(f))throw new Error(`Invalid GitLab integration config, '${f}' is not a valid apiBaseUrl`);if(!(0,e.AY)(T))throw new Error(`Invalid GitLab integration config, '${T}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${u}' is not a valid host`);return{host:u,token:y,apiBaseUrl:f,baseUrl:T,commitSigningKey:p.getOptionalString("commitSigningKey")}}function o(p){const u=p.map(s);return u.some(f=>f.host===h)||u.push({host:h,apiBaseUrl:c,baseUrl:`https://${h}`}),u}function d(p){let u="";return p.host!==h&&(u=new URL(p.baseUrl).pathname),trimEnd(u,"/")}class g{constructor(u){this.integrationConfig=u}static factory=({config:u})=>{const f=o(u.getOptionalConfigArray("integrations.gitlab")??[]);return(0,e.oS)(f.map(y=>new g(y)),y=>y.config.host)};get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(u){return(0,e.ku)(u)}resolveEditUrl(u){return i(u,"edit")}}function i(p,u){return p.replace(/\/\-\/(blob|tree|edit)\//,`/-/${u}/`)}},86702:(et,m,t)=>{"use strict";t.d(m,{B:()=>c,S:()=>h});var e=t(31085),r=t(28967),h=(s=>(s[s.None=0]="None",s[s.Active=1]="Active",s))(h||{});const c=(0,r.y)({id:"core.featureflags"})},87162:(et,m,t)=>{"use strict";t.d(m,{gC:()=>T,ai:()=>O,rQ:()=>f});var e=t(71834),r=t(45810),h=t.n(r);class c{discoveryApi;fetchApi;constructor(j){this.discoveryApi=j.discoveryApi,this.fetchApi=j.fetchApi}async query(j){const N=h().stringify(j),F=`${await this.discoveryApi.getBaseUrl("search")}/query?${N}`,D=await this.fetchApi.fetch(F);if(!D.ok)throw await e.o.fromResponse(D);return D.json()}}var s=t(20570),o=t(77555),d=t(50809),g=t(45843),i=t(61617),p=t(95159),u=t(18050);const f=(0,o.H)({id:"search"}),y=(0,d.i)({id:"search",apis:[(0,g.b)({api:s.y,deps:{discoveryApi:i.I,fetchApi:p.a},factory:({discoveryApi:B,fetchApi:j})=>new c({discoveryApi:B,fetchApi:j})})],routes:{root:f}}),T=y.provide((0,u.QJ)({name:"SearchPage",component:()=>t.e(2477).then(t.bind(t,32477)).then(B=>B.SearchPage),mountPoint:f})),O=y.provide((0,u.NC)({name:"SidebarSearchModal",component:{lazy:()=>t.e(2238).then(t.bind(t,42238)).then(B=>B.SidebarSearchModal)}})),b=y.provide((0,u.NC)({name:"HomePageSearchBar",component:{lazy:()=>t.e(1107).then(t.bind(t,51107)).then(B=>B.HomePageSearchBar)}}))},87318:(et,m,t)=>{"use strict";t.d(m,{z:()=>o});var e=t(31085),r=t(64947),h=t(14041),c=t(75202);const s=(0,h.forwardRef)((g,i)=>(0,e.jsx)(c.N_,{ref:i,...g,color:"initial"})),o=(0,h.forwardRef)((g,i)=>(0,e.jsx)(r.A,{ref:i,component:s,...g})),d=null},87344:(et,m,t)=>{"use strict";t.d(m,{c:()=>d});var e=t(31085),r=t(19087),h=t(58837),c=t(36521),s=t(31072);const o=(0,h.A)(g=>({avatar:{width:({size:i})=>i,height:({size:i})=>i,fontSize:({size:i})=>i*.7,border:`1px solid ${g.palette.textSubtle}`}})),d=g=>{const{size:i}=g,{iconSize:p}=s.hC,u=o(i?{size:i}:{size:p}),{profile:f}=(0,c.s)();return(0,e.jsx)(r.A,{src:f.picture,className:u.avatar,alt:"Profile picture"})}},87350:(et,m,t)=>{"use strict";t.d(m,{J:()=>r});var e=t(28967);const r=(0,e.y)({id:"core.translation"})},87437:(et,m,t)=>{"use strict";t.d(m,{Lt:()=>F,SQ:()=>O});var e=t(31085),r=t(45250),h=t.n(r),c=t(14041),s=t(73466),o=t(5877),d=t(54852),g=t(4790),i=t(18139),p=t(52262),u=t(19224),f=t(54195),y=t(20570);const T=(0,d.tK)("search-context"),O=()=>{const D=(0,c.useContext)(T);if(!D)throw new Error("useSearch must be used within a SearchContextProvider");const k=D.atVersion(1);if(!k)throw new Error("No SearchContext v1 found");return k},b=()=>(0,c.useContext)(T)!==void 0,B={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},j=(D=B)=>{const k=(0,i.gf)(y.y),G=(0,p.s)(),[I,tt]=(0,c.useState)(D.term),[H,V]=(0,c.useState)(D.types),[q,it]=(0,c.useState)(D.filters),[ct,Q]=(0,c.useState)(D.pageLimit),[lt,st]=(0,c.useState)(D.pageCursor),mt=(0,o.A)(I),rt=(0,o.A)(q),nt=(0,s.A)(async()=>{const $=await k.query({term:I,types:H,filters:q,pageLimit:ct,pageCursor:lt});return I&&G.captureEvent("search",I,{value:$.numberOfResults}),$},[I,H,q,ct,lt]),z=!nt.loading&&!nt.error&&nt.value?.nextPageCursor,U=!nt.loading&&!nt.error&&nt.value?.previousPageCursor,P=(0,c.useCallback)(()=>{st(nt.value?.nextPageCursor)},[nt.value?.nextPageCursor]),S=(0,c.useCallback)(()=>{st(nt.value?.previousPageCursor)},[nt.value?.previousPageCursor]);return(0,c.useEffect)(()=>{mt!==void 0&&I!==mt&&st(void 0)},[I,mt,st]),(0,c.useEffect)(()=>{rt!==void 0&&!(0,r.isEqual)(q,rt)&&st(void 0)},[q,rt,st]),{result:nt,term:I,setTerm:tt,types:H,setTypes:V,filters:q,setFilters:it,pageLimit:ct,setPageLimit:Q,pageCursor:lt,setPageCursor:st,fetchNextPage:z?P:void 0,fetchPreviousPage:U?S:void 0}},N=D=>{const{initialState:k,children:G}=D,I=j(k);return(0,e.jsx)(u.I,{attributes:{searchTypes:I.types.sort().join(",")},children:(0,e.jsx)(T.Provider,{value:(0,g.B)({1:I}),children:G})})},F=D=>{const{initialState:k,inheritParentContextIfAvailable:G,children:I}=D,tt=b(),H=(0,i.gf)(f.U),V=k??{},q=H.has("search.query.pageLimit")?{pageLimit:H.getNumber("search.query.pageLimit")}:{},it={...B,...V,...q};return tt&&G?(0,e.jsx)(e.Fragment,{children:I}):(0,e.jsx)(N,{initialState:it,children:I})}},88549:(et,m,t)=>{"use strict";t.d(m,{UJ:()=>c,Zg:()=>s,pS:()=>o,qP:()=>h,rQ:()=>d});var e=t(2488),r=t(77555);const h=(0,e.I)({id:"create-component",optional:!0,defaultTarget:"scaffolder.createComponent"}),c=(0,e.I)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"],defaultTarget:"techdocs.docRoot"}),s=(0,e.I)({id:"create-from-template",optional:!0,params:["namespace","templateName"],defaultTarget:"scaffolder.selectedTemplate"}),o=(0,e.I)({id:"catalog:unregister-redirect",optional:!0}),d=(0,r.H)({id:"catalog"})},88835:(et,m,t)=>{"use strict";t.d(m,{k:()=>r});var e=t(14041);const r=(0,e.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}})},89392:(et,m,t)=>{"use strict";t.d(m,{HK:()=>f,dz:()=>c,m_:()=>d,EH:()=>p});var e=t(67457),r=t(6442);class h extends Error{cause;constructor(T,O){let b=T;if(O!==void 0){const B=(0,r.M5)(O);b?b+=`; caused by ${B}`:b=`caused by ${B}`}super(b),Error.captureStackTrace?.(this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=(0,e.b)(O)?O:void 0}}class c extends h{name="InputError"}class s extends null{name="AuthenticationError"}class o extends null{name="NotAllowedError"}class d extends h{name="NotFoundError"}class g extends null{name="ConflictError"}class i extends null{name="NotModifiedError"}class p extends h{name="NotImplementedError"}class u extends null{}class f extends h{constructor(T,O){super(T,O),this.name=(0,e.b)(O)?O.name:"Error"}}},89475:(et,m,t)=>{"use strict";t.d(m,{O:()=>r});var e=t(97963);const r=(0,e.h)({id:"core-components",messages:{signIn:{title:"Sign In",loginFailed:"Login failed",customProvider:{title:"Custom User",subtitle:`Enter your own User ID and credentials.
 This selection will not be stored.`,userId:"User ID",tokenInvalid:"Token is not a valid OpenID Connect JWT Token",continue:"Continue",idToken:"ID Token (optional)"},guestProvider:{title:"Guest",subtitle:`Enter as a Guest User.
 You will not have a verified identity, meaning some features might be unavailable.`,enter:"Enter"}},skipToContent:"Skip to content",copyTextButton:{tooltipText:"Text copied to clipboard"},simpleStepper:{reset:"Reset",finish:"Finish",next:"Next",skip:"Skip",back:"Back"},errorPage:{subtitle:"ERROR {{status}}: {{statusMessage}}",title:"Looks like someone dropped the mic!",goBack:"Go back",showMoreDetails:"Show more details",showLessDetails:"Show less details"},emptyState:{missingAnnotation:{title:"Missing Annotation",actionTitle:"Add the annotation to your component YAML as shown in the highlighted example below:",readMore:"Read more"}},supportConfig:{default:{title:"Support Not Configured",linkTitle:"Add `app.support` config key"}},errorBoundary:{title:"Please contact {{slackChannel}} for help."},oauthRequestDialog:{title:"Login Required",authRedirectTitle:"This will trigger a http redirect to OAuth Login.",login:"Log in",rejectAll:"Reject All"},supportButton:{title:"Support",close:"Close"},table:{filter:{title:"Filters",clearAll:"Clear all",placeholder:"All results"},body:{emptyDataSourceMessage:"No records to display"},pagination:{firstTooltip:"First Page",labelDisplayedRows:"{from}-{to} of {count}",labelRowsSelect:"rows",lastTooltip:"Last Page",nextTooltip:"Next Page",previousTooltip:"Previous Page"},toolbar:{search:"Filter"}},alertDisplay:{message_one:"({{ count }} newer message)",message_other:"({{ count }} newer messages)"},autoLogout:{stillTherePrompt:{title:"Logging out due to inactivity",buttonText:"Yes! Don't log me out"}},proxiedSignInPage:{title:"You do not appear to be signed in. Please try reloading the browser page."}}})},89534:(et,m,t)=>{"use strict";t.d(m,{q4:()=>ee});var e=t(31085),r=t(18139),h=t(54195);class c{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const jt="user:default/guest";return{type:"user",userEntityRef:jt,ownershipEntityRefs:[jt]}}async getCredentials(){return{}}async signOut(){}}function s(Wt){const[jt,pt,Y]=Wt.split(".");return JSON.parse(window.atob(pt))}class o{constructor(jt){this.result=jt}getUserId(){return this.result.userId}static fromResult(jt){return new o(jt)}async getIdToken(){return this.result.getIdToken?.()}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const jt=await this.getIdToken();if(!jt){const ft=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:ft,ownershipEntityRefs:[ft]}}const{sub:pt,ent:Y}=s(jt);return{type:"user",userEntityRef:pt,ownershipEntityRefs:Y??[]}}async getCredentials(){return{token:await this.result.getIdToken?.()}}async signOut(){return this.result.signOut?.()}}class d{constructor(jt,pt,Y){this.identity=jt,this.authApi=pt,this.profile=Y}profilePromise;static createGuest(){return new c}static fromLegacy(jt){return o.fromResult(jt)}static create(jt){return new d(jt.identity,jt.authApi,jt.profile)}getUserId(){const jt=this.identity.userEntityRef,pt=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(jt);if(!pt)throw new TypeError(`Invalid user entity reference "${jt}"`);return pt[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(jt){throw this.profilePromise=void 0,jt}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}var g=t(64947),i=t(42899),p=t(72501),u=t(14041),f=t(76842),y=t(96872),T=t(16454),O=t(17138),b=t(79182),B=t(21332),j=t(82326),N=t(24453),F=t(58837);const D=(0,F.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),k=({children:Wt})=>{const jt=D();return(0,e.jsx)(i.A,{component:"li",item:!0,classes:jt,children:Wt})};var G=t(89392),I=t(89475),tt=t(10265);const q={Component:({config:Wt,onSignInStarted:jt,onSignInSuccess:pt,onSignInFailure:Y})=>{const{apiRef:ft,title:Tt,message:Lt}=Wt,St=(0,r.gf)(ft),Ht=(0,r.gf)(N.m),{t:kt}=(0,tt.i)(I.O),Dt=async()=>{try{jt();const Ft=await St.getBackstageIdentity({instantPopup:!0});if(!Ft)throw Y(),new Error(`The ${Tt} provider is not configured to support sign-in`);const Yt=await St.getProfile();pt(d.create({identity:Ft.identity,profile:Yt,authApi:St}))}catch(Ft){Y(),Ht.post(new G.HK(kt("signIn.loginFailed"),Ft))}};return(0,e.jsx)(k,{children:(0,e.jsx)(B.n,{variant:"fullHeight",title:Tt,actions:(0,e.jsx)(g.A,{color:"primary",variant:"outlined",onClick:Dt,children:kt("signIn.title")}),children:(0,e.jsx)(p.A,{variant:"body1",children:Lt})})})},loader:async(Wt,jt)=>{const pt=Wt.get(jt),Y=await pt.getBackstageIdentity({optional:!0});if(!Y)return;const ft=await pt.getProfile();return d.create({identity:Y.identity,profile:ft,authApi:pt})}};var it=t(71834),ct=t(7578);const Q=ct.z.object({providerInfo:ct.z.object({}).catchall(ct.z.unknown()).optional(),profile:ct.z.object({email:ct.z.string().optional(),displayName:ct.z.string().optional(),picture:ct.z.string().optional()}),backstageIdentity:ct.z.object({token:ct.z.string(),identity:ct.z.object({type:ct.z.literal("user"),userEntityRef:ct.z.string(),ownershipEntityRefs:ct.z.array(ct.z.string())})})}),lt={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function st(Wt){const jt=new Date(Date.now()+lt.defaultTokenExpiryMillis);if(!Wt)return jt;const[pt,Y,ft]=Wt.split("."),Tt=JSON.parse(window.atob(Y));return typeof Tt.exp!="number"?jt:new Date(Tt.exp*1e3-lt.tokenExpiryMarginMillis)}class mt{options;abortController;state;constructor(jt){this.options=jt,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:jt}=this.getSessionSync(),pt=jt.identity.userEntityRef,Y=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(pt);if(!Y)throw new TypeError(`Invalid user entity reference "${pt}"`);return Y[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const jt=this.state.type==="active"?this.state.session:void 0,pt=this.fetchSession().then(Y=>(this.state={type:"active",session:Y,expiresAt:st(Y.backstageIdentity.token)},Y),Y=>{throw this.state={type:"failed",error:Y},Y});return this.state={type:"fetching",promise:pt,previous:jt},pt}async fetchSession(){const jt=await this.options.discoveryApi.getBaseUrl("auth"),pt=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,Y=new Headers(pt);Y.set("X-Requested-With","XMLHttpRequest");const ft=await fetch(`${jt}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:Y,credentials:"include"});if(!ft.ok)throw await it.o.fromResponse(ft);return Q.parse(await ft.json())}}var rt=t(61617),nt=t(48472);const z=async Wt=>{try{return await Wt.getBackstageIdentity()}catch(jt){if(jt.name==="ResponseError"&&jt.cause.name==="NotFoundError")return;throw jt}},S={Component:({onSignInStarted:Wt,onSignInSuccess:jt,onSignInFailure:pt})=>{const Y=(0,r.gf)(rt.I),[ft,Tt]=(0,nt.A)("enableLegacyGuestToken"),{t:Lt}=(0,tt.i)(I.O),St=async()=>{Wt();const Ht=new mt({provider:"guest",discoveryApi:Y});if(!await z(Ht).catch(Dt=>{console.warn(`Failed to sign in as a guest, ${Dt}`)})){if(confirm("Failed to sign in as a guest using the auth backend. Do you want to fallback to the legacy guest token?")){Tt(!0),jt(new c);return}throw pt(),new Error("You cannot sign in as a guest, you must either enable the legacy guest token or configure the auth backend to support guest sign in.")}jt(Ht)};return(0,e.jsx)(k,{children:(0,e.jsx)(B.n,{title:"Guest",variant:"fullHeight",actions:(0,e.jsx)(g.A,{color:"primary",variant:"outlined",onClick:St,children:Lt("signIn.guestProvider.enter")}),children:(0,e.jsx)(p.A,{variant:"body1",style:{whiteSpace:"pre-line"},children:Lt("signIn.guestProvider.subtitle")})})})},loader:async Wt=>{const jt=localStorage.getItem("enableLegacyGuestToken")==="true",pt=new mt({provider:"guest",discoveryApi:Wt.get(rt.I)}),Y=await z(pt).catch(ft=>{console.warn(`Failed to sign in as a guest, ${ft}`)});if(!(!Y&&!jt)){if(Y&&jt)if(confirm("You are currently using the legacy guest token, but you have the new guest backend module installed. Do you want to use the new module?"))localStorage.removeItem("enableLegacyGuestToken");else return new c;else if(jt)return new c;return pt}}};var L=t(80824),$=t(95061),K=t(16249),J=t(51253),ot=t(3514),At=t.n(ot);const X=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,dt=(0,F.A)(Wt=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:Wt.spacing(2)},subTitle:{whiteSpace:"pre-line"}}),{name:"BackstageCustomProvider"}),xt=Wt=>{const{ref:jt,...pt}=Wt;return{inputRef:jt,...pt}},_t={Component:({onSignInStarted:Wt,onSignInSuccess:jt})=>{const pt=dt(),{t:Y}=(0,tt.i)(I.O),{register:ft,handleSubmit:Tt,formState:Lt}=(0,L.mN)({mode:"onChange"}),{errors:St}=Lt,Ht=({userId:kt,idToken:Dt})=>{Wt(),jt(d.fromLegacy({userId:kt,getIdToken:Dt!==void 0?async()=>Dt:void 0,profile:{email:`${kt}@example.com`}}))};return(0,e.jsx)(k,{children:(0,e.jsxs)(B.n,{title:Y("signIn.customProvider.title"),variant:"fullHeight",children:[(0,e.jsx)(p.A,{variant:"body1",className:pt.subTitle,children:Y("signIn.customProvider.subtitle")}),(0,e.jsxs)("form",{className:pt.form,onSubmit:Tt(Ht),children:[(0,e.jsxs)($.A,{children:[(0,e.jsx)(K.A,{...xt(ft("userId",{required:!0})),label:Y("signIn.customProvider.userId"),margin:"normal",error:!!St.userId}),St.userId&&(0,e.jsx)(J.A,{error:!0,children:St.userId.message})]}),(0,e.jsxs)($.A,{children:[(0,e.jsx)(K.A,{...xt(ft("idToken",{required:!1,validate:kt=>!kt||X.test(kt)||Y("signIn.customProvider.tokenInvalid")})),label:Y("signIn.customProvider.idToken"),margin:"normal",autoComplete:"off",error:!!St.idToken}),St.idToken&&(0,e.jsx)(J.A,{error:!0,children:St.idToken.message})]}),(0,e.jsx)(g.A,{type:"submit",color:"primary",variant:"outlined",className:pt.button,disabled:!Lt?.isDirty||!At()(St),children:Y("signIn.customProvider.continue")})]})]})})},loader:async()=>{}};class Ut{constructor(jt){this.config=jt}static from(jt){return new Ut(jt)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}var zt=t(73657);const Xt="@backstage/core:SignInPage:provider",se={guest:S,custom:_t,common:q};function re(Wt,jt){if(Wt in jt)throw new Error(`"${Wt}" ID is duplicated. IDs of identity providers have to be unique.`)}function ce(Wt){return Wt.reduce((pt,Y)=>{if(typeof Y=="string")return re(Y,pt),pt[Y]={components:se[Y],id:Y},pt;const{id:ft}=Y;return re(ft,pt),pt[ft]={components:se.common,id:ft,config:Y},pt},{})}const te=(Wt,jt)=>{const pt=(0,r.gf)(N.m),Y=(0,r.Q2)(),[ft,Tt]=(0,u.useState)(!0),{t:Lt}=(0,tt.i)(I.O),[St,Ht]=(0,zt.ok)();(0,f.u)(()=>{const Ft=St.get("error");Ft&&pt.post(new G.HK(Lt("signIn.loginFailed"),new Error(Ft)))});const kt=(0,u.useCallback)(Ft=>{jt(Ut.from({identityApi:Ft,signOut:async()=>{localStorage.removeItem(Xt),await Ft.signOut?.()}}))},[jt]);(0,u.useLayoutEffect)(()=>{if(!ft)return;const Ft=localStorage.getItem(Xt);if(Ft===null){Tt(!1);return}const Yt=Wt[Ft];if(!Yt){Tt(!1);return}let Et=!1;return Yt.components.loader(Y,Yt.config?.apiRef).then(at=>{if(Et){localStorage.removeItem(Xt);return}at?kt(at):Tt(!1)}).catch(at=>{localStorage.removeItem(Xt),!Et&&(pt.post(at),Tt(!1))}),()=>{Et=!0}},[ft,pt,jt,Y,Wt,kt]);const Dt=(0,u.useMemo)(()=>Object.keys(Wt).map(Ft=>{const Yt=Wt[Ft],{Component:Et}=Yt.components,at=bt=>{kt(bt)},yt=()=>{localStorage.setItem(Xt,Yt?.config?.id||Yt.id)},Ot=()=>{localStorage.removeItem(Xt)};return(0,e.jsx)(Et,{config:Yt.config,onSignInStarted:yt,onSignInSuccess:at,onSignInFailure:Ot},Yt.id)}),[Wt,kt]);return[ft,Dt]},ie=({onSignInSuccess:Wt,providers:jt=[],title:pt,titleComponent:Y,align:ft="left"})=>{const Tt=(0,r.gf)(h.U),Lt=D(),St=ce(jt),[Ht,kt]=te(St,Wt);return Ht?(0,e.jsx)(y.k,{}):(0,e.jsxs)(j.Y,{themeId:"home",children:[(0,e.jsx)(b.Y,{title:Tt.getString("app.title")}),(0,e.jsxs)(T.U,{children:[(pt||Y)&&(0,e.jsx)(O.d,{title:pt,titleComponent:Y,textAlign:ft}),(0,e.jsx)(i.A,{container:!0,justifyContent:ft==="center"?ft:"flex-start",spacing:2,component:"ul",classes:Lt,children:kt})]})]})},me=({provider:Wt,auto:jt,onSignInSuccess:pt,ErrorComponent:Y})=>{const ft=D(),Tt=(0,r.gf)(Wt.apiRef),Lt=(0,r.gf)(h.U),{t:St}=(0,tt.i)(I.O),[Ht,kt]=(0,u.useState)(),[Dt,Ft]=(0,u.useState)(!1),[Yt,Et]=(0,zt.ok)(),at=Yt.get("error"),yt=async({checkExisting:Ot,showPopup:bt})=>{try{let Mt;if(Ot&&(Mt=await Tt.getBackstageIdentity({optional:!0})),!Mt&&(bt||jt)&&!at&&(Ft(!0),Mt=await Tt.getBackstageIdentity({instantPopup:!0}),!Mt))throw new Error(`The ${Wt.title} provider is not configured to support sign-in`);if(!Mt){Ft(!0);return}const W=await Tt.getProfile();pt(d.create({identity:Mt.identity,authApi:Tt,profile:W}))}catch(Mt){kt(Mt),Ft(!0)}};return(0,f.u)(()=>{at&&kt(new Error(at)),yt({checkExisting:!0})}),Dt?(0,e.jsxs)(j.Y,{themeId:"home",children:[(0,e.jsx)(b.Y,{title:Lt.getString("app.title")}),(0,e.jsx)(T.U,{children:(0,e.jsx)(i.A,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:ft,children:(0,e.jsx)(k,{children:(0,e.jsxs)(B.n,{variant:"fullHeight",title:Wt.title,actions:(0,e.jsx)(g.A,{color:"primary",variant:"outlined",onClick:()=>{yt({showPopup:!0})},children:St("signIn.title")}),children:[(0,e.jsx)(p.A,{variant:"body1",children:Wt.message}),Ht&&Ht.name!=="PopupRejectedError"&&(Y?(0,e.jsx)(Y,{error:Ht}):(0,e.jsx)(p.A,{variant:"body1",color:"error",children:Ht.message}))]})})})})]}):(0,e.jsx)(y.k,{})};function ee(Wt){return"provider"in Wt?(0,e.jsx)(me,{...Wt}):(0,e.jsx)(ie,{...Wt})}},90338:(et,m,t)=>{"use strict";t.d(m,{P:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.api-docs.config"})},90608:(et,m,t)=>{"use strict";t.d(m,{p:()=>r});var e=t(28967);const r=(0,e.y)({id:"core.applanguage"})},90712:(et,m,t)=>{"use strict";t.d(m,{J:()=>o});var e=t(18139),r=t(40058),h=t(59759),c=t(56240),s=t(21082);function o(d){const g=(0,e.gf)(r.x),{data:i,error:p}=(0,s.Ay)(d,async u=>{if((0,h.OL)(u.permission)&&!u.resourceRef)return c.b.DENY;const{result:f}=await g.authorize(u);return f});return p?{error:p,loading:!1,allowed:!1}:i===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:i===c.b.ALLOW}}},91072:(et,m,t)=>{"use strict";t.d(m,{n:()=>r});var e=t(28967);const r=(0,e.y)({id:"plugin.catalog.entity-presentation"})},92469:(et,m,t)=>{"use strict";t.d(m,{_:()=>r});var e=t(97963);const r=(0,e.h)({id:"search-react",messages:{searchBar:{title:"Search",placeholder:"Search in {{org}}"},searchFilter:{allOptionTitle:"All"},searchPagination:{limitLabel:"Results per page:",limitText:"of {{num}}"},noResultsDescription:"Sorry, no results were found",searchResultGroup:{linkTitle:"See All",addFilterButtonTitle:"Add filter"},searchResultPager:{previous:"Previous",next:"Next"}}})},92483:(et,m,t)=>{"use strict";t.d(m,{Gg:()=>b,Hk:()=>u,KG:()=>B,NT:()=>y,Vf:()=>i,fX:()=>o,ny:()=>T,z9:()=>c});var e=t(31085),r=t(95208),h=t(27799);function c(j){const{id:N,Fallback:F=h.A,...D}=j,G=(0,r.n)().getSystemIcon(N)??F;return(0,e.jsx)(G,{...D})}function s(j){return jsx(c,{id:"brokenImage",...j})}function o(j){return(0,e.jsx)(c,{id:"catalog",...j})}function d(j){return jsx(c,{id:"chat",...j})}function g(j){return jsx(c,{id:"dashboard",...j})}function i(j){return(0,e.jsx)(c,{id:"docs",...j})}function p(j){return jsx(c,{id:"email",...j})}function u(j){return(0,e.jsx)(c,{id:"github",...j})}function f(j){return jsx(c,{id:"group",...j})}function y(j){return(0,e.jsx)(c,{id:"help",...j})}function T(j){return(0,e.jsx)(c,{id:"user",...j})}function O(j){return jsx(c,{id:"warning",...j})}function b(j){return(0,e.jsx)(c,{id:"star",...j})}function B(j){return(0,e.jsx)(c,{id:"unstarred",...j})}},93709:(et,m,t)=>{"use strict";t.d(m,{O2:()=>g,VA:()=>d,iU:()=>s,lD:()=>o,yJ:()=>c});var e=t(50809),r=t(18050),h=t(14920);const c=(0,e.i)({id:"org",externalRoutes:{catalogIndex:h.E}}),s=c.provide((0,r.NC)({name:"EntityGroupProfileCard",component:{lazy:()=>t.e(997).then(t.bind(t,80997)).then(i=>i.GroupProfileCard)}})),o=c.provide((0,r.NC)({name:"EntityMembersListCard",component:{lazy:()=>t.e(997).then(t.bind(t,80997)).then(i=>i.MembersListCard)}})),d=c.provide((0,r.NC)({name:"EntityOwnershipCard",component:{lazy:()=>t.e(997).then(t.bind(t,80997)).then(i=>i.OwnershipCard)}})),g=c.provide((0,r.NC)({name:"EntityUserProfileCard",component:{lazy:()=>t.e(997).then(t.bind(t,80997)).then(i=>i.UserProfileCard)}}))},94223:(et,m,t)=>{"use strict";t.d(m,{K:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.identity"})},95159:(et,m,t)=>{"use strict";t.d(m,{a:()=>h});var e=t(31085),r=t(28967);const h=(0,r.y)({id:"core.fetch"})},95201:(et,m,t)=>{"use strict";t.d(m,{NH:()=>h,Vy:()=>r,f2:()=>c});var e=t(81308);const r=s=>s.record(s.string().or(s.object({exists:s.boolean().optional()})).or(s.array(s.string()))),h=(0,e._)({output:s=>s.string(),uiOptions:s=>s.object({allowedKinds:s.array(s.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:s.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:s.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:s.union([s.string(),s.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:(o=>o.or(o.array()))(r(s)).optional().describe("List of key-value filter expression for entities")})}),c=h.schema},95208:(et,m,t)=>{"use strict";t.d(m,{n:()=>r});var e=t(54852);const r=()=>{const h=(0,e.qO)("app-context");if(!h)throw new Error("App context is not available");const c=h.atVersion(1);if(!c)throw new Error("AppContext v1 not available");return c}},96290:(et,m,t)=>{"use strict";t.d(m,{J:()=>d});var e=t(31085),r=t(14041),h=t(84392);const c=g=>{const{data:i,index:p,style:u}=g;return(0,r.cloneElement)(i[p],{style:u})},s=(0,r.createContext)({}),o=(0,r.forwardRef)((g,i)=>{const p=(0,r.useContext)(s);return(0,e.jsx)("div",{ref:i,...g,...p})}),d=(0,r.forwardRef)((g,i)=>{const{children:p,...u}=g,f=r.Children.toArray(p),y=f.length,T=36,b=(Math.min(10,y)+.5)*T;return(0,e.jsx)("div",{ref:i,children:(0,e.jsx)(s.Provider,{value:u,children:(0,e.jsx)(h.Y1,{height:b,itemData:f,itemCount:y,itemSize:T,outerElementType:o,width:"100%",children:c})})})})},96479:(et,m,t)=>{"use strict";t.d(m,{T:()=>s});var e=t(78560),r=t(55488),h=t(46123),c=t.n(h);function s(i,p){const{kind:u,namespace:f,name:y,title:T,description:O,displayName:b,type:B}=d(i),j=(0,e.U2)({kind:u||"unknown",namespace:f||r.oQ,name:y||"unknown"}),N=g({kind:u,namespace:f,name:y,context:p}),F=[b,T,N].find(k=>k&&typeof k=="string"),D=[F!==j?j:void 0,B,O].filter(k=>k&&typeof k=="string").join(" | ");return{entityRef:j,primaryTitle:F,secondaryTitle:D||void 0,Icon:void 0}}const o=i=>!!i&&typeof i=="string";function d(i){if(typeof i=="string"){let p=i.indexOf(":");const u=i.indexOf("/");u!==-1&&u<p&&(p=-1);const f=p===-1?void 0:i.slice(0,p),y=u===-1?void 0:i.slice(p+1,u),T=i.slice(Math.max(p+1,u+1));return{kind:f,namespace:y,name:T}}if(typeof i=="object"&&i!==null){const p=[c()(i,"kind")].find(o),u=[c()(i,"metadata.namespace"),c()(i,"namespace")].find(o),f=[c()(i,"metadata.name"),c()(i,"name")].find(o),y=[c()(i,"metadata.title")].find(o),T=[c()(i,"metadata.description")].find(o),O=[c()(i,"spec.profile.displayName")].find(o),b=[c()(i,"spec.type")].find(o);return{kind:p,namespace:u,name:f,title:y,description:T,displayName:O,type:b}}return{}}function g(i){const p=i.kind?.toLocaleLowerCase("en-US")||"unknown",u=i.namespace||r.oQ,f=i.name||"unknown",y=i.context?.defaultKind?.toLocaleLowerCase("en-US"),T=i.context?.defaultNamespace?.toLocaleLowerCase("en-US");let O=f;return(T&&u.toLocaleLowerCase("en-US")!==T||u!==r.oQ)&&(O=`${u}/${O}`),y&&p.toLocaleLowerCase("en-US")!==y&&(O=`${p}:${O}`),O}},96872:(et,m,t)=>{"use strict";t.d(m,{k:()=>o});var e=t(31085),r=t(77125),h=t(88951),c=t(54917),s=t(14041);function o(d){const g=(0,c.A)(),[i,p]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const u=setTimeout(()=>p(!0),g.transitions.duration.short);return()=>clearTimeout(u)},[g.transitions.duration.short]),i?(0,e.jsx)(h.A,{...d,"data-testid":"progress"}):(0,e.jsx)(r.A,{display:"none","data-testid":"progress"})}},97214:(et,m,t)=>{"use strict";t.d(m,{Ey:()=>h,IB:()=>o,Kx:()=>i,L8:()=>r,Qz:()=>p,ZD:()=>s,fO:()=>c,fT:()=>g,jn:()=>y,nC:()=>d,sA:()=>T,u0:()=>u,vv:()=>e,zj:()=>f});const e="ownedBy",r="ownerOf",h="consumesApi",c="apiConsumedBy",s="providesApi",o="apiProvidedBy",d="dependsOn",g="dependencyOf",i="parentOf",p="childOf",u="memberOf",f="hasMember",y="partOf",T="hasPart"},97909:(et,m,t)=>{"use strict";t.d(m,{Q:()=>o,Z:()=>d});var e=t(31085),r=t(54852),h=t(4790),c=t(14041);const s=(0,r.tK)("secrets-context"),o=g=>{const{initialSecrets:i={}}=g,[p,u]=(0,c.useState)({...i});return(0,e.jsx)(s.Provider,{value:(0,h.B)({1:{secrets:p,setSecrets:u}}),children:g.children})},d=()=>{const g=(0,c.useContext)(s)?.atVersion(1);if(!g)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:i,secrets:p={}}=g;return{setSecrets:(0,c.useCallback)(f=>{i(y=>({...y,...f}))},[i]),secrets:p}}},97963:(et,m,t)=>{"use strict";t.d(m,{h:()=>c});function e(s){return{$$type:"@backstage/TranslationResource",version:"v1",id:s.ref.id,resources:Object.entries(s.translations).map(([o,d])=>({language:o,loader:()=>d().then(g=>{const i=g.default;return{messages:i?.$$type==="@backstage/TranslationMessages"?i.messages:i}})}))}}function r(s){const o=new Array;function d(g,i){for(const[p,u]of Object.entries(g))typeof u=="string"?o.push([i+p,u]):d(u,`${i}${p}.`)}return d(s,""),Object.fromEntries(o)}class h{#t;#e;#n;constructor(o){this.#t=o.id,this.#e=r(o.messages)}$$type="@backstage/TranslationRef";version="v1";get id(){return this.#t}get T(){throw new Error("Not implemented")}getDefaultMessages(){return this.#e}setDefaultResource(o){this.#n=o}getDefaultResource(){return this.#n}toString(){return`TranslationRef{id=${this.id}}`}}function c(s){const o=new h(s);return s.translations&&o.setDefaultResource(e({ref:o,translations:s.translations})),o}},98890:(et,m,t)=>{"use strict";t.d(m,{Eo:()=>e,I4:()=>h,r2:()=>r});const e="backstage.io/managed-by-location",r="backstage.io/managed-by-origin-location",h="backstage.io/source-location"},99338:(et,m,t)=>{"use strict";t.d(m,{B:()=>N});var e=t(31085),r=t(268),h=t(58837),c=t(8973),s=t(29655),o=t(91567),d=t(42899),g=t(72501),i=t(9181),p=t(6924),u=t(28364);const f=(F,D)=>(D.palette.type==="light"?r.e$:r.a)(D.palette[F].light,.6),y=(F,D)=>(D.palette.type==="light"?r.a:r.e$)(D.palette[F].light,.9),T=(0,h.A)(F=>({root:{marginRight:F.spacing(1),fill:({severity:D})=>f(D,F)}})),O=({severity:F})=>{const D=T({severity:F});return(0,e.jsx)(i.A,{classes:D})},b=({severity:F})=>{const D=T({severity:F});return(0,e.jsx)(p.A,{classes:D})},B=(0,h.A)(F=>({panel:{backgroundColor:({severity:D})=>y(D,F),color:({severity:D})=>f(D,F),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:D})=>f(D,F),fontWeight:F.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:D})=>f(D,F),backgroundColor:({severity:D})=>y(D,F)},details:{width:"100%",display:"block",color:F.palette.textContrast,backgroundColor:F.palette.background.default,border:`1px solid ${F.palette.border}`,padding:F.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),j=F=>F.charAt(0).toLocaleUpperCase("en-US")+F.slice(1);function N(F){const{severity:D="warning",title:k,titleFormat:G,message:I,children:tt,defaultExpanded:H}=F,V=B({severity:D}),q=j(D)+(k?`: ${k}`:"");return(0,e.jsxs)(c.A,{defaultExpanded:H??!1,className:V.panel,role:"alert",children:[(0,e.jsxs)(s.A,{expandIcon:(0,e.jsx)(b,{severity:D}),className:V.summary,children:[(0,e.jsx)(O,{severity:D}),(0,e.jsx)(g.A,{className:V.summaryText,variant:"subtitle1",children:G==="markdown"?(0,e.jsx)(u.h,{content:q,className:V.markdownContent}):q})]}),(I||tt)&&(0,e.jsx)(o.A,{children:(0,e.jsxs)(d.A,{container:!0,children:[I&&(0,e.jsx)(d.A,{item:!0,xs:12,children:(0,e.jsx)(g.A,{className:V.message,variant:"body1",children:I})}),tt&&(0,e.jsx)(d.A,{item:!0,xs:12,className:V.details,children:tt})]})})]})}},99424:(et,m,t)=>{"use strict";t.d(m,{_:()=>p});var e=t(31085),r=t(58837),h=t(37197),c=t(8109),s=t(5951),o=t(62112),d=t(31994),g=t(12554);const i=(0,r.A)(u=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:u.spacing(2)},divider:{margin:u.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function p(u){const{title:f,error:y,defaultExpanded:T}=u,O=i();if(y.name!=="ResponseError")return(0,e.jsx)(g.b,{title:f??y.message,defaultExpanded:T,error:y});const{body:b,cause:B}=y,{request:j,response:N}=b,F=`${N.statusCode}: ${B.name}`,D=j&&`${j.method} ${j.url}`,k=B.message.replace(/\\n/g,`
`),G=B.stack?.replace(/\\n/g,`
`),I=JSON.stringify(b,void 0,2);return(0,e.jsxs)(g.b,{title:f??y.message,defaultExpanded:T,error:{name:F,message:k,stack:G},children:[D&&(0,e.jsxs)(c.A,{alignItems:"flex-start",children:[(0,e.jsx)(s.A,{classes:{secondary:O.text},primary:"Request",secondary:j?`${D}`:void 0}),(0,e.jsx)(d.l,{text:D})]}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.A,{component:"li",className:O.divider}),(0,e.jsx)(c.A,{alignItems:"flex-start",children:(0,e.jsx)(s.A,{classes:{secondary:O.text},primary:"Full Error as JSON"})}),(0,e.jsx)(o.z,{language:"json",text:I,showCopyCodeButton:!0})]})]})}}}]);})();

//# sourceMappingURL=module-backstage.56da979c.js.map