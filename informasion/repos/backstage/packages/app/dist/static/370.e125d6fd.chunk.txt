"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[370],{15485:(ft,L,t)=>{t.d(L,{A:()=>b});var e=t(39850),y=t(89575),z=t(14041),Z=t(9546),N=t(268),G=t(7031),gt=t(97740),dt=t(11192),vt=function(c){return{root:(0,y.A)({},c.typography.button,{boxSizing:"border-box",borderRadius:c.shape.borderRadius,padding:11,border:"1px solid ".concat((0,N.X4)(c.palette.action.active,.12)),color:(0,N.X4)(c.palette.action.active,.38),"&$selected":{color:c.palette.action.active,backgroundColor:(0,N.X4)(c.palette.action.active,.12),"&:hover":{backgroundColor:(0,N.X4)(c.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:(0,N.X4)(c.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:(0,N.X4)(c.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:c.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:c.typography.pxToRem(15)}}},Et=z.forwardRef(function(c,st){var q=c.children,tt=c.classes,rt=c.className,ut=c.disabled,l=ut===void 0?!1:ut,at=c.disableFocusRipple,nt=at===void 0?!1:at,ot=c.onChange,it=c.onClick,J=c.selected,mt=c.size,ht=mt===void 0?"medium":mt,ct=c.value,w=(0,e.A)(c,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]),yt=function(H){it&&(it(H,ct),H.isDefaultPrevented())||ot&&ot(H,ct)};return z.createElement(gt.A,(0,y.A)({className:(0,Z.default)(tt.root,rt,l&&tt.disabled,J&&tt.selected,ht!=="medium"&&tt["size".concat((0,dt.A)(ht))]),disabled:l,focusRipple:!nt,ref:st,onClick:yt,onChange:ot,value:ct,"aria-pressed":J},w),z.createElement("span",{className:tt.label},q))});const b=(0,G.A)(vt,{name:"MuiToggleButton"})(Et)},41260:(ft,L,t)=>{var e,y=t(4293),z=t(78920);e={value:!0},L.A=void 0;var Z=z(t(14041)),N=y(t(74044)),G=(0,N.default)(Z.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");L.A=G},44148:(ft,L,t)=>{var e,y=t(4293),z=t(78920);e={value:!0},L.A=void 0;var Z=z(t(14041)),N=y(t(74044)),G=(0,N.default)(Z.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");L.A=G},54361:(ft,L,t)=>{t.d(L,{b:()=>y});var e=t(97214);const y=[[e.L8,e.vv],[e.Ey,e.fO],[e.IB,e.ZD],[e.sA,e.jn],[e.Kx,e.Qz],[e.zj,e.u0],[e.nC,e.fT]]},56420:(ft,L,t)=>{t.d(L,{Y:()=>yt});var e=t(31085),y=t(95208),z=t(18139),Z=t(54195),N=t(77125),G=t(64947),gt=t(93453),dt=t(29365),vt=t(46423),Et=t(5951),b=t(26343),R=t(28233),c=t(55197),st=t(58837),q=t(72501),tt=t(5893),rt=t(14041),ut=t(45250),l=t.n(ut),at=t(70209),nt=t(92483),ot=t(75202),it=t(89475),J=t(10265);const mt=(0,st.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),ht=({icon:W})=>{const H=(0,y.n)(),et=W?H.getSystemIcon(W)??nt.NT:nt.NT;return(0,e.jsx)(et,{})},ct=({link:W})=>(0,e.jsx)(ot.N_,{to:W.url,children:W.title??W.url}),w=({item:W})=>(0,e.jsxs)(b.A,{button:!1,children:[(0,e.jsx)(vt.A,{children:(0,e.jsx)(ht,{icon:W.icon})}),(0,e.jsx)(Et.A,{primary:W.title,secondary:W.links?.reduce((H,et,n)=>[...H,n>0&&(0,e.jsx)("br",{},n),(0,e.jsx)(ct,{link:et},et.url)],[])})]});function yt(W){const{t:H}=(0,J.i)(it.O),{title:et,items:n,children:d}=W,{items:m}=(0,at.l)(),[x,h]=(0,rt.useState)(!1),[v,F]=(0,rt.useState)(null),K=mt(),M=(0,z.gf)(Z.U).getOptionalConfig("app.support"),V=(0,tt.A)(i=>i.breakpoints.down("sm")),E=i=>{F(i.currentTarget),h(!0)},r=()=>{h(!1)};return M?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(N.A,{display:"flex",ml:1,children:V?(0,e.jsx)(dt.A,{color:"primary",size:"small",onClick:E,"data-testid":"support-button","aria-label":"Support",children:(0,e.jsx)(nt.NT,{})}):(0,e.jsx)(G.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:E,startIcon:(0,e.jsx)(nt.NT,{}),children:H("supportButton.title")})}),(0,e.jsxs)(c.Ay,{"data-testid":"support-button-popover",open:x,anchorEl:v,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:r,children:[(0,e.jsxs)(R.A,{className:K.popoverList,autoFocusItem:!!v,children:[et&&(0,e.jsx)(b.A,{button:!1,alignItems:"flex-start",className:K.menuItem,children:(0,e.jsx)(q.A,{variant:"subtitle1",children:et})}),rt.Children.map(d,(i,p)=>(0,e.jsx)(b.A,{button:!1,alignItems:"flex-start",className:K.menuItem,children:i},`child-${p}`)),(n??m).map((i,p)=>(0,e.jsx)(w,{item:i},`item-${p}`))]}),(0,e.jsx)(gt.A,{children:(0,e.jsx)(G.A,{color:"primary",onClick:r,"aria-label":"Close",children:H("supportButton.close")})})]})]}):null}},60332:(ft,L,t)=>{t.d(L,{L:()=>et});var e=t(31085),y=t(78560),z=t(80609),Z=t(47090),N=t(18139),G=t(24453),gt=t(78467),dt=t(58837),vt=t(54917),Et=t(53373),b=t.n(Et),R=t(14041),c=t(22249);const st=(0,c.A)(n=>({text:{fill:n.palette.textContrast},secondary:{fill:n.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function q({edge:{relations:n}}){const d=st();return(0,e.jsx)("text",{className:d.text,textAnchor:"middle",children:n.map((m,x)=>(0,e.jsxs)("tspan",{className:b()(x%2!==0&&d.secondary),children:[x>0&&(0,e.jsx)("tspan",{children:" / "}),m]},m))})}var tt=t(46509),rt=t(10437);function ut({icon:n,...d}){const m=n??rt.A;return(0,e.jsx)(m,{...d})}var l=t(55488);const at=(0,dt.A)(n=>({node:{fill:n.palette.grey[300],stroke:n.palette.grey[300],"&.primary":{fill:n.palette.primary.light,stroke:n.palette.primary.light},"&.secondary":{fill:n.palette.secondary.light,stroke:n.palette.secondary.light}},text:{fill:n.palette.getContrastText(n.palette.grey[300]),"&.primary":{fill:n.palette.primary.contrastText},"&.secondary":{fill:n.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function nt({node:{id:n,entity:d,color:m="default",focused:x,onClick:h}}){const v=at(),[F,K]=(0,R.useState)(0),[M,V]=(0,R.useState)(0),E=(0,R.useRef)(null),r=(0,tt.f)(d,{defaultNamespace:l.oQ});(0,R.useLayoutEffect)(()=>{if(E.current){let{height:lt,width:u}=E.current.getBBox();lt=Math.round(lt),u=Math.round(u),(lt!==M||u!==F)&&(K(u),V(lt))}},[F,M]);const i=!!r.Icon,p=10,A=M,I=i?A+p:0,Y=I+F+p*2,U=M+p*2,_=r.primaryTitle??n;return(0,e.jsxs)("g",{onClick:h,className:b()(h&&v.clickable),children:[(0,e.jsx)("rect",{className:b()(v.node,m==="primary"&&"primary",m==="secondary"&&"secondary"),width:Y,height:U,rx:10}),i&&(0,e.jsx)(ut,{icon:r.Icon,y:p,x:p,width:A,height:A,className:b()(v.text,x&&"focused",m==="primary"&&"primary",m==="secondary"&&"secondary")}),(0,e.jsx)("text",{ref:E,className:b()(v.text,x&&"focused",m==="primary"&&"primary",m==="secondary"&&"secondary"),y:U/2,x:I+(F+p*2)/2,textAnchor:"middle",alignmentBaseline:"middle",children:_}),(0,e.jsx)("title",{children:r.entityRef})]})}var ot=t(54361),it=t(60241),J=t(22771),mt=t(30043),ht=t(87290);function ct(){const n=(0,N.gf)(mt.v),d=(0,R.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[m,x]=(0,R.useState)({}),h=(0,R.useCallback)(()=>{const{cachedEntities:E,requestedEntities:r}=d.current,i={};r.forEach(p=>{const A=E.get(p);A&&(i[p]=A)}),x(i)},[d,x]),[v,F]=(0,ht.A)(async()=>{const{requestedEntities:E,cachedEntities:r}=d.current,i=Array.from(E).filter(A=>!r.has(A));if(i.length===0){h();return}const{items:p}=await n.getEntitiesByRefs({entityRefs:i});p.forEach(A=>{if(A){const I=(0,y.U2)(A);r.set(I,A)}}),h()},[d,h]),{loading:K,error:M}=v,V=(0,R.useCallback)(E=>{const r=new Set(E),{requestedEntities:i}=d.current;(r.size!==i.size||Array.from(r).some(p=>!i.has(p)))&&(d.current.requestedEntities=r,F(),h())},[d,F,h]);return{entities:m,loading:K,error:M,requestEntities:V}}var w=t(45250);function yt({rootEntityRefs:n,filter:{maxDepth:d=Number.POSITIVE_INFINITY,relations:m,kinds:x,entityFilter:h}={}}){const{entities:v,loading:F,error:K,requestEntities:M}=ct();return(0,R.useEffect)(()=>{const E=new Set([...n]),r=new Set;let i=[...n],p=0;for(;i.length>0&&(!isFinite(d)||p<d);){const A=i;for(i=[];A.length>0;){const I=A.shift(),Y=v[I];if(r.add(I),Y&&Y.relations){if(h&&!h(Y))continue;for(const U of Y.relations)(!m||m.includes(U.type))&&(!x||x.some(_=>U.targetRef.startsWith(`${_.toLocaleLowerCase("en-US")}:`)))&&(r.has(U.targetRef)||(i.push(U.targetRef),E.add(U.targetRef)))}}++p}M([...E])},[v,n,d,m,x,h,M]),{entities:(0,R.useMemo)(()=>h?(0,w.pickBy)(v,(E,r)=>h(E)):v,[v,h]),loading:F,error:K}}function W({rootEntityRefs:n,maxDepth:d=Number.POSITIVE_INFINITY,unidirectional:m=!0,mergeRelations:x=!0,kinds:h,relations:v,entityFilter:F,onNodeClick:K,relationPairs:M=ot.b}){const[V,E]=(0,R.useState)({}),{entities:r,loading:i,error:p}=yt({rootEntityRefs:n,filter:{maxDepth:d,kinds:h,relations:v,entityFilter:F}});return(0,J.A)(()=>{if(!r||Object.keys(r).length===0){E({});return}const A=Object.entries(r).map(([u,j])=>{const o=n.includes(u),f={id:u,entity:j,focused:o,color:o?"secondary":"primary",kind:j.kind,name:j.metadata.name,namespace:j.metadata.namespace||l.oQ,title:j.metadata.title,spec:j.spec};return K&&(f.onClick=D=>K(f,D)),f}),I=[],Y=new Set,U=[...n],_=(u,j,o)=>I.some(f=>u===f.from&&j===f.to&&f.relations.some(D=>D[0]===o[0]&&D[1]===o[1]));for(;U.length>0;){const u=U.pop(),j=r[u];Y.add(u),j&&j?.relations?.forEach(o=>{if(r[o.targetRef]&&!(v&&!v.includes(o.type))&&!(h&&!h.some(f=>o.targetRef.startsWith(`${f.toLocaleLowerCase("en-US")}:`)))){if(x){const f=M.find(([Wt,Ft])=>Wt===o.type||Ft===o.type)??[o.type],[D]=f,pt=D===o.type?u:o.targetRef,Ct=D===o.type?o.targetRef:u;(!m||!_(pt,Ct,f))&&I.push({from:pt,to:Ct,relations:f,label:"visible"})}else(!m||!_(u,o.targetRef,[o.type]))&&I.push({from:u,to:o.targetRef,relations:[o.type],label:"visible"});if(Y.has(o.targetRef)||(U.push(o.targetRef),Y.add(o.targetRef)),m){const f=I.findIndex(D=>u===D.from&&o.targetRef===D.to&&!D.relations.includes(o.type));if(f>=0)if(x){const D=M.find(([pt,Ct])=>pt===o.type||Ct===o.type)??[o.type];I[f].relations=[...I[f].relations,...D]}else I[f].relations=[...I[f].relations,o.type]}}})}const lt=I.reduce((u,j)=>{const o=u.findIndex(f=>f.from===j.from&&f.to===j.to);return o>=0?(u[o]={...u[o],relations:Array.from(new Set([...u[o].relations,...j.relations]))},u):[...u,j]},[]);E({nodes:A,edges:lt})},100,[r,n,h,v,m,x,K,M]),{loading:i,error:p,...V}}const H=(0,dt.A)(n=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${n.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),et=n=>{const{rootEntityNames:d,maxDepth:m=2,unidirectional:x=!0,mergeRelations:h=!0,kinds:v,relations:F,entityFilter:K,direction:M=it.O.LEFT_RIGHT,onNodeClick:V,relationPairs:E=ot.b,className:r,zoom:i="enabled",renderNode:p,renderLabel:A,curve:I,showArrowHeads:Y}=n,U=(0,vt.A)(),_=H(),lt=(0,R.useMemo)(()=>(Array.isArray(d)?d:[d]).map(pt=>(0,y.U2)(pt)),[d]),u=(0,N.gf)(G.m),{loading:j,error:o,nodes:f,edges:D}=W({rootEntityRefs:lt,maxDepth:m,unidirectional:x,mergeRelations:h,kinds:v,relations:F,entityFilter:K,onNodeClick:V,relationPairs:E});return(0,R.useEffect)(()=>{o&&u.post(o)},[u,o]),(0,e.jsxs)("div",{className:b()(_.container,r),children:[j&&(0,e.jsx)(gt.A,{className:_.progress}),f&&D&&(0,e.jsx)(z.w,{nodes:f,edges:D,renderNode:p||nt,renderLabel:A||q,direction:M,className:_.graph,paddingX:U.spacing(4),paddingY:U.spacing(4),labelPosition:Z.D.LabelPosition.RIGHT,labelOffset:U.spacing(1),zoom:i,curve:I,showArrowHeads:Y})]})}},60370:(ft,L,t)=>{t.r(L),t.d(L,{CatalogGraphPage:()=>Ft});var e=t(31085),y=t(78560),z=t(82326),Z=t(79182),N=t(16454),G=t(17138),gt=t(56420),dt=t(72814),vt=t(52262),Et=t(20987),b=t(53318),R=t(42899),c=t(4321),st=t(72501),q=t(58837),tt=t(65859),rt=t(98984),ut=t(15485),l=t(14041),at=t(18690),nt=t(60332),ot=t(54361),it=t(81252),J=t(77125);const mt={curveMonotoneX:"Monotone X",curveStepBefore:"Step Before"},ht=["curveMonotoneX","curveStepBefore"],ct=({value:a,onChange:g})=>{const C=(0,l.useCallback)(s=>g(s),[g]);return(0,e.jsx)(J.A,{pb:1,pt:1,children:(0,e.jsx)(it.w,{label:"Curve",selected:a,items:ht.map(s=>({label:mt[s],value:s})),onChange:C})})};var w=t(60241);const yt={[w.O.LEFT_RIGHT]:"Left to right",[w.O.RIGHT_LEFT]:"Right to left",[w.O.TOP_BOTTOM]:"Top to bottom",[w.O.BOTTOM_TOP]:"Bottom to top"},W=({value:a,onChange:g})=>{const C=(0,l.useCallback)(s=>g(s),[g]);return(0,e.jsx)(J.A,{pb:1,pt:1,children:(0,e.jsx)(it.w,{label:"Direction",selected:a,items:Object.values(w.O).map(s=>({label:yt[s],value:s})),onChange:C})})};var H=t(95061),et=t(29365),n=t(34839),d=t(35963),m=t(64704);const x=(0,q.A)({formControl:{width:"100%",maxWidth:300}},{name:"PluginCatalogGraphMaxDepthFilter"}),h=({value:a,onChange:g})=>{const C=x(),s=(0,l.useRef)(g),[O,P]=(0,l.useState)(a);(0,l.useEffect)(()=>{s.current=g},[g]),(0,l.useEffect)(()=>{P(a)},[a]);const B=(0,l.useCallback)(X=>{const $=Number(X.target.value),S=Number.isFinite($)&&$>0?$:Number.POSITIVE_INFINITY;P(S),s.current(S)},[]),T=(0,l.useCallback)(()=>{P(Number.POSITIVE_INFINITY),s.current(Number.POSITIVE_INFINITY)},[s]);return(0,e.jsx)(J.A,{pb:1,pt:1,children:(0,e.jsxs)(H.A,{variant:"outlined",className:C.formControl,children:[(0,e.jsx)(st.A,{variant:"button",children:"Max Depth"}),(0,e.jsx)(d.A,{type:"number",placeholder:"\u221E Infinite",value:Number.isFinite(O)?String(O):"",onChange:B,endAdornment:(0,e.jsx)(n.A,{position:"end",children:(0,e.jsx)(et.A,{"aria-label":"clear max depth",onClick:T,edge:"end",children:(0,e.jsx)(m.A,{})})}),inputProps:{"aria-label":"maxp"},labelWidth:0})]})})};var v=t(18139),F=t(34477),K=t(30043),M=t(69076),V=t(86901),E=t(16249),r=t(44148),i=t(41260),p=t(6924),A=t(61783),I=t(73466);const Y=(0,q.A)({formControl:{maxWidth:300}},{name:"PluginCatalogGraphSelectedKindsFilter"}),U=({value:a,onChange:g})=>{const C=Y(),s=(0,v.gf)(F.k),O=(0,v.gf)(K.v),{error:P,value:B}=(0,I.A)(async()=>await O.getEntityFacets({facets:["kind"]}).then(S=>S.facets.kind?.map(k=>k.value).sort()||[]));(0,l.useEffect)(()=>{P&&s.post({message:"Failed to load entity kinds",severity:"error"})},[P,s]);const T=(0,l.useMemo)(()=>B&&B.map(S=>S.toLocaleLowerCase("en-US")),[B]),X=(0,l.useCallback)((S,k)=>{g(T&&T.every(xt=>k.includes(xt))?void 0:k)},[T,g]),$=(0,l.useCallback)(()=>{g(a?.length?a:void 0)},[a,g]);return!B?.length||!T?.length||P?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)(J.A,{pb:1,pt:1,children:[(0,e.jsx)(st.A,{variant:"button",children:"Kinds"}),(0,e.jsx)(A.Ay,{className:C.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Kinds",options:T,value:a??T,getOptionLabel:S=>B[T.indexOf(S)]??S,onChange:X,onBlur:$,renderOption:(S,{selected:k})=>(0,e.jsx)(V.A,{control:(0,e.jsx)(M.A,{icon:(0,e.jsx)(i.A,{fontSize:"small"}),checkedIcon:(0,e.jsx)(r.A,{fontSize:"small"}),checked:k}),label:B[T.indexOf(S)]??S}),size:"small",popupIcon:(0,e.jsx)(p.A,{"data-testid":"selected-kinds-expand"}),renderInput:S=>(0,e.jsx)(E.A,{...S,variant:"outlined"})})]})},_=(0,q.A)({formControl:{maxWidth:300}},{name:"PluginCatalogGraphSelectedRelationsFilter"}),lt=({relationPairs:a,value:g,onChange:C})=>{const s=_(),O=(0,l.useMemo)(()=>a.flat(),[a]),P=(0,l.useCallback)((T,X)=>{C(O.every($=>X.includes($))?void 0:X)},[O,C]),B=(0,l.useCallback)(()=>{C(g?.length?g:void 0)},[g,C]);return(0,e.jsxs)(J.A,{pb:1,pt:1,children:[(0,e.jsx)(st.A,{variant:"button",children:"Relations"}),(0,e.jsx)(A.Ay,{className:s.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Relations",options:O,value:g??O,onChange:P,onBlur:B,renderOption:(T,{selected:X})=>(0,e.jsx)(V.A,{control:(0,e.jsx)(M.A,{icon:(0,e.jsx)(i.A,{fontSize:"small"}),checkedIcon:(0,e.jsx)(r.A,{fontSize:"small"}),checked:X}),label:T}),size:"small",popupIcon:(0,e.jsx)(p.A,{"data-testid":"selected-relations-expand"}),renderInput:T=>(0,e.jsx)(E.A,{...T,variant:"outlined"})})]})};var u=t(73643);const j=(0,q.A)({root:{width:"100%",maxWidth:300}},{name:"PluginCatalogGraphSwitchFilter"}),o=({label:a,value:g,onChange:C})=>{const s=j(),O=(0,l.useCallback)(P=>{C(P.target.checked)},[C]);return(0,e.jsx)(J.A,{pb:1,pt:1,children:(0,e.jsx)(V.A,{control:(0,e.jsx)(u.A,{checked:g,onChange:O,name:a,color:"primary"}),label:a,className:s.root})})};var f=t(45810),D=t.n(f);function pt({initialState:a={}}){const g=(0,at.zy)(),C=(0,at.Zp)(),s=(0,l.useMemo)(()=>D().parse(g.search,{arrayLimit:0,ignoreQueryPrefix:!0})||{},[g.search]),O=(0,l.useMemo)(()=>(Array.isArray(s.rootEntityRefs)?s.rootEntityRefs:a?.rootEntityRefs??[]).map(Q=>(0,y.KU)(Q)),[a?.rootEntityRefs,s.rootEntityRefs]),P=(0,l.useCallback)(Q=>{if(O.length===Q.length&&O.every((Dt,At)=>(0,y.U2)(Dt)===(0,y.U2)(Q[At])))return;const jt=D().stringify({...s,rootEntityRefs:Q.map(Dt=>(0,y.U2)(Dt))},{arrayFormat:"brackets",addQueryPrefix:!0});C(jt)},[O,C,s]),[B,T]=(0,l.useState)(()=>typeof s.maxDepth=="string"?Ct(s.maxDepth):a?.maxDepth??Number.POSITIVE_INFINITY),[X,$]=(0,l.useState)(()=>Array.isArray(s.selectedRelations)?s.selectedRelations:a?.selectedRelations),[S,k]=(0,l.useState)(()=>(Array.isArray(s.selectedKinds)?s.selectedKinds:a?.selectedKinds)?.map(Q=>Q.toLocaleLowerCase("en-US"))),[xt,Tt]=(0,l.useState)(()=>typeof s.unidirectional=="string"?s.unidirectional==="true":a?.unidirectional??!0),[It,Lt]=(0,l.useState)(()=>typeof s.mergeRelations=="string"?s.mergeRelations==="true":a?.mergeRelations??!0),[Ot,Nt]=(0,l.useState)(()=>typeof s.direction=="string"?s.direction:a?.direction??w.O.LEFT_RIGHT),[Pt,Bt]=(0,l.useState)(()=>typeof s.curve=="string"?s.curve:a?.curve??"curveMonotoneX"),[St,Mt]=(0,l.useState)(()=>typeof s.showFilters=="string"?s.showFilters==="true":a?.showFilters??!0),Ut=(0,l.useCallback)(()=>Mt(Q=>!Q),[Mt]);return(0,l.useEffect)(()=>{const Q=D().stringify({rootEntityRefs:O.map(y.U2),maxDepth:isFinite(B)?B:"\u221E",selectedKinds:S,selectedRelations:X,unidirectional:xt,mergeRelations:It,direction:Ot,showFilters:St,curve:Pt},{arrayFormat:"brackets",addQueryPrefix:!0});C(Q,{replace:!0})},[B,Pt,S,X,xt,It,Ot,St,O,C]),{rootEntityNames:O,setRootEntityNames:P,maxDepth:B,setMaxDepth:T,selectedRelations:X,setSelectedRelations:$,selectedKinds:S,setSelectedKinds:k,unidirectional:xt,setUnidirectional:Tt,mergeRelations:It,setMergeRelations:Lt,direction:Ot,setDirection:Nt,curve:Pt,setCurve:Bt,showFilters:St,toggleShowFilters:Ut}}function Ct(a){return a==="\u221E"?Number.POSITIVE_INFINITY:Number(a)}const Wt=(0,q.A)(a=>({content:{minHeight:0},container:{height:"100%",maxHeight:"100%",minHeight:0},fullHeight:{maxHeight:"100%",display:"flex",minHeight:0},graphWrapper:{position:"relative",flex:1,minHeight:0,display:"flex"},graph:{flex:1,minHeight:0},legend:{position:"absolute",bottom:0,right:0,padding:a.spacing(1),"& .icon":{verticalAlign:"bottom"}},filters:{display:"grid",gridGap:a.spacing(1),gridAutoRows:"auto",[a.breakpoints.up("lg")]:{display:"block"},[a.breakpoints.only("md")]:{gridTemplateColumns:"repeat(3, 1fr)"},[a.breakpoints.only("sm")]:{gridTemplateColumns:"repeat(2, 1fr)"},[a.breakpoints.down("xs")]:{gridTemplateColumns:"repeat(1, 1fr)"}}}),{name:"PluginCatalogGraphCatalogGraphPage"}),Ft=a=>{const{relationPairs:g=ot.b,initialState:C,entityFilter:s}=a,O=(0,at.Zp)(),P=Wt(),B=(0,dt.S)(Et.s),{maxDepth:T,setMaxDepth:X,selectedKinds:$,setSelectedKinds:S,selectedRelations:k,setSelectedRelations:xt,unidirectional:Tt,setUnidirectional:It,mergeRelations:Lt,setMergeRelations:Ot,direction:Nt,setDirection:Pt,curve:Bt,setCurve:St,rootEntityNames:Mt,setRootEntityNames:Ut,showFilters:Q,toggleShowFilters:Kt}=pt({initialState:C}),jt=(0,vt.s)(),Dt=(0,l.useCallback)((At,zt)=>{const Rt=(0,y.KU)(At.id);if(zt.shiftKey){const bt=B({kind:Rt.kind.toLocaleLowerCase("en-US"),namespace:Rt.namespace.toLocaleLowerCase("en-US"),name:Rt.name});jt.captureEvent("click",At.entity.metadata.title??(0,b.S)(Rt),{attributes:{to:bt}}),O(bt)}else jt.captureEvent("click",At.entity.metadata.title??(0,b.S)(Rt)),Ut([Rt])},[B,O,Ut,jt]);return(0,e.jsxs)(z.Y,{themeId:"home",children:[(0,e.jsx)(Z.Y,{title:"Catalog Graph",subtitle:Mt.map(At=>(0,b.S)(At)).join(", ")}),(0,e.jsxs)(N.U,{stretch:!0,className:P.content,children:[(0,e.jsx)(G.d,{titleComponent:(0,e.jsxs)(ut.A,{value:"show filters",selected:Q,onChange:()=>Kt(),children:[(0,e.jsx)(tt.A,{})," Filters"]}),children:(0,e.jsx)(gt.Y,{children:"Start tracking your component in by adding it to the software catalog."})}),(0,e.jsxs)(R.A,{container:!0,alignItems:"stretch",className:P.container,children:[Q&&(0,e.jsxs)(R.A,{item:!0,xs:12,lg:2,className:P.filters,children:[(0,e.jsx)(h,{value:T,onChange:X}),(0,e.jsx)(U,{value:$,onChange:S}),(0,e.jsx)(lt,{value:k,onChange:xt,relationPairs:g}),(0,e.jsx)(W,{value:Nt,onChange:Pt}),(0,e.jsx)(ct,{value:Bt,onChange:St}),(0,e.jsx)(o,{value:Tt,onChange:It,label:"Simplified"}),(0,e.jsx)(o,{value:Lt,onChange:Ot,label:"Merge Relations"})]}),(0,e.jsx)(R.A,{item:!0,xs:!0,className:P.fullHeight,children:(0,e.jsxs)(c.A,{className:P.graphWrapper,children:[(0,e.jsxs)(st.A,{variant:"caption",color:"textSecondary",display:"block",className:P.legend,children:[(0,e.jsx)(rt.A,{className:"icon"})," Use pinch & zoom to move around the diagram. Click to change active node, shift click to navigate to entity."]}),(0,e.jsx)(nt.L,{...a,rootEntityNames:Mt,maxDepth:T,kinds:$&&$.length>0?$:void 0,relations:k&&k.length>0?k:void 0,mergeRelations:Lt,unidirectional:Tt,onNodeClick:Dt,direction:Nt,relationPairs:g,entityFilter:s,className:P.graph,zoom:"enabled",curve:Bt})]})})]})]})]})}},98984:(ft,L,t)=>{var e,y=t(4293),z=t(78920);e={value:!0},L.A=void 0;var Z=z(t(14041)),N=y(t(74044)),G=(0,N.default)(Z.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"}),"ZoomOutMap");L.A=G}}]);})();

//# sourceMappingURL=370.e125d6fd.chunk.js.map